# Table of Contents
1. [Get Started with the Marketing API](#get-started-with-the-marketing-api)
    1. [Ad Account Requirements](#ad-account-requirements)
        1. [Finding Your Ad Account Number](#finding-your-ad-account-number)
    2. [Meta Developer Account](#meta-developer-account)
    3. [Create an App](#create-an-app)
    4. [Authorization and Authentication](#authorization-and-authentication)
    5. [Next Steps](#next-steps)
2. [Authorization](#authorization)
    1. [App Roles](#app-roles)
    2. [Access Levels, Permissions, and Features](#access-levels-permissions-and-features)
        1. [Marketing API Access Levels vs. Ads Management Standard Access](#marketing-api-access-levels-vs-ads-management-standard-access)
        2. [Marketing API Access vs Ads Management Standard Access Mapping](#marketing-api-access-vs-ads-management-standard-access-mapping)
    3. [Permissions and Features](#permissions-and-features)
        1. [Permissions](#permissions)
        2. [Features](#features)
        3. [Feature access levels](#feature-access-levels)
        4. [Access level significance](#access-level-significance)
        5. [Get Advanced Access](#get-advanced-access)
        6. [Example Use Cases](#example-use-cases)
    4. [Business Verification](#business-verification)
    5. [Learn More](#learn-more)
3. [Graph API Explorer](#graph-api-explorer)
    1. [Debug](#debug)
    2. [Extend your access token](#extend-your-access-token)
    3. [System User Access Tokens](#system-user-access-tokens)
4. [Get an Access Token for Ad Accounts you Manage](#get-an-access-token-for-ad-accounts-you-manage)
5. [Storing the Token](#storing-the-token)
6. [Best Practices for Secure Credential Management](#best-practices-for-secure-credential-management)
7. [Basic Ad Creation](#basic-ad-creation)
    1. [Ad Creation Endpoints](#ad-creation-endpoints)
        1. [The campaigns endpoint](#the-campaigns-endpoint)
        2. [The adsets endpoint](#the-adsets-endpoint)
        3. [The ads endpoint](#the-ads-endpoint)
8. [Create an Ad Campaign](#create-an-ad-campaign)
    1. [Required Parameters](#required-parameters)
9. [Create an Ad Set](#create-an-ad-set)
    1. [Required Parameters](#required-parameters-1)
10. [Create an Ad Creative](#create-an-ad-creative)
    1. [Required Parameters](#required-parameters-2)
11. [Create an Ad](#create-an-ad)
    1. [Required Parameters](#required-parameters-3)
12. [Ad Campaign Management](#ad-campaign-management)
    1. [Modify an Ad Campaign](#modify-an-ad-campaign)
    2. [Pause an Ad Campaign](#pause-an-ad-campaign)
    3. [Archive an Ad Campaign](#archive-an-ad-campaign)
    4. [Delete an Ad Campaign](#delete-an-ad-campaign)
13. [Ad Optimization Basics](#ad-optimization-basics)
    1. [Ad Optimization Endpoints](#ad-optimization-endpoints)
        1. [The customaudiences endpoint](#the-customaudiences-endpoint)
        2. [The insights endpoint](#the-insights-endpoint)
14. [Monitoring and Analytics](#monitoring-and-analytics)
    1. [Querying Analytics Data](#querying-analytics-data)
    2. [Interpreting Results](#interpreting-results)
    3. [Using Insights for Ongoing Optimization](#using-insights-for-ongoing-optimization)
15. [Optimization Tips](#optimization-tips)
    1. [Audience Targeting](#audience-targeting)
        1. [Utilize Custom Audiences](#utilize-custom-audiences)
        2. [Segment Your Audience](#segment-your-audience)
        3. [Lookalike Audiences](#lookalike-audiences)
    2. [Budget Allocation](#budget-allocation)
        1. [Set Clear Objectives](#set-clear-objectives)
        2. [Monitor Performance](#monitor-performance)
        3. [Daily Budget Management](#daily-budget-management)
    3. [Ad Creatives](#ad-creatives)
        1. [High-Quality Visuals](#high-quality-visuals)
        2. [A/B Testing](#ab-testing)
        3. [Dynamic Creatives](#dynamic-creatives)
    4. [Real-Time Data for Optimization](#real-time-data-for-optimization)
        1. [Leverage the Insights API](#ліverage-the-insights-api)
        2. [Adjust Targeting on the Fly](#adjust-targeting-on-the-fly)
        3. [Regular Reporting](#regular-reporting)
17. [Conversions API](#conversions-api)
18. [Ad Creative](#ad-creative)
    1. [Creative](#creative)
    2. [Limits](#limits)
    3. [Read](#read)
19. [Placements](#placements)
20. [Preview an Ad](#preview-an-ad)
21. [Video and Carousel Ads](#video-and-carousel-ads)
    1. [Limitations](#limitations-1)
    2. [Video Ads](#video-ads)
        1. [Step 1: Provide ad creatives](#step-1-provide-ad-creatives)
        2. [Step 2: Create ad campaign](#step-2-create-ad-campaign)
        3. [Step 3: Create an ad set](#step-3-create-an-ad-set)
        4. [Step 4: Create an ad](#step-4-create-an-ad)
        5. [Example Brand Awareness](#example-brand-awareness)
        6. [Example Reach and Frequency](#example-reach-and-frequency)
        7. [Video for Direct Response](#video-for-direct-response)
    3. [Remarketing](#remarketing)
    4. [Call to Action](#call-to-action)
    5. [Video Metrics](#video-metrics)
        1. [Video Post Insights, Organic](#video-post-insights-organic)
        2. [Video Ad Insights, Paid](#video-ad-insights-paid)
        3. [Video Type](#video-type)
    6. [Carousel Ads](#carousel-ads)
        1. [Create Inline](#create-inline)
        2. [Create Post, then Ad](#create-post-then-ad)
        3. [Create Video Carousel Ad](#create-video-carousel-ad)
        4. [Create Mobile App Ad](#create-mobile-app-ad)
    7. [Field Specification](#field-specification)
    8. [Per-Product Ad Statistics](#per-product-ad-statistics)
    9. [Placements](#placements-1)
22. [Publishing](#publishing)
    1. [Requirements](#requirements)
    2. [Publish a video](#publish-a-video)
    3. [Upload a video file](#upload-a-video-file)
        1. [Before you start](#before-you-start)
        2. [Step 1: Start an upload session](#step-1-start-an-upload-session)
        3. [Step 2: Start the upload](#step-2-start-the-upload)
        4. [Resume an interrupted upload](#resume-an-interrupted-upload)
        5. [Next Steps](#next-steps-1)
23. [Publishing](#publishing-1)
    1. [Requirements](#requirements-1)
    2. [Publish a video](#publish-a-video-1)
    3. [Upload a video file](#upload-a-video-file-1)
        1. [Before you start](#before-you-start-1)
        2. [Step 1: Start an upload session](#step-1-start-an-upload-session-1)
        3. [Step 2: Start the upload](#step-2-start-the-upload-1)
        4. [Resume an interrupted upload](#resume-an-interrupted-upload-1)
24. [Get Facebook Videos using the Facebook Video API](#get-facebook-videos-using-the-facebook-video-api)
    1. [Get Page Videos](#get-page-videos)
        1. [Before You Start](#before-you-start)
    2. [Get User Videos](#get-user-videos)
        1. [Before You Start](#before-you-start-1)
        2. [Limitations](#limitations-2)
25. [FB Video Ads](#fb-video-ads)
    1. [Prerequisites](#prerequisites)
    2. [Best Practices](#best-practices)
    3. [Upload Video Ads](#upload-video-ads)
        1. [Video Specifications](#video-specifications)
        2. [Step 1: Initialize Upload Session](#step-1-initialize-upload-session)
        3. [Step 2: Upload Video](#step-2-upload-video)
        4. [Step 3: Retrieve Upload Session Status (Optional)](#step-3-retrieve-upload-session-status-optional)
        5. [Step 4: Publish Video to Ad Account](#step-4-publish-video-to-ad-account)
    4. [Get Video Ads](#get-video-ads)
        1. [Filters (Optional)](#filters-optional)
26. [Collection Ads](#collection-ads)
    1. [Supported Objectives and Placements](#supported-objectives-and-placements)
    2. [Standard Collection Ads Creatives](#standard-collection-ads-creatives)
        1. [Create an Image-Based Ad Creative](#create-an-image-based-ad-creative)
        2. [Create a Video-Based Ad Creative](#create-a-video-based-ad-creative)
        3. [Parameters](#parameters)
    3. [Product Sets](#product-sets)
        1. [Step 1: Create the Instant Experience image](#step-1-create-the-instant-experience-image)
        2. [Step 2: Create the Instant Experience product set](#step-2-create-the-instant-experience-product-set)
        3. [Step 3: Create the Instant Experience footer](#step-3-create-the-instant-experience-footer)
        4. [Step 4: Create the complete Instant Experience](#step-4-create-the-complete-instant-experience)
        5. [Step 5: Create the collection ad with the Instant Experience](#step-5-create-the-collection-ad-with-the-instant-experience)
    4. [Collection Ads Dialog](#collection-ads-dialog)
        1. [Settings](#settings)
        2. [Example response](#example-response)
    5. [Including Destination Catalogs](#including-destination-catalogs)
    6. [Create Engagement Audiences](#create-engagement-audiences)
27. [Instagram Ads API](#instagram-ads-api)
    1. [Documentation Contents](#documentation-contents)
    2. [Get Started](#get-started-1)
        1. [Step 1: Get Instagram Account ID](#step-1-get-instagram-account-id)
        2. [Step 2: Create Ad Campaign](#step-2-create-ad-campaign)
        3. [Step 3: Create Ad Set](#step-3-create-ad-set)
        4. [Step 4: Provide Ad Creative](#step-4-provide-ad-creative)
        5. [Step 5: Schedule Delivery](#step-5-schedule-delivery)
28. [Threads Ads](#threads-ads)
    1. [Permissions](#permissions-1)
    2. [Limitations](#limitations-3)
    3. [Instagram-connected Threads accounts](#instagram-connected-threads-accounts)
        1. [Before you begin](#before-you-begin)
        2. [Get the Threads account ID](#get-the-threads-account-id)
    4. [Instagram-backed Threads accounts](#instagram-backed-threads-accounts)
        1. [Create an Instagram-backed Threads account](#create-an-instagram-backed-threads-account)
        2. [Get the Threads account ID](#get-the-threads-account-id-1)
    5. [Ad Creatives with Threads Accounts](#ad-creatives-with-threads-accounts)
        1. [Using Instagram-connected Threads accounts in ads](#using-instagram-connected-threads-accounts-in-ads)
        2. [Using Instagram-backed Threads accounts in ads](#using-instagram-backed-threads-accounts-in-ads)
        3. [Examples](#examples)
    6. [Threads Ads Creation](#threads-ads-creation)
        1. [Limitations](#limitations-4)
        2. [Step 1: Get a Threads account ID](#step-1-get-a-threads-account-id)
        3. [Step 2: Create an ad campaign](#step-2-create-an-ad-campaign)
        4. [Step 3: Create an ad set](#step-3-create-an-ad-set)
        5. [Step 4: Provide an ad creative](#step-4-provide-an-ad-creative)
        6. [Step 5: Schedule ad delivery](#step-5-schedule-ad-delivery)
    7. [Threads Carousel Ads](#threads-carousel-ads)
        1. [Image Cards](#image-cards)
        2. [Create an Threads Image Carousel Ad Creative](#create-an-threads-image-carousel-ad-creative)
29. [Partnership Ads API](#partnership-ads-api)
    1. [Post-Level Permissioning](#post-level-permissioning)
        1. [Permissions](#permissions-2)
        2. [How it Works](#how-it-works)
        3. [Approve Creators](#approve-creators)
        4. [Allow Brand Partner to Boost](#allow-brand-partner-to-boost)
    2. [Account-Level Permissioning](#account-level-permissioning)
        1. [Send Partnership Ad Permission Request to Creator](#send-partnership-ad-permission-request-to-creator)
        2. [View Partnership Ad Permission for a Brand](#view-partnership-ad-permission-for-a-brand)
        3. [Revoking a Permission](#revoking-a-permission)
    3. [Partnership Ads Creation](#partnership-ads-creation)
        1. [Before You Start](#before-you-start-2)
        2. [Requirements](#requirements-2)
        3. [Create Partnership Ads by Boosting an Existing Post](#create-partnership-ads-by-boosting-an-existing-post)
        4. [Create an Ad Creative](#create-an-ad-creative-1)
        5. [Create an Ad](#create-an-ad-1)
        6. [Troubleshooting](#troubleshooting)
    4. [Create Partnership Ads by Uploading a New Creative](#create-partnership-ads-by-uploading-a-new-creative)
        1. [Before You Start](#before-you-start-3)
        2. [Upload a New Creative](#upload-a-new-creative)
        3. [Fetch the Creator's ID](#fetch-the-creator's-id)
        4. [Creating an Ad with the Advertiser as the Primary Identity](#creating-an-ad-with-the-advertiser-as-the-primary-identity)
        5. [Creating an Ad with the Creator as the Primary Identity](#creating-an-ad-with-the-creator-as-the-primary-identity)
        6. [Create an Ad](#create-an-ad-2)
    5. [Supported Partnership Ads Configurations](#supported-partnership-ads-configurations)
        1. [Partnership Ads with Placement Asset Customization](#partnership-ads-with-placement-asset-customization)
        2. [Partnership Ads with Advantage+ Creative](#partnership-ads-with-advantage-creative)
        3. [Partnership Ads with Advantage+ Catalog Ads](#partnership-ads-with-advantage-catalog-ads)
30. [Advantage+ Campaign Experience for Sales, App, and Leads](#advantage-campaign-experience-for-sales-app-and-leads)
    1. [Create an Advantage+ Campaign](#create-an-advantage-campaign)
        1. [Step 1: Choose an objective for the ad campaign](#step-1-choose-an-objective-for-the-ad-campaign)
        2. [Step 2: Set the required Advantage+ criteria](#step-2-set-the-required-advantage-criteria)
        3. [Step 3: Verify the advantage_state_info opt-in](#step-3-verify-the-advantage_state_info-opt-in)
        4. [DISABLED state](#disabled-state)
    2. [Replicate Advantage+ Shopping Campaign Performance with Advantage+ Campaigns](#replicate-advantage-shopping-campaign-performance-with-advantage-campaigns)
    3. [Replicate existing_customer_budget_percentage behavior](#replicate-existing_customer_budget_percentage-behavior)
    4. [Creating ads with an Advantage+ state follows the same process as in manual sales campaigns.](#creating-ads-with-an-advantage-state-follows-the-same-process-as-in-manual-sales-campaigns)
    5. [Migrate Advatage+ Shopping Campaigns and Advantage+ App Campaigns into Advantage+ Campaigns](#migrate-advatage-shopping-campaigns-and-advantage-app-campaigns-into-advantage-campaigns)
    6. [FAQ](#faq)
31. [Advantage+ Shopping Campaigns](#advantage-shopping-campaigns)
    1. [Manual Campaign Setup Compared to Advantage+ Shopping Campaigns](#manual-campaign-setup-compared-to-advantage-shopping-campaigns)
    2. [Step 1: Define Your Existing Customers (Optional)](#step-1-define-your-existing-customers-optional)
    3. [Step 2: Create Campaign](#step-2-create-campaign-1)
    4. [Step 3: Verify Campaign Creation](#step-3-verify-campaign-creation)
    5. [Step 4: Create Ad Set](#step-4-create-ad-set)
    6. [Step 5: Provide Creative and Create Ads](#step-5-provide-creative-and-create-ads)
    7. [Step 6: Ad Account Controls (Optional)](#step-6-ad-account-controls-optional)
32. [Cross-Channel Conversion Optimization for Advantage+ Shopping Campaigns](#cross-channel-conversion-optimization-for-advantage-shopping-campaigns)
    1. [Ad Set](#ad-set)
    2. [Ad](#ad)
    3. [Audience Type URL Parameters](#audience-type-url-parameters)
33. [Shops Ads with Advantage+ Shopping Campaigns](#shops-ads-with-advantage-shopping-campaigns)
    1. [Commerce Eligibility for Shops Ads](#commerce-eligibility-for-shops-ads)
    2. [Get Commerce IDs for Creating Shops Ads](#get-commerce-ids-for-creating-shops-ads)
34. [Creating Branded Content](#creating-branded-content)
    1. [Overview](#overview)
    2. [Create a Status Update](#create-a-status-update)
    3. [Adding Photos](#adding-photos)
    4. [Posting a Video](#posting-a-video)
    5. [Live Video](#live-video)
    6. [Updating Branded Content](#updating-branded-content)
35. [Asset Feed Spec](#asset-feed-spec)
    1. [Create Asset Feed](#create-asset-feed)
    2. [Read Asset Feed](#read-asset-feed)
    3. [Edit Asset Feed](#edit-asset-feed)
    4. [Asset Feed Spec Options](#asset-feed-spec-options)
    5. [Asset Feed Spec Restrictions](#asset-feed-spec-restrictions)
    6. [Use Deep Links](#use-deep-links)
    7. [Website to WhatsApp Ads](#website-to-whatsapp-ads)
36. [Dynamic Creative](#dynamic-creative)
    1. [Get Started](#get-started-2)
    2. [Step 1: Create Campaign and Ad Set](#step-1-create-campaign-and-ad-set)
    3. [Step 2: Provide Ad Creative with asset_feed_spec](#step-2-provide-ad-creative-with-asset_feed_spec)
    4. [Step 3: Create Your Ad](#step-3-create-your-ad)
    5. [Optional Step 4: Check Review Status](#optional-step-4-check-review-status)
37. [Asset Customization Rules](#asset-customization-rules)
    1. [Get Started](#get-started-3)
    2. [Step 1: Create Campaign and Ad Set](#step-1-create-campaign-and-ad-set-1)
    3. [Step 2: Provide the ad creative](#step-2-provide-the-ad-creative)
    4. [Step 3: Create your ad](#step-3-create-your-ad)
38. [Placement Asset Customization](#placement-asset-customization)
    1. [Get Started](#get-started-4)
    2. [Step 2: Provide Creative](#step-2-provide-creative)
    3. [Optional Step 5: Read Ad Creative](#optional-step-5-read-ad-creative)
39. [Multi-Language Ads](#multi-language-ads)
    1. [Get Started](#get-started-5)
    2. [Step 2: Provide creative via asset_feed_spec](#step-2-provide-creative-via-asset_feed_spec)
    3. [Step 3: Create Ads using Asset Feed Specs](#step-3-create-ads-using-asset-feed-specs)
    4. [Optional Step 4: Preview Your Ad](#optional-step-4-preview-your-ad)
    5. [Automatic Translations](#automatic-translations)
    6. [Restrictions](#restrictions)
    7. [Insights](#insights)
40. [Advantage+ Catalog Ads](#advantage-catalog-ads)
    1. [Get Started with Advantage+ Catalog Ads](#get-started-with-advantage-catalog-ads)
    2. [Step 1: Create an Ad Campaign](#step-1-create-an-ad-campaign)
    3. [Step 2: Create an Ad Set](#step-2-create-an-ad-set-1)
    4. [Step 3: Provide an Ad Creative](#step-3-provide-an-ad-creative-1)
    5. [Step 4: Create an Ad](#step-4-create-an-ad-3)
    6. [Next Steps](#next-steps-2)
    7. [Dynamic Media](#dynamic-media)
    8. [Managing Multiple Aspect Ratio Images in Advantage+ Catalog Ads](#managing-multiple-aspect-ratio-images-in-advantage-catalog-ads)
41. [Get Started with Advantage+ Creative](#get-started-with-advantage-creative)
    1. [Before You Begin](#before-you-begin-1)
    2. [Step 1: Create an ad or ad creative opted-in to Advantage+ Creative features](#step-1-create-an-ad-or-ad-creative-opted-in-to-advantage-creative-features)
    3. [Step 2: Preview for Advantage+ Creative](#step-2-preview-for-advantage-creative)
    4. [Step 3: Set the ad status to ACTIVE](#step-3-set-the-ad-status-to-active)
    5. [Learn More](#learn-more-1)
42. [Add Site Links Feature](#add-site-links-feature)
    1. [Eligibility Criteria](#eligibility-criteria)
    2. [Before You Begin](#before-you-begin-2)
    3. [Create an Ad Creative and Ad](#create-an-ad-creative-and-ad)
    4. [Learn More](#learn-more-2)
43. [Product Extensions for Advantage+ Creative](#product-extensions-for-advantage-creative)
    1. [API Support for Product Extensions](#api-support-for-product-extensions)
    2. [Eligibility Criteria](#eligibility-criteria-1)
    3. [Before You Begin](#before-you-begin-3)
    4. [Standalone Creative Creation](#standalone-creative-creation)
    5. [Ad Creation](#ad-creation-1)
44. [Standard Enhancements for Advantage+ Creative](#standard-enhancements-for-advantage-creative)
    1. [API Support for Standard Enhancements](#api-support-for-standard-enhancements)
45. [Standard Enhancements Preview](#standard-enhancements-preview)
    1. [Existing Functionality](#existing-functionality)
    2. [Updated Functionality](#updated-functionality)
46. [Get Started with the Generative AI Features on Marketing API](#get-started-with-the-generative-ai-features-on-marketing-api)
    1. [Before You Begin](#before-you-begin-4)
    2. [Text Generation](#text-generation)
    3. [Image Expansion](#image-expansion)
    4. [Background Generation](#background-generation)
    5. [About AI transparency](#about-ai-transparency)
47. [Collaborative Ads](#collaborative-ads-1)
    1. [High-Level Steps](#high-level-steps)
    2. [Steps For Retailers and Marketing Partners](#steps-for-retailers-and-marketing-partners)
    3. [Steps For Brands](#steps-for-brands)
    4. [Insights](#insights-1)
48. [Managed Partner Ads](#managed-partner-ads)
    1. [Benefits](#benefits)
    2. [Terminology](#terminology)
    3. [Get Started](#get-started-6)
49. [Managed Partner Ads: Integration](#managed-partner-ads-integration)
    1. [Overview](#overview-1)
    2. [Step 1: Preparation](#step-1-preparation)
    3. [Step 2: Integration](#step-2-integration)
    4. [Step 3: Launch](#step-3-launch)
50. [Managed Partner Ads API Guide](#managed-partner-ads-api-guide)
    1. [Prerequisites](#prerequisites-1)
    2. [Seller Management](#seller-management)
    3. [Partner Ads Management](#partner-ads-management)
    4. [Async API User Guide](#async-api-user-guide)
    5. [Error Handling](#error-handling)
51. [Multi-advertiser Ads](#multi-advertiser-ads)
    1. [API support for multi-advertiser ads](#api-support-for-multi-advertiser-ads)
    2. [Ad creation](#ad-creation-2)
    3. [Learn More](#learn-more-3)
52. [Reels Ads](#reels-ads)
    1. [Prerequisites](#prerequisites-2)
    2. [Sandbox Testing](#sandbox-testing)
    3. [Step 1: Access Asset](#step-1-access-asset)
    4. [Step 2: Fetch Ad Account](#step-2-fetch-ad-account)
    5. [Step 3: Create Campaign](#step-3-create-campaign)
    6. [Step 4: Target Definition](#step-4-target-definition)
    7. [Step 5: Create Ad Set](#step-5-create-ad-set)
    8. [Step 6: Select Creative](#step-6-select-creative)
    9. [Step 7: Preview Ad](#step-7-preview-ad)
    10. [Step 8: Schedule Ad Delivery](#step-8-schedule-ad-delivery)
    11. [Step 9: Review Performance](#step-9-review-performance)
    12. [Important Considerations](#important-considerations)
    13. [Creative Essentials](#creative-essentials)
    14. [Dynamic Media with Catalog Product Video](#dynamic-media-with-catalog-product-video)
53. [Get Started with the Flexible Ad Format](#get-started-with-the-flexible-ad-format)
    1. [Before You Start](#before-you-start-4)
    2. [Create an Ad using the Flexible Ad Format](#create-an-ad-using-the-flexible-ad-format)
    3. [Read the Flexible Ad Format](#read-the-flexible-ad-format)
54. [Get Started with Format Automation](#get-started-with-format-automation)
    1. [Before You Start](#before-you-start-5)
    2. [Create an Advantage+ Catalog Ad using Format Transformation](#create-an-advantage-catalog-ad-using-format-transformation)
    3. [Retrieve the Format Transformation](#retrieve-the-format-transformation)
    4. [See Also](#see-also)
55. [Insights API](#insights-api)
    1. [Before you begin](#before-you-begin-5)
    2. [Campaign Statistics](#campaign-statistics)
    3. [Making Calls](#making-calls)
    4. [Levels](#levels)
    5. [Attribution windows](#attribution-windows)
    6. [Field Expansion](#field-expansion)
    7. [Sorting](#sorting)
    8. [Ads Labels](#ads-labels)
    9. [Clicks definition](#clicks-definition)
    10. [Deleted and Archived Objects](#deleted-and-archived-objects)
    11. [Troubleshooting](#troubleshooting-1)
    12. [Learn More](#learn-more-4)
56. [Insights API Breakdowns](#insights-api-breakdowns)
    1. [Limitations](#limitations-5)
    2. [Generic Breakdowns](#generic-breakdowns)
    3. [Hourly Breakdowns](#hourly-breakdowns)
    4. [Action Breakdown](#action-breakdown)
    5. [Combining Breakdowns](#combining-breakdowns)
57. [Limits and Best Practices](#limits-and-best-practices)
    1. [Data Per Call Limits](#data-per-call-limits)
    2. [Insights Call Load Limits](#insights-call-load-limits)
    3. [Global Rate Limits](#global-rate-limits)
    4. [Rate Limits Best Practices](#rate-limits-best-practices)
    5. [Insights API Asynchronous Jobs](#insights-api-asynchronous-jobs)
    6. [Export Reports](#export-reports)
58. [Tracking and Conversion Specs](#tracking-and-conversion-specs)
    1. [Set Tracking Specs](#set-tracking-specs)
    2. [Default Tracking Specs](#default-tracking-specs)
    3. [Meta Specs](#meta-specs)
    4. [Custom Tracking Specs](#custom-tracking-specs)
    5. [Examples](#examples-1)
    6. [Using Conversion Specs](#using-conversion-specs)
59. [Marketing Mix Modeling Breakdown on Insights API](#marketing-mix-modeling-breakdown-on-insights-api)
    1. [Permissions](#permissions-3)
    2. [Async Export Queries (Preferred)](#async-export-queries-preferred)
    3. [Retrieve the Marketing Mix Modeling Data](#retrieve-the-marketing-mix-modeling-data)
    4. [Querying at the Business Manager Level](#querying-at-the-business-manager-level)
    5. [Limits and Best Practices](#limits-and-best-practices-1)
60. [Split Testing](#split-testing)
    1. [Guidelines](#guidelines)
    2. [Test Restrictions](#test-restrictions)
    3. [Variable Testing](#variable-testing)
    4. [Testing Strategies](#testing-strategies)
    5. [Evaluating Tests](#evaluating-tests)
    6. [Budgeting](#budgeting)
61. [Ad Volume](#ad-volume-1)
    1. [View Ad Volume for Your Ad Account](#view-ad-volume-for-your-ad-account)
    2. [View Running or In Review Status](#view-running-or-in-review-status)
    3. [Breakdown by Actors](#breakdown-by-actors)
    4. [Supported Fields](#supported-fields)
    5. [Parameters](#parameters)
    6. [Best Practices](#best-practices-1)
62. [User Information](#user-information)
63. [Suggested Bids](#suggested-bids)
64. [Batch Requests](#batch-requests-1)
65. [Check Data Changes using ETags](#check-data-changes-using-etags)
66. [Object Archive and Delete Status](#object-archive-and-delete-status)
67. [Viewing Errors](#viewing-errors)
68. [Facebook Marketing Developer Community Group](#facebook-marketing-developer-community-group)
69. [Testing](#testing)
70. [Paginated Results](#paginated-results)
    1. [Traversing Paged Results](#traversing-paged-results)
    2. [Cursor-based Pagination](#cursor-based-pagination)
    3. [Time-based Pagination](#time-based-pagination)
    4. [Offset-based Pagination](#offset-based-pagination)
    5. [Next Steps](#next-steps-3)
71. [Rate Limits](#rate-limits)
    1. [Platform Rate Limits](#platform-rate-limits)
    2. [Business Use Case Rate Limits](#business-use-case-rate-limits)
    3. [FAQ](#faq-1)
72. [Platform Versioning](#platform-versioning)
    1. [Versioning](#versioning)
    2. [Making Versioned Requests](#making-versioned-requests)
    3. [Making Versioned Requests from SDKs](#making-versioned-requests-from-sdks)
73. [Batch Requests](#batch-requests-2)
    1. [Limitations](#limitations-6)
    2. [Batch Request](#batch-request)
    3. [Complex Batch Requests](#complex-batch-requests)
    4. [Errors](#errors)
    5. [Timeouts](#timeouts)
    6. [Batch calls with JSONP](#batch-calls-with-jsonp)
    7. [Using Multiple Access Tokens](#using-multiple-access-tokens)
    8. [Upload Binary Data](#upload-binary-data)
74. [Debug Requests](#debug-requests)
    1. [Graph API Debug Mode](#graph-api-debug-mode)
    2. [Determining Version used by API Requests](#determining-version-used-by-api-requests)
    3. [Debug Info for Reporting Bugs](#debug-info-for-reporting-bugs)
75. [Handling Errors](#handling-errors)
    1. [Error Responses](#error-responses)
    2. [Error Codes](#error-codes)
    3. [Authentication Error Subcodes](#authentication-error-subcodes)
    4. [Rate Limiting Error Codes](#rate-limiting-error-codes)
76. [Field Expansion](#field-expansion-1)
    1. [Limiting Results](#limiting-results)
    2. [Nested Requests](#nested-requests)
    3. [Field Aliases](#field-aliases)
    4. [Next Steps](#next-steps-4)
77. [Secure Graph API Calls](#secure-graph-api-calls)
    1. [Meta Crawler](#meta-crawler)
    2. [Login Security](#login-security)
    3. [Server Allow List](#server-allow-list)
    4. [Social Plugin Confirmation Steps](#social-plugin-confirmation-steps)
    5. [Encryption](#encryption)
    6. [Verify Graph API Calls with appsecret_proof](#verify-graph-api-calls-with-appsecret_proof)
    7. [Upload a file](#upload-a-file)
    8. [Publishing](#publishing-2)
78. [Opportunity score and Recommendations](#opportunity-score-and-recommendations)
    1. [Supported Inventory and APIs](#supported-inventory-and-apis)
    2. [Performance recommendation types](#performance-recommendation-types)
79. [Omni Optimal Technical Setup Guide: Best Practices and Requirements](#omni-optimal-technical-setup-guide-best-practices-and-requirements)
    1. [Event Setup](#event-setup)
    2. [Event Match Quality (EMQ) and Match Rates](#event-match-quality-emq-and-match-rates)
    3. [Data Freshness](#data-freshness)
    4. [Deduplication](#deduplication)
    5. [Event Quality](#event-quality)
    6. [Catalog Setup](#catalog-setup)
    7. [Omni Audience](#omni-audience)
80. [Manage Your Ad Object's Status](#manage-your-ad-object's-status)
    1. [Live](#live)
    2. [Archived](#archived)
    3. [Deleted](#deleted)
    4. [Manage Status](#manage-status)
    5. [Comparisons of Different Statuses](#comparisons-of-different-statuses)
    6. [Asynchronous and Batch Requests](#asynchronous-and-batch-requests)
81. [Marketing API Reference](#marketing-api-reference)
    1. [Marketing API Root Nodes](#marketing-api-root-nodes)
    2. [User](#user)
    3. [Ad Account](#ad-account)
    4. [Ad](#ad-3)
    5. [Ad Set](#ad-set-3)
    6. [Ad Campaign](#ad-campaign-3)
    7. [Ad Creative](#ad-creative-3)
    8. [Ad Account](#ad-account-1)

---

# Get Started with the Marketing API

To effectively utilize the Marketing API, users must follow some key steps to set up their environment and gain access to the API's features. This section outlines the prerequisites necessary for getting started.

## Ad Account Requirements

To manage your ads through the Marketing API, you must have an active ad account. This account is crucial not only for running campaigns but also for managing billing settings and setting spending limits. An ad account allows you to track your advertising expenses, monitor performance, and optimize your campaigns effectively.

### Finding Your Ad Account Number

Locating your ad account number can be done through the Meta Ads Manager.
*   **Log into Facebook:** Start by logging into your Facebook account that is associated with your business.
*   **Access Ads Manager:** Ads Manager can be found in the drop-down menu in the upper right corner of your Facebook homepage or business page.
*   **Locate your ad account:** In Ads Manager, click on the ad account **Settings** from the menu on the bottom left of the screen.
*   **View ad account information:** In the Settings screen, you will find your ad account number listed along with other details such as your billing information and spending limits.

## Meta Developer Account

See [Register as a Meta Developer](https://developers.facebook.com/docs/development/register/) for more information.

## Create an App

See [Create an App](https://developers.facebook.com/docs/development/create-an-app/) for more information on setting up an app in the App Dashboard as well as app types and use cases.

## Authorization and Authentication

See [Authorization](#authorization) for more information on verifying the users and apps that will be accessing the Marketing API and granting them permissions.
See [Authentication](#get-an-access-token-for-ad-accounts-you-manage) for more information on getting, extending, and renewing access tokens with the Marketing API.

## Next Steps

*   [Create an Ad Campaign](#create-an-ad-campaign)
*   [Manage Ad Campaigns](#ad-campaign-management)
*   [Optimize Ad Campaigns](#ad-optimization-basics)

# Authorization

The authorization process verifies the users and apps that will be accessing the Marketing API and grants them permissions.

## App Roles

In your app's dashboard, you can set roles for yourself or team members as necessary: Admin, Developer, Tester.

**Note:** Depending on your intended use case, you may need to submit your app for review to gain access to specific permissions related to ad management.

## Access Levels, Permissions, and Features

Business apps are subject to an additional layer of Graph API authorization called access levels. During App Review, your app must also request specific permissions and features.

Each level has restrictions, see [Access Levels And Features](https://developers.facebook.com/docs/development/release/access-levels/) for more information. All developers also must follow all Meta [Platform Terms](https://developers.facebook.com/policy/) and [Developer Policies](https://developers.facebook.com/policy/details/). Calls on **ANY** access level are against production data.

### Marketing API Access Levels vs. Ads Management Standard Access

Permissions and features for apps have two different access levels: **standard access** and **advanced access** (Note: The use of the term "standard access" here is not related to the Ads Management Standard Access feature.) The advanced access level of Ads Management Standard Access still requires an app to pass through review in order to have access to the feature.

### Marketing API Access vs Ads Management Standard Access Mapping

| Marketing API Access | Ads Management Standard Access | Action |
| :--- | :--- | :--- |
| Development access | Standard access | By default |
| Standard access | Advanced access | Apply in App Dashboard |

To check your current access level, go to **App Dashboard > App Review > Permissions and Features**.

## Permissions and Features

### Permissions

The permissions you should request change depending on which API you want to access.

If your app is only managing your ad account, standard access to the `ads_read` and `ads_management` permissions are sufficient. If your app is managing other people's ad accounts, you need advanced access to the `ads_read` and/or `ads_management` permissions. See [all available permissions for business apps](https://developers.facebook.com/docs/permissions/reference/ads_management/).

### Features

The features you should request change depending on how you want to use our APIs. If you're managing ads, a common feature to request is **Ads Management Standard Access**. See [all available features for business apps](https://developers.facebook.com/docs/features/reference/ads-management-standard-access/).

### Feature access levels

| Feature Access Level | Description |
| :--- | :--- |
| **Standard access** | Business apps are automatically approved for standard access for all permissions and features available to the Business app type. |
| | Use this option if you're getting started. You can build end-to-end workflows before requesting full permissions, and you can access an unlimited number of ad accounts. |
| | Some API calls may not be available with standard access because they may belong to multiple accounts or the affected account can't be identified programmatically. |
| **Advanced access** | Advanced access must be approved through the App Review process on an individual permission and feature basis. |
| | To request advanced access, go to your app’s dashboard and click **App Review > Permissions and Features**. |
| | Find the permission or feature you would like to access and, under **Action**, click **Request advanced access**. You can select one or more features. Once you have selected your options, click **Continue the Request**. You'll be taken to a screen that guides you through the submission process. |
| | After you submit your information, Meta responds with an approval or denial and additional information if your app is not qualified for standard access. |
| | If you're approved for advanced access, you need to do the following to maintain your status: |
| | * Have successfully made at least 1500 Marketing API calls in the last 15 days. |
| | * Have made Marketing API calls with an error rate of less than 15% in the last 15 days. |

### Access level significance

The table below shows how standard and advanced access levels impact the **Ads Management Standard Access** feature.

| | Standard Access | Advanced Access |
| :--- | :--- | :--- |
| **Account Limits** | Manage an unlimited number of ad accounts. App admins or developers can make API calls on behalf of ad account admins or advertisers. | Manage an unlimited number of ad accounts, assuming you get `ads_read` or `ads_management` permission from the ad account. |
| **Rate Limits** | Heavily rate-limited per ad account. For development only. Not for production apps running for live advertisers. | Lightly rate limited per ad account. |
| **Business Manager** | Limited access to Business Manager and Catalog APIs. No Business Manager access to manage ad accounts, user permissions and Pages. | Access to all Business Manager and Catalog APIs. |
| **System User** | Can create 1 system user and 1 admin system user. | Can create 10 system users and 1 admin system user. |
| **Page Creation** | Cannot create Pages through the API. | Cannot create Pages through the API. |

### Get Advanced Access

In order to get advanced access of **Ads Management Standard Access**, your app needs to meet these requirements:
*   Have successfully made at least 1500 Marketing API calls in the last 15 days.
*   Have made Marketing API calls with an error rate of less than 15% in the last 15 days.

If you're managing someone's ads, use the `scope` parameter to prompt them for the `ads_management` or `ads_read` permissions. Your app gets access when they click **Allow**.

```
https://www.facebook.com/v24.0/dialog/oauth?
  client_id=<YOUR_APP_ID>
  &redirect_uri=<YOUR_URL>
  &scope=ads_management
```

**Note:** When inputting the `YOUR_URL` field, put a trailing `/` (for example, `http://www.facebook.com/`).

### Example Use Cases

| Use Case | What To Request |
| :--- | :--- |
| You want to read and manage ads for ad accounts you own or have been granted access to by the ad account owner. | **Permission:** `ads_management` **Feature:** Ads Management Standard Access |
| You want to read ad reports for ad accounts you own or have been granted access to by the ad account owner. | **Permission:** `ads_read` **Feature:** Ads Management Standard Access |
| You want to pull ad reports from a set of clients and to both read and manage ads from another set of clients. | **Permissions:** `ads_management` and `ads_read` **Feature:** Ads Management Standard Access |

## Business Verification

Business verification is a process that allows us to verify your identity as a business entity, which we require if your app will access sensitive data. [Learn more about the Business Verification process](https://developers.facebook.com/docs/development/release/business-verification/).

## Learn More

[Permissions Reference for Meta Technologies APIs](https://developers.facebook.com/docs/permissions/reference)

# Graph API Explorer

You can get a user access token using the Graph API Explorer. To learn how to use the Graph API Explorer to make API calls, see the [Graph API Explorer Guide](https://developers.facebook.com/docs/graph-api/explorer/).

1.  In the **Meta App** field, select an app to obtain the access token for.
2.  In the **User or Page** field, select **User Token**.
3.  In the **Add a Permission** drop-down under **Permissions**, select the permissions you need (for example, `ads_read` and/or `ads_management`).
4.  Click **Generate Access Token**. The box on top of the button is populated with the access token; store the token for later use.

## Debug

To get more information in the token you just generated, click on the information icon (`i`) in front of the token to open the **Access Token Info** table, which displays some basic information about the token. Click **Open in Access Token Tool** to be redirected to the [Access Token Debugger](https://developers.facebook.com/tools/debug/accesstoken/).

While debugging, you can check:
*   **App ID:** The app ID mentioned in the prerequisite section.
*   **Expires:** A time stamp. A short-lived token expires in an hour or two.
*   **Scopes:** Contains the permissions added in the Graph API Explorer.

## Extend your access token

1.  Paste your token in the text box of the **Access Token Debugger** and click **Debug**.
2.  Click **Extend Access Token** at the bottom of the **Access Token Info** table to get a long-lived token, and copy that token for later use.
3.  Check your new token’s properties using the Access Token Debugger. It should have a longer expiration time, such as "60 days", or "Never" under **Expires**. See [Long-Lived Access Token](https://developers.facebook.com/docs/facebook-login/access-tokens/refreshing) for more information.

## System User Access Tokens

A system user access token is a type of access token that is associated with a system user account, which is an account that is created in Meta Business Manager for the purpose of managing assets and calling the Marketing API. System user access tokens are useful for server-to-server interactions where there is no user present to authenticate. They can be used to perform actions on behalf of the business, such as reading and writing business data, managing ad campaigns, and other ad objects.

One benefit of using a system user access token is that it does not expire, so it can be used in long-running scripts or services that need to access the Marketing API. Additionally, because system user accounts are not tied to a specific individual, they can be used to provide a level of separation between personal and business activity on Meta technologies.

System user tokens are also less likely subject to invalidation for other reasons compared to the long-lived user access tokens.

See [System Users](https://developers.facebook.com/docs/marketing-api/business-management/system-users/) for more information.

# Get an Access Token for Ad Accounts you Manage

After the owner of an ad account you are going to manage clicks the **Allow** button when you prompt for permissions, they are redirected to a URL that contains the value of the `redirect_uri` parameter and an authorization code:

```
http://YOUR_URL?code=<AUTHORIZATION_CODE>
```

You can then build the URL for an API call that includes the endpoint for getting a token, your app ID, your site URL, your app secret, and the authorization code you just received:

```
https://graph.facebook.com/v24.0/oauth/access_token?
  client_id=<YOUR_APP_ID>
  &redirect_uri=<YOUR_URL>
  &client_secret=<YOUR_APP_SECRET>
  &code=<AUTHORIZATION_CODE>
```

The API response should contain the generated access token:
*   If you follow the server-side authentication flow, you get a persistent token.
*   If you follow the client-side authentication flow, you get a token with a finite validity period of about one to two hours. This can be exchanged for a persistent token by calling the Graph API endpoint for [Extending Tokens](https://developers.facebook.com/docs/facebook-login/access-tokens/refreshing).
*   If the API is to be invoked by a system user of a business, you can use a system user access token.

You can debug the access token, check for expiration, and validate the permissions granted using the [access token debugger](https://developers.facebook.com/tools/debug/accesstoken) or the [programmatic validation API](https://developers.facebook.com/docs/facebook-login/access-tokens/validation).

# Storing the Token

Your token should be safely stored in your database for subsequent API calls. Moving tokens between your client and server must be done securely over HTTPS to ensure account security. Read more about the implications of moving tokens between your clients and your server.

You should regularly check for validity of the token, and if necessary, prompt for permissions renewal. Even a persistent token can become invalid in a few cases, including the following:
*   A password changes
*   Permissions are revoked

As user access tokens can be invalidated or revoked anytime for some reasons, your app should expect to have a flow to re-request permission from users. Check the validity of the user token when they start your app. If necessary, re-run the authentication flow to get an updated token.

If this is not possible for your app, you may need a different way to prompt for permissions. This can happen in cases where the API calls are not directly triggered by a user interface or are made by periodically run scripts. A possible solution is to send an email with instructions.

# Best Practices for Secure Credential Management

To ensure the security of user credentials and access tokens, you should adhere to the following best practices:
*   **Use HTTPS:** Always transmit access tokens over secure connections (HTTPS) to prevent interception by malicious actors.
*   **Store Tokens Securely:** Utilize secure storage solutions, such as encrypted databases, for storing access and refresh tokens, minimizing the risk of unauthorized access.
*   **Limit Token Scope:** Request only the minimum necessary permissions, reducing the risk of overexposure to user data.
*   **Implement Token Expiration:** Regularly refresh tokens and have a robust mechanism to handle expiration, ensuring continued access without exposing long-lived tokens.

# Basic Ad Creation

Creating ads using the Marketing API involves a systematic approach that includes setting up campaigns, ad sets, and ad creatives. This document provides detailed guidance on programmatically creating these components, along with code samples to illustrate the implementation process.

## Ad Creation Endpoints

The Marketing API offers a variety of key endpoints that serve as essential tools for developers to create, manage, and analyze advertising campaigns. The primary creation endpoints include campaigns, adsets, and ads. Understanding these endpoints and their functionalities is crucial for both new and experienced developers looking to optimize their advertising strategies.

### The campaigns endpoint

The `campaigns` endpoint is used to create and manage advertising campaigns. This endpoint allows users to set the overall objectives for their marketing efforts, such as brand awareness or conversions.

**Example API Request:**
```curl
curl -X POST \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/campaigns \
  -F 'name=My Campaign' \
  -F 'objective=LINK_CLICKS' \
  -F 'status=PAUSED' \
  -F 'access_token=<ACCESS_TOKEN>'
```

### The adsets endpoint

The `adsets` endpoint organizes ads within campaigns based on specific targeting criteria and budget allocation. This allows for more granular control over audience targeting and spending.

**Example API Request:**
```curl
curl -X POST \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adsets \
  -F 'name=My Ad Set' \
  -F 'campaign_id=<CAMPAIGN_ID>' \
  -F 'daily_budget=1000' \
  -F 'targeting={"geo_locations":{"countries":["US"]}}' \
  -F 'access_token=<ACCESS_TOKEN>'
```

### The ads endpoint

The `ads` endpoint is where the actual advertisements are created, allowing you to define creative elements and link them to the appropriate ad set.

**Example API Request:**
```curl
curl -X POST \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/ads \
  -F 'name=My Ad' \
  -F 'adset_id=<AD_SET_ID>' \
  -F 'creative={"creative_id": "<CREATIVE_ID>"}' \
  -F 'status=ACTIVE' \
  -F 'access_token=<ACCESS_TOKEN>'
```

# Create an Ad Campaign

The first step in launching an ad campaign is to create the campaign itself using the API.

To create an ad campaign, send a `POST` request to the `/act_<AD_ACCOUNT_ID>/campaigns` endpoint with key parameters including the campaign's `name`, `objective`, and `status`.

**Example API Request:**
```curl
curl -X POST \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/campaigns \
  -F 'name=My Campaign' \
  -F 'objective=LINK_CLICKS' \
  -F 'status=PAUSED' \
  -F 'access_token=<ACCESS_TOKEN>'
```

## Required Parameters

| Name | Description |
| :--- | :--- |
| `name` | The name of the campaign. |
| `objective` | The goal of the campaign, for example, `LINK_CLICKS`. |
| `status` | The initial status of the campaign, usually set to `PAUSED` when first created. |

**Learn More**
*   [Ad Account Ad Campaigns Reference](https://developers.facebook.com/docs/marketing-api/reference/ad-account/ad-campaigns)
*   [Ad Campaign Reference](https://developers.facebook.com/docs/marketing-api/reference/campaign)

# Create an Ad Set

After creating your ad campaign, the next step is to create an ad set to be a part of it. The ad set contains the bidding, targeting, and budget information for your campaign.

To create an ad set within your campaign, send a `POST` request to the `/act_<AD_ACCOUNT_ID>/adsets` endpoint. Important parameters include the `name` of the ad set, the associated `campaign_id`, `targeting` specifications, and `daily_budget` details.

**Example API Request:**
```curl
curl -X POST \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adsets \
  -F 'name=My Ad Set' \
  -F 'campaign_id=<CAMPAIGN_ID>' \
  -F 'daily_budget=1000' \
  -F 'targeting={"geo_locations":{"countries":["US"]}}' \
  -F 'access_token=<ACCESS_TOKEN>'
```

## Required Parameters

| Name | Description |
| :--- | :--- |
| `campaign_id` | The ID of the campaign to which the ad set belongs. |
| `daily_budget` | The daily budget specified in cents. |
| `targeting` | The target audience based on geographic locations. |

# Create an Ad Creative

Creating an ad creative involves defining the visual and textual elements that will be displayed in your ad. This important step requires specifying the ad format, which can include options such as image, video, or carousel. Each format comes with its own set of design considerations and requirements. By carefully crafting your ad creatives, you can create compelling ads that effectively communicate your message and drive user engagement.

To construct your ad creative, send a `POST` request to the `/act_<AD_ACCOUNT_ID>/adcreatives` endpoint. The important parameters include the `name` of the ad, `message`, image or video URLs, call_to_action (CTA) buttons, and destination URLs.

**Example API Request:**
```curl
curl -X POST \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives \
  -F 'name=Sample Creative' \
  -F 'object_story_spec={
      "page_id": "YOUR_PAGE_ID",
      "link_data": {
        "message": "Check out our new product!",
        "link": "https://www.example.com/product",
        "caption": "Our New Product",
        "picture": "https://www.example.com/image.jpg",
        "call_to_action": {
          "type": "SHOP_NOW"
        }
      }
    }' \
  -F 'access_token=<ACCESS_TOKEN>'
```

In this payload, the `object_story_spec` specifies the format being used for the ad story and includes linking details for a link ad, along with associated metadata.

## Required Parameters

| Name | Description |
| :--- | :--- |
| `name` | The name of the ad. |
| `object_story_spec` | The specifications of the ad creative. |

# Create an Ad

The ad set and the ad creative come together to create the ad itself.

You create the ad by sending a `POST` request to the `/act_<AD_ACCOUNT_ID>/ads` endpoint along with parameters such as the `adset_id` and creative details.

**Example API Request:**
```curl
curl -X POST \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/ads \
  -F 'name=My Ad' \
  -F 'adset_id=AD_SET_ID' \
  -F 'creative={"creative_id": "<CREATIVE_ID>"}' \
  -F 'status=ACTIVE' \
  -F 'access_token=<ACCESS_TOKEN>'
```

## Required Parameters

| Name | Description |
| :--- | :--- |
| `adset_id` | The ID of the ad set under which the ad will run. |
| `creative` | Contains the creative ID for the ad. |
| `status` | Set to `ACTIVE` to launch the ad immediately. |

# Ad Campaign Management

Managing ad campaigns through the Marketing API involves several key operations: modifying campaign settings, pausing and resuming campaigns, and deleting campaigns.

## Modify an Ad Campaign

To update an existing ad campaign, you can send a `POST` request to the `/<CAMPAIGN_ID>` endpoint. You can change various settings, including the campaign's `objective`, `budget`, and `targeting` attributes.

**Example API Request:**
```curl
curl -X POST \
  https://graph.facebook.com/v24.0/<CAMPAIGN_ID> \
  -F 'objective=CONVERSIONS' \
  -F 'daily_budget=2000' \
  -F 'status=ACTIVE' \
  -F 'access_token=<ACCESS_TOKEN>'
```

## Pause an Ad Campaign

Temporarily stopping a campaign can help you reassess your strategy without deleting the campaign entirely. To pause a campaign, update its status to `PAUSED`.

**Example API Request:**
```curl
curl -X POST \
  https://graph.facebook.com/v24.0/<CAMPAIGN_ID> \
  -F 'status=PAUSED' \
  -F 'access_token=<ACCESS_TOKEN>'
```

To resume the campaign, you can set the status back to `ACTIVE`.

## Archive an Ad Campaign

If you want to temporarily stop a campaign without deleting it, you can archive it instead. To do this, send a `POST` request to the `/<CAMPAIGN_ID>` endpoint with the `status` parameter set to `ARCHIVED`.

**Example API Request**

```curl
curl -X POST \
  https://graph.facebook.com/v24.0/<CAMPAIGN_ID> \
  -F 'status=ARCHIVED \
  -F 'access_token=<ACCESS_TOKEN>'
```

Note that archiving a campaign will stop it from running, but it can be easily restored by changing its status back to `ACTIVE`.

## Delete an Ad Campaign

When you need to permanently remove a campaign, send a `DELETE` request to the `/<CAMPAIGN_ID>` endpoint.

Be cautious when deleting campaigns, as this action cannot be undone. Always double-check the campaign ID before deletion to avoid accidental loss of data.

**Example API Request**
```curl
curl -X DELETE \
  https://graph.facebook.com/v24.0/<CAMPAIGN_ID> \
  -F 'access_token=<ACCESS_TOKEN>'
```

# Ad Optimization Basics

The Marketing API offers endpoints to manage audiences and analyze advertising campaign insights. Understanding these endpoints and their functionalities is important for both new and experienced developers looking to optimize their advertising strategies.

## Ad Optimization Endpoints

### The customaudiences endpoint

The `customaudiences` endpoint allows you to create and manage custom and lookalike audiences, tailoring ads to specific user segments based on demographics, interests, and behaviors.

**Example API Request**
```curl
curl -X POST \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/customaudiences \
  -F 'name=My Custom Audience' \
  -F 'subtype=CUSTOM' \
  -F 'access_token=<ACCESS_TOKEN>'
```

### The insights endpoint

The `insights` endpoint provides valuable analytics about the performance of campaigns, ad sets, and ads, allowing you to track key metrics such as impressions, clicks, and conversions.

**Example API Request**
```curl
curl -X GET \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/insights \
  -F 'fields=impressions,clicks,spend' \
  -F 'time_range={"since":"2023-01-01","until":"2023-12-31"}' \
  -F 'access_token=<ACCESS_TOKEN>'
```

# Monitoring and Analytics

Monitoring campaign performance using the **Insights API** enables you to gather crucial data about your advertising efforts, allowing you to evaluate what works and what does not. By leveraging the performance metrics provided by the Insights API, you can refine your campaigns, improve targeting, and ultimately understand which strategies are successful and how to best spend your resources across Meta technologies such as Facebook and Instagram.

## Querying Analytics Data

To extract performance metrics, you can make `GET` requests to the `/act_<AD_ACCOUNT_ID>/insights` endpoint. The request can include various parameters such as `fields`, `time_range`, and `filtering`, allowing for a tailored response that matches specific analytical needs. For instance, by specifying fields like `impressions`, `clicks`, and `spend`, you can gain insights into how well your campaigns are performing against goals.

**Example API Request:**
```curl
curl -X GET \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/insights \
  -F 'fields=impressions,clicks,spend' \
  -F 'time_range={"since":"2023-01-01","until":"2023-12-31"}' \
  -F 'access_token=<ACCESS_TOKEN>'
```

## Interpreting Results

Key performance indicators (KPIs) such as click-through rates (CTR), cost per click (CPC), and return on ad spend (ROAS) offer insights into how effectively the campaigns are driving user engagement and conversions. For example, a low CTR may indicate that the ad creative is not resonating with the audience, prompting the need for adjustments.

## Using Insights for Ongoing Optimization

By continuously monitoring performance data, you can identify trends and make informed adjustments. For instance, if certain ads yield high engagement but lead to low conversions, you can experiment with different calls-to-action or refine targeting parameters.

Insights also can help guide budget allocation. If specific demographics show higher engagement rates, reallocating budgets to these segments can enhance overall campaign effectiveness.

# Optimization Tips

Maximizing the effectiveness of advertising campaigns using the Marketing API requires a strategic approach that encompasses audience targeting, budget allocation, ad creatives, and real-time optimization. This document contains actionable tips that cater to both new and experienced marketers.

By implementing these best practices and optimization tips, you can enhance the effectiveness of your ad campaigns, ensuring they not only reach your target audience but also drive meaningful engagement and conversions.

## Audience Targeting

### Utilize Custom Audiences

Leverage the ability to create custom audiences based on user interactions with your business, such as website visitors or app users. This ensures that your ads reach individuals who are already familiar with your offerings.

### Segment Your Audience

Use demographic filters—age, gender, location, and interests—to segment your audience. Tailoring your ads to specific segments increases the likelihood of engagement and conversions.

### Lookalike Audiences

Create lookalike audiences to reach new potential customers that resemble your best existing customers. This can help expand your reach effectively.

## Budget Allocation

### Set Clear Objectives

Clearly define the objective of each campaign (for example, brand awareness or lead generation) and allocate budgets accordingly. Different objectives may require different budget strategies.

### Monitor Performance

Regularly review campaign performance metrics to adjust budgets based on which ads or ad sets are performing best. Shift funds towards the highest-performing areas to maximize ROI.

### Daily Budget Management

Consider setting daily budgets for campaigns to control spending and prevent overspending. This approach allows for flexibility in adjusting budgets based on performance trends.

## Ad Creatives

### High-Quality Visuals

Invest in high-quality images and videos. Compelling visuals grab attention and can lead to higher click-through rates. Ensure that your creatives are optimized for both desktop and mobile viewing.

### A/B Testing

Continuously test different ad creatives, headlines, and calls to action. A/B testing helps identify which variations resonate most with your audience, enabling data-driven decisions for future campaigns.

### Dynamic Creatives

Use dynamic ad formats that automatically show the best-performing creative variations based on user behavior. This personalization can significantly enhance engagement rates.

## Real-Time Data for Optimization

### Leverage the Insights API

Use the Insights API to gather real-time data about ad performance. Analyze metrics such as impressions, clicks, and conversions to make informed adjustments quickly.

### Adjust Targeting on the Fly

If certain demographics are performing better than others, use real-time data to adjust targeting parameters mid-campaign. This agile approach can improve overall campaign effectiveness.

### Regular Reporting

Set up regular reporting dashboards to monitor campaign performance. This helps in identifying trends and potential areas for improvement, allowing for ongoing optimization.

# Conversions API

The Conversions API is designed to create a connection between marketing data from an advertiser’s server, website platform, mobile app, or CRM to Meta systems that optimize ad targeting, decrease cost per result and measure outcomes.

Rather than maintaining separate connection points for each data source, advertisers are able to leverage the Conversions API to send multiple event types and simplify their technology stack.

To learn more about the Conversions API, see the documentation [here](https://developers.facebook.com/docs/marketing-api/conversions-api).

# Ad Creative

Use Facebook ads with your existing customers and to reach new ones. Each guide describes Facebook ads products to help meet your advertising goals. There are several types of ad units with a variety of appearances, placement and creative options. For guidelines on ads units as creative content, see [Facebook Ads Guide](https://www.facebook.com/business/help/1288599478479574).

## Creative

An ad creative is an object that contains all the data for visually rendering the ad itself. In the API, there are different types of ads that you can create on Facebook, all listed here.

If you have a campaign with the **Page Post Engagement** Objective, you can now create an ad that promotes a post made by the page. This is considered a **Page post ad**. Page post ads require a field called `object_story_id`, which is the `id` property of a Page post. [Learn more about Ad Creative, Reference](https://developers.facebook.com/docs/marketing-api/reference/ad-creative).

An ad creative has three parts:
*   Ad creative itself, defined by the visual attributes of the creative object
*   Placement that the ad runs on
*   Preview of the unit itself, per placement

To create the ad creative object, make the following call:
```curl
curl -X POST \
  -F 'name="Sample Promoted Post"' \
  -F 'object_story_id="<PAGE_ID>_<POST_ID>"' \
  -F 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
```

The response to the API call is the `id` of the creative object. Store this; you need it for the ad object:

```curl
curl -X POST \
  -F 'name="My Ad"' \
  -F 'adset_id="<AD_SET_ID>"' \
  -F 'creative={
       "creative_id": "<CREATIVE_ID>"
     }' \
  -F 'status="PAUSED"' \
  -F 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/ads
```

## Limits

There are limits on the creative's text, image size, image aspect ratio and other aspects of the creative. See the [Ads Guide](https://www.facebook.com/business/help/1288599478479574).

## Read

In the Ads API, each field you want to retrieve needs to be asked for explicitly, except for `id`. Each object's [Reference](https://developers.facebook.com/docs/marketing-api/reference/ad-creative) has a section for reading back the object and lists what fields are readable. For the creative, it's the same fields as specified when creating the object, and `id`.

```curl
curl -G \
  -d 'fields=name,object_story_id' \
  -d 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/<CREATIVE_ID>
```

# Placements

A placement is where your ad is shown on Facebook, such as on Feed on desktop, Feed on a mobile device or on the right column. See [Ads Product Guide](https://www.facebook.com/business/products/ads).

We encourage you to run ads across the full range of available placements. Facebook’s ad auction is designed to deliver ad impressions to the placement most likely to drive campaign results at the lowest possible cost.

The easiest way to take advantage of this optimization is to leave this field blank. You can also select specific placements in an ad set’s `target_spec`.

This example has a page post ad. The available placements are Mobile Feed, Desktop Feed and Right column of Facebook. In the API, see [Placement Options](https://developers.facebook.com/docs/marketing-api/targeting-specs/v24.0#placement). If you choose `desktopfeed` and `rightcolumn` as the `page_type`, the ad runs on Desktop Feed and Right column placements. Any ad created below this ad set has only the desktop placement.

```curl
curl -X POST \
  -F 'name=Desktop Ad Set' \
  -F 'campaign_id=<CAMPAIGN_ID>' \
  -F 'daily_budget=10000' \
  -F 'targeting={ 
    "geo_locations": {"countries":["US"]}, 
    "publisher_platforms": ["facebook","audience_network"] 
  }' \
  -F 'optimization_goal=LINK_CLICKS' \
  -F 'billing_event=IMPRESSIONS' \
  -F 'bid_amount=1000' \
  -F 'status=PAUSED' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adsets
```

# Preview an Ad

You preview an ad in one of two ways—with [ad preview API](https://developers.facebook.com/docs/marketing-api/ad-preview) or the ad preview plugin.

There are three ways to generate a preview with the API:
*   By ad ID
*   By ad creative ID
*   By supplying a creative spec

Following the reference docs for the preview API, the minimum required API call is:

```curl
curl -G \
  --data-urlencode 'creative="<CREATIVE_SPEC>"' \
  -d 'ad_format="<AD_FORMAT>"' \
  -d 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/generatepreviews
```

The creative spec is an array of each field and value required to create the ad creative.

Currently, our ad creative call looks like this:
```curl
curl -X POST \
  -F 'name="Sample Promoted Post"' \
  -F 'object_story_id="<PAGE_ID>_<POST_ID>"' \
  -F 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
```

Take `object_story_id` and use it in the preview API call:

```curl
curl -G \
  -d 'creative={"object_story_id":"<PAGE_ID>_<POST_ID>"}' \
  -d 'ad_format=<AD_FORMAT>' \
  -d 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/generatepreviews
```

The available values for `ad_format` differ a bit from `page_types`. But, in this scenario, **Desktop Feed** and **Right column of Facebook** are selected. This requires you to make two API calls to generate the previews for each placement:

```curl
curl -G \
  -d 'creative={"object_story_id":"<PAGE_ID>_<POST_ID>"}' \
  -d 'ad_format=DESKTOP_FEED_STANDARD' \
  -d 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/generatepreviews
curl -G \
  -d 'creative={"object_story_id":"<PAGE_ID>_<POST_ID>"}' \
  -d 'ad_format=RIGHT_COLUMN_STANDARD' \
  -d 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/generatepreviews
```

The response is an iFrame that's valid for 24 hrs.

# Video and Carousel Ads

You can easily create, measure, and optimize video and carousel ads on Facebook through the API. See [Facebook for Business, Carousel Ads](https://www.facebook.com/business/help/1628178667448842). For supported video formats for ads, see [Advertiser Help Center, Videos](https://www.facebook.com/business/help/1206103632737674).

## Limitations

The `video_id` must be associated with the ad account.

## Video Ads

To create a video ad in a `VIDEO_VIEWS` objective and optimize the bid for reach, follow these steps:
*   Step 1: Provide ad creatives
*   Step 2: Create ad campaign
*   Step 3: Create an ad set
*   Step 4: Create an ad

### Step 1: Provide ad creatives

Create a video ad using an existing video ID and a video uploaded to Facebook.
You will need:
*   `pages_read_engagement` and `ads_management` permissions
*   a video uploaded to either the `act_{ad-account-id}/advideos` endpoint

```curl
curl \
  -F 'name=Sample Creative' \
  -F 'object_story_spec={ 
  "page_id": "<PAGE_ID>", 
  "video_data": {"image_url":"<THUMBNAIL_URL>","video_id":"<VIDEO_ID>"} 
  }' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
```

### Step 2: Create ad campaign

Set objective to `VIDEO_VIEWS`:

```curl
curl -X POST \
  -F 'name="Video Views campaign"' \
  -F 'objective="OUTCOME_ENGAGEMENT"' \
  -F 'status="PAUSED"' \
  -F 'special_ad_categories=[]' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/campaigns
```

See [Reference: Campaign](https://developers.facebook.com/docs/marketing-api/reference/ad-campaign), [AdObjectives in PHP](https://github.com/facebook/facebook-php-ads-sdk/blob/master/src/FacebookAds/Constants/AdObjectives.php) and [AdObjectives in Python](https://github.com/facebook/facebook-python-ads-sdk/blob/master/facebook_business/insights/helpers.py).

### Step 3: Create an ad set

If your goal is lowest cost-per-view possible, you should pair the video view campaign objective with an ad set's `optimization_goal=THRUPLAY`. You can set `bidding_event` to `IMPRESSIONS` or `THRUPLAY`, to pay per impression or per video view. See [CPV bidding](https://www.facebook.com/business/help/185800055416040).

```curl
curl \
  -F 'name=A CPV Ad Set' \
  -F 'campaign_id=<CAMPAIGN_ID>' \
  -F 'daily_budget=500' \
  -F 'start_time=2024-05-06T04:45:29+0000' \
  -F 'end_time=2024-06-06T04:45:29+0000' \
  -F 'billing_event=THRUPLAY' \
  -F 'optimization_goal=THRUPLAY' \
  -F 'bid_amount=100' \
  -F 'targeting={ 
  "device_platforms": ["mobile"], 
  "geo_locations": {"countries":["US"]}, 
  "publisher_platforms": ["facebook"] 
  }' \
  -F 'status=PAUSED' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adsets
```

Cost-per-view rates are lower for ad sets with `optimization_goal=THRUPLAY` compared to CPVs from Reach and Frequency buying optimized for video views.The end date must be in the future. See [Reference: Ad Set](https://developers.facebook.com/docs/marketing-api/reference/ad-set).

### Step 4: Create an ad

Use the existing ad set and ad creative:

```curl
curl -X POST \
  -F 'name="My Ad"' \
  -F 'adset_id="<AD_SET_ID>"' \
  -F 'creative={
  "creative_id": "<CREATIVE_ID>"
  }' \
  -F 'status="PAUSED"' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/ads
```

When a campaign objective is `VIDEO_VIEWS`, by default the ad gets the right tracking specs which define actions tracked for an ad. For example, video views:

`{'action.type':'video_view','post':'POST_ID','post.wall':'PAGE_ID'}`

See [Ads Manager: My Campaigns](https://www.facebook.com/ads/manager/campaigns/campaigns) and [Reference: Ad](https://developers.facebook.com/docs/marketing-api/reference/ad).

### Example Brand Awareness

To create a video ad for brand awareness, see [brand awareness blog](https://developers.facebook.com/blog/post/2015/05/29/brand-awareness-video-views/).

### Example Reach and Frequency

To extend the reach of a video to more people, use the video view campaign objective with Reach and Frequency. You will need to create a prediction, reserve it, and assign it to your ad set.

Follow the video view creation, but apply Reach and Frequency to your ad set. Specify these additional parameters:

`-F "rf_prediction_id=<RESERVATION_ID>"`

### Video for Direct Response

To encourage people to move from awareness to action, see [Video Creative in the Carousel Format](https://www.facebook.com/business/news/carousel-ads-video-support-and-more-tools-for-dynamic-ads).
*   Reach people who watched a video. From awareness to affinity and consideration. See [remarketing](#remarketing).
*   Engage with brand and products. Add a call-to-action to visit a specific page on your website. See [call to action](#call-to-action).

## Remarketing

Video ads remarketing provides support for advertisers to target certain custom audiences from organic or paid videos on both Facebook and Instagram. Use this feature to move people from awareness to deeper funnel objectives such as affinity and consideration. See [Research: Creative Combinations that Work](https://www.facebook.com/business/news/power-of-creative-combinations).

You need advertiser permission for the page containing a video to create an audience for that video.

For the audience, set `subtype=ENGAGEMENT`. Then write rules for the audience you want to create. Each rule has an `object_id`, such as video ID, and `event_name`. The `event_name` is one of:
*   `video_watched`: the number of times your video was watched for an aggregate of at least 3 seconds, or for nearly its total length, whichever happened first.
*   `video_completed`: the number of times your video was watched at 95% of its length, including watches that skipped to this point.
*   `video_view_10s`: the number of times your video was watched for an aggregate of at least 10 seconds, or for nearly its total length, whichever happened first.
*   `video_view_15s`: the number of times your video was watched for an aggregate of at least 15 seconds, or for nearly its total length, whichever happened first.
*   `video_view_25_percent`: the number of times your video was watched at 25% of its length, including watches that skipped to this point.
*   `video_view_50_percent`: the number of times your video was watched at 50% of its length, including watches that skipped to this point.
*   `video_view_75_percent`: the number of times your video was watched at 75% of its length, including watches that skipped to this point.

You can combine videos to create an audience based on various videos and actions. For example, an audience could contain 3 second views from video A, and completes from video B and C.

This creates an audience from the past 14 days of 3s+ video viewers of video 1 and completed video viewers of video 2. The audience also autofills for viewers prior to audience creation with `prefill=true`.

```curl
curl \
  -F 'name=Video Ads Engagement Audience' \
  -F 'subtype=ENGAGEMENT' \
  -F 'description=Users who watched my video' \
  -F 'prefill=1' \
  -F 'rule=[ 
  {"object_id":"%video_id_1","event_name":"video_watched"}, 
  {"object_id":"%video_id_2","event_name":"video_completed"} 
  ]' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/customaudiences
```

Backfill is supported for video views after October 16th, 2015.

## Call to Action

Video with Call to Action (CTA) prompts people to learn more and visit a specific page on a website. Improve performance when your primary objective is driving video views or brand awareness and your secondary objective is driving offsite clicks. You should use a video link ad for the latter. How CTAs render:
*   For Mobile and Desktop, shown as part of the post. When the video is paused, it displays next to the **Resume** option.
*   For Mobile, when someone clicks a video to watch in full screen, a floating CTA appears as a video overlay.
*   External video link posts do not display CTAs.

You can use video with CTAs only with the following campaign objectives:
*   `PAGE_LIKES`
*   `LEAD_GENERATION`
*   `LOCAL_AWARENESS`
*   `LINK_CLICKS`
*   `CONVERSIONS`
*   `APP_INSTALLS`
*   `VIDEO_VIEWS`
*   `BRAND_AWARENESS`
*   `Mobile app engagement`

See [Video expansion to Additional Objectives](https://developers.facebook.com/blog/post/2015/07/21/call-to-action-video-ads-for-more-objectives). This creates a video ad with `GET_DIRECTIONS` call to action:

```curl
curl \
  -F 'object_story_spec={ 
  "page_id": "<PAGE_ID>", 
  "video_data": { 
  "call_to_action": { 
  "type": "GET_DIRECTIONS", 
  "value": { 
  "link": "fbgeo:\/\/37.48327, -122.15033, \"1601 Willow Rd Menlo Park CA\"" 
  } 
  }, 
  "image_url": "<THUMBNAIL_URL>", 
  "link_description": "Come check out our new store in Menlo Park!", 
  "video_id": "<VIDEO_ID>" 
  } 
  }' \
  -F 'access_token=<ACCESS_TOKEN>' \
   https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
```

## Video Metrics

### Video Post Insights, Organic

Learn more about how your videos perform on Facebook and make more informed decisions about video content. Currently we only provide metrics when someone starts watching videos. This includes video views, unique video views, the average duration of the video view, and audience retention. See where people drop off in your videos and parts people may find most interesting.

### Video Ad Insights, Paid

Use the [Ad Insights API](https://developers.facebook.com/docs/marketing-api/insights). The response contains various video metrics.

### Video Type

Retrieve video ad stats grouped by video type such as auto-play, click-to-play. Include `action_video_type` in `action_breakdowns`. Expected values for `action_video_type` are `total`, `click_to_play`, and `auto_play`.

We are currently in limited testing for the `action_video_type` option. To identify clients with the breakdown, check `CAN_USE_VIDEO_METRICS_BREAKDOWN` for the ad account.

```curl
curl -G \
  -d 'action_breakdowns=action_video_type' \
  -d 'date_preset=last_30_days' \
  -d 'fields=actions,video_avg_pct_watched_actions,video_complete_watched_actions' \
  -d 'access_token= <ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/insights
```

The response includes objects with `action_type` as `video_view` and contain a key `action_video_type`:

```json
{
  "data": [
    {
      "actions": [
        ...
        {
          "action_type": "video_play", 
          "value": 9898
        }, 
        {
          "action_type": "video_view", 
          "action_video_type": "total", 
          "value": 921129
        }, 
        {
          "action_type": "video_view", 
          "action_video_type": "auto_play", 
          "value": 915971
        }, 
        {
          "action_type": "video_view", 
          "action_video_type": "click_to_play", 
          "value": 5158
        }
      ], 
      "video_avg_pct_watched_actions": [
        {
          "action_type": "video_view", 
          "action_video_type": "total", 
          "value": 60.59
        }, 
        {
          "action_type": "video_view", 
          "action_video_type": "auto_play", 
          "value": 60.47
        }, 
        {
          "action_type": "video_view", 
          "action_video_type": "click_to_play", 
          "value": 80.63
        }
      ], 
      "video_complete_watched_actions": [
        {
          "action_type": "video_view", 
          "action_video_type": "total", 
          "value": 156372
        }, 
        {
          "action_type": "video_view", 
          "action_video_type": "auto_play", 
          "value": 154015
        }, 
        {
          "action_type": "video_view", 
          "action_video_type": "click_to_play", 
          "value": 2357
        }
      ], 
      "date_start": "2014-12-26", 
      "date_stop": "2015-03-25"
    }
  ], 
  "paging": {
    "cursors": {
      "before": "MA==", 
      "after": "MA=="
    }
  }}
```

See [Ad Insights API](https://developers.facebook.com/docs/marketing-api/insights).

## Carousel Ads

Get more creative real-estate in Feed and drive people to your website or mobile app to convert. Create a carousel ad two ways:
*   Create an ad and unpublished page post in one call: [ad creative API](https://developers.facebook.com/docs/marketing-api/reference/ad-creative).
*   Create an unpublished Page post then create an ad creative using the post (not available for video carousel).

Carousel ads is not supported for Facebook Stories.

### Create Inline

Create a carousel ad page post while creating an ad creative. Specify the page post content in `object_story_spec`, which creates an unpublished page post from `adcreatives`. See [ad creatives](https://developers.facebook.com/docs/marketing-api/reference/ad-creative). For example:

```curl
curl \
  -F 'name=Sample Creative' \
  -F 'object_story_spec={ 
    "link_data": { 
      "child_attachments": [ 
        { 
          "description": "$8.99", 
          "image_hash": "<IMAGE_HASH>", 
          "link": "https:\/\/www.link.com\/product1", 
          "name": "Product 1", 
          "video_id": "<VIDEO_ID>" 
        }, 
        { 
          "description": "$9.99", 
          "image_hash": "<IMAGE_HASH>", 
          "link": "https:\/\/www.link.com\/product2", 
          "name": "Product 2", 
          "video_id": "<VIDEO_ID>" 
        }, 
        { 
          "description": "$10.99", 
          "image_hash": "<IMAGE_HASH>", 
          "link": "https:\/\/www.link.com\/product3", 
          "name": "Product 3" 
        } 
      ], 
      "link": "<URL>" 
    }, 
    "page_id": "<PAGE_ID>" 
  }' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
```

The response is a creative ID:

`{"id":"<CREATIVE_ID>"}`

### Create Post, then Ad

Create an unpublished Page post. `child_attachments` is an array of link objects. On each link object, `picture`, `name` and `description` are optional. You can post these as by the Page only with a Page access token.

```curl
curl -X GET \
  -d 'message="Browse our latest products"' \
  -d 'published=0' \
  -d 'child_attachments=[
       {
         "link": "<APP_STORE_URL>",
         "name": "Product 1",
         "description": "$4.99",
         "image_hash": "<IMAGE_HASH>"
       },
       {
         "link": "<APP_STORE_URL>",
         "name": "Product 2",
         "description": "$4.99",
         "image_hash": "<IMAGE_HASH>"
       },
       {
         "link": "<APP_STORE_URL>",
         "name": "Product 3",
         "description": "$4.99",
         "image_hash": "<IMAGE_HASH>"
       },
       {
         "link": "<APP_STORE_URL>",
         "name": "Product 4",
         "description": "$4.99",
         "image_hash": "<IMAGE_HASH>"
       }
     ]' \
  -d 'caption="WWW.EXAMPLE.COM"' \
  -d 'link="http://www.example.com/products"' \
  -d 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/<PAGE_ID>/posts
```

Then, provide ad creative with the unpublished Page post. Use the `id` for the `object_story_id` in your ad creative.

```curl
curl -X POST \
  -F 'object_story_id="<PAGE_ID>_<POST_ID>"' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
```

### Create Video Carousel Ad

Video carousel ads can have 'caption' in the child attachment to customize the display URL on the end screen:

```
"child_attachments": [
 {
   "link": "https://www.facebookmarketingdevelopers.com/",
   "name": "Facebook Marketing Developers",
   "description": "Facebook Marketing Developers",
   "call_to_action": {
     "type": "APPLY_NOW",
     "value": {
      "link_title": "Facebook Marketing Developers"
     }
   },
   "video_id": "123",
   "caption": "mycustomlinkcaption.com"
  },]
```

To get child attachments details, use ID and call Graph API, [Video, Reference](https://developers.facebook.com/docs/graph-api/reference/video).

### Create Mobile App Ad

Limitations:
*   Carousel mobile app ads support only one app
*   Minimum of 3 images compared to 2 on non-app ad carousel ads
*   Carousel mobile app ads must have a call to action
*   The end card which typically displays the page's profile photo will not display for carousel mobile app ads. Note that you should specify the same app store link in each `child_attachment`. You do not have to specify the link again in the `call_to_action:{'value':{'link':... }}}`

For example, to create a carousel ad for mobile app installs:

```curl
curl -X POST \
  -F 'name="Carousel app ad"' \
  -F 'object_story_spec={
       "page_id": "<PAGE_ID>",
       "link_data": {
         "message": "My message",
         "link": "http://www.example.com/appstoreurl",
         "caption": "WWW.ITUNES.COM",
         "name": "The link name",
         "description": "The link description",
         "child_attachments": [
           {
             "link": "http://www.example.com/appstoreurl",
             "image_hash": "<IMAGE_HASH>",
             "call_to_action": {
               "type": "USE_MOBILE_APP",
               "value": {
                 "app_link": "<DEEP_LINK>"
               }
             }
           },
           {
             "link": "http://www.example.com/appstoreurl",
             "image_hash": "<IMAGE_HASH>",
             "call_to_action": {
               "type": "USE_MOBILE_APP",
               "value": {
                 "app_link": "<DEEP_LINK>"
               }
             }
           },
           {
             "link": "http://www.example.com/appstoreurl",
             "image_hash": "<IMAGE_HASH>",
             "call_to_action": {
               "type": "USE_MOBILE_APP",
               "value": {
                 "app_link": "<DEEP_LINK>"
               }
             }
           },
           {
             "link": "http://www.example.com/appstoreurl",
             "image_hash": "<IMAGE_HASH>",
             "call_to_action": {
               "type": "USE_MOBILE_APP",
               "value": {
                 "app_link": "<DEEP_LINK>"
               }
             }
           }
         ],
         "multi_share_optimized": true
       }
     }' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
```

You can only publish your post as the Facebook Page associated with the mobile app. And you must use a Page access token.

```curl
curl \
  -F 'message=My description' \
  -F 'link=<APP_STORE_URL>' \
  -F 'caption=WWW.ITUNES.COM' \
  -F 'child_attachments=[ 
    { 
      "link": "<APP_STORE_URL>", 
      "image_hash": "<IMAGE_HASH_I>", 
      "call_to_action": { 
        "type": "USE_MOBILE_APP", 
        "value": {"app_link":"<DEEP_LINK_I>","link_title":"<LINK_TITLE_I>"} 
      } 
    }, 
    { 
      "link": "<APP_STORE_URL>", 
      "image_hash": "<IMAGE_HASH_I>", 
      "call_to_action": { 
        "type": "USE_MOBILE_APP", 
        "value": {"app_link":"<DEEP_LINK_I>","link_title":"<LINK_TITLE_I>"} 
      } 
    }, 
    { 
      "link": "<APP_STORE_URL>", 
      "image_hash": "<IMAGE_HASH_I>", 
      "call_to_action": { 
        "type": "USE_MOBILE_APP", 
        "value": {"app_link":"<DEEP_LINK_I>","link_title":"<LINK_TITLE_I>"} 
      } 
    }, 
    { 
      "link": "<APP_STORE_URL>", 
      "image_hash": "<IMAGE_HASH_I>", 
      "call_to_action": { 
        "type": "USE_MOBILE_APP", 
        "value": {"app_link":"<DEEP_LINK_I>","link_title":"<LINK_TITLE_I>"} 
      } 
    } 
  ]' \
  -F 'multi_share_optimized=1' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/<PAGE_ID>/feed
```

Use the `id` from the response to create the `AdCreative`:

```curl
curl -X POST \
  -F 'object_story_id="<PAGE_ID>_<POST_ID>"' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
```

## Field Specification

This is a Carousel Ad on iOS, showing how fields described are used.

| Name | Description |
| :--- | :--- |
| `child_attachments` | **type: object** A 2-10 element array of link objects required for carousel ads. You should use at least 3 objects for optimal performance; 2 objects is for enabling lightweight integrations and using 2 objects can result in sub-optimal campaign results. |
| `child_attachments.link` | **type: string** Link URL or app store URL attached to the post. Required. |
| `child_attachments.picture` | **type: URL** Preview image associated with the link. 1:1 aspect ratio and a minimum of 458 x 458 px for best display. Either `picture` or `image_hash` must be specified. |
| `child_attachments.image_hash` | **type: string** Hash of preview image associated with the link from your image library; use 1:1 aspect ratio and a minimum of 458 x 458 px for best display. Either `picture` or `image_hash` must be specified. |
| `child_attachments.name` | **type: string** Title of link preview. If not specified, title of the linked page used. Typically truncated after 35 characters. You should set a unique name, since Facebook interfaces show actions reported by name. |
| `child_attachments.description` | **type: string** Either a price, discount or website domain. If not specified, content from the linked page is extracted and used. Typically truncated after 30 characters. |
| `child_attachments.call_to_action` | **type: object** Optional call to action. See [Call To Action](#call-to-action). You do not have to specify the link again in `call_to_action:{'value':{'link':... }}}` |
| `child_attachments.video_id` | **type: string** ID of the ad video. Can be used in any child-element. If specified, must also set `image_hash` or `picture`. |
| `message` | **type: string** Main body of post, also called the status message. |
| `link` | **type: string** URL of a link to "See more". Required. |
| `caption` | **type: string** URL to display in the "See more" link. Not applicable for carousel mobile app ads |
| `multi_share_optimized` | **type: boolean** If set to `true`, automatically select and order images and links. Otherwise use original order of child elements. Defaults to `true`. |
| `multi_share_end_card` | **type: boolean** If set to `false`, removes the end card which displays the page icon. Default is `true`. |

## Per-Product Ad Statistics

Group actions for Carousel ads by each product with `actions_breakdown=['action_carousel_card_id', 'action_carousel_card_name']`. Each child_attachment has a different card ID. `action_carousel_card_id` and `action_carousel_card_name` is only for Carousel ads.

Get the following stats per card:
*   `website_ctr`: available when specifying `fields=['website_ctr']`
*   `app_install`, `app_use`, `apps.uses`, `credit_spent`, `mobile_app_install`, `tab_view`, `link_click`, `mobile_app_install`, `app_custom_event.*`, `offsite_conversion.*`: available when specifying `fields=['actions']`. Other actions are not available with a card breakdown.

```curl
curl -G \
  -d 'action_breakdowns=["action_type","action_carousel_card_id"]' \
  -d 'level=ad' \
  -d 'date_preset=last_30_days' \
  -d 'time_increment=all_days' \
  -d 'breakdowns=placement' \
  --data-urlencode 'filtering=[ 
    { 
      "field": "action_type", 
      "operator": "IN", 
      "value": ["link_click"] 
    } 
  ]' \
  -d 'fields=impressions,inline_link_clicks,actions,website_ctr' \
  -d 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/insights
```

Response:

```json
{...
   "website_ctr": [
      {
         "action_carousel_card_id": "1",
         "action_type": "link_click",
         "value": 51.401869158878
      },
      {
         "action_carousel_card_id": "2",
         "action_type": "link_click",
         "value": 50.980392156863
      }
   ],
   "placement": "mobile_feed",
   "date_start": "2015-05-25",
   "date_stop": "2015-05-28"}
```

You can also request `cost_per_action_type` for a breakdown of costs by action type:

```curl
curl -G \
  -d 'action_breakdowns=["action_type","action_carousel_card_name"]' \
  -d 'level=ad' \
  -d 'breakdowns=placement' \
  -d 'fields=impressions,campaign_name,cost_per_action_type' \
  -d 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/insights
```

Sample response:

```json
{
   "data": [
      {
         "impressions": "1862555",
         "campaign_name": "My Campaign",
         "cost_per_action_type": [
            {
               "action_carousel_card_name": "My Carousel Card 1",
               "action_type": "app_custom_event.fb_mobile_activate_app",
               "value": 0.093347346315861
            },
            {
               "action_carousel_card_name": "My Carousel Card 2",
               "action_type": "app_custom_event.fb_mobile_activate_app",
               "value": 0.38324089579301
            },
            ...
         ],
      }
   ]}
```

Carousel breakdown metrics for `action_report_time=impression` are inaccurate before June 20th, 2015.

Carousel breakdown metrics for `action_report_time=conversion` are inaccurate before July 20th, 2015.

## Placements

If you only select `right_hand_column` as your placement, you can only use a single-video or carousel format in your ad group. We do not support the video format with a only a `right_hand_column` placement selected. See [Advanced Targeting and Placement](https://www.facebook.com/business/help/1288599478479574).

For example, create an ad set with `right_hand_column` as your only placement:

```curl
curl \
  -F 'name=RHS only Ad Set' \
  -F 'campaign_id=<CAMPAIGN_ID>' \
  -F 'daily_budget=500' \
  -F 'start_time=2017-11-21T15:41:36+0000' \
  -F 'end_time=2017-11-28T15:41:36+0000' \
  -F 'billing_event=IMPRESSIONS' \
  -F 'optimization_goal=LINK_CLICKS' \
  -F 'bid_amount=100' \
  -F 'targeting={ 
    "device_platforms": ["mobile"], 
    "geo_locations": {"countries":["US"]}, 
    "publisher_platforms": ["facebook"] ,
    "facebook_positions": ["right_hand_column"] ,  
  }' \
  -F 'status=PAUSED' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adsets
```

Provide an ad creative with video:

```curl
curl \
  -F 'name=Sample Creative' \
  -F 'object_story_spec={ 
    "page_id": "<PAGE_ID>", 
    "video_data": {"image_url":"<THUMBNAIL_URL>","video_id":"<VIDEO_ID>"} 
  }' \
  -F 'access_token=ACCESS_TOKEN' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
```

Or provide a canvas ad format for ad creative:

```curl
curl \
  -F 'image_hash=<IMAGE_HASH>' \
  -F 'object_story_spec={ 
    "link_data": { 
      "call_to_action": {"type":"LEARN_MORE"}, 
      "image_hash": "<IMAGE_HASH>", 
      "link": "CANVAS_LINK", 
      "name": "Creative message" 
    }, 
    "page_id": "<PAGE_ID>" 
  }' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
```

If you try to create an ad with the ad set and ad creative:

```curl
curl \
  -F 'name=My Ad' \
  -F 'adset_id=<AD_SET_ID>' \
  -F 'creative={"creative_id":"<CREATIVE_ID>"}' \
  -F 'status=ACTIVE' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/ads
```

In case you get an error code, you should provide a supported creative or change your targeting.

# Publishing

The Video API allows you to publish Videos and Reels on Facebook Pages.

## Requirements

To publish a video on a Page you will need:
*   A Page access token requested by a person who can perform the `CREATE_CONTENT` task on the Page
*   The person requesting the token must grant your app access to the following permissions via Facebook Login:
    *   `pages_show_list`
    *   `pages_read_engagement`
    *   `pages_manage_posts`
*   A video handle
    *   This handle is received when you upload your video file to Meta servers using the [Resumable Upload API](#upload-a-file)

## Publish a video

To publish a video send a `POST` request to the `/<PAGE_ID>/videos` endpoint with

```curl
curl -X POST \
  "https://graph-video.facebook.com/v24.0/<PAGE_ID>/videos" \
  -F "access_token=<PAGE_ACCESS_TOKEN>" \
  -F "title=<VIDEO_TITLE>" \
  -F "description=<VIDEO_DESCRIPTION>" \ 
  -F "fbuploader_video_file_chunk=<UPLOADED_FILE_HANDLE>"
```

On success, your app receives a JSON response with the Video ID.

```json
{
  "id":"<VIDEO_ID>"}
```

## Upload a video file

The following content is from the [Resumable Upload API documentation](https://developers.facebook.com/docs/graph-api/guides/upload/#resumable-upload).

### Upload a file

The Resumable Upload API allows you to upload large files to Meta's social graph and resume interrupted upload sessions without having to start over. Once you have uploaded your file, you can publish it.

References for endpoints that support uploaded file handles will indicate if the endpoints support handles returned by the Resumable Upload API.

#### Before you start

This guide assumes you have read the [Graph API Overview](https://developers.facebook.com/docs/graph-api/overview/) and the [Meta Development guides](https://developers.facebook.com/docs/development/) and performed the necessary actions needed to develop with Meta.

You will need:
*   A Meta app ID
*   A file in one of the following formats:
    *   `pdf`
    *   `jpeg`
    *   `jpg`
    *   `png`
    *   `mp4`
*   A User access token

#### Step 1: Start an upload session

To start an upload session send a `POST` request to the `/<APP_ID>/uploads` endpoint, where `<APP_ID>` is your app's Meta ID, with the following required parameters:
*   `file_name` - the name of your file
*   `file_length` - file size in bytes
*   `file_type` - The file's MIME type. Valid values are: `application/pdf`, `image/jpeg`, `image/jpg`, `image/png`, and `video/mp4`

**Request Syntax**

Formatted for readability.

```curl
curl -i -X POST "https://graph.facebook.com/v24.0/<APP_ID>/uploads
  ?file_name=<FILE_NAME>
  &file_length=<FILE_LENGTH>
  &file_type=<FILE_TYPE>
  &access_token=<USER_ACCESS_TOKEN>"
```

Upon success, your app will receive a JSON response with the upload session ID.

```json
{
  "id": "upload:<UPLOAD_SESSION_ID>"}
```

#### Step 2: Start the upload

Start uploading the file by sending a `POST` request to the `/upload:<UPLOAD_SESSION_ID>` endpoint with the following `file_offset` set to `0`.

**Request Syntax**

```curl
curl -i -X POST "https://graph.facebook.com/v24.0/upload:<UPLOAD_SESSION_ID>"
  --header "Authorization: OAuth <USER_ACCESS_TOKEN>"
  --header "file_offset: 0"
  --data-binary @<FILE_NAME>
```

You must include the access token in the header or the call will fail.

On success, your app receives the file handle which you will use in your API calls to publish the file to your endpoint.

```json
{
  "h": "<UPLOADED_FILE_HANDLE>"}
```

**Sample Response**

```json
{
    "h": "2:c2FtcGxl..."}
```

#### Resume an interrupted upload

If you have initiated an upload session but it is taking longer than expected or has been interrupted, send a `GET` request to the `/upload:<UPLOAD_SESSION_ID>` endpoint from Step 1.

```curl
curl -i -X GET "https://graph.facebook.com/v24.0/upload:<UPLOAD_SESSION_ID>"
  --header "Authorization: OAuth <USER_ACCESS_TOKEN>"
```

Upon success, your app will receive a JSON response with the `file_offset` value that you can use to resume the upload process from the point of interruption.

```json
{
  "id": "upload:<UPLOAD_SESSION_ID>"
  "file_offset": "<FILE_OFFSET>"}
```

Send another `POST` request, like the you sent in Step 2, with `file_offset` set to this `file_offset` value you just received. This will resume the upload process from the point of interruption.

```curl
curl -i -X POST "https://graph.facebook.com/v24.0/upload:<UPLOAD_SESSION_ID>"
  --header "Authorization: OAuth <USER_ACCESS_TOKEN>"
  --header "file_offset: <FILE_OFFSET>"
  --data-binary @<FILE_NAME>
```

### Next Steps

Visit the [Video API documentation](#publishing-1) to publish a video to a Facebook Page.

# Publishing

The Video API allows you to publish Videos and Reels on Facebook Pages.

## Requirements

To publish a video on a Page you will need:
*   A Page access token requested by a person who can perform the `CREATE_CONTENT` task on the Page
*   The person requesting the token must grant your app access to the following permissions via Facebook Login:
    *   `pages_show_list`
    *   `pages_read_engagement`
    *   `pages_manage_posts`
*   A video handle
    *   This handle is received when you upload your video file to Meta servers using the [Resumable Upload API](#upload-a-file-1)

## Publish a video

To publish a video send a `POST` request to the `/<PAGE_ID>/videos` endpoint with

```curl
curl -X POST \
  "https://graph-video.facebook.com/v24.0/<PAGE_ID>/videos" \
  -F "access_token=<PAGE_ACCESS_TOKEN>" \
  -F "title=<VIDEO_TITLE>" \
  -F "description=<VIDEO_DESCRIPTION>" \ 
  -F "fbuploader_video_file_chunk=<UPLOADED_FILE_HANDLE>"
```

On success, your app receives a JSON response with the Video ID.

```json
{
  "id":"<VIDEO_ID>"}
```

## Upload a video file

The following content is from the [Resumable Upload API documentation](https://developers.facebook.com/docs/graph-api/guides/upload/#resumable-upload).

### Upload a file

The Resumable Upload API allows you to upload large files to Meta's social graph and resume interrupted upload sessions without having to start over. Once you have uploaded your file, you can publish it.

References for endpoints that support uploaded file handles will indicate if the endpoints support handles returned by the Resumable Upload API.

#### Before you start

This guide assumes you have read the [Graph API Overview](https://developers.facebook.com/docs/graph-api/overview/) and the [Meta Development guides](https://developers.facebook.com/docs/development/) and performed the necessary actions needed to develop with Meta.

You will need:
*   A Meta app ID
*   A file in one of the following formats:
    *   `pdf`
    *   `jpeg`
    *   `jpg`
    *   `png`
    *   `mp4`
*   A User access token

#### Step 1: Start an upload session

To start an upload session send a `POST` request to the `/<APP_ID>/uploads` endpoint, where `<APP_ID>` is your app's Meta ID, with the following required parameters:
*   `file_name` - the name of your file
*   `file_length` - file size in bytes
*   `file_type` - The file's MIME type. Valid values are: `application/pdf`, `image/jpeg`, `image/jpg`, `image/png`, and `video/mp4`

**Request Syntax**

Formatted for readability.

```curl
curl -i -X POST "https://graph.facebook.com/v24.0/<APP_ID>/uploads
  ?file_name=<FILE_NAME>
  &file_length=<FILE_LENGTH>
  &file_type=<FILE_TYPE>
  &access_token=<USER_ACCESS_TOKEN>"
```

Upon success, your app will receive a JSON response with the upload session ID.

```json
{
  "id": "upload:<UPLOAD_SESSION_ID>"}
```

#### Step 2: Start the upload

Start uploading the file by sending a `POST` request to the `/upload:<UPLOAD_SESSION_ID>` endpoint with the following `file_offset` set to `0`.

**Request Syntax**

```curl
curl -i -X POST "https://graph.facebook.com/v24.0/upload:<UPLOAD_SESSION_ID>"
  --header "Authorization: OAuth <USER_ACCESS_TOKEN>"
  --header "file_offset: 0"
  --data-binary @<FILE_NAME>
```

You must include the access token in the header or the call will fail.

On success, your app receives the file handle which you will use in your API calls to publish the file to your endpoint.

```json
{
  "h": "<UPLOADED_FILE_HANDLE>"}
```

**Sample Response**

```json
{
    "h": "2:c2FtcGxl..."}
```

#### Resume an interrupted upload

If you have initiated an upload session but it is taking longer than expected or has been interrupted, send a `GET` request to the `/upload:<UPLOAD_SESSION_ID>` endpoint from Step 1.

```curl
curl -i -X GET "https://graph.facebook.com/v24.0/upload:<UPLOAD_SESSION_ID>"
  --header "Authorization: OAuth <USER_ACCESS_TOKEN>"
```

Upon success, your app will receive a JSON response with the `file_offset` value that you can use to resume the upload process from the point of interruption.

```json
{
  "id": "upload:<UPLOAD_SESSION_ID>"
  "file_offset": "<FILE_OFFSET>"}
```

Send another `POST` request, like the you sent in Step 2, with `file_offset` set to this `file_offset` value you just received. This will resume the upload process from the point of interruption.

```curl
curl -i -X POST "https://graph.facebook.com/v24.0/upload:<UPLOAD_SESSION_ID>"
  --header "Authorization: OAuth <USER_ACCESS_TOKEN>"
  --header "file_offset: <FILE_OFFSET>"
  --data-binary @<FILE_NAME>
```

# Get Facebook Videos using the Facebook Video API

This document shows you how to get Video data, such as IDs, description, and updated times, for videos published on Facebook Pages or User Feeds.

## Get Page Videos

### Before You Start

For Pages on which you are able to perform the `MANAGE` task, you will need:
*   A Page access token requested by a person who can perform the `MANAGE` task on the Page
*   The `pages_read_engagement` permission

For published Pages, which you are not able to perform the `MANAGE` task, you will need:
*   A User access token
*   The [Page Public Content Access](https://developers.facebook.com/docs/pages/access-api#page_public_content_access)

Send a `GET` request to the `/<PAGE_ID>/videos` endpoint to get a list of all videos of a Page.

```curl
curl -i -X GET "https://graph.facebook.com/&lt;PAGE_ID>/videos?access_token=&lt;PAGE_ACCESS_TOKEN>"
```

On success, your app receives the following response:

```json
{
  "data": [
    {
      "description": "Clouds",
      "updated_time": "2019-09-25T17:18:30+0000",
      "id": "2153206464921154"
    },
    {
      "updated_time": "2020-03-26T23:45:11+0000",
      "id": "2232477747039197"
    },
    ...
  ],
  "paging": {
    "cursors": {
      "before": "MjE1MzIwNjQ2NDkyMTE1NAZDZD",
      "after": "MTQwOTU5MTg4NTc2MzM0MwZDZD"
    }
  }}
```

## Get User Videos

### Before You Start

You will need:
*   A User access token requested by the User who owns the video
*   The `user_videos` permission

Send a `GET` request to the `/{user-id}/videos?type=uploaded` to get all videos a person has uploaded or `/{user-id}/videos?type=tagged` to get all videos a person has been tagged in.

```curl
curl -i -X GET "https://graph.facebook.com/{user-id}/videos
  ?type=uploaded
  &access_token={user-access-token}"
```

On success, your app receives the following response:

```json
{
  "data": [
    {
      "description": "Rain",
      "updated_time": "2020-05-18T20:07:47+0000",
      "id": "{video-id-1}"
    },
    {
      "updated_time": "2020-05-20T12:26:19+0000",
      "id": "{video-id-2}"
    },
    ...
  ]
  "paging": {
    "cursors": {
      "before": "...",
      "after": "..."
    }
  }}
```

### Limitations

By default, a `GET` request without a `type` specified will return videos a person was tagged in.

If no description is returned, the video post contained no accompanying text.

# FB Video Ads

## Prerequisites

Publishing a video to an Ad Market account requires an appropriate access token and permissions. While testing you can easily generate tokens and grant your app permissions by using the Graph API Explorer. Refer to our [Get Started guide](#get-started-with-the-marketing-api) for this.

When your app is ready for production, implement [Facebook Login](https://developers.facebook.com/docs/facebook-login) to get tokens and permissions from your app users. This guide assumes you have implemented the required components and successfully followed the Get Started guide.

For a user who can perform tasks on an ad account, you will need to implement [Facebook Login](https://developers.facebook.com/docs/facebook-login) to ask for the following permissions and receive a user access token:
*   `ads_read`
*   `ads_management`

If using a business system user in your API requests, note that uploading videos to business accounts is not yet supported.

Your app user must be able to perform the `CREATE_CONTENT` task on the ad account in the API requests.

## Best Practices

When testing an API call, you can include the `access_token` parameter set to your access token. However, when making secure calls from your app, use the access token class.

## Upload Video Ads

Publishing video ads involves the Resumable (non-chunking) protocol.

Only uploading videos to ad accounts is supported. Uploading videos to business accounts is not supported yet.

| Step | API |
| :--- | :--- |
| Initialize | `act_<PAYMENT_ACCOUNT_ID>/video_ads?upload_phase=start` |
| Upload | `rupload.facebook.com/video-ads-upload/v24.0/<VIDEO_ID>` |
| Status | `/<VIDEO_ID>?fields=status` |
| Publish | `act_<PAYMENT_ACCOUNT_ID>/video_ads?upload_phase=finish` |

### Video Specifications

| Property | Specification |
| :--- | :--- |
| **File Type** | MP4 (recommended) |
| **Aspect Ratio** | 16:9 (Landscape) to 9:16 (Portrait) |
| **Maximum File Size** | Up to 10 GB recommended. Larger file sizes may experience longer upload and processing times. |
| **Minimum Width** | 1200 pixels |
| **Resolution** | 1280x720 (recommended) |
| **Frame Rate** | 24 to 60 frames per second |
| **Video Settings** | Chroma subsampling 4:2:0 |
| | Closed GOP (2-5 seconds) |
| | Compression – H.264, H.265 (VP9, AV1 are also supported) |
| | Fixed frame rate |
| | Progressive scan |
| **Audio Settings** | Audio bitrate – 128kbs+ |
| | Channels – Stereo |
| | Codec – AAC Low Complexity |
| | Sample rate – 48kHz |

### Step 1: Initialize Upload Session

To initialize a video upload session, send a `POST` request to the `act_<PAYMENT_ACCOUNT_ID>/video_ads` endpoint with the `upload_phase` parameter set to `start`.

**Example Request**

```curl
curl -X POST "https://graph.facebook.com/v24.0/act_<PAYMENT_ACCOUNT_ID>/video_ads" \
  -F "upload_phase=start" \
  -F "access_token=<ACCESS_TOKEN>"
```

On success, your app receives a JSON response with the ID for the video and the Facebook URL for uploading the video. This video ID will be used in subsequent steps.

**Example Response**

```json
{
  "video_id": "<VIDEO_ID>",
  "upload_url": "https://rupload.facebook.com/video-ads-upload/v24.0/<VIDEO_ID>",
}      
```

### Step 2: Upload Video

The video you want to upload can either be a local file on your device or a URL. If using a URL, it must be hosted on a public facing http/https server, such as a CDN.

#### Upload a local file

To upload a local file, send a `POST` request to the `upload_url` endpoint you received in step 1 with the following parameters:
*   `offset` set to `0`
*   `file_size` set to the total size in bytes of the video being uploaded

**Example Request**

```curl
curl -X POST "https://rupload.facebook.com/video-ads-upload/v24.0/<VIDEO_ID>" \
  -H "Authorization: OAuth <ACCESS_TOKEN>" \
  -H "offset: 0" \
  -H "file_size: 73400320" \
  --data-binary "@/path/to/file/my_video_file.mp4"
```

On success, your app receives a JSON response with the ID for the video and the Facebook URL for uploading the video. This video ID will be used in subsequent steps.

**Example Response**

```json
{
    "success": true
}
```

**Headers**

| Name | Description |
| :--- | :--- |
| `authorization` | Should contain `OAuth {access-token}` |
| `offset` | The byte offset of the first byte being uploaded in this request. Generally should be set to 0, unless resuming an interrupted upload. If resuming an interrupted upload, set to the offset returned by `/status` |
| `file_size` | The total size in bytes of the video being uploaded |
| `file_url` | The url for the publicly hosted video. Supported protocols are http and https. Other protocols, and urls requiring authentication are not currently supported. |

#### Resume Interrupted File Upload

If the video upload is interrupted, it can be resumed by repeating the `POST` request with `offset` set to the `bytes_transfered` value from a `GET /status` endpoint. You can also restart the upload by setting the offset to `0`. This can be done by first retrieving the upload byte offset from the status endpoint, and then uploading the remaining bytes using the upload URL.

The `offset` header should be set to the offset/bytes_transferred value received from the status endpoint, or set to 0 to restart from the beginning of the upload. The file bytes sent in the subsequent request should start with the byte at “offset” (zero-based).

#### Upload Hosted Files

This method can be used when the video to upload is hosted on a public facing http/https server, such as a CDN.

**Example Request**

```curl
curl -X POST "https://rupload.facebook.com/video-ads-upload/v24.0/<VIDEO_ID>" \
  -H "Authorization: OAuth <ACCESS_TOKEN>" \
  -H "file_url: https://some.cdn.url/video.mp4"
```

### Step 3: Retrieve Upload Session Status (Optional)

You can retrieve the status of a publishing operation by sending a `GET` request for the `status` field on the video.

*   **Host:** `graph.facebook.com`
*   **Endpoint:** `/v24.0/<VIDEO_ID>?fields=status`

**Response**

The response will be a JSON object that includes a `status` field. The `status` field will include the following nested fields:

| Name | Description |
| :--- | :--- |
| `video_status` | The overall status of the upload and processing. |
| `uploading_phase` | This structure contains information about progress through the uploading phase.The `bytes_transferred` field can be used in conjunction with the upload endpoint to resume an interrupted upload. |
| `processing_phase` | This structure contains information about progress through the processing phase. This phase encompasses generating alternate media encodings, thumbnails, and other assets necessary for publishing. |
| `publishing_phase` | This structure contains information about progress through the publishing phase. This phase encompasses adding the video to the ad account. |

**Example Request**

```curl
curl -X GET "https://graph.facebook.com/v24.0/<VIDEO_ID>" \
  -H "Authorization: OAuth <ACCESS_TOKEN" \
  -d "fields=status"
```

**Example Response**

```json
{
  "status": {
    "video_status": "processing", // ready, processing, expired, error
    "uploading_phase": {
      "status": "in_progress", // not_started, in_progress, complete, error
      "bytes_transfered": 50002  // bytes received (also 'offset')
    },
    "processing_phase": {
      "status": "not_started"
    }
    "publishing_phase": {
      "status": "not_started",
      "publish_status": "publish",
      "publish_time": 234523452 // publish time (unix)
    }
  }
}
```

### Step 4: Publish Video to Ad Account

When you end the upload session, we will encode the video and publish it to the ad account. To end the upload session and publish your video, send a `POST` request to `video_ads` endpoint on the corresponding ad account node.

*   **Host:** `graph.facebook.com`
*   **Endpoint:** `/v24.0/act_<PAYMENT_ACCOUNT_ID>/video_ads`

The response will be a JSON object that indicates whether the request was successful.

| Field | Required | Comments |
| :--- | :--- | :--- |
| `video_id` | yes | Values: `{video-id}` as returned from Initialize step |
| `upload_phase` | yes | Values: `finish` |

**Example Request**

```curl
curl -X POST "https://graph.facebook.com/video-ads-upload/v24.0/act_<PAYMENT_ACCOUNT_ID>/video_ads" \
  -F "upload_phase=finish" \
  -F 'video_id=<VIDEO_ID>' \
  -F "access_token=<ACCESS_TOKEN>"
```

**Example Response**

```json
{
  "success": true,
}
```

## Get Video Ads

To get a list of all videos for an ad account, send a `GET` request to the `act_<PAYMENT_ACCOUNT_ID>/video_ads` endpoint where `PAYMENT_ACCOUNT_ID` is the ID for the payment account you want to view.

**Example Request**

```curl
curl -X GET "https://graph.facebook.com/v24.0/act_<PAYMENT_ACCOUNT_ID>/video_ads" \
  -F "access_token=<ACCESS_TOKEN>"
```

**Example Response**

```json
{
  "data": [
    {
      "updated_time": "unix_timestamp",
      "id": "video_id",
    }
  ]
}
```

### Filters (Optional)

| Name | Description |
| :--- | :--- |
| `since` | Start date/time for querying reels for a particular timestamp. |
| | **Permitted formats:** |
| | Epoch timestamps such as `1676057525` |
| | Dates such as `dd mmm yyyy` (10 jan 2023), `yyyy-mm-dd` (2023-01-10), `dd-mmm-yyyy` (10-jan-2023) |
| | Words like `today`, `yesterday`, etc. |
| `until` | End date/time for querying reels for a particular timestamp. |
| | **Permitted formats:** |
| | Epoch timestamps such as `1676057525` |
| | Dates such as `dd mmm yyyy` (10 jan 2023), `yyyy-mm-dd` (2023-01-10), `dd-mmm-yyyy` (10-jan-2023) |
| | Words like `today`, `yesterday`, etc. |

# Collection Ads

The collection ad format includes an Instant Experience and makes it easier for people to discover, browse, and purchase products and services from their mobile device in a visual and immersive way. The in-feed ad will feature three products under a hero image or video that opens into a full-screen Instant Experience when someone interacts with your ad.

You can create an ad with the collection format by building an Instant Experience. Start with a template or choose your own customized layout.

You can also include Facebook's ad creation user interfaces for the collection format in your website using the [JavaScript SDK](https://developers.facebook.com/docs/javascript) to create a [Collections Ads Dialog](#collection-ads-dialog).

To create collections used in Shops or to add metadata to a product set, see [Commerce Platform: Product Set Collection API](https://developers.facebook.com/docs/commerce_platforms/reference/product_set_collection).

Consider all references of "Canvas" to represent Instant Experience as Canvas is the previous name for this format.

## Supported Objectives and Placements

**Objectives**

You can use collection ads with the following objectives:
*   Traffic
*   Conversions
*   Product Catalog Sales (Supported when you use collections with a product set.)
*   Store Visits (Supported when you use collections with a product set.)
*   Brand Awareness
*   Reach

For Traffic and Conversions objectives, you can also use slideshow videos. See [How to choose the right ad objective in Meta Ads Manager](https://www.facebook.com/business/help/1638361099719361) for more information.

**Placements**

The following placements are supported:
*   Facebook Feed
*   Facebook Reels
*   Instagram Feed
*   Instagram Stories

For more information about placements, see [About ad placements across Meta technologies](https://www.facebook.com/business/help/105436669809983) and [Available ad placements and ad formats by ad objectives](https://www.facebook.com/business/help/1701355410141643).

## Standard Collection Ads Creatives

You can use a template as a quick way to create an Instant Experience for a specific business goal. The layout for each template is fixed; however, you can replace the default content with your own images, videos, products, text and links.

There are two types of collection ads with Instant Experiences: image-based and video-based, depending on the asset you provide. Once you have an ad creative, you can create an ad.

### Create an Image-Based Ad Creative

```curl
curl 
  -F 'name=Instant Experiences Collection Sample Image Creative' 
  -F 'object_story_spec={ 
    "link_data": {
      "link": "https://fb.com/canvas_doc/<ELIGIBLE_CANVAS_ID>", 
      "message": "<AD_MESSAGE>", 
      "name": "<NAME>", 
      "picture": "<IMAGE_URL>", 
      "collection_thumbnails": [
        {"element_crops": {"100x100": [[0, 0], [100, 100]]},"element_id": "<PHOTO_ELEMENT_WITH_PRODUCT_TAGS_ID>",},
        {"element_child_index": 0,"element_id": "",},
        {"element_child_index": 1,"element_id": "<PRODUCT_LIST_ELEMENT_ID>",},
      ],
    }, 
    "page_id": "<PAGE_ID>" 
  }' 
  -F 'access_token=<ACCESS_TOKEN>' 
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
```

### Create a Video-Based Ad Creative

```curl
curl 
  -F 'name=Instant Experiences Collection Sample Video Creative' 
  -F 'object_story_spec={ 
    "page_id": "<PAGE_ID>", 
    "video_data": { 
      "call_to_action": {
        "type":"LEARN_MORE",
        "value":{
          "link":"https://fb.com/canvas_doc/<ELIGIBLE_CANVAS_ID>"
        }
      }, 
      "image_url": "<IMAGE_URL>",
      "collection_thumbnails": [
        {"element_crops": {"100x100": [[0, 0], [100, 100]]},"element_id": "<PHOTO_ELEMENT_NO_PRODUCT_TAGS_ID>",},
        {"element_child_index": 0,"element_id": "<PHOTO_ELEMENT_WITH_PRODUCT_TAGS_ID>",},
        {"element_child_index": 1,"element_id": "<PRODUCT_LIST_ELEMENT_ID>",},
      ],
      "title": "<VIDEO_TITLE>", 
      "video_id": "<VIDEO_ID>" 
    } 
  }' 
  -F 'access_token=<ACCESS_TOKEN>' 
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
```

### Parameters

| Name | Description |
| :--- | :--- |
| `link` | `string` | Required | Redirects the viewer to an Instant Experience. |
| `collection_thumbnails` | `array` | Required | An array of thumbnails. Four thumbnails are required. |

**The `collection_thumbnails` fields**

| Name | Description |
| :--- | :--- |
| `element_id` | `numeric string` | Required | The Canvas photo element ID or the product list element ID. The Canvas photo needs to be associated with the Instant Experience attached to this collection ad. An image associated with this ID appears in the Instant Experience after someone clicks the ad. **Note:** A hero image element ID is invalid. |
| `element_child_index` | `integer` | Required for a photo element with product tags and product list element | The product index from an array of photo element IDs with product tags. Or a product index from an array of `product_id_list`, which contains the product list elements. **Note:** Must be a positive integer. |
| `element_crops` | `AdsImageCrops` | Required for a photo element | A JSON object defining crop dimensions for the image specified. **Note:** Only `100x100` crop key is allowed. |

## Product Sets

Before you create a collection ad, you need to provide an ad creative and an Instant Experience. You must provide at least four elements that represent photos or products with product tags to be shown in rotation. Child photo elements in a carousel element are also valid.

The collection ad appears in Feed, and people can see more in a full-screen Instant Experience that opens when they tap on the ad.

To use a product set, you should be familiar with [Advantage+ catalog ads](https://developers.facebook.com/docs/marketing-api/guides/advantage-catalog-ads) and already have a product catalog set up.

### Create a collection ad from a product set

When you create a collection ad from a product set, you must also explicitly create an Instant Experience with the correct elements. When you use this Instant Experience in a collection ad, Meta automatically generates the collection ad.

Your Instant Experience should contain:
*   An image, as either a [Canvas Photo](https://developers.facebook.com/docs/marketing-api/reference/canvas-photo), [Canvas Video](https://developers.facebook.com/docs/marketing-api/reference/canvas-video), or [Canvas Template Video](https://developers.facebook.com/docs/marketing-api/reference/canvas-template-video).
*   A [product set](https://developers.facebook.com/docs/marketing-api/reference/canvas-product-set) with `show_in_feed` set to `true`.
*   A [footer](https://developers.facebook.com/docs/marketing-api/reference/canvas-footer)

#### Step 1: Create the Instant Experience image

**Example requests**

**Create an Instant Experience with an image**
```curl
curl \
  -F 'canvas_photo={ 
    "photo_id": "<PHOTO_ID>", 
  }' \
  -F 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/<PAGE_ID>/canvas_elements
```

**Create an Instant Experience with a video**
```curl
curl \
  -F 'canvas_video={ 
    "video_id": "<VIDEO_ID>", 
  }' \
  -F 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/<PAGE_ID>/canvas_elements
```

**Create an Instant Experience with a template video**
```curl
curl -X POST \
  -F canvas_template_video={
    "name": "Cover Image or Video",
    "bottom_padding": "0",
    "top_padding": "0",
    "product_set_id": <Product_Set_ID>,
    "template_video_spec": {
      "customization": {
        "text_color": "FFFFFF",
	      "text_background_color": "000000",
		    "name_template": "{{product.name}}",
		    "body_template": "{{product.current_price strip_zeros}}"
      },
    }
  }' \
  -F 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/<PAGE_ID>/canvas_elements
```

#### Step 2: Create the Instant Experience product set

Create a `canvas_product_set` with a `product_set_id` from your product catalog. You must set `show_in_feed` to `true` to create a collection ad.

**Example request**

```curl
curl -X POST \
  -F 'canvas_product_set={ 
    "max_items": 50,
    "product_set_id": "<PRODUCT_SET_ID>",
    "item_headline": "{{product.name}}",
    "item_description": "{{product.current_price}}"
    "image_overlay_spec": {
      "overlay_template": "pill_with_text",
      "text_type": "price",
      "text_font": "dynads_hybrid_bold",
      "position": "top_left",
      "theme_color": "background_e50900_text_ffffff",
      "float_with_margin": true,
    },
    "storefront_setting": {
      "enable_sections": true,
      "customized_section_titles": [
      {
        "title_id": "popular", "customized_title": "My Populars" 
      },
      {
        "title_id": "favorites", "customized_title": "My Favorites" 
      }],
      "product_set_layout": {
        "layout_type": "GRID_3COL"
      }
    },
    "retailer_item_ids": [0, 0, 0],
    "show_in_feed": true
  }' \
https://graph.facebook.com/v24.0/<PAGE_ID>/canvas_elements
```

**Note:** The `item_headline`, `item_description`, `image_overlay_spec`, `storefront_setting`, and `retailer_item_ids` parameters are all optional fields.

Provide any required fields in the `image_overlay_spec` parameter.

The `storefront_setting` parameter supports the `product_set_layout`, `enable_sections`, and `customized_section_titles` fields.

**The `product_set_layout` field**

| Name | Description |
| :--- | :--- |
| `layout_type` | `string` | Required. | How the product set will be displayed. |
| | | | **Values:** `GRID_2COL`, `GRID_3COL`, `CAROUSEL`, `HSCROLL_LIST` |

**The `customized_section_titles` field**

In order to use `customized_section_titles`, the `enable_sections` parameter must be set to `true`.

| Name | Description |
| :--- | :--- |
| `title_id` | `string` | Required. | Enum string representing the default section title string that you would like to replace. |
| | | | **Values:** `keep_shopping`, `take_another_look`, `you_may_also_like`, `related_products`, `trending`, `popular`, `top_items`, `favorites`, `most_viewed`, `top_picks_for_you`, `suggested_for_you`, `featured_favorites`, `just_for_you`, `explore_more`, `shop_by_category` |
| `customized_title` | `string` | Required. | Alternative custom string that the viewer should see as the section title. |

#### Step 3: Create the Instant Experience footer

Create the Instant Experience footer with a link.

**Example requests**

```curl
curl \
  -F 'canvas_button={ 
    "rich_text": {
      "plain_text": "See more at www.abc.com."
    },
    "open_url_action": {
      "url": "https://www.abc.com"
    }
  }' \
 -F 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/<PAGE_ID>/canvas_elements
```

You can also create a button to use in the footer.

```curl
curl \
  -F 'canvas_footer={ 
    "child_elements": <BUTTON_ELEMENT_ID>
  }' \
  -F 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/<PAGE_ID>/canvas_elements
```

#### Step 4: Create the complete Instant Experience

**Example requests**

**Basic Instant Experience**
```curl
curl -X POST \
  -F 'body_element_ids=[
    <PHOTO_OR_VIDEO_ELEMENT_ID>,
    <PRODUCT_SET_ELEMENT_ID>,
    <FOOTER_ELEMENT_ID>
  ]' \
  -F 'is_published=true' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/<PAGE_ID>/canvases
```

To create the Instant Experience with a template video, product set, button, store location and optional footer, include the `source_template_id` parameter.

```curl
curl \
  -F 'body_element_ids=[
    <TEMPLATE_VIDEO_ELEMENT_ID>,
    <PRODUCT_SET_ELEMENT_ID>,
    <FOOTER_ELEMENT_ID>
  ]' \
  -F 'name="Dynamic Video Instant Experience"' \
  -F 'source_template_id="1932289657009030"' \
  -F 'is_published=true' \
  -F 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/<PAGE_ID>/canvases
```

For a storefront template, you need to specify `source_template_id = 1932289657009030`, it is defined in [Instance Experiences: Using templates](https://developers.facebook.com/docs/marketing-api/guides/instant-experiences/templates). The layout for each template is fixed; however, you can replace the default content with your own dynamic videos, products, text and links.

#### Step 5: Create the collection ad with the Instant Experience

If the first element of your Instant Experience is a photo, you must set `object_type` to `SHARE`.

```curl
curl \
  -F 'name=Collection Sample Image Creative' \
  -F 'object_story_spec={ 
    "link_data": { 
      "link": "https://fb.com/canvas_doc/<CANVAS_ID>", 
      "message": "<AD_MESSAGE>",
      "name": "<AD_HEADLINE>", 
    }, 
    "page_id": "<PAGE_ID>" 
  }' \
  -F 'object_type=SHARE' \
  -F 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
```

If the first element of your Instant Experience is a video, you must set `object_type` to `VIDEO`.

```curl
curl \
  -F 'name=Collection Sample Video Creative' \
  -F 'object_story_spec={ 
    "video_data": {
      "call_to_action": {
        "type":"LEARN_MORE",
        "value":{
          "link":"https://fb.com/canvas_doc/<CANVAS_ID>",
        }
      },
      "image_url": "<THUMBNAIL_IMAGE_URL>",
      "message": "<AD_MESSAGE>",
      "title": "<AD_HEADLINE>", 
    }, 
    "page_id": "<PAGE_ID>" 
  }' \
  -F 'object_type=VIDEO' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
```

If the first element of your Instant Experience is a template video, the request should look as follows:

```curl
curl -X POST \
  -F 'name="Dynamic Video Collection Ad"' \
  -F 'adset_id=<ADSET_ID>' \
  -F 'status=PAUSED' \
  -F 'creative={
       "object_story_spec": {
         "instagram_user_id": "<INSTAGRAM_PAGE_ID>",
         "page_id": "<MAIN_PAGE_ID>",
         "template_data":{
           "call_to_action":{
             "type":"LEARN_MORE"
           },
           "format_option":"collection_video",
           "link":"https://fb.com/canvas_doc/<CANVAS_ID>",   
           "name":"Test Dynamic Ads with dynamic video",
           "retailer_item_ids":[
             "0",
             "0",
             "0",
             "0"
           ]
         }
       },
       "object_type": "SHARE",
     }' \
  -F 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/ads
```

**Ad previews**

You can provide an `ad_format` and User access token to generate previews based on your ad or ad creative.

```curl
curl -X GET \
  -d 'ad_format="MOBILE_FEED_STANDARD"' \
  -d 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/<CREATIVE_ID>/previews
```

**Note:** For template video Instant Experience ads, the supported formats are `BIZ_DISCO_FEED_MOBILE`, `GROUPS_MOBILE`, `MOBILE_FEED_STANDARD`, `SUGGESTED_VIDEO_DESKTOP`, `SUGGESTED_VIDEO_MOBILE`, `WATCH_FEED_MOBILE`.

See [Ad Previews](https://developers.facebook.com/docs/marketing-api/ad-preview) for more information.

## Collection Ads Dialog

Collection ads are based on Instant Experiences with a template. Therefore, to create a collection ad using a dialog, you will use the [Instant Experiences dialog](https://developers.facebook.com/docs/marketing-api/guides/instant-experiences/dialogs) with additonal parameters. This will provide the Facebook collection ad creation UI flow in your website. For details about the UI component, see [Dialogs](https://developers.facebook.com/docs/dialogs).

To set up the Facebook SDK for JavaScript, see:
*   [Quickstart guide](https://developers.facebook.com/docs/javascript/quickstart/)
*   [Initialization reference](https://developers.facebook.com/docs/javascript/reference/FB.init)

The JavaScript SDK relies on the logged in user's permissions to create Instant Experiences. If the user does not have the necessary permissions to create an Instant Experience for the supplied page and business, the dialog will show an error. The user must also have access to the product catalogs and sets. In order to ensure no errors, the user must have access to the Business Manager and have permissions to create ads for the page.

Then you can trigger the collection ads dialog.

```javascript
FB.ui({         
  display: 'popup',
  method: 'instant_experiences_builder',
  account_id: 'AD_ACCOUNT_ID'.
  business_id: 'BUSINESS_ID',
  page_id: 'PAGE_ID',
  template_id: 'TEMPLATE_ID'}, function(response) {
  // callback});
```

### Settings

| Name | Description |
| :--- | :--- |
| `display` | Required. **Value:** `popup` |
| `method` | Required. **Value:** `instant_experiences_builder` |
| `account_id` | Required. Your ad account ID. |
| `business_id` | Required. Your business ID. |
| `page_id` | Required. The Page ID you want to associate with the Instant Experience. |
| `template_id` | Required. The ID of the template you want to use. |
| `product_catalog_id` | Required, if `product_set_id` is provided. The ID of the product catalog to be used in the collection. **Note:** Once provided, you will not be able to change the collection in the UI. If the parameter is not provided, you can select the catalog and product set in the UI. |
| `product_set_id` | Optional. The ID of the product set to be used in the collection. **Note:** Once provided, you will not be able to change the collection in the UI. If the parameter is not provided, you can select the catalog and product set in the UI. |

All valid template types and the corresponding ID can be found in [Instant Experiences: Use a Template](https://developers.facebook.com/docs/marketing-api/guides/instant-experiences/templates).

To preview a collection ad, we recommend using the [Instant Experiences Preview Dialog](https://developers.facebook.com/docs/marketing-api/guides/instant-experiences/dialogs/#preview).

### Example response

```json
{
  "success": true,
  "id": "<CANVAS_ID>"}
```

The `id` returned will be an unpublished Instant Experience. It needs to be published before it can be used in ad campaigns.

If there is no response or an `undefined` response is returned, it means the dialog was closed before finishing the Instant Experience set up or that the user saved the Instant Experience but did not finished it. You can query to see all the Instant Experiences that belong to a page and see if any are unfinished Instant Experiences.

## Including Destination Catalogs

You can show ad creatives from a destination catalog in a collection ad's hero image. You can also display a carousel of hotel images at that destination. To do this, you must provide a fallback image that displays at the hero image in case there is no corresponding destination for hotels in the carousel. For more information, see [Destination Catalog](https://developers.facebook.com/docs/marketing-api/guides/travel-catalog/destination-catalog).

Note these limitations:
*   Video creative is not supported.
*   Only the display of destination and hotel catalog images combined is supported.
*   The display of other catalog combinations is not allowed.

To use this feature, add the `destination_set_id` parameter when creating your `canvas_photo` element, then follow the other standard steps to create your Instant Experience and collection ad.

**Example request**
```curl
curl -X POST \
  -F 'canvas_photo={ 
    "photo_id": "<PHOTO_ID>", 
    "destination_set_id": "<DESTINATION_SET_ID>",
  }' \
  -F 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/<PAGE_ID>/canvas_elements
```

## Create Engagement Audiences

You can automatically create audiences for people who interacted with your collection ad. This is similar to engagement audiences for standard Instant Experiences. For more information, see [Instant Experiences, Engagement Audiences](https://developers.facebook.com/docs/marketing-api/guides/instant-experiences/engagement-audiences).

You can target your Instant Experience ads with a full-screen view for people who tapped on your collection ad. This type of audience is called a **Fullscreen Experience engagement audience**. Build this audience by creating a custom audience, set `object_id` to `CANVAS_ID`, and make a rule to track one of the events.

**Create an audience of people that opened an Instant Experience**
```curl
curl -X POST \
  -F 'name=Collection Engagement Audience' \
  -F 'description=People who opened this Instant Experience' \
  -F 'rule=[{
    "object_id":"<CANVAS_ID>",
    "event_name":"instant_shopping_document_open"
  }]' \
  -F 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/customaudiences
```

**Create an audience of people that clicked on a collection ad**
```curl
curl -X POST \
  -F 'name=Collection Engagement Audience' \
  -F 'description=People who clicked any links in this Instant Experience' \
  -F 'rule=[{
    "object_id":"<CANVAS_ID>",
    "event_name":"instant_shopping_element_click"
  }]' \
  -F 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/customaudiences
```

# Instagram Ads API

Learn how to create and publish ads on Instagram using the Instagram Ads API.

## Documentation Contents

| | |
| :--- | :--- |
| [Get Started](#get-started-1) | Five steps to get you running ads on Instagram. |
| [Guides](https://developers.facebook.com/docs/instagram/ads-api/guides) | Use case based guides to help you perform specific actions. |
| [Reference](https://developers.facebook.com/docs/instagram/ads-api/reference) | Requirements and features of Instagram ad creatives. |
| [Instagram Post Moderation API](https://developers.facebook.com/docs/instagram/post-moderation-api) | Use the API to access posts, add new comments, check the comments by viewers, and delete certain comments. |

## Get Started

With Marketing API you can create, measure, and optimize ads on Instagram in the main Stream, in Stories, the Explore tab, and in Reels. To create your ads:
*   Step 1: Get Instagram account ID
*   Step 2: Create campaign
*   Step 3: Create ad set - Pick a placement that includes Instagram. We recommend including both Facebook and Instagram, so our system automatically delivers ads to the best audiences on both platforms.
*   Step 4: Provide ad creative
*   Step 5: Schedule Delivery

Be aware that:
*   Instagram ads do not support all Facebook ads objectives.
*   Not all creative formats supported by Facebook work on Instagram.
*   To use Instagram and Facebook posts as ads, see our [guide](https://developers.facebook.com/docs/instagram/ads-api/guides/promoted-posts).

### Step 1: Get Instagram Account ID

You need to know your Instagram account’s ID before you start creating ads. Depending on your account’s type, you have different ways of getting an account ID:

| Type of Instagram Account | How To Find Account ID |
| :--- | :--- |
| **Business Manager Instagram Account (Recommended) - Implementation Guide** | See [Set Up Instagram Accounts On Business Manager](https://developers.facebook.com/docs/marketing-api/instagram-accounts/business-manager-setup), [Get Associated Accounts](https://developers.facebook.com/docs/marketing-api/instagram-accounts/business-manager-setup#get-associated-accounts). Save the ID to use in your ads. |
| **Page-Connected Instagram Accounts - Implementation Guide** | See [Set Up Instagram Accounts With Pages](https://developers.facebook.com/docs/marketing-api/instagram-accounts/page-setup), [Get Account ID](https://developers.facebook.com/docs/marketing-api/instagram-accounts/page-setup#get-id). Save the ID to use in your ads. |
| **Page-Backed Instagram Account - Implementation Guide** | See [Set Up Instagram Accounts With Pages](https://developers.facebook.com/docs/marketing-api/instagram-accounts/page-setup), [Read Read PBIA](https://developers.facebook.com/docs/marketing-api/instagram-accounts/page-setup#read-pbia). Save the ID to use in your ads. |

### Step 2: Create Ad Campaign

Creating ad objects for Instagram is the same is it is for Facebook ads. To start, create a Facebook [Ad Campaign](https://developers.facebook.com/docs/marketing-api/guides/campaigns) and specify your objective.

Instagram compatible objectives vary according to your chosen ad placement:

| Ad Placement | Compatible Objectives |
| :--- | :--- |
| Ads in Explore | `BRAND_AWARENESS`, `REACH`, `LINK_CLICKS`, `POST_ENGAGEMENT`, `APP_INSTALLS`, `VIDEO_VIEWS`, `LEAD_GENERATION`, `MESSAGES`, `CONVERSIONS`, and `PRODUCT_CATALOG_SALES` |
| Ads in Instagram Explore home | `BRAND_AWARENESS`, `REACH`, `LINK_CLICKS`, `APP_INSTALLS`, `VIDEO_VIEWS`, `LEAD_GENERATION`, `MESSAGES` and `CONVERSIONS`. |
| Ads in Instagram profile feed | `BRAND_AWARENESS`, `REACH`, `LINK_CLICKS`, `POST_ENGAGEMENT`, `APP_INSTALLS`, `VIDEO_VIEWS`, `MESSAGES`, `CONVERSIONS`, and `STORE_TRAFFIC` |
| Ads in Instagram search results | `BRAND_AWARENESS`, `REACH`, `LINK_CLICKS`, `POST_ENGAGEMENT`, `APP_INSTALLS`, `VIDEO_VIEWS`, `LEAD_GENERATION`, `CONVERSIONS`, and `PRODUCT_CATALOG_SALES` |
| Reels ads | `BRAND_AWARENESS`, `REACH`, `LINK_CLICKS`, `APP_INSTALLS`, `VIDEO_VIEWS`, `MESSAGES` and `CONVERSIONS` |
| Story ads | `BRAND_AWARENESS`, `REACH`, `LINK_CLICKS`, `APP_INSTALLS`, `VIDEO_VIEWS`, `LEAD_GENERATION`, `MESSAGES`, `CONVERSIONS`, `PRODUCT_CATALOG_SALES`, and `STORE_TRAFFIC` |
| Stream ads | `BRAND_AWARENESS`, `REACH`, `LINK_CLICKS`, `POST_ENGAGEMENT`, `APP_INSTALLS`, `VIDEO_VIEWS`, `LEAD_GENERATION`, `MESSAGES`, `CONVERSIONS`, `PRODUCT_CATALOG_SALES`, and `STORE_TRAFFIC` |

The minimum spend budget on Instagram is the same as the one for Facebook self-serve ads, with different limits per currency and limits based on `bid_amount`.

Learn about default placements for your ads and `instagram_positions`.

For Reach And Frequency campaigns, see [Instagram Reach And Frequency](https://developers.facebook.com/docs/marketing-api/guides/reach-and-frequency/instagram-reach-and-frequency).

### Step 3: Create Ad Set

Create an ad set with the desired:
*   **Optimization Goal:** Your goal options depend on the objective set at the campaign level. Check our [validation rules](https://developers.facebook.com/docs/marketing-api/reference/ad-set/index#targeting-specs-reference).
*   **Targeting Options:** You can use all Facebook [targeting options](https://developers.facebook.com/docs/marketing-api/targeting-specs) for Instagram campaigns, including Facebook's native basic targeting options, Custom Audiences, and Lookalike Audiences.
*   **Budget**
*   **Billing Event:** The `billing_event` depends on which `optimization_goal` you choose. Check our [validation rules](https://developers.facebook.com/docs/marketing-api/reference/ad-set#billing-event-and-optimization-goal).
*   **Schedule**

For `APP_INSTALLS` and `CONVERSIONS` campaigns, a `promoted_object` is also required at the ad set level.

If you create a Reach and Frequency ad set, set `rf_prediction_id`. The `destination_ids` of the Reach Frequency Prediction must contain the Instagram account ID.

**Placement**

To deliver ads to Instagram, include `instagram` under `publisher_platforms` in your ad set. You can use Instagram `stream`, `story`, `explore`, `reels`, `explore_home`, and `ig_search` placements, or you can enable multiple platforms including Instagram's placements. If you choose multiple platforms, Facebook optimizes delivery based on your target audience on each platform with [Placement Optimization](https://www.facebook.com/business/help/105436669809983).

To show ads exclusively in Stream or Stories specify `stream` or `story` in the `instagram_positions` field.

Ads using `"instagram_positions":["story"]` will be displayed in both the Instagram Desktop and Mobile web feeds.

If you want to display your ads in Instagram's Explore tab you must include both `stream` and `explore` as placements.

If you want to display your ads on Instagram's Explore home placement you must include both `stream` and `explore` as placements.

If you want to display your ads on Instagram's search results placement you must include `stream` as a placement.

Instagram Web Feeds ads use the `stream` placement and are checked for web eligibility to be delivered to both desktop and mobile web feeds. The compatible objectives are `BRAND_AWARENESS`, `REACH`, `LINK_CLICKS`, `POST_ENGAGEMENT`, `VIDEO_VIEWS`, and `CONVERSIONS`.

If `instagram_positions` is not specified, we deliver ads to all four possible Instagram placements.

To deliver ads only to Instagram Stories, use `story` only inside `instagram_positions`. In this case, you should also have `instagram` as the only value for `publisher_platforms`.

**Examples**

**Create an ad set with Instagram as placement:**

```curl
curl \
  -F 'name=Instagram Adset' \
  -F 'optimization_goal=LINK_CLICKS' \
  -F 'billing_event=IMPRESSIONS' \
  -F 'bid_amount=2' \
  -F 'daily_budget=1000' \
  -F 'campaign_id=<CAMPAIGN_ID>' \
  -F 'targeting={ 
    "geo_locations": {"countries":["US"]}, 
    "publisher_platforms": ["instagram"], 
    "user_os": ["iOS"] 
  }' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adsets    
```

**Create an ad set with Instagram Explore home as a targeted placement:**

```curl
curl \
  -F 'name=Instagram Adset' \
  -F 'optimization_goal=LINK_CLICKS' \
  -F 'billing_event=IMPRESSIONS' \
  -F 'bid_amount=2' \
  -F 'daily_budget=1000' \
  -F 'campaign_id=<CAMPAIGN_ID>' \
  -F 'targeting={ 
    "geo_locations": {"countries":["US"]}, 
    "publisher_platforms": ["instagram"],
    "instagram_positions": ["stream", "explore", "explore_home"],  
    "user_os": ["iOS"] 
  }' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adsets 
```

**Create an ad set with Instagram search results as a targeted placement:**

```curl
curl \
  -F 'name=Instagram Adset' \
  -F 'optimization_goal=LINK_CLICKS' \
  -F 'billing_event=IMPRESSIONS' \
  -F 'bid_amount=2' \
  -F 'daily_budget=1000' \
  -F 'campaign_id=<CAMPAIGN_ID>' \
  -F 'targeting={ 
    "geo_locations": {"countries":["US"]}, 
    "publisher_platforms": ["instagram"],
    "instagram_positions": ["stream", "ig_search"],  
    "user_os": ["iOS"] 
  }' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adsets
```

### Step 4: Provide Ad Creative

At this point, you should provide your [ad creative](https://developers.facebook.com/docs/marketing-api/guides/ad-creative). For creatives to be used on Instagram only or mixed placements, you need to supply your Instagram account ID and your Facebook Page ID —your page information does not appear anywhere on your Instagram ad. If the Instagram account is connected to a Page, or is a Page-backed Instagram Account, the same Page needs to be used.

When you provide ad creative, we create an unpublished post. You can see the unpublished post from the page when you query [promotable feed](https://developers.facebook.com/docs/marketing-api/guides/ad-creatives/promoted-posts) using the Page ID.

**Relevant Guides**
*   [Use Posts as Instagram Ads](https://developers.facebook.com/docs/instagram/ads-api/guides/promoted-posts)
*   [Add Optional Call-To-Action](https://developers.facebook.com/docs/instagram/ads-api/guides/call-to-action)
*   [Get Ad Preview](https://developers.facebook.com/docs/marketing-api/ad-preview)
*   [Instagram Advantage+ Catalog Ads](https://developers.facebook.com/docs/marketing-api/guides/advantage-catalog-ads/instagram-advantage-catalog-ads)
*   [Carousel Ads](https://developers.facebook.com/docs/marketing-api/guides/carousel-ads): You can create carousel ads with [Ads Manager](https://www.facebook.com/business/help/1628178667448842) as well as the API.
*   [Customize Stories](https://developers.facebook.com/docs/instagram/ads-api/guides/customize-stories)
*   [Add Interactive Elements](https://developers.facebook.com/docs/instagram/ads-api/guides/interactive-elements)

### Step 5: Schedule Delivery

Create your Ad object to link your creative to your ad set.

**Ad Review Process**

The ad review policies are the same for Facebook and Instagram. As we make Instagram available to more businesses, we want the same high-quality ad experience on Instagram that we have on Facebook.

This requires understanding more about how the community interacts with different kinds of advertiser content on Instagram. Since it takes time to build the same kind of models that drive Facebook ads, we currently rely on human review to filter out a small percentage of ads and provide suggestions for improvement.

Our ultimate goal is to make running a campaign across Facebook and Instagram a seamless experience and to make ads a relevant, valuable part of the Instagram product.

# Threads Ads

To run ads on Threads, you need a Threads account ID. You have two options for obtaining one:
*   **Instagram-connected Threads account:** An Instagram account is used to create the Threads account.
*   **Instagram-backed Threads account:** An Instagram account runs ads on behalf of a Threads account created for that purpose.

Make sure your Instagram account has the [proper setup for Instagram ads](https://developers.facebook.com/docs/instagram/ads-api/get-started).

## Permissions

To make API calls with an Instagram-connected Threads account you need a user access token with the following permissions:
*   `instagram_basic`
*   `threads_business_basic`
*   `pages_read_engagement`

If the app user was granted a role via the Business Manager on the Page connected to your app user's Instagram professional account, your app will also need one of:
*   `ads_management`
*   `ads_read`

**Note:** Anyone with access to create Instagram ads from the Instagram account can create Threads ads from the Instagram-connected Threads account.

## Limitations

*   You cannot run ads on Threads without an Instagram-connected or Instagram-backed Threads account, and you cannot run ads on Threads if the associated Instagram account cannot run ads on Instagram.
*   You need to have at least an **Advertiser** role on the Page that is linked to your Instagram account; **Manager** or **Content Creator** also work. Or you need to have the Instagram account connected to a business account where you have appropriate roles.
*   An Instagram account can have only one Instagram-connected Threads account, as well as only one Instagram-backed Threads account. Verify whether a specific Instagram account has an Instagram-connected Threads account or an Instagram-backed Threads account before attempting to create a new one. If an account of the type you want to use already exists, use that one.
*   We are keeping the volume of ads in Threads intentionally low as we test and learn, therefore expect that delivery to Threads will be low. You will see this reflected in your placement breakdown reporting if your campaign delivers on Threads.
*   Threads ads creation only supports images and videos as the media format.
*   Ads cannot be created from an existing Threads post.

## Instagram-connected Threads accounts

### Before you begin

You need the following:
*   A business with the [proper setup for Instagram ads advertiser identities](https://developers.facebook.com/docs/marketing-api/instagram-accounts/business-manager-setup).
*   An Instagram account with a profile image that is not a Private Account and has the appropriate advertiser permissions (See [How do I connect my Facebook Page and Instagram account?](https://www.facebook.com/business/help/316380618483864)).
*   A Threads account connected to an Instagram account. You can set this up in the Threads app.

### Get the Threads account ID

Once you connect an Threads account to a valid Instagram account, you can call the `/<IG_USER_ID>/connected_threads_user` endpoint to get the Threads account ID.

**Example request**

```curl
curl -G \
  -d "access_token=<ACCESS_TOKEN>"\
  -d "fields=threads_user_id" \
"https://graph.facebook.com/v24.0/<IG_USER_ID>/connected_threads_user"
```

The result should be a Threads account object containing only the `threads_user_id`. Save this `threads_user_id` to use in your ads.

## Instagram-backed Threads accounts

If you don’t have a Threads profile, you can still create and deliver ads in Threads using an Instagram-backed Threads account.

These accounts are created with the API, and function as if you are running ads for a Threads account, however a mock Threads account is created specifically to run those ads.

You cannot log into Threads accounts created this way to manage posts.

### Create an Instagram-backed Threads account

You can create an Instagram-backed Threads account by sending a `POST` request to the `/<IG_USER_ID>/instagram_backed_threads_user` endpoint.

**Example request**

```curl
curl \
  -F "access_token=<ACCESS_TOKEN>"\
"https://graph.facebook.com/v24.0/<IG_USER_ID>/instagram_backed_threads_user"
```

This returns a Threads account ID on success. If an Instagram account is already has a Instagram-backed Threads account, the call returns the existing Instagram-backed Threads account ID. Save the returned ID to run your ads.

### Get the Threads account ID

To see if an Instagram account has an Instagram-backed Threads account, send a `GET` request to the `/<IG_USER_ID>/instagram_backed_threads_user` endpoint.

**Example request**

```curl
curl -G \
  -d "access_token=<ACCESS_TOKEN>"\
  -d "fields=threads_user_id" \
"https://graph.facebook.com/v24.0/<IG_USER_ID>/instagram_backed_threads_user"
```

This returns a Threads account object, if there is one. The object includes a `threads_user_id` that can be used to run Threads ads. If there is no Instagram-backed Threads account already set up, the API returns an empty response.

## Ad Creatives with Threads Accounts

### Using Instagram-connected Threads accounts in ads

You can use any ad account, either owned by an individual or by a business, as far as you have access, to create ads for Instagram-connected Threads accounts.

When creating an ad creative, you should provide the `threads_user_id` and the `instagram_user_id` . The `instagram_user_id` of your ad creative must be for the Instagram account associated with this Instagram-connected Threads account. You cannot use an Instagram-connected Threads account with another Instagram account in an ad creative.

### Using Instagram-backed Threads accounts in ads

You do not need to assign ad accounts to the Instagram-backed Threads account. When you provide an ad creative using a Instagram-backed Threads account, you can use any ad accounts that you have access to.

Once an Instagram-backed Threads account is created, you can use its ID as the `threads_user_id` in your ad creative, as you do with other types of Instagram accounts. The `instagram_user_id` of your ad creative must be for the Instagram account associated with this Instagram-backed Threads account.

### Examples

While the `instagram_user_id` must be included in the `object_story_spec` field, the `threads_user_id` can be included either in the `object_story_spec` field or on a higher level of the API call.

**Included in the `object_story_spec` field**

```curl
curl -X POST \
  -F {
    "name": "test",
    "object_story_spec": {
      "link_data": {
        "link": "<LINK_URL>",
        "call_to_action": {
          "type": "WATCH_MORE",
          "value": {}
        },
        "message": "<MESSAGE_TEXT>",
        "image_hash": "<IMAGE_HASH>"
      },
      "instagram_user_id": "<IG_USER_ID>",
      "threads_user_id": "<THREADS_USER_ID>",
      "page_id": "<PAGE_ID>"
    }
  } \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
```

**Included at a higher level**

```curl
curl -X POST \
  - F {
    "name": "test",
    "object_story_spec": {
      "link_data": {
        "link": "<LINK_URL>",
        "call_to_action": {
          "type": "WATCH_MORE",
          "value": {}
        },
        "message": "<MESSAGE_TEXT>",
        "image_hash": "<IMAGE_HASH>"
      },
      "instagram_user_id": "<IG_USER_ID>",
      "page_id": "<PAGE_ID>"
    },
    "threads_user_id": "<THREADS_USER_ID>"
  } \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
```

## Threads Ads Creation

With Marketing API you can create, measure, and optimize ads on Threads in the main feed. To create your ads:
*   Step 1: Get a Threads account ID
*   Step 2: Create an ad campaign
*   Step 3: Create an ad set — Pick a placement that includes Threads. Adding Instagram stream is a prerequisite if you want to select Threads threads_stream as a placement.
*   Step 4: Provide an ad creative
*   Step 5: Schedule ad delivery

### Limitations

*   There is a 1000 character limit on captions for ads targeting Threads. If your ad is over this limit, the request to create an ad will succeed for Instagram, but it will not be delivered on Threads.
*   Threads images must be at least 500px in width.
*   There is a limit of 30 hashtags per ad.

### Step 1: Get a Threads account ID

You need to know your Threads account's ID before you start creating ads. Depending on your account's type, you have different ways of getting an account ID:
*   **Instagram-connected Threads account** — Set up a connection from the Threads app via OAuth flow and get the Threads account ID. Save the returned ID to use in your ads.
*   **Instagram-backed Threads account** — Set up the Threads account using the API, then get the Threads account ID. Save the returned ID to use in your ads.

### Step 2: Create an ad campaign

Creating ad objects for Threads is the same as it is for Instagram and Facebook ads. To start, create an [ad campaign](https://developers.facebook.com/docs/marketing-api/guides/campaigns) and specify your objective.

Threads compatible objectives vary according to your chosen ad placement:

| Ad Placement | Compatible Objectives |
| :--- | :--- |
| Ads in Threads Feed (`threads_stream`) | `OUTCOME_AWARENESS`, `OUTCOME_TRAFFIC`, `OUTCOME_ENGAGEMENT`, `OUTCOME_SALES` |

### Step 3: Create an ad set

Create an ad set with the desired:
*   **Optimization goal:** Your goal options depend on the objective set at the campaign level. Check the [validation rules](https://developers.facebook.com/docs/marketing-api/reference/ad-set/index#targeting-specs-reference).
*   **Targeting options:** You can use all the [standard targeting options](https://developers.facebook.com/docs/marketing-api/targeting-specs) for your campaigns, including the native basic targeting options, custom audiences, and lookalike audiences.
*   **Budget**
*   **Billing event:** The `billing_event` depends on which `optimization_goal` you choose. Check the [validation rules](https://developers.facebook.com/docs/marketing-api/reference/ad-set#billing-event-and-optimization-goal).
*   **Schedule ad delivery**

**Placement**

To deliver ads to Threads, include both `instagram` and `threads` under `publisher_platforms` in your ad set. Then, use the Threads `threads_stream` placement; remember you must select the Instagram `stream` placement too. If you choose multiple platforms, Meta optimizes delivery based on your target audience on each platform with [placement optimization](https://www.facebook.com/business/help/105436669809983).

**Examples**

**Create an ad set with Threads as a placement**

```curl
curl \
  -F 'name=Threads Adset' \
  -F 'optimization_goal=LINK_CLICKS' \
  -F 'billing_event=IMPRESSIONS' \
  -F 'bid_amount=2' \
  -F 'daily_budget=1000' \
  -F 'campaign_id=<CAMPAIGN_ID>' \
  -F 'targeting={ 
    "geo_locations": {"countries":["US"]}, 
    "publisher_platforms": ["instagram", "threads"], 
    "user_os": ["iOS"] 
  }' \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adsets  
```

**Create an ad set with Threads `threads_stream` as a targeted placement**

```curl
curl \
  -F 'name=Threads Adset' \
  -F 'optimization_goal=LINK_CLICKS' \
  -F 'billing_event=IMPRESSIONS' \
  -F 'bid_amount=2' \
  -F 'daily_budget=1000' \
  -F 'campaign_id=<CAMPAIGN_ID>' \
  -F 'targeting={ 
    "geo_locations": {"countries":["US"]}, 
    "publisher_platforms": ["instagram", "threads"],
    "instagram_positions": ["stream"], 
    "threads_positions": ["threads_stream"],  
    "user_os": ["iOS"] 
  }' \
  -F 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adsets
```

### Step 4: Provide an ad creative

For creatives to be used with a Threads placement and the required Instagram placement, you need to supply your Instagram account ID and your Threads account ID and your Facebook Page ID. **Note:** Your Page information does not appear anywhere on your Threads ad.

If the Threads account is connected to an Instagram account or is a Instagram-backed Threads Account, that Instagram account needs to be used.

When you provide the ad creative, we create an unpublished post. You can see the unpublished post from the Page when you query the [promotable feed](https://developers.facebook.com/docs/marketing-api/guides/ad-creatives/promoted-posts) using the Page ID.

**Note:** Threads ads support image, video, and carousel image ads creation (with the same steps as Instagram ads creation). See [Media requirements](https://developers.facebook.com/docs/threads/ads-api/media) for more information. When new media setups and ad formats become compatible with Threads, both existing and newly created campaigns using them will automatically leverage your Threads profile or Instagram account to deliver to the `threads_stream` if that placement is included. You can review and update your ad placements at any time.

**Hashtags**

**Note:** There is a limit of 30 hashtags per ad.

**Media requirements**

| | |
| :--- | :--- |
| **Captions** | There is a 1000 character limit on captions for ads targeting Threads. If your ad is over this limit, the request to create an ad will succeed for Instagram, but it will not be delivered on Threads. 80 to 160 characters is recommended. **Note:** Hashtags and URLs are not supported in the caption. |
| **Image Requirements** | **Aspect Ratio** |
| | 1.91:1 to 9:16 are supported. Images with a taller ratio than 4:5 will be cropped and vertically centered to 4:5. Images with a ratio of 1.91:1 to 4:5 will not be cropped or altered. |
| | **Size** |
| | Threads images must be at least 500px in width. |
| **Video Requirements** | **Aspect Ratio** |
| | 1.91:1 to 9:16 are supported. Videos with a taller ratio than 4:5 will be cropped and centered to 4:5. Images with a ratio of 1.91:1 to 4:5 will not be cropped or altered. |
| **Carousel Requirements** | **Aspect Ratio for images** |
| | 1.91:1 to 9:16 are supported. Images with a ratio outside of 1:1 will be center cropped to 1:1. Images with a ratio of 1:1 will not be cropped or altered. |

### Step 5: Schedule ad delivery

Create your Ad object to link your creative to your ad set.

## Threads Carousel Ads

To create carousel ads, provide an ad creative with multiple `child_attachments` in `link_data` for `threads_stream`. You need to provide the `threads_user_id` and only use [objectives supported in Threads ads](https://developers.facebook.com/docs/threads/ads-api/get-started#threads-compatible-objectives).

There are some differences between Threads and Instagram carousel ads. These differences only happen with the Threads placement. If you have an ad set with Facebook, Instagram, and Threads placements enabled, what works on Facebook and/or Instagram may be different from that on Threads.
*   Each attachment must have a link specified, which is the destination of the image click.
*   There is no call to action button on the ad. If a headline or name is provided for an attachment, it will overwrite the call To action text. If no headline or name is provided, the call to action text will be used for the attachment.
*   Only 10 children are allowed for inline creation.

### Image Cards

Each attachment must have either a `picture` or `image_hash` set. We do not default the image from `link_data`.

See the [media requirements](https://developers.facebook.com/docs/threads/ads-api/media#image-requirements) for supported image specifications.

### Create an Threads Image Carousel Ad Creative

**Example request**

```curl
curl -X POST \
  -F 'name=Threads Carousel Creative' \
  -F 'object_story_spec={
      "instagram_user_id": "<IG_USER_ID>",
      "threads_user_id": "<THREADS_USER_ID>",
      "page_id": "<PAGE_ID>",
      "link_data": {
        "child_attachments": [
          {
            "link": "<LINK_1>",
            "image_hash": "<IMAGE_HASH_1>",
            "description": "$8.99", 
            "name": "Product 1" 
          },
          {
            "link": "<LINK_2>",
            "image_hash": "<IMAGE_HASH_2>",
            "description": "$9.99", 
            "name": "Product 2" 
          },
          {
            "link": "<LINK_3>",
            "image_hash": "<IMAGE_HASH_3>",
            "call_to_action": {
              "type": "LEARN_MORE"
            }
          }
        ],
        "message": "<MESSAGE_TEXT>"
      }
    }
' \
  -F 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
```

# Partnership Ads API

Branded content ads are now called **partnership ads**.

Partnership ads allow advertisers to run ads from a creator or other partner's handle to scale their collaborations. Using a creator's voice with partnership ads is the most performant way to run creator content on our platforms.

These topics discuss how to use the Partnership Ads API to automate partnership ad campaign features and permissions. It assumes that you already have a business, a creator, and a media plan for the two of them. It will walk you through the technical steps of setting up permissions so that you can then promote these posts via the API.
*   The **Post-Level Permissioning API** allows brands to add, remove and check creators who are on their approved list for tagging them in the paid partnership label on branded content posts. It also allows creators to give businesses permission to promote their organic branded content posts as partnership ads.
*   The **Account-Level Permissioning API** allows brands to request partnership ad permission from creators and validate the status of these requests. With account-level permissions, advertisers can promote the creator's content that tags them in branded content (via the paid partnership label) or other non-branded content (@mentions, people tags, product tags, or Instagram Collab posts), as well as create new partnership ads without an existing organic post, without assigning permissions at the post-level.

For more information, see the following topics:
*   [Post-Level Permissioning](#post-level-permissioning)
*   [Account-Level Permissioning](#account-level-permissioning)
*   [Partnership Ads Creation](#partnership-ads-creation)

## Post-Level Permissioning

Branded content ads are now called **partnership ads**.

Post-Level Permissioning allows brands to add, remove and check creators who are on their approved list for tagging them in the paid partnership label on branded content posts. It also allows creators to give businesses permission to promote their organic branded content posts as partnership ads.

### Permissions

In order to use this API, you must have a [Facebook User access token](https://developers.facebook.com/docs/facebook-login/access-tokens) with the following:
*   [Advanced Access](https://developers.facebook.com/docs/development/release/access-levels#advanced-access) access level
*   Permissions:
    *   `instagram_basic`
    *   `instagram_branded_content_brand` (for the `/branded_content_tag_approval` endpoint)
    *   `instagram_branded_content_creator` (for the `/branded_content_partner_promote` endpoint)

### How it Works

The general flow for enabling post-level permissions is:
*   Businesses can see which creators are approved to tag them in the paid partnership label on branded content posts.
*   Businesses can add creator user IDs to the approved list.
*   Businesses can remove creator user IDs from the approved list.
*   Creators can check which businesses they have given permission to promote a given organic post as a partnership ad.
*   Creators can give a business permission to promote the given organic post as a partnership ad.

### Approve Creators

Business accounts have the option to restrict who can tag them in the paid partnership label on branded content posts. If restrictions are turned on, the business can allow users to tag them in branded content posts by adding them to their approved creator allowlist.

This endpoint allows business accounts to add, remove, and view the creators in their approved accounts list, if approval is required.

**Reading**

**Approval List**

Queries the approval list for the existence of a set of creator account types and returns a list of approved user IDs.

*   **Request**

    `Access Token = BUSINESS_ACCESS_TOKEN`

    ```curl
    curl -G \
      -d 'user_ids=<USER_ID1, USER_ID2, ...>' // creator user IDs
      -d 'access_token=<ACCESS_TOKEN>''https://graph.facebook.com/v24.0/<USER_ID>/branded_content_tag_approval'
    ```

    | Name | Description |
    | :--- | :--- |
    | `user_ids` | Required. | A comma-separated list of users IDs to check against the permission list. At most 100 IDs can be queried per request. |

*   **Response**

    This endpoint will return a list of approved creators, filtered by the account IDs provided.

    ```json
    {
     "data": [
      {
        "id": "<USER_ID>"
      }
     ]}
    ```

**Updating**

Adds users to the approval list and returns a Boolean.

*   **Request**

    `Access Token = BRAND_ACCESS_TOKEN`

    ```curl
    curl -X \
      -d 'user_ids=<USER_ID5, USER_ID10, USER_ID15, ...>' // creator user IDs
      -d 'access_token=<ACCESS_TOKEN>''https://graph.facebook.com/v24.0/<USER_ID>/branded_content_tag_approval'
    ```

    | Name | Description |
    | :--- | :--- |
    | `user_ids` | Required. | Users to add to the permission list. |

*   **Response**

    ```json
    {
      "success": true 
      // false is returned if one or more IDs fail to update; in that case, no IDs will be added}
    ```

**Deleting**

Removes users from the approval list and returns a Boolean.

*   **Request**

    `Access Token = BUSINESS_ACCESS_TOKEN`

    ```curl
    curl -X DELETE\
      -d 'user_ids=<USER_ID3, USER_ID5, ...>' // creator user IDs
      -d 'access_token=<ACCESS_TOKEN>''https://graph.facebook.com/v24.0/<USER_ID>/branded_content_tag_approval'
    ```

    | Name | Description |
    | :--- | :--- |
    | `user_ids` | Required. | Users to remove from permission list. |

*   **Response**

    ```json
    {
      "success": true 
      // false is returned if one or more IDs fail to be deleted; in that case, no IDs will be deleted}
    ```

### Allow Brand Partner to Boost

In order for a business to promote a branded content post that they are tagged in with the "paid partnerships" tag as partnership ads, the creator must first give the business permission for individual posts.

**Business partner promotion status**

This API call allows the creator to get the list of businesses that are approved to promote a given branded content post that they are tagged in.

*   **Request**

    `Access Token = CREATOR_ACCESS_TOKEN`

    ```curl
    curl -G \
      -d  'access_token=<ACCESS_TOKEN>''https://graph.facebook.com/v24.0/<IG_MEDIA_ID>/branded_content_partner_promote'
    ```

*   **Response**

    ```json
    {
      "approved": {comma-separated list of approved user IDs}}
    ```

**Allow brand partner to boost setting**

This API call allows the creator to turn on the **Allow brand partner to boost** setting outside of the Instagram app.

**Note:** Creators will create their post and tag the brand partner via the Instagram platform.

*   **Request**

    `Access Token = CREATOR_ACCESS_TOKEN`

    ```curl
    curl -X \ POST
      -d  'sponsor_id=<USER_ID>' // User_ID of the business the creator is granting, or revoking, promotion permissions
      -d  'permission=true | false'
      -d  'access_token=<ACCESS_TOKEN>''https://graph.facebook.com/v24.0/<IG_MEDIA_ID>/branded_content_partner_promote'
    ```

    | Name | Description |
    | :--- | :--- |
    | `permission` | Required. | Set to `true` if permission is given to the tagged brand, or `false` if not. |

*   **Response**

    ```json
    {
      "success": true 
      // false is returned on error; permission will not be granted}
    ```

## Account-Level Permissioning

Branded content ads are now called **partnership ads**.

The Account-Level Permissioning API allows brands to request partnership ad permission from creators and validate the status of these requests. With account-level permissions, advertisers can promote the creator's content that tags them in branded content (via the paid partnership label) or other non-branded content (@mentions, people tags, product tags, or Instagram Collab posts), as well as create new partnership ads without an existing organic post, without assigning permissions at the post-level.

*   **Request Partnership Ad Permissions:** Allows third-party platforms to request account-level partnership ad permissions from creators on behalf of brands.
*   **View Partnership Ad Permissions:** Allows third-party platforms to list existing partnership ad permissions for a brand.

When a creator accepts an advertiser's account-level permission request in the Instagram app, advertisers can:
*   Create partnership ads from the creator's handle without a pre-existing post.
*   Create partnership ads from any of the creator's existing posts that tag the advertiser (Note: the advertiser must be tagged using the paid partnership label, @mentions\*, people tags\*, product tags\*, or Instagram Collabs\*).
*   Include or exclude the creator's audience in their partnership ad campaign.

Creators can:
*   Tag the advertiser in the paid partnership label when making branded content posts.
    *   \* Instagram only

### Send Partnership Ad Permission Request to Creator

Apps can request partnership ad permissions from creators on behalf of brands.

`POST /<BRAND_IG_ID>/branded_content_ad_permissions`

| **Inputs** | |
| :--- | :--- |
| `BRAND_IG_ID` | — Instagram user ID of the brand |
| `CREATOR_IG_ID` | — Instagram user ID of the creator |
| `CREATOR_IG_USERNAME` | — Instagram username of the creator |
| `ACCESS_TOKEN` | — User access token |

| **Permissions** | |
| :--- | :--- |
| `instagram_branded_content_ads_brand` scoped on `BRAND_IG_ID` | |
| `instagram_basic` | |
| `business_management` | |

The `BRAND_IG_ID` must be owned or shared with the business. You must have at least advertiser permissions for the `BRAND_IG_ID`.

*   **Request**

    You can either request the permission using the `CREATOR_IG_ID` or `CREATOR_IG_USERNAME`.

    ```curl
    curl \
      -F 'access_token=<ACCESS_TOKEN>' \
      -F 'creator_instagram_account=<CREATOR_IG_ID>' \// OR 
      -F 'creator_instagram_username=<CREATOR_IG_USERNAME>' \'https://graph.facebook.com/v24.0/<BRAND_IG_ID>/branded_content_ad_permissions'
    ```

*   **Response**

    ```json
    {
      "id": "<id_of_permission>"}
    ```

### View Partnership Ad Permission for a Brand

Apps can list existing partnership ad permissions (including pending) for a brand.

`GET /<BRAND_IG_ID>/branded_content_ad_permissions`

| **Inputs** | |
| :--- | :--- |
| `BRAND_IG_ID` | — Instagram user ID of the brand |
| `ACCESS_TOKEN` | — User access token, will have the brand data |

| **Permissions** | |
| :--- | :--- |
| `instagram_branded_content_ads_brand` scoped on `BRAND_IG_ID` | |
| `business_management` | |

*   **Request**

    ```curl
    curl -G \
      -d 'access_token=<ACCESS_TOKEN>' \'https://graph.facebook.com/v24.0/<BRAND_IG_ID>/branded_content_ad_permissions'
    ```

*   **Response**

    ```json
    {
      "data": [
        {
          "creator_username": "jaspersmarket",
          "creator_id": "123",
         "creator_fb_page": "123",
			"brand_ig_user": {
            "id": "1234"
          }
          "permission_status": "APPROVED", // Creator approval status: REVOKED, PENDING, etc.
          "id": "<ID_OF_PERMISSION>",
        }
      ],
      "paging": {
        "cursors": {
          "before": "MTM4OTY1MDkwNzkyMTE4NQ==",
          "after": "MTAyMzMxNzA5NzY5MjU4NA=="
        }
      }
    ```

### Revoking a Permission

Apps can revoke partnership ad permissions from creators on behalf of brands.

`POST /<BRAND_IG_ID>/branded_content_ad_permissions`

| **Inputs** | |
| :--- | :--- |
| `BRAND_IG_ID` | — Instagram user ID of the brand |
| `CREATOR_IG_ID` | — Instagram user ID of the creator |
| `ACCESS_TOKEN` | — User access token |

| **Permissions** | |
| :--- | :--- |
| `instagram_branded_content_ads_brand` scoped on `BRAND_IG_ID` | |
| `Business_management` | |

The `BRAND_IG_ID` must be owned or shared with the business. You must have at least advertiser permissions for the `BRAND_IG_ID`.

*   **Request**

    ```curl
    curl \
      -F 'access_token=<ACCESS_TOKEN>'\
      -F 'creator_instagram_account=<CREATOR_IG_ID>'\
      -F 'revoke=true''https://graph.facebook.com/v24.0/<BRAND_IG_ID>/branded_content_ad_permissions'
    ```

*   **Response**

    ```json
    {
      "id": "<id_of_permission>"}
    ```

## Partnership Ads Creation

Branded content ads are now called **partnership ads**.

Partnership ads allow advertisers to run ads with creators, brands, and other businesses. The advertiser and partner accounts are featured in the ad’s header and the ads leverage signals from both accounts for improved ranking and incremental performance.

Creators or partners must have a [professional account on Instagram](https://help.instagram.com/502981923235522) to use partnership ads and must meet our [eligibility requirements for Instagram partnership ads and branded content](https://www.facebook.com/business/help/271168173406325) and [Facebook partnership ads](https://www.facebook.com/business/help/271168173406325).

Through the partnership ads account level permissions APIs, advertisers can manage partnership ad relationships with their partners at the account level and run partnership ads without additional permissions at the content level.

**Note:** If two Instagram or Facebook accounts are owned by the same business and an employee has ads access to both assets, they will be able to run partnership ads without partnership ad permissions.

If an account level permission does not exist between the advertiser and the partner (See [Post-Level Permissioning](#post-level-permissioning) for more information):
*   Use a partnership ad code to create an ad using the ads creation APIs
*   Request creators to give advertisers permission to promote their organic branded content posts as partnership ads (applicable to only organic branded content posts).

### Before You Start

You will need:
*   The ID for the [Instagram Professional account](https://www.facebook.com/business/help/502981923235522) for your brand
*   The username for the [Instagram Professional account](https://www.facebook.com/business/help/502981923235522) (Instagram handle) - Optional
*   A Page access token requested from a person who can perform the `ADVERTISE` task on the Page linked to the Instagram Professional account
*   The following permissions:
    *   `ads_management`
    *   `business_management`
    *   `instagram_basic`
    *   `instagram_branded_content_ads_brand`
    *   `pages_read_engagement`
    *   `pages_show_list`
*   To get media and create ads on behalf of an Instagram Professional Account that you do not own or administer, you will need [Advanced Access](https://developers.facebook.com/docs/development/release/access-levels#advanced-access) for all permissions
*   In order to create ads, the advertiser would need `create_ads` permissions on the IG account that is creating the ad
*   The creator must have approved partnership ads account level permissions in order for the ad to deliver
*   If the advertiser publishes the ad without existing permissions, the ad would be published, but in a pending delivery state. The creator would receive a permission request from the brand to approve the permissions. Once approved, the ad would begin delivering.

### Requirements

The creator of the branded content must have enabled the media for ads creation

**OR**

The brand has approved the account level permission with the creator

### Create Partnership Ads by Boosting an Existing Post

Branded content ads are now called **partnership ads**.

Advertisers can now boost more types of organic Instagram content as partnership ads, including branded content with the paid partnership label, Instagram Collab posts, @mentions, people tags, product tags, and other content without the paid partnership label, but advertisers can still use the ad code or an existing media ID to create partnership ads for all types of contents.

This document shows you how to:
*   [Fetch branded content media](#fetch-the-branded-content-media)
*   [Fetch creator content recommendations that Meta predicts will be the best performing partnership ads for objectives](#fetch-creator-content-recommendations)
*   [Create partnership ads using the branded content media](#create-an-ad-creative)
*   [Create partnership ads using the partnership ad code](#using-a-partnership-ad-code)

**Before You Start**

Review the [requirements](#requirements-2) for creating partnership ads.

**Limitations**

[Recommendations](#fetch-creator-content-recommendations) are currently only available for partnership ads posts that have explicitly used the **Paid Partnership Label**.

#### Fetch the Branded Content Media

To get all media that an advertiser is tagged in, that are available to be used in an ad, send a `GET` request to the `/<INSTAGRAM_ID>/branded_content_advertisable_medias` endpoint where the `INSTAGRAM_ID` is the ID for the Instagram Professional account for your brand.

| Name | Dexcription |
| :--- | :--- |
| `creator_username` | Optional. | To find branded content for a specific creator for the brand, include the `creator_username` field set to the username for the creator. |
| `permalinks` | Optional. | An array of IG media permalinks that can be obtained from the creator that the advertiser is working with. |
| | | **Example:** `[‘Cw7zyQ5BdEE’,’Cw7zyQ5BdEh’]` |
| `only_fetch_allowlisted` | Optional. | Only fetch media from creators that have been allowlisted by the advertiser. **Note:** The default has been changed to `false` to allow advertisers to fetch more data and for API performance. |
| `only_fetch_recommended_content` | Optional. | Only fetch recommended content to boost if set to `true`. The default is `false`. **Note:** Recommended content to boost are organic partnership ads, which a brand has tagged as approved for promotion, that Meta predicts may perform well, including suggested ad campaign objectives. |
| `ad_code` | Optional. | The ad code shared by the creator the advertiser is working with. |
| `media_relationship` | Optional. | Any array of value(s) that specifies whether to fetch tagged and/or owned media. **Note:** When `media_relationship=['OWNED']`, the `creator_username`, `only_fetch_allowlisted`, and `only_fetch_recommended_content` parameters are disabled, since they are only applicable to tagged media. When `media_relationship` is specified, the `ad_code` and `permalinks` parameters are disabled. |
| | | **Values:** |
| | | `IS_TAGGED` — Fetches collaborated/branded content media where the advertiser is tagged as a collaborator or partner. |
| | | `OWNED` — Fetches collaborated/branded content media that the advertiser owns. |

**Sample Request**

Formatted for readability.

```curl
curl -i -X GET \
  -d 'creator_username=<CREATOR_USERNAME>' \
  -d 'access_token=<PAGE_ACCESS_TOKEN>' \
  -d 'permalinks=[<’PERMALINK1’,’PERMALINK2’>]' \
  -d 'only_fetch_allowlisted=<BOOLEAN>' \
  -d 'only_fetch_recommended_content=<BOOLEAN>' \
  -d 'ad_code=<CREATOR_AD_CODE>' \
'https://graph.facebook.com/v24.0/<INSTAGRAM_ACCOUNT_ID>/branded_content_advertisable_medias?fields=eligibility_errors,owner_id,permalink,id&access_token=<ACCESS_TOKEN>,has_permission_for_partnership_ad'
```

**Sample Response**

Upon success, your app will receive a list of media containing the media id, eligibility errors (if any), permalink, if advertiser has permissions to boost the post and owner ID of the media that can be used in ads.

```json
{
 "data": [
 	{
     "eligibility_errors": [
        "Cannot use Reels containing tappable elements can't be used for ads. Choose a different post to create an ad."
      ],
      "recommended_campaign_objectives": [
        "OUTCOME_ENGAGEMENT",
        "OUTCOME_TRAFFIC",
        "OUTCOME_LEADS"
      ],
      "has_permission_for_partnership_ad":true
      "owner_id": "16502228360082",
      "permalink": "https://www.instagram.com/reel/CzboAd3R91-/",
      "id": "16502230933174"
    },
    {
      "owner_id": "90010135660647",
      "permalink": "https://www.instagram.com/p/CywLmKWu6Zs/",
      "id": "90013017840068",
      "has_permission_for_partnership_a":true
    },
    {
      "owner_id": "90010489752294",
      "permalink": "https://www.instagram.com/p/CyWe6-ExB7p/",
      "id": "90012928652981",
      "has_permission_for_partnership_ad":false
    },
    {
      "eligibility_errors": [
        "Can’t use GIF stickersRemove or choose a different sticker."
      ],
      "owner_id": "90010135660647",
      "permalink": "https://www.instagram.com/reel/CyEb6q4OuoN/",
      "id": "90012872006248"
    },
  ...
 ],
 "paging": {
    "cursors": {
      "before": "QVFIUkR6amZAhLVVVWGpfTlRBenRsOUJCQ3lR==",
      "after": "QVFIUlhBX1hoQzI4SkVFaTRoeEpTdEpJMFdIUh=="
    }}
}
```

#### Fetch creator content recommendations

The API responds to a `only_fetch_recommended_content` request with `recommended_campaign_objectives`. When reviewing recommendations, remember that different ad objectives have distinct recommendations.

To help you understand the mapping, here is a breakdown of the equivalent campaign objectives in Ads Manager:

| Ads Manager Campaign Objectives | Recommended for impressions |
| :--- | :--- |
| `OUTCOME_AWARENESS` | |
| Recommended for engagement | `OUTCOME_ENGAGEMENT` |
| `OUTCOME_TRAFFIC` | |
| `OUTCOME_LEADS` | |
| Recommended for conversion | `OUTCOME_APP_PROMOTION` |
| `OUTCOME_SALES` | |

**Note:** The same content is eligible to be recommended for multiple objectives.

You may encounter content without any associated recommendations. This could be due to the following reasons:
*   Recommendations require a 3-day lag to generate, allowing organic engagement metrics to stabilize.
*   Recommendations are only available for content published within the last 60 days.

If no recommendations are available, there will be no associated information displayed.

#### Owned and tagged media

Use the `media_relationship` parameter to fetch the owned and tagged media of an Instagram account.

**Example requests**

**Fetch all tagged media of a specific Instagram account**
```curl
curl -i -X GET \
  -F 'media_relationship=["IS_TAGGED"]' \
  -F 'access_token=<ACCESS_TOKEN>' \
'https://graph.facebook.com/v24.0/<INSTAGRAM_ACCOUNT_ID>/branded_content_advertisable_medias'
```

**Fetch all owned media of a specific Instagram account**
```curl
curl -i -X GET \
  -F 'media_relationship=["OWNED"]' \
  -F 'access_token=<ACCESS_TOKEN>' \
'https://graph.facebook.com/v24.0/<INSTAGRAM_ACCOUNT_ID>/branded_content_advertisable_medias'
```

**Fetch all owned and tagged media of a specific Instagram account**
```curl
curl -i -X GET \
  -F 'media_relationship=["OWNED","IS_TAGGED"]' \
  -F 'access_token=<ACCESS_TOKEN>' \
'https://graph.facebook.com/v24.0/<INSTAGRAM_ACCOUNT_ID>/branded_content_advertisable_medias'
```

**Fetch tagged media, filtered to only return media by the specified creator, and all owned media**
```curl
curl -i -X GET \
  -F 'creator_username=<CREATOR_USERNAME>' \
  -F 'media_relationship=["OWNED","IS_TAGGED"]' \
  -F 'access_token=<ACCESS_TOKEN>' \
'https://graph.facebook.com/v24.0/<INSTAGRAM_ACCOUNT_ID>/branded_content_advertisable_medias'
```

### Create an Ad Creative

| Name | Description |
| :--- | :--- |
| `object_id` | `int` | Facebook Page ID for the brand. |
| `object_story_id` | `string` | A combination of the Creator's FB Delegate Page ID and Post ID delimited by an `_`. To be used only for creating ads from Facebook content. |
| | | Eg: `"<CREATOR_PAGE_ID>_<CREATOR_POST_ID>"` |
| `branded_content` | `JSON object` | Object containing information about the partnership ad. |
| | | Use `instagram_boost_post_access_token` when using a partnership ad code to create the ad. |
| | | The `ad_format` parameter sets the identities to display in the ad. |
| | | **Values:** |
| | | `1` (default): Renders both provided identities. This is the default value if nothing is passed in. |
| | | `2`: Renders only the first identity provided. |
| | | `3`: Allows the system to automatically optimize for the most performant option between between single identity (2) and dual identity (1). **Note:** This currently only optimizes on Instagram. |
| `facebook_branded_content` | `JSON object` | Object containing the required parameters for Facebook partnership ads. |
| `instagram_branded_content` | `JSON object` | Object containing the required parameters for Instagram partnership ads. |
| `source_instagram_media_id` | `numeric string` or `integer` | Instagram media ID to use in the ad. Use this parameter when using an Instagram post to create the ad. |

#### Using the Instagram Media ID

To create ads, you will use the [Marketing API](https://developers.facebook.com/docs/marketing-api) as you normally would for ads creation.

Send a `POST` request to the `act_<AD_ACCOUNT_ID>/adcreatives` endpoint with the `object_id` field set to the ID for the Facebook Page for your brand and the `source_instagram_media_id` field set to the ID for the Instagram Post for the branded content you want to use in your ad.

*   **Request**

    Formatted for readability.

    ```curl
    curl -X POST \
      -F 'object_id=<PAGE_ID>' \
      -F 'source_instagram_media_id=<IG_MEDIA_ID>' \
      -F 'access_token=<ACCESS_TOKEN>' \
      -F 'facebook_branded_content={
        "sponsor_page_id": "<ADVERTISER_FB_PAGE_ID>"
      }' \
      -F 'instagram_branded_content={
        "sponsor_id": "<ADVERTISER_IG_ID>"
      }' \
      -F 'branded_content={
        "ad_format": "<AD_FORMAT_TYPE>"
      }' \'https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives'
    ```

*   **Response**

    Upon success, your app will receive an ID for the ad creative.

    ```json
    {
      "id": "<CREATIVE_ID>"}
    ```

#### Using the Facebook Post ID

Ads can similarly be created from facebook posts with some minor changes to the API payload. Instead of the `source_instagram_media_id`, facebook content requires the `object_story_id` which is a combination of the creator's FB profile, post IDs.

*   **Request**

    Formatted for readability.

    ```curl
    curl -X POST \
      -F 'object_story_id="<CREATOR_PAGE_ID>_<CREATOR_POST_ID>' \
      -F 'access_token=<ACCESS_TOKEN>' \
      -F 'facebook_branded_content={
        "sponsor_page_id": "<ADVERTISER_FB_PAGE_ID>"
      }' \
      -F 'instagram_branded_content={
        "sponsor_id": "<ADVERTISER_IG_ID>"
      }' \
      -F 'branded_content'={
        "ad_format": "<AD_FORMAT_TYPE>"
      }' \
    'https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives'
    ```

*   **Response**

    Similarly upon success, your app will receive an ID for the ad creative.

    ```json
    {
      "id": "<CREATIVE_ID>"}
    ```

#### Using a Partnership Ad Code

To create ads using a Partnership Ad Code, you will use the [Marketing API](https://developers.facebook.com/docs/marketing-api) as you normally would for ads creation.

Send a `POST` request to the `act_<AD_ACCOUNT_ID>/adcreatives` endpoint with the `object_id` field (creator Facebook Page ID) set to the ID for the Facebook Page for your brand and the `instagram_boost_post_access_token` given by the creator.

**Request for using Instagram Media**

These are the required fields to be passed in the API call (example in JavaScript):

```curl
curl -X POST \
  -F 'object_id=<BRAND_PAGE_ID>' \
  -F 'branded_content ={
       "instagram_boost_post_access_token": "<AD_CODE>",
       "ad_format": "<AD_FORMAT_TYPE>"
   }' \
  -F 'access_token=<ACCESS_TOKEN>' \
  -F 'facebook_branded_content={
    "sponsor_page_id": "<ADVERTISER_FB_PAGE_ID>"
  }' \
  -F 'instagram_branded_content={
    "sponsor_id": "<ADVERTISER_IG_ID>"
  }' \'https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives'
```

**Request for using Facebook Post**

```curl
curl -X POST \
  -F 'branded_content ={
       "facebook_boost_post_access_token" : "<AD_CODE>",
       "ad_format": "<AD_FORMAT_TYPE>"
   }' \
  -F 'access_token=<ACCESS_TOKEN>' \
  -F 'facebook_branded_content={
    "sponsor_page_id": "<ADVERTISER_FB_PAGE_ID>"
  }' \
  -F 'instagram_branded_content={
    "sponsor_id": "<ADVERTISER_IG_ID>"
  }' \'https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives'
```

*   **Response**

    Upon success, your app will receive an ID for the ad creative.

    ```json
    {
      "id": "<CREATIVE_ID>"}
    ```

### Create an Ad

Next, you will use the ad creative, to create the ad.

Send a `POST` request to the `act_<AD_ACCOUNT_ID>/ads` endpoint with the `name` field set to the name for your ad, the `adset_id` field set to the ID for your ad set, the `creative` field with the `creative_id` parameter set to the ID for your ad creative, and the `status` intially set `PAUSED`.

This will work for ad creatives created from both Instagram media and Facebook posts.

*   **Request**

    ```curl
    curl -X POST \
      -F 'name": "Ad Name"' \
      -F 'adset_id: <ADSET_ID>' \
      -F 'creative: {"creative_id": <CREATIVE_ID>}' \
      -F 'status: "PAUSED"' \
      -F 'access_token=<ACCESS_TOKEN>' \'https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/ads'
    ```

*   **Response**

    Upon success, your app will receive an ID for the ad.

    ```json
    {"id": "<AD_ID>"}
    ```

You can use this ad ID to publish your ad.

### Troubleshooting

#### Uploading an Instagram Video to Facebook

If you are working on boosting video media, you might encounter the error "Instagram Video Must Be Uploaded To Facebook".

If you have the partnership ad code, you may leverage the following workaround using the the `partnership_ad_ad_code` parameter to upload the video asset to the Facebook video ad library, instead of resorting to source file information:
*   `partnership_ad_ad_code` – Partnership ad code (numerical). Use this parameter to include a partnership ad code, bypassing the need to know source file information.
*   `is_partnership_ad` – \[Optional] Use this parameter to identify that the ad will be a partnership ad.

```curl
curl -X POST \
  -F 'source_instagram_media_id=<MEDIA-ID>' \
  -F 'partnership_ad_ad_code=<PARTNERSHIP_AD_AD_CODE>' \
  -F 'is_partnership_ad=true' \'https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/advideos'
```

Upon success, your app will receive an ID for the video.

```json
{
  "id": "<VIDEO-ID>"}
```

If you don't have a partnership ad code, refer to the [Ad Videos](https://developers.facebook.com/docs/marketing-api/guides/video-ads/ad-videos/) documentation.

## Create Partnership Ads by Uploading a New Creative

Branded content ads are now called **partnership ads**.

You can use branded content media, such as a post tagged as branded content by a creator, to create partnership ads using the Marketing API. This document shows you how to:
*   [Create Partnership Ads by uploading a new creative](#upload-a-new-creative)
*   [Creating an Ad with Advertiser as the primary identity and Creator as secondary identity](#creating-an-ad-with-the-advertiser-as-the-primary-identity)
*   [Creating an Ad with Creator as the primary identity and Advertiser as secondary identity](#creating-an-ad-with-the-creator-as-the-primary-identity)

### Before You Start

Review the [requirements](#requirements-2) for creating partnership ads.

### Upload a New Creative

Upload and manage images to later use in an ad creative. Image formats, sizes and design guidelines depend upon your type of ad; see [Ads Guide](https://www.facebook.com/business/ads-guide) and [Image Crop](https://developers.facebook.com/docs/marketing-api/guides/ad-creatives/image-crop) for more information.

To upload videos, follow the [Video API publishing guidelines](https://developers.facebook.com/docs/marketing-api/guides/video-ads/ad-videos).

### Fetch the Creator's ID

**Facebook Page ID**

A creator's Facebook Page ID can be fetched using the [Pages Search API](https://developers.facebook.com/docs/graph-api/reference/page-search).

A Page ID can also be fetched by requesting the creator to send over their FaceBook Page's ID.

Another way to obtain a Page ID is to go on to the Facebook Page and find it within the **Page Transparency** section under the Page's **About** information.

**Instagram ID**

To fetch the creator’s Instagram ID, we recommend using [Business Discovery](https://developers.facebook.com/docs/instagram-api/reference/ig-user/business_discovery).

This sample query shows how to get the creator Instagram ID of the Blue Bottle Coffee Instagram Account. Notice that business discovery queries are performed on the Instagram Business or Creator Account's ID (in this case, `17841405309211844`), not the username of the Instagram Business or Creator Account that you are attempting to get data about (`bluebottle` in this example).

*   **Request**

    ```curl
    curl -i -X GET \ 
      "https://graph.facebook.com/v24.0/17841405309211844?fields=business_discovery.username(bluebottle)&access_token=<ACCESS_TOKEN>"
    ```

*   **Response**

    ```json
    {
      "business_discovery": {"id": "17841401441775531" // Blue Bottle's Instagram Account ID }}
    ```

### Creating an Ad with the Advertiser as the Primary Identity

**Option 1**

Send a `POST` request to the `act_<AD_ACCOUNT_ID>/adcreatives` endpoint with the `page_id` field set to the ID for the Facebook Page for your brand; you would also need to pass the `sponsor_id` (Instagram) and the `sponsor_page_id` (Facebook) fields. The fields that you enter here will be the second identity of your partnership ad.

**Note:** The Instagram actor ID will automatically be derived from the FaceBook page passed in the `object_story_spec` field.

*   **Request**

    ```json
    {
      "degrees_of_freedom_spec": {    // required field to be passed
        "creative_features_spec": {
          "standard_enhancements": {    // required field to be passed
            "action_metadata": {
              "type": "DEFAULT"
            },
            "enroll_status": "OPT_IN"
          }
        },
        "degrees_of_freedom_type": "USER_ENROLLED_AUTOFLOW"
      },
      "facebook_branded_content": {
        "sponsor_page_id": "255033446395141" // Creator Page ID (test rithiky brand)
      },
      "instagram_branded_content": {
        "sponsor_id": "90010551992170" // Creator IG ID (test_rithiky_brand)
      },
      "object_story_spec": {
        "page_id": "110001241469329",   // Advertiser Page ID (test vitaan brand new)
      "link_data": {
          "attachment_style": "link",
          "call_to_action": {
            "type": "LEARN_MORE"
          },
          "link": "www.instagram.com", // sample url
          "image_hash": "1b7a65956006e9941608b3914d3964f5" //sample image hash
        }
      }}
    ```

*   **Response**

    ```json
    {
      "id": <CREATIVE_ID>}
    ```

*   **Examples**

    Here is how the above sample request would output the ad.

    **Instagram Feed**

    ![Instagram Feed ad preview showing Advertiser as primary identity and Creator as secondary identity.](https://developers.facebook.com/docs/marketing-api/guides/partnership-ads/assets/Advertiser_Primary_IG_Feed.png)

    **Facebook Feed**

    ![Facebook Feed ad preview showing Advertiser as primary identity and Creator as secondary identity.](https://developers.facebook.com/docs/marketing-api/guides/partnership-ads/assets/Advertiser_Primary_FB_Feed.png)

**Option 2**

Send a `POST` request to the `act_<AD_ACCOUNT_ID>/adcreatives` endpoint with the `page_id` field set to the ID for the Facebook Page for your brand. You can choose to only pass the `sponsor_id` (Instagram) field or the `sponsor_page_id` (Facebook) field; the fields that you enter here will be the second identity of your partnership ad. Our backend implementation will automatically update the connected FaceBook Page and deliver the same ad as seen above on both FaceBook and Instagram.

**Note:** If there is no hard link between the Instagram and Facebook accounts, the ad will not be delivered to that specific platform, if either one of the fields (`facebook_branded_content` or `instagram_branded_content`) is passed.

*   **Request**

    ```json
    {...
      "facebook_branded_content": {
        "sponsor_page_id": "255033446395141" // Creator Page ID (test rithiky brand)
      } // OR
      "instagram_branded_content": {
        "sponsor_id": "90010551992170" // Creator IG ID (test_rithiky_brand)
      },...}
    ```

*   **Response**

    ```json
    {
      "id": <CREATIVE_ID>}
    ```

### Creating an Ad with the Creator as the Primary Identity

To create ads, you will use the [Marketing API](https://developers.facebook.com/docs/marketing-api) as you normally would for ads creation.

Send a `POST` request to the `act_<AD_ACCOUNT_ID>/adcreatives` endpoint with the `page_id` field set to the ID for the Facebook Page of the creator.

If the creator does not have an existing Facebook Page, we can pass the Advertiser Page ID as the `page_id` field. But one thing to note would be that the ad will not be delivered to Facebook.

**Note:** The Instagram actor ID will automatically be derived from the FaceBook Page passed in the `object_story_spec` field.

*   **Request**

    ```json
    {
      "degrees_of_freedom_spec": {    // required field to be passed
        "creative_features_spec": {
          "standard_enhancements": {    // required field to be passed
            "action_metadata": {
              "type": "DEFAULT"
            },
            "enroll_status": "OPT_IN"
          }
        },
        "degrees_of_freedom_type": "USER_ENROLLED_AUTOFLOW"
      },
      "facebook_branded_content": {
        "sponsor_page_id": "255033446395141" // Advertiser Page ID (test vitaan brand)
      },
      "instagram_branded_content": {
        "sponsor_id": "35302227070484" // Advertiser IG ID (test_vitaan_brand)
      },
      "object_story_spec": {
        "page_id": "255033446395141",   // Creator Page ID (test rithiky brand)
        "link_data": {
          "attachment_style": "link",
          "call_to_action": {
            "type": "LEARN_MORE"
          },
          "link": "www.instagram.com", // sample url
          "image_hash": "1b7a65956006e9941608b3914d3964f5" //sample image hash
        }
      }}
    ```

*   **Response**

    ```json
    {
      "id": <CREATIVE_ID>}
    ```

*   **Examples**

    Here is how the above sample request would output the ad.

    **Instagram Feed**

    ![Instagram Feed ad preview showing Creator as primary identity and Advertiser as secondary identity.](https://developers.facebook.com/docs/marketing-api/guides/partnership-ads/assets/Creator_Primary_IG_Feed.png)

    **Facebook Feed**

    ![Facebook Feed ad preview showing Creator as primary identity and Advertiser as secondary identity.](https://developers.facebook.com/docs/marketing-api/guides/partnership-ads/assets/Creator_Primary_FB_Feed.png)

### Create an Ad

Next, you will use the ad creative, to create the ad.

Send a `POST` request to the `act_<AD_ACCOUNT_ID>/ads` endpoint with the `name` field set to the name for your ad, the `adset_id` field set to the ID for your ad set, the `creative` field with the `creative_id` parameter set to the ID for your ad creative, and the `status` initially set `PAUSED`.

*   **Request**

    ```curl
    curl -X POST \
      -F 'name": "My Ad's Name"' \
      -F 'adset_id: <ADSET_ID>' \
      -F 'creative: {"creative_id": <CREATIVE_ID>}' \
      -F 'status: "PAUSED"' \
      -F 'access_token=<ACCESS_TOKEN>'\  
    'https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/ads'
    ```

*   **Response**

    Upon success, your app will receive an ID for the ad.

    ```json
    {
      "id": <AD_ID>}
    ```

You can use this ad ID to publish your ad.

## Supported Partnership Ads Configurations

The Instagram Partnership Ads API has several features to enhance the creation of partnership ads.

### Placement Asset Customization

Boost existing Instagram posts as partnership ads with [Placement Asset Customization](https://developers.facebook.com/docs/marketing-api/guides/asset-customization-rules/placement-asset-customization).

**Example request**

```curl
curl -X POST \
  -F "name=My creative title" \
  -F "object_id=<FB_PAGE_ID>" \
  -F "source_instagram_media_id=<IG_MEDIA_ID>" \
  -F "facebook_branded_content={
    "sponsor_page_id": "<FB_SPONSOR_PAGE_ID>"
  }" \
  -F "instagram_branded_content={
    "sponsor_id": "<IG_SPONSOR_ID>"
  }" \
  -F "asset_feed_spec={
    "optimization_type": "PLACEMENT",
    "asset_customization_rules": [
      {
        "image_label": {
          "name": "<IMAGE_LABEL>"
        },
        "customization_spec": {
          "publisher_platforms": [
            "instagram"
          ],
          "instagram_positions": [
            "stream"
          ]
        }
      }
    ]
    // other asset feed spec fields
  }" \
  -F "access_token=<ACCESS_TOKEN>"
"https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives"
```

**Example response**

```json
{
  "id": "<CREATIVE_ID>"
}
```

### Partnership Ads with Advantage+ Creative

**Standard Enhancements**

**Example request**

```curl
curl -X POST \
  -F "name=My creative title" \
  -F "object_id=<FB_PAGE_ID>" \
  -F "source_instagram_media_id=<IG_MEDIA_ID>" \
  -F "facebook_branded_content={
    "sponsor_page_id": "<FB_SPONSOR_PAGE_ID>"
  }" \
  -F "instagram_branded_content={
    "sponsor_id": "<IG_SPONSOR_ID>"
  }" \
  -F "degrees_of_freedom_spec={
    "creative_features_spec": {
      "standard_enhancements": {
        "enroll_status": "OPT_IN"
      }
    }
  }" \
  -F "access_token=<ACCESS_TOKEN>"
"https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives"
```

**Example response**

```json
{
  "id": "<CREATIVE_ID>"
}
```

**Product Extensions**

**Example request**

```curl
curl -X POST \
  -F "name=Product Extension Creative" \
  -F "object_id=<PAGE_ID>" \
  -F "source_instagram_media_id=<IG_MEDIA_ID>" \
  -F "facebook_branded_content={
    "sponsor_page_id": "<FB_SPONSOR_PAGE_ID>"
  }" \
  -F "instagram_branded_content={
    "sponsor_id": "<IG_SPONSOR_ID>"
  }" \
  -F "creative_sourcing_spec={
    "associated_product_set_id": "<PRODUCT_SET_ID>"
  }" \
  -F "degrees_of_freedom_spec={
    "creative_features_spec": {
      "product_extensions": {
        "enroll_status": "OPT_IN",
        "action_metadata": {
          "type": "MANUAL"
        }
      }
    }
  }" \
  -F "access_token=<ACCESS_TOKEN>"
"https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives"
```

**Example response**

```json
{
  "id": "<CREATIVE_ID>"
}
```

**Learn More**

[Product Extensions (Add Catalog Items) Features on Marketing API](https://developers.facebook.com/docs/marketing-api/guides/advantage-creative/product-extensions)

### Partnership Ads with Advantage+ Catalog Ads

Partnership ads enable advertisers to collaborate with creators or partners, leveraging their handle to increase engagement and generate interest in the ad. Advantage+ catalog ads are a type of personalized ad that automatically shows relevant products from a catalog to viewers based on their interests and actions. This document describes

how to create a partnership ad using a Advantage+ catalog ad with either a carousel or collection format.

**Permissions**

You will need the following permissions:
*   `ads_management`
*   `business_management`
*   `instagram_basic`
*   `instagram_manage_comments`
*   `instagram_content_publish`
*   `pages_show_list`
*   `pages_read_engagement`
*   `pages_manage_ads`
*   `pages_manage_posts`
*   `instagram_branded_content_ads_brand`

**Collection Format Only**

**Step 1: Create an Instant Experience body element with existing media as the hero asset**

The `canvas_existing_post` field takes in an existing Facebook or Instagram media ID (either a photo or video) and creates a body element with the media set as the hero asset of the element.

| Parameters | |
| :--- | :--- |
| `canvas_existing_post` | Uses an existing post as the hero asset for the element. |
| | **Values:** |
| | `source_instagram_media_id` — Specifies the Instagram media that is being used as the hero asset. |
| | `source_facebook_post_id` — Specifies the Facebook post that is being used as the hero asset. |

**Example requests**

**Using existing Instagram media**

```curl
curl -X POST \
  -F 'canvas_existing_post={ 
    "source_instagram_media_id":<IG_MEDIA_ID>
  }' \
  -F 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/<PAGE_ID>/canvas_elements
```

**Note:** When using an Instagram post that is a video, call the `/advideos` endpoint to ensure that the video is fully processed.

**Using existing Facebook media**

```curl
curl -X POST \
  -F 'canvas_existing_post={ 
    "source_facebook_post_id":<FB_MEDIA_ID>
  }' \
  -F 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/<PAGE_ID>/canvas_elements
```

**Step 2: Create the Instant Experience product set and footer**

Create the product set and footer as you would for any [collection ad](#product-sets).

**Step 3: Create an Instant Experience with existing media as the hero asset**

The `hero_asset_facebook_post_id` and `hero_asset_instagram_media_id` fields take in an existing Facebook or Instagram media ID and creates an Instant Experience with the media set as the hero asset of the canvas.

**Note:** If the hero asset is already set in the body element and a hero asset field is then passed in:
*   If the passed-in hero asset is `null`, the body element's hero asset overrides it.
*   If the passed-in hero asset is different from the body element's hero asset, you will receive an error.

| Parameters | |
| :--- | :--- |
| `hero_asset_instagram_media_id` | Specifies the Instagram media that is being used as the hero asset. |
| `hero_asset_facebook_post_id` | Specifies the Facebook post that is being used as the hero asset. |

**Example requests**

**Using existing Instagram media**

```curl
curl -X POST \
  -F 'body_element_ids=[
    <BODY_ELEM_ID_1>,
    <BODY_ELEM_ID_2>,
    ...
  ]' \
  -F 'is_published=true' \
  -F 'hero_asset_instagram_media_id=<IG_MEDIA_ID>' \
  -F 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/<PAGE_ID>/canvases
```

**Using existing Facebook media**

```curl
curl -X POST \
  -F 'body_element_ids=[
    <BODY_ELEM_ID_1>,
    <BODY_ELEM_ID_2>,
    ...
  ]' \
  -F 'is_published=true' \
  -F 'hero_asset_facebook_post_id=<FB_MEDIA_ID>' \
  -F 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/<PAGE_ID>/canvases
```

**Collection and Carousel Formats**

**Create an ad creative with an existing post as the parent source**

The `parent_source_instagram_media_id` and `parent_source_facebook_post_id` fields of `branded_content` take in an existing Facebook or Instagram media ID and creates an ad creative with the media set as the parent source of the element.

| Parameters | |
| :--- | :--- |
| `branded_content` | Object containing information about the partnership ad. |
| | **Values:** |
| | `parent_source_instagram_media_id` — Specifies the Instagram media that is being used as the parent source media shown as the intro card. |
| | `parent_source_facebook_post_id` — Specifies the Facebook post that is being used as the parent source media shown as the intro card. |

**Example requests**

**Using existing Instagram media**

```curl
curl -X POST \
  ... //other parameters for the ad creative \
  -F 'branded_content={ 
    "parent_source_instagram_media_id":<IG_MEDIA_ID>
  }' \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
```

**Note:** When using an Instagram post that is a video, call the `/advideos` endpoint to ensure that the video is fully processed.

**Using existing Facebook media**

```curl
curl \
  ... //other parameters for the ad creative \
  -F 'branded_content={ 
    "parent_source_facebook_post_id":<FB_MEDIA_ID>
  }' \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
```

**Note:** You only need to pass in `branded_content.parent_source_instagram_media_id` or `branded_content.parent_source_facebook_post_id` when using a canvas with an existing post. Whether the format is a collection or a carousel depends on other parameters passed in, which are omitted in these code samples.

# Advantage+ Campaign Experience for Sales, App, and Leads

We are introducing a new and streamlined process for creating campaigns, replacing the existing separate workflows for Manual, Advantage+ shopping campaigns (ASC), and Advantage+ app campaigns (AAC). In this new unified flow, you no longer need to specify the `smart_promotion_type` flag to create ASC or AAC campaigns. Instead, you can establish a campaign in the Advantage+ state by configuring it with Advantage+ budget, Advantage+ audience, and Advantage+ placement settings.

Beginning with v25.0, you will no longer be able to use the Advantage+ shopping campaign (ASC) API with the `smart_promotion_type=AUTOMATED_SHOPPING_ADS` field to create ASC campaigns, or the Advantage+ app campaign API with the `smart_promotion_type=SMART_APP_PROMOTION` field to create AAC campaigns. Instead, you will need to create campaigns with Advantage+ audience, Advantage+ campaign budget, and Advantage+ placements to create campaigns with an `advantage_state` that reflects the type of Advantage+ campaign. For more details, please review the blog post [here](https://developers.facebook.com/blog/post/2023/11/27/advantage-campaign-experience-updates/).

The `existing_customer_buget_percentage` field will be deprecated at the same time as the ASC API in v25.0. To replicate this field, refer to the [Replicate existing_customer_budget_percentage Behavior](#replicate-existing_customer_budget_percentage-behavior) section below.

This guide shows you how to create Advantage+ sales and app campaigns with `advantage_state` set to `advantage_plus_sales` or `advantage_plus_app`. These campaigns will be displayed in Ads Manager as Advantage+ sales (or app) campaign "ON" with the associated performance benefits. Advantage+ sales and app campaigns are the updated, streamlined versions of Advantage+ shopping campaigns and Advantage+ app campaigns.

In this new setup, all sales and app promotion campaigns can benefit from the AI optimizations that drive performance for Advantage+ shopping and app campaigns today. The complete range of ad tools will remain available to meet businesses’ needs.

You will need to ensure the campaign includes Advantage+ audience, Advantage+ campaign budget, and Advantage+ placement for the campaign to have the Advantage+ state enabled, as reflected in the `advantage_state` field set to a value other than `DISABLED`.

**Note:** No action is required to opt in to Advantage+ placement, as it is the default setting in the API.

## Create an Advantage+ Campaign

### Step 1: Choose an objective for the ad campaign

*   `OUTCOME_SALES`: Use this to achieve the same performance results of an Advantage+ shopping campaign when opted into the following automation settings.
*   `APP_INSTALLS`: Use this to achieve the same performance results of an Advantage+ app campaign when opted into the following automation settings.
*   `OUTCOME_LEADS`: Use this to achieve an Advantage+ leads campaign. Advantage+ leads campaigns are designed to maximize the performance of your leads campaigns with less set up time and greater efficiency. Using AI, Advantage+ leads campaigns can help you generate qualified leads by delivering your ads to more relevant audiences on more effective ad placements.

### Step 2: Set the required Advantage+ criteria

You can create an ad campaign that uses the same automation levers as an Advantage+ shopping campaign or Advantage+ app campaign using the following settings:

**Advantage+ placement state automation criteria**

*   No placement targeting or exclusions should be set, so all available placements will be eligible.
*   All ad sets in the ad campaign must fit this criteria or the ad campaign will reflect `advantage_state: DISABLED` due to placement restrictions (i.e., `advantage_placement_state: DISABLED`).
*   Placement exclusions may be set on the ad account level and the campaign will still be eligible for an `advantage_state` value that is not `DISABLED`.

**Advantage+ budget state criteria**

*   The budget is configured at the ad campaign level using a supported bid strategy

**Advantage+ audience state criteria**

Any of the following criteria may be used. **Note:** The following behavior must be applied to at least one ad set in the ad campaign.

*   (Recommended) Opt into Advantage+ audience with `"targeting_automation": {"advantage_audience": 1}`.
*   No targeting parameters set besides `geo_locations`, which are allowed.
*   (Advanced setup) Individual targeting options are allowed, but with relaxation. For more details on how to enable relaxation for individual targeting options, refer to the following documentation:
    *   [Advantage Lookalike](https://developers.facebook.com/docs/marketing-api/audiences/advantage-lookalike)
    *   [Advantage Custom Audience](https://developers.facebook.com/docs/marketing-api/audiences/advantage-custom-audience)
    *   [Advantage Detailed Targeting](https://developers.facebook.com/docs/marketing-api/guides/advantage-detailed-targeting)
    *   [Advanced Targeting: Enable Age and Gender as Suggestions](https://developers.facebook.com/docs/marketing-api/guides/advantage-detailed-targeting#advanced-targeting)

### Step 3: Verify the advantage_state_info opt-in

Once opted into these three automation levers, the ad campaign will reflect the following `advantage_state` at the ad campaign level in `advantage_state_info` depending on the objective.

`GET /v24.0/<CAMPAIGN_ID>?fields=name,objective,advantage_state_info`

`objective: OUTCOME_SALES`

```json
advantage_state_info: {
 advantage_state: ADVANTAGE_PLUS_SALES
 advantage_budget_state: ENABLED
 advantage_audience_state: ENABLED
 advantage_placement_state: ENABLED
}
```

`objective: APP_PROMOTION`

```json
advantage_state_info: {
 advantage_state: ADVANTAGE_PLUS_APP
 advantage_budget_state: ENABLED
 advantage_audience_state: ENABLED
 advantage_placement_state: ENABLED
}
```

`objective: OUTCOME_LEADS`

```json
advantage_state_info: {
 advantage_state: ADVANTAGE_PLUS_LEADS
 advantage_budget_state: ENABLED
 advantage_audience_state: ENABLED
 advantage_placement_state: ENABLED
}
```

### DISABLED state

If any of the levers `advantage_budget_state`, `advantage_audience_state`, or `advantage_placement_state` are `DISABLED`, the `advantage_state` within `advantage_stage_info` will be `DISABLED`.

```json
advantage_state_info: {
 advantage_state: DISABLED
 advantage_budget_state: DISABLED
 advantage_audience_state: ENABLED
 advantage_placement_state: ENABLED
}
```

A campaign must have `advantage_budget_state`, `advantage_audience_state`, and `advantage_placement_state` set to`ENABLED` in order to have the `advantage_state` set to `ADVANTAGE_PLUS_SALES`, `ADVANTAGE_PLUS_APP`, or `ADVANTAGE_PLUS_LEADS`.

If any of the automation levers return `DISABLED`, the `advantage_state` will reflect `DISABLED`.

The `advantage_state` field and its sub-fields `advantage_budget_state`, `advantage_audience_state`, and `advantage_placement_state` are read-only state information flags that can be queried, but are set by configuring the Advantage+ automation levers.

**Note:** Campaigns created with an `advantage_state` of `ADVANTAGE_PLUS_SALES`, `ADVANTAGE_PLUS_APP`, or `ADVANTAGE_PLUS_LEADS` will reflect a `smart_promotion_type` of `GUIDED_CREATION`.

## Replicate Advantage+ Shopping Campaign Performance with Advantage+ Campaigns

*   Set your ad campaign objective to `OUTCOME_SALES`.
*   Refrain from setting placement targeting or placement exclusions.
*   Configure a budget at the ad campaign level with a `bid_strategy` with `LOWEST_COST_WITHOUT_CAP` (recommended), `COST_CAP`, `LOWEST_COST_WITH_BID_CAP`, or `LOWEST_COST_WITH_MIN_ROAS`.
*   Refrain from setting any targeting parameters besides `geo_locations`, or opt into Advantage+ audience.

## Replicate existing_customer_budget_percentage behavior

To replicate `existing_customer_budget_percentage` behavior for your ad campaign, create two ad sets per ad campaign that separate existing customers from new customers.

1.  Set up a custom audience that defines your existing customers and have its custom audience ID.
2.  Set your budget at the ad campaign level using Advantage campaign budget.
3.  Create an ad set by making a `POST` request to `/act_<AD_ACCOUNT_ID/adsets`.
    *   Set a maximum spending limit for the ad set: `"daily_min_spend_target": "X", "daily_spend_cap": "X"`
    *   Set the `custom_audience` settings to include the custom audience that you consider your existing customers. Make sure this is not a suggestion or relaxed by ensuring that `targeting_relaxation_types` is set to 0 for custom audiences.

    ```json
    {
      "targeting":{
        "geo_locations":{
          "countries":["US"]
        },
        "custom_audiences":[{
          "id":<CUSTOM_AUDIENCE_ID>
        }],
        "targeting_relaxation_types":{
          "custom_audience":0
        }
      }
    }
    ```

4.  Use the same creative settings in both ad sets. Then, you can create your ad with the `/act_<AD_ACCOUNT_ID>/ads` endpoint.
5.  Duplicate your ad set, but edit it so that it includes a custom audience exclusion to exclude people who are your existing customers. You can:
    *   Include a second ad set in your `POST` call in step 3 with the exclusion of your custom audience that represents your existing customers.
    *   Repeat steps 1-4 to create a second ad set but ensure that your custom audience of existing customers is set to exclude.
    *   Use the `/adcopies` endpoint to duplicate your first ad set, then make a `POST` call to edit the ad set to exclude the custom audience ID of existing customers.

    ```json
    {
      "targeting":{
        "geo_locations":{
          "countries":["US"]
        },
        "age_min":25,
        "age_max":40,
        "excluded_custom_audiences":[{
          "id":<CUSTOM_AUDIENCE_ID>
        }],
      }
    }
    ```

You have created a new ad campaign with a spending limit on existing customers. It will run after review.

## Creating ads with an Advantage+ state follows the same process as in manual sales campaigns.

Refer to this documentation to create ads to with an enabled Advantage+ state:
*   [Manual Ads (non-Catalog Ads)](https://developers.facebook.com/docs/marketing-api/guides/ad-creatives/manual-ads)
*   [Advantage+ Catalog Ads](https://developers.facebook.com/docs/marketing-api/guides/advantage-catalog-ads)
*   [Shops Ads](https://developers.facebook.com/docs/marketing-api/guides/shops-ads)
*   [Localized Catalogs (or Advantage+ Catalog Ads for Multiple Languages or Countries)](https://developers.facebook.com/docs/marketing-api/guides/localized-catalog-for-advantage-catalog-ads)

## Migrate Advatage+ Shopping Campaigns and Advantage+ App Campaigns into Advantage+ Campaigns

**Limitations**

*   Advantage+ app campaigns can only be migrated, not copied, into the Advantage+ format.
*   Advantage+ shopping campaigns using `existing_customer_budget_percentage` cannot be migrated to the Advantage+ structure using the Marketing API. Open the campaign in Ads Manager to migrate to the Advantage+ structure.
*   Advantage+ shopping campaigns with more than 150 ads cannot be migrated to the Advantage+ structure using the Marketing API. Open the campaign in Ads Manager to migrate to the Advantage+ structure.

**Copy and migrate**

You can copy your Advantage+ shopping campaign into a new campaign in the Advantage+ structure with the `migrate_to_advantage_plus` parameter.

**Example request**

`curl -X POST <AD_CAMPAIGN_ID>/copies?migrate_to_advantage_plus=true`

**Example response**

```json
{
  "copied_campaign_id": "6877326900432",
  "ad_object_ids": [
    {
      "ad_object_type": "campaign",
      "source_id": "6877313029432",
      "copied_id": "6877326900432"
    }
  ]}
```

When the new campaign (`copied_id`) is queried, it will reflect a `smart_promotion_type` of `GUIDED_CREATION` and will have `advantage_state_info` details.

**Campaigns using existing_customer_budget_percentage**

Campaigns using `existing_customer_budget_percentage` can only be migrated to the Advantage+ structure by duplicating the campaign in the Ads Manager. You may open the campaign in Ads Manager for instructions on how to duplicate into the Advantage+ structure. For recreating as a new campaign, see the [Replicate Existing Customer Budget Percentage](#replicate-existing_customer_budget_percentage-behavior) section.

**Migrate only**

If you would like to keep the same campaign IDs, you can use the `migrate_to_advantage_plus` field to migrate your Advantage+ shopping campaigns/Advantage+ app campaigns into the Advantage+ format.

**Example request**

`curl -X POST <AD_CAMPAIGN_ID>?migrate_to_advantage_plus=true`

**Example response**

`{success: <BOOLEAN>}`

The campaign will then reflect a `smart_promotion_type` of `GUIDED_CREATION` and will have `advantage_state_info` details.

## FAQ

*   When will the phased rollout of the new streamlined Advantage+ campaign experience UI in Ads Manager be complete?
*   Why are we updating Advantage+ shopping campaigns to Advantage+ sales campaigns?
*   What are the implications of this update to the Advantage+ campaign experience on my campaign performance?
*   What happens to my campaign learnings when I use the `migrate_to_advantage_plus` field to copy or migrate my campaign?
*   Why are my advertisers seeing the new experience in some ad accounts and the original experience in others?
*   What happens to my existing Advantage+ shopping campaigns that I created via API when v25.0 rolls out?
*   What happens if I try to create an ASC/AAC campaign on v24.0?
*   How can I migrate my Advantage app campaigns into Advantage+?
*   Will I be able to edit my old Advantage+ shopping campaigns that I created via API without issue in the new Ads Manager UI after the new Advantage+ campaign UI experience is fully rolled out?
*   Will my ASC campaigns created through the API with `automated_shopping_ads` reflect as `"advantage_state": "ADVANTAGE_PLUS_SALES"` after this change?
*   If I create an ASC campaign before my ad account is enrolled in the new Advantage+ campaign Ads Manager experience, will that campaign reflect as "Advantage+ On" when it becomes enrolled? Will it show as `"advantage_state": "ADVANTAGE_PLUS_SALES"` in the API?
*   What’s the impact when I edit an API-created ASC campaign in the new Advantage+ campaign UI experience and leave its settings as "Advantage+ On"?
*   What happens to my ASC campaigns with `smart_promotion_type=AUTOMATED_SHOPPING_ADS` that were using `existing_customer_budget_percentage` if it’s not supported with Advantage+ sales campaigns?
*   The ad set of my ASC campaign contains more than 50 ads. Can I convert this ASC campaign to `"advantage_state": "ADVANTAGE_PLUS_SALES"`?
*   Can I use the `advantage_state` field to make a POST request to create an `ADVANTAGE_PLUS_SALES` campaign?
*   Can I make a POST request to `smart_promotion_type` to set it back to `GUIDED_CREATION` instead of `AUTOMATED_SHOPPING_ADS`?
*   What specific qualifications will make my campaign `ENABLED` for `advantage_audience_state`?
*   How do I disable an Advantage+ sales campaign so that `advantage_state` will reflect `DISABLED`?
*   Can I migrate my ad campaign if it is part of a Special Ad Category?

# Advantage+ Shopping Campaigns

We are introducing a new, unified, and streamlined process for creating campaigns, replacing the existing separate workflows for Manual, Advantage+ Shopping Campaigns (ASC), and Advantage+ App Campaigns.

As of v25.0, Marketing API developers will no longer be able to use the ASC API with the `smart_promotion_type=AUTOMATED_SHOPPING_ADS` field to create ASC campaigns. Instead, developers will need to use Advantage+ audience, Advantage+ campaign budget, and Advantage+ placements to create campaigns with an `advantage_state` that reflects the type of Advantage+ campaign. Refer to the [Advantage+ Campaigns documentation](#advantage-campaign-experience-for-sales-app-and-leads) to start creating Advantage+ campaigns today and avoid disruption with the releases of v24.0 and v.25.0.

Advantage+ shopping campaigns is a solution that enables ecommerce and retail direct-to-consumer and brand advertisers to potentially achieve better performance, greater personalization and more efficiency. These campaigns provide greater flexibility to control levers such as creative, targeting, placements and budget, and more opportunities to optimize campaigns that drive conversions.

Advantage+ Shopping Campaigns empower advertisers to use automation and AI to:

*   deliver campaigns at scale with sustained performance
*   increase efficiency with minimum effort to set up and manage different campaigns

It replaces a portfolio of manual sales campaigns using a combination of targeting, bidding, destination, creative, placement and budget set-ups within a single campaign to test up to 150 different combinations and optimize for the highest performing ads.

Learn more about the context and benefits of ASC in our [blog](https://developers.facebook.com/blog/post/2023/11/27/advantage-campaign-experience-updates/).

## Manual Campaign Setup Compared to Advantage+ Shopping Campaigns

| Manual BAU Campaign Setup | Advantage+ Shopping Campaign |
| :--- | :--- |
| Multiple BAU campaigns | BAU portfolio replacement |
| Manual Targeting with 7 Targeting levers | Automated targeting, automation to increase setup efficiency with 1 country input |
| Strict budget allocations in multiple campaigns | Budget liquidity within 1 campaign |
| Test up to 50 creative combinations | Allows both dynamic and static ads with up to 150 creative combinations |

This document outlines the steps you need to follow to set up your integration for Advantage+ shopping campaigns. You will need to:
*   [Define Existing Customers](#step-1-define-your-existing-customers-optional)
*   [Create Campaign](#step-2-create-campaign-1)
*   [Verify Campaign Creation](#step-3-verify-campaign-creation)
*   [Create Ad Set](#step-4-create-ad-set)
*   [Provide Creative and Create Ads](#step-5-provide-creative-and-create-ads)
*   [Set Minimum Age Constraint and Geo Exclusion (See Ad Account Controls reference doc)](#step-6-ad-account-controls-optional)
*   Have a `pixel_id` to set up Advantage+ Shopping Campaigns

Learn more about [Cross-Channel Conversion Optimization for Advantage+ shopping campaigns](#cross-channel-conversion-optimization-for-advantage-shopping-campaigns).

## Step 1: Define Your Existing Customers (Optional)

Optionally, Advantage+ shopping campaigns allow you to define your existing customers as a collection of custom audience IDs. Your existing customers are users who are already familiar with your business/product. Once this definition is set up, you can use this to segment your budget for Advantage+ shopping campaigns to limit spend on existing customers via `existing_customer_budget_percentage`. We will also provide you with metrics reporting the performance of your campaigns among these different segments. This step is not required unless you plan on using `existing_customer_budget_percentage`.

| Parameter | Description |
| :--- | :--- |
| `existing_customers` | `Array<string>` | Array of custom audience IDs that the ad account has access to. Currently the supported sources for the custom audience are website, app activity, customer list, catalog and offline activity. |

For information on how to create a custom audience, refer to [this page](https://developers.facebook.com/docs/marketing-api/guides/custom-audiences).

**Example**

```curl
curl -X POST \
  -F 'existing_customers=[<CUSTOM_AUDIENCE_ID>, <CUSTOM_AUDIENCE_ID>]' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>
```

For more information on tracking new and existing audiences in third-party tracking tools, see [Audience Type URL Parameters](#audience-type-url-parameters).

## Step 2: Create Campaign

Start by creating your ad campaign. To do this, make a `POST` request to `/act_{ad_account_id}/campaigns`.
*   Set `campaign_objective` to `OUTCOME_SALES`
*   Set `smart_promotion_type` to `AUTOMATED_SHOPPING_ADS` to indicate that the campaign you’re creating is an ASC campaign
*   ASC can be created only with the `OUTCOME_SALES` campaign objective.

| Parameters | |
| :--- | :--- |
| `name` | `string` | Required | Name for the Advantage+ shopping campaign |
| `objective` | `enum` | Required | Campaign's objective. Specify `OUTCOME_SALES` for this type of ad |
| `special_ad_categories` | `list<Object>` | Required | Special ad categories associated with the Advantage+ shopping campaign |
| `adlabels` | `list<Object>` | Optional | Ad Labels associated with the Advantage+ shopping campaign |
| `buying_type` | `string` | Optional | Advantage+ shopping campaigns only support the value `AUCTION` |
| `execution_options` | `list<enum>` | Optional | Default value: `set`. Other options are: |
| | | `validate_only`: when this option is specified, the API call will not perform the mutation but will run through the validation rules against values of each field. |
| | | `include_recommendations`: this option cannot be used by itself. When this option is used, recommendations for ad object's configuration will be included. A separate section recommendations will be included in the response, but only if recommendations for this specification exist. |
| | | If the call passes validation or review, the response will be `{"success": true}`. If the call does not pass, an error will be returned with more details. |
| `smart_promotion_type` | `enum` | Required | To specify this is an Advantage+ shopping campaign, the smart promotion type should be set to `AUTOMATED_SHOPPING_ADS` |
| `status` | `enum` | Optional | Valid options are: `PAUSED` and `ACTIVE`. |
| | | If this status is `PAUSED`, all its active ad sets and ads will be paused and have an effective status `CAMPAIGN_PAUSED` |

**Campaign Create Example**
```curl
curl -X POST \
  -F 'name=Advantage+ Shopping Campaign' \
  -F 'objective=OUTCOME_SALES' \
  -F 'status=ACTIVE' \
  -F 'special_ad_categories=[]' \
  -F 'smart_promotion_type=AUTOMATED_SHOPPING_ADS' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/campaigns
```

**Response**

```json
{
   "id": "<campaign_id>"}
```

**Updating**

You can update a Campaign by making a `POST` request to `/{campaign_id}`.

| Parameters | |
| :--- | :--- |
| `name` | `string` | Name for the Advantage+ shopping campaign |
| `special_ad_categories` | `list<Object>` | Special ad categories associated with the Advantage+ shopping campaign |
| `adlabels` | `list<Object>` | Ad Labels associated with the Advantage+ shopping campaign |
| `execution_options` | `list<enum>` | Default value: `set`. Other options are: |
| | | `validate_only`: when this option is specified, the API call will not perform the mutation but will run through the validation rules against values of each field. |
| | | `include_recommendations`: this option cannot be used by itself. When this option is used, recommendations for ad object's configuration will be included. A separate section recommendations will be included in the response, but only if recommendations for this specification exist. |
| | | If the call passes validation or review, the response will be `{"success": true}`. If the call does not pass, an error will be returned with more details. |
| `topline_id` | `numeric string` or `integer` | Topline ID |
| `status` | `enum` | You can use the following status for an update API call: |
| | | `ACTIVE` |
| | | `PAUSED` |
| | | `DELETED` |
| | | `ARCHIVED` |
| | | If an ad campaign is set to `PAUSED`, its active child objects will be paused and have an effective status `CAMPAIGN_PAUSED`. |

**Campaign Update Example**
```curl
curl -X POST \
  -F 'name=Advantage+ Shopping Update Sample Campaign' \
  -F 'status=PAUSED' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/<CAMPAIGN_ID>
```

## Step 3: Verify Campaign Creation

To verify that you have successfully created an Advantage+ shopping campaign, you can make a `GET` request to `/<AD_CAMPAIGN_ID>` with the field `smart_promotion_type`.

A valid Advantage+ shopping campaign will return the field value `AUTOMATED_SHOPPING_ADS`.

**Example**

```curl
curl -X GET -G \
  -d 'fields=smart_promotion_type' \
  -d 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/<AD_CAMPAIGN_ID>
```

**Response**

```json
{
  "smart_promotion_type": "AUTOMATED_SHOPPING_ADS",
  "id": <AD_CAMPAIGN_ID>}
```

## Step 4: Create Ad Set

Once you have completed the campaign creation, you can create an ASC ad set. Make a `POST` request to `/act_{ad_account_id}/adsets`.

Only one Ad Set can be associated with each ASC campaign.

For ad sets targeting Taiwan, the `regional_regulated_categories` and `regional_regulation_identities` fields must be set to identify the name of the individual or organization paying for and/or benefitting from the ad. Please see the [Ad Set documentation](https://developers.facebook.com/docs/marketing-api/reference/ad-set) for more details.

For a lightweight Ad Set creation:
*   Set performance goal to maximize the number of conversions (`optimization_goal=OFFSITE_CONVERSIONS`)
*   Use auto-bidding (`bid_strategy=LOWEST_COST_WITHOUT_CAP`)
*   Target by ISO country code using `geo_locations` field
*   Choose either a `daily_budget` or a `lifetime_budget`. If you choose to specify a `lifetime_budget`, you must also set the `end_time`
*   Set the conversion location to website under the `promoted_object` by specifying the `pixel_id` for your website and setting `custom_event_type=PURCHASE`
*   Set `billing_event=IMPRESSIONS`. This is the only supported billing event for ASC.

| Parameters | |
| :--- | :--- |
| `campaign_id` | `numeric string` or `integer` | Required | A valid Advantage+ shopping campaign you wish to add this ad set to. |
| `name` | `string` | Required | Name for the Advantage+ shopping campaign |
| `promoted_object` | `Object` | Required | The object this ad set is promoting across all its ads. For Advantage+ shopping campaigns, provide: |
| | | `pixel_id` |
| | | `custom_event_type`: Advantage+ shopping ad set supports the following events: `PURCHASE`, `ADD_TO_CART`, `INITIATED_CHECKOUT`, `ADD_PAYMENT_INFO`, `ADD_TO_WISHLIST`, `CONTENT_VIEW`, `COMPLETE_REGISTRATION`, `DONATE`, `START_TRIAL`, `SUBSCRIBE`, `SEARCH`, `DONATE` (Website-only conversion location), `OTHER` (Website-only conversion location for custom events), and custom conversions. |
| | | **Restrictions** |
| | | `optimization_goal=VALUE` only supports `PURCHASE` as the conversion event |
| | | All conversion events are supported for `optimization_goal=OFFSITE_CONVERSIONS` |
| | | Website and Shop conversion location only supports `PURCHASE` as a conversion event. If an advertiser selects anything else, the campaign will convert to the Website conversion location |
| | | There are 2 types of cross-channel conversion configurations in `promoted_object`. Cross-channel conversion is optional. For a Website-only conversion location, specify the `pixel_id` for your website and set `custom_event_type=PURCHASE`. |
| | | Website and App: Use this if you can track the same web and app events, such as with an active Meta Pixel or Facebook SDK. You will need to specify the app information under `promoted_object` using `omnichannel_object`. |
| | | Website and Shop: Use this if your business has an onsite Shop. This is for businesses with both an app and an eligible Shop. Specify Shop information by setting `destination_type=SHOP_AUTOMATIC` and using `omnichannel_object` under `promoted_object` to specify `commerce_merchant_settings_id`. |
| | | Learn more about and view configuration examples for [cross-channel conversion optimization for Advantage+ shopping campaigns](#cross-channel-conversion-optimization-for-advantage-shopping-campaigns). |
| `targeting` | `Targeting object` | Required | An Advantage+ shopping ad set’s targeting structure. Only `geo_locations` are allowed to be specified. |
| `geo_locations` | `array` | Required | Used to limit the audience of the ad set by |
| | | `countries` — Country targeting. Requires an array of 2-digit ISO 3166 format codes. |
| | | **Example:** `{"geo_locations": {"countries": [“US”]}}` |
| | | `regions` — State, province, or region. See [Targeting Search, Regions](https://developers.facebook.com/docs/marketing-api/targeting-search/reference#regions) for available values. Limit: 200. |
| | | **Example:** `{"geo_locations": {"regions": [{"key":"3847"}]}}` |
| `daily_budget` | `int64` | Optional | The daily budget defined in your account currency, allowed only for ad sets with a duration (difference between `end_time` and `start_time`) longer than 24 hours. |
| | | Either `daily_budget` or `lifetime_budget` must be greater than 0. |
| `lifetime_budget` | `int64` | Optional | Lifetime budget, defined in your account currency. If specified, you must also specify an `end_time`. |
| | | Either `daily_budget` or `lifetime_budget` must be greater than 0. |
| `end_time` | `datetime` | Required when `lifetime_budget` is specified. | When creating an ad set with a `daily_budget`, specify `end_time=0` to set the ad set as ongoing with no end date. UTC UNIX timestamp |
| | | **Example:** `2015-03-12 23:59:59-07:00` or `2015-03-12 23:59:59 PDT`. |
| `optimization_goal` | `enum` | Optional | Select `OFFSITE_CONVERSIONS` to target delivery to individuals more likely to take a specific action on your website. |
| | | Select `VALUE` as the optimization goal if you want to target delivery to individuals who are more likely to make high-value purchases. In Ads Manager, we display **Highest Value** as your bid strategy. |
| | | `VALUE` optimization goal is only available for Website conversion location and requires `promoted_object` to have a specified `pixel_id` for your website and the `custom_event_type=PURCHASE`. |
| `bid_strategy` | `enum` | Optional | `LOWEST_COST_WITHOUT_CAP`: Facebook automatically bids on your behalf and gets you the lowest cost results. Automatically increase your effective bid as needed to get the results you want based on your given `optimization_goal`. This is the default `bid_strategy` when `optimization_goal` is `OFFSITE_CONVERSION` or `VALUE`. |
| | | `LOWEST_COST_WITH_MIN_ROAS`: Specific bidding option for value optimization. You must specify a `roas_average_floor`, which is the minimum return wanted from ads spend. Allows advertisers to keep return on ad spend around an average amount over the course of their campaign. You must specify `roas_average_floor`, which is the minimum return wanted from ads spend, within the `bid_constraints` object. This strategy is available for Website-only conversion location. It is compatible with `VALUE` as the `optimization_goal`. See [Minimum Return on Advertiser Spend Bidding](https://www.facebook.com/business/help/1569094709848135). |
| | | `COST_CAP`: Get the most results possible while we strive to meet the cost per action you set. You must provide a cap number in the `bid_amount` field. Allows advertisers to scale conversions while keeping costs around their desired average CPA. You must provide a cap number in `bid_amount` to use this strategy. It is available for Website and Website and App conversion locations, and is compatible with `OFFSITE_CONVERSIONS` as the `optimization_goal`. |
| | | Adherence to cost cap limits is not guaranteed. See [Cost Cap](https://www.facebook.com/business/help/201402283731114). |
| `bid_amount` | | Required if `bid_strategy` is `COST_CAP`. |
| `bid_constraints` | `JSON object` | Optional | `optimization_goal` must be `VALUE`. |
| | | `bid_strategy` must be `LOWEST_COST_WITH_MIN_ROAS`. |
| | | Min ROAS bidding uses `bid_constraints` to pass the "ROAS floor", but you cannot use with `bid_constraints`, use `roas_average_floor` instead. See [Minimum Return on Advertiser Spend Bidding](https://www.facebook.com/business/help/1569094709848135). |
| | | The valid range of `roas_average_floor` is `[100, 10000000]`, inclusive. This means that the valid range of "minimum ROAS" is `[0.01, 1000.0]` or `[1%, 100000.0%]`, inclusive. |
| `billing_event` | `enum` | Required | A billing event for the ad set. Only `IMPRESSIONS` is supported for Advantage+ shopping campaigns. |
| `existing_customer_budget_percentage` | `number` | Optional | Specifies the maximum percentage of the budget that can be spent on the existing customers associated with this ad account. Lower values may lead to higher costs per conversion. Valid values are between 0-100. |
| `adlabels` | `list<Object>` | Optional | Specifies a list of labels to be associated with this object. |
| `start_time` | `datetime` | Optional. | The start time of the set. UTC UNIX timestamp |
| | | **Example:** `2015-03-12 23:59:59-07:00` or `2015-03-12 23:59:59 PDT`. |
| `time_start` | `datetime` | Optional | Time start |
| `time_stop` | `datetime` | Optional | Time stop |
| `attribution_spec` | `list<JSON Object>` | Optional | Conversion attribution spec used for attributing conversions for optimization. |

**Ad Set Create Example**
```curl
curl -X POST \
  -F 'name=Advantage+ Shopping Sample Ad Set' \
  -F 'campaign_id=<CAMPAIGN_ID>' \
  -F 'promoted_object={ "pixel_id": "<PIXEL_ID>", "CUSTOM_EVENT_TYPE": "PURCHASE" }' \
  -F 'daily_budget=<NUM>' \
  -F 'existing_customer_budget_percentage=<NUM>' \
  -F 'billing_event=IMPRESSIONS' \
  -F 'targeting={"geo_locations": {"countries": ["US"]}}' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adsets
```

**Example Response**
 `"id": "<adset_id>"`

**Ad Set Create Example where `bid_strategy=COST_CAP`:**

```curl
curl \
  -F 'name=My Ad Set' \
  -F 'optimization_goal=OFFSITE_CONVERSIONS \
  -F 'billing_event=IMPRESSIONS'
  -F 'bid_strategy=COST_CAP'
  -F 'bid_amount=200' \
  -F 'daily_budget=1000' \
  -F 'campaign_id=<CAMPAIGN_ID>' \
  -F 'targeting={"geo_locations":{"countries":["US"]}}' \
  -F 'status=PAUSED' \
  -F 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/<VERSION>/act_<AD_ACCOUNT_ID>/adsets
```

**Ad Set Create Example where `bid_strategy=LOWEST_COST_WITH_MIN_ROAS`:**

```curl
  curl \
  -F 'name=My Ad Set' \
  -F 'optimization_goal=OFFSITE_CONVERSIONS \
  -F 'billing_event=IMPRESSIONS'
  -F 'bid_strategy=LOWEST_COST_WITH_MIN_ROAS
  -F 'bid_constraints={"roas_average_floor": 1000} \
  -F 'daily_budget=1000' \
  -F 'campaign_id=<CAMPAIGN_ID>' \
  -F 'targeting={"geo_locations":{"countries":["US"]}}' \
  -F 'status=PAUSED' \
  -F 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/<VERSION>/act_<AD_ACCOUNT_ID>/adsets
```

**Updating**

You can update an Ad Set by making a `POST` request to `/{ad_set_id}`.

| Parameters | |
| :--- | :--- |
| `adlabels` | `list<Object>` | Specifies a list of labels to be associated with this object. This field is optional. |
| `daily_budget` | `int64` | The daily budget defined in your account currency, allowed only for ad sets with a duration (difference between `end_time` and `start_time`) longer than 24 hours. |
| | | Either `daily_budget` or `lifetime_budget` must be greater than 0. |
| `existing_customer_budget_percentage` | `number` | Specifies the maximum percentage of the budget that can be spent on the existing customers associated with this ad account. Lower values may lead to higher costs per conversion. Valid values are between 0-100. |
| `end_time` | `datetime` | End time, required when `lifetime_budget` is specified. |
| | | **Example:** `2015-03-12 23:59:59-07:00` or `2015-03-12 23:59:59 PDT` |
| | | When creating an ad set with a daily budget, specify `end_time=0` to set the ad set as ongoing with no end date. |
| | | UTC UNIX timestamp. |
| `execution_options` | `list<enum>` | Default value: `set`. Other options are: |
| | | `validate_only`: when this option is specified, the API call will not perform the mutation but will run through the validation rules against values of each field. |
| | | `include_recommendations`: this option cannot be used by itself. When this option is used, recommendations for ad object's configuration will be included. A separate section recommendations will be included in the response, but only if recommendations for this specification exist. |
| | | If the call passes validation or review, the response will be `{"success": true}`. If the call does not pass, an error will be returned with more details. |
| `start_time` | `datetime` | The start time of the set. Must be provided in UTC UNIX timestamp. |
| | | **Example:** `2015-03-12 23:59:59-07:00` or `2015-03-12 23:59:59 PDT`. |
| `status` | `enum` | Available options for updates: |
| | | `ACTIVE` |
| | | `PAUSED` |
| | | `DELETED` |
| | | `ARCHIVED` |
| | | If it is set to `PAUSED`, all its active ads will be paused and have an effective status `ADSET_PAUSED`. |
| `lifetime_budget` | `int64` | Lifetime budget, defined in your account currency. If specified, you must also specify an `end_time`. |
| | | Either `daily_budget` or `lifetime_budget` must be greater than 0. |
| `time_start` | `datetime` | Time start |
| `time_stop` | `datetime` | Time stop |
| `targeting` | `Targeting object` | Targeting structure for your ad set. Valid values for targeting are `geo_locations`. |
| `geo_locations` | `array` | Required | Used to limit the audience of the ad set by |
| | | `countries` — Country targeting. Requires an array of 2-digit ISO 3166 format codes. |
| | | **Example:** `{"geo_locations": {"countries": [“US”]}}` |
| | | `regions` — State, province, or region. See [Targeting Search, Regions](https://developers.facebook.com/docs/marketing-api/targeting-search/reference#regions) for available values. Limit: 200. |
| | | **Example:** `{"geo_locations": {"regions": [{"key":"3847"}]}}` |
| `attribution_spec` | `list<JSON Object>` | Optional | Conversion attribution spec used for attributing conversions for optimization. |

**Ad Set Update Example**
```curl
curl -X POST \
  -F 'name=Advantage+ Shopping Sample Updated Ad Set' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/<AD_SET_ID>
```

## Step 5: Provide Creative and Create Ads

Once you have an ad set, you can create your ad by posting to the `/act_{ad_account_id}/ads` endpoint. Creating Ads in Advantage+ Shopping Campaigns follows the same process as in manual sales campaigns. Please refer to the links below to create Ads under Advantage+ Shopping Campaigns:
*   [Manual Ads (non-Catalog Ads)](https://developers.facebook.com/docs/marketing-api/guides/ad-creatives/manual-ads)
*   [Advantage+ Catalog Ads (formerly known as Dynamic Ads)](#advantage-catalog-ads)
*   [Shops Ads](#shops-ads-with-advantage-shopping-campaigns)
*   [Localized Catalogs (or Advantage+ Catalog Ads for Multiple Languages or Countries)](https://developers.facebook.com/docs/marketing-api/guides/localized-catalog-for-advantage-catalog-ads)

| Parameters | |
| :--- | :--- |
| `name` | `string` | Required | Name of the ad |
| `adset_id` | `int64` | Required | The ID of the ad set, required on creation. |
| `creative` | `AdCreative` | Required | The creative spec or the ID of the ad creative to be used by this ad. Valid fields are: |
| | | `object_story_spec` |
| | | `product_set_id` |
| | | `use_page_actor_override` |
| | | `creative_id` |
| | | You can read more about creatives [here](https://developers.facebook.com/docs/marketing-api/guides/ad-creatives) |
| | | Provide the creative in the following format: `{"creative_id": <CREATIVE_ID>}` |
| | | Or provide a creative spec: |
| | | `{` |
| | | `        "creative": {` |
| | | `          "name": <NAME>, ` |
| | | `          "object_story_spec": <SPEC>,` |
| | | `          "product_set_id": <PRODUCT_SET_ID>` |
| | | `        }}` |
| `status` | `enum` | Optional | Only `ACTIVE` and `PAUSED` are valid during creation. During testing, it is recommended to set ads to a `PAUSED` status so as to not incur accidental spend. |
| `adlabels` | `list<Object>` | Optional | Ad Labels associated with this ad |
| `execution_options` | `list<enum>` | Optional | Default value: `set`. |
| | | `validate_only`: when this option is specified, the API call will not perform the mutation but will run through the validation rules against values of each field. |
| | | `synchronous_ad_review`: this option should not be used by itself. It should always be specified with `validate_only`. When these options are specified, the API call will perform Ads Integrity validations, which include message language checking, image 20% text rule, and so on, as well as the validation logics. |
| | | `include_recommendations`: this option cannot be used by itself. When this option is used, recommendations for ad object's configuration will be included. A separate section recommendations will be included in the response, but only if recommendations for this specification exist. |
| | | If the call passes validation or review, the response will be `{"success": true}`. If the call does not pass, an error will be returned with more details. |

**Ad Create Example**
```curl
curl -X POST \
  -F 'name=Advantage+ Shopping campaign Sample Ad' \
  -F 'adset_id=<ADSET_ID>' \
  -F 'creative={"name": <NAME>, "object_story_spec": <SPEC>}' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/ads
```

**Individual Ad Scheduling**

Individual Ad Scheduling allows advertisers to have more granular control to run their Ads during a specific time period by scheduling the start and end time. This feature is available for all campaign types.

**Example**

```json
{
  "ad_schedule_end_time": "2024-07-30T09:00:00+0100",
  "ad_schedule_start_time": "2024-07-26T12:00:32+0100"}
```

These are the parameters.

**Creative Fields**

For a full list of Ad Creative fields, see [here](https://developers.facebook.com/docs/marketing-api/reference/ad-creative).

| Field | Description |
| :--- | :--- |
| `object_story_spec` | `AdCreativeObjectStorySpec` | Required | Use if you want to create a new unpublished page post and turn the post into an ad. The Page ID and the content to create a new unpublished page post. |
| `use_page_actor_override` | `AdCreative` | Required | If `true`, we display the Facebook page associated with the Advantage shopping ads. |

**Create Creative Example**
```curl
curl -X POST \
  -F 'object_story_spec=<SPEC>' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
```

**Updating**

You can update an Ad by making a `POST` request to `/{ad_id}`.

| Parameters | |
| :--- | :--- |
| `name` | `string` | New name of the ad |
| `adlabels` | `list<Object>` | Ad labels associated with this ad. |
| `execution_options` | `list<enum>` | Default value: `set`. Other options are: |
| | | `validate_only`: when this option is specified, the API call will not perform the mutation but will run through the validation rules against values of each field. |
| | | `synchronous_ad_review`: this option should not be used by itself. It should always be specified with `validate_only`. When these options are specified, the API call will perform Ads Integrity validations, which include message language checking, image 20% text rule, and so on, as well as the validation logics. |
| | | `include_recommendations`: this option cannot be used by itself. When this option is used, recommendations for ad object's configuration will be included. A separate section recommendations will be included in the response, but only if recommendations for this specification exist. |
| | | If the call passes validation or review, the response will be `{"success": true}`. If the call does not pass, an error will be returned with more details. |
| `status` | `enum` | Options are: |
| | | `ACTIVE` |
| | | `PAUSED` |
| | | `DELETED` |
| | | `ARCHIVED` |
| | | During testing, it is recommended to set ads to a `PAUSED` status so as to not incur accidental spend. |
| `creative` | `AdCreative` | The creative spec of the ad creative to be used by this ad. Valid fields are `object_story_spec`, `asset_feed_spec`, and `use_page_actor_override` and can be viewed [here](https://developers.facebook.com/docs/marketing-api/reference/ad-creative). You can read more about creatives [here](https://developers.facebook.com/docs/marketing-api/guides/ad-creatives). |
| | | Provide the creative in the following format: |
| | | `{` |
| | | `    "creative": {` |
| | | `      "name": <NAME>, ` |
| | | `      "object_story_spec": <SPEC>,` |
| | | `      "product_set_id": <PRODUCT_SET_ID>` |
| | | `    }}` |

**Ad Update Example**
```curl
curl -X POST \
  -F 'name=Advantage+ Shopping campaign Sample Update Ad' \
  -F 'creative={"name": <NAME>, "object_story_spec": <SPEC>}' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/<AD_ID>
```

## Step 6: Ad Account Controls (Optional)

If your business has constraints, such as unable to show ads to people under a certain age, or is restricted to some countries, you can use Ad Account controls to choose how your ads are delivered. These constraints will apply across all new and existing campaigns (manual sales and ASC) across the account.

You can set the following optional features at the Ad Account Control level:

1.  **Minimum Age Constraint:** You can set the minimum age from 18 to 25. You cannot set the maximum age.
2.  **Exclude Geo Locations:** You can exclude certain locations from ad delivery based on country, state/province, city, DMA or zip code. See [targeting search](https://developers.facebook.com/docs/marketing-api/targeting-search) for available values.
3.  **Geo Inclusions:** You can include locations at the country level.
4.  **Placement Exclusions:** You can exclude certain placements to prevent ads appearing on specific surfaces. Available placements for exclusions are Audience Network, Facebook Marketplace, and Facebook’s Right Column. See [available values on the Marketing API](https://developers.facebook.com/docs/marketing-api/reference/ad-account-business-constraints).

**Step 6a: Define Constraints**

Make a `POST` request to `/act_{ad_account_id}/account_controls`:
*   Set `age_min` to a value between 18 - 25

*   Exclude locations you do not want your Ads to deliver in using `exclude_geo_locations`

*   Exclude ad placements where you do not want your Ads to appear using `placement_exclusions`

*   Include a specific country

**Example Request**

```curl
curl -X POST \-F 'audience_controls={
"age_min": 20, 
"excluded_geo_locations": {"countries": ["US"]}' \"geo_locations":{"countries": ["GB"]} \-F 'placement_controls = {"placement_exclusions": ["facebook_marketplace"]} \
-F 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/account_controls  
```

**Example Response**

```json
{
  "id": "<ad_account_business_constraints_id>",
  "success": true}
```

**Learn More**

*   [How to Create a Custom Audience](https://developers.facebook.com/docs/marketing-api/guides/custom-audiences)
*   [Campaigns](https://developers.facebook.com/docs/marketing-api/guides/campaigns)
*   [Ad Sets](https://developers.facebook.com/docs/marketing-api/guides/adsets)
*   [Ads](https://developers.facebook.com/docs/marketing-api/guides/ads)
*   [Ad Creative](https://developers.facebook.com/docs/marketing-api/guides/ad-creatives)
*   [Ad Recommendations](https://developers.facebook.com/docs/marketing-api/reference/ad-recommendations)
*   [Ad Creative Object Story Spec](https://developers.facebook.com/docs/marketing-api/reference/ad-creative-object-story-spec)
*   [Cross-channel conversion optimization for Advantage+ shopping campaigns](#cross-channel-conversion-optimization-for-advantage-shopping-campaigns)

# Cross-Channel Conversion Optimization for Advantage+ Shopping Campaigns

Cross-channel conversion optimization enables you to optimize conversions for both website and app within a single campaign. Selecting a website and app as the places you want conversions to happen captures more data, which may help lower cost per action (CPA) and can lead to an increase in conversions.

There are no changes at the Campaign level. The changes are at the Ad Set level and Ad level.

## Ad Set

At the Ad Set level, you need to specify the app information in `promoted_object`. To do that, please use `omnichannel_object`, and put it under `promoted_object`.

For omnichannel object validation:
*   All `custom_event_type` fields in the app and Pixel must be of the same event.
*   Both app SDK and Pixel are required.
*   Current ad accounts must have access to all app- and Pixel-promoted objects.

You can now also create Shop Ads with Advantage+ Shopping Campaigns by setting the `destination_type` as `SHOP_AUTOMATIC` on the ad set level and specifying your commerce account ID (`commerce_merchant_settings_id`) in the `omnichannel_object` under `promoted_object`.

| Field | Description |
| :--- | :--- |
| `app` | `list<AppPromotedObject>` | App-promoted objects associated with this omnichannel object. |
| | `application_id` | `string` | Application ID being promoted. |
| | `object_store_urls` | `List<string>` | List of object store URLs associated with application_id (Play Store and/or iTunes). |
| | `custom_event_type` — Advantage+ shopping ad set supports the following events: `PURCHASE`, `ADD_TO_CART`, `INITIATED_CHECKOUT`, `ADD_PAYMENT_INFO`, `ADD_TO_WISHLIST`, `CONTENT_VIEW`, `COMPLETE_REGISTRATION`, `START_TRIAL`, `SUBSCRIBE`, `SEARCH`. |
| | | For app-promoted object validation: |
| | | All `object_store_urls` must be associated with that application with corresponding `application_id`. You can configure this on [developers.facebook.com](https://developers.facebook.com) under your application settings. |
| | | `custom_event_type` — Advantage+ shopping ad set supports the following events: `PURCHASE`, `ADD_TO_CART`, `INITIATED_CHECKOUT`, `ADD_PAYMENT_INFO`, `ADD_TO_WISHLIST`, `CONTENT_VIEW`, `COMPLETE_REGISTRATION`, `START_TRIAL`, `SUBSCRIBE`, `SEARCH`. |
| `pixel` | `list<PixelPromotedObject>` | Pixel-promoted objects associated with this omnichannel object. |
| | `pixel_id` | `string` | Pixel ID being promoted. |
| | `custom_event_type` — Advantage+ shopping ad set supports the following events: `PURCHASE`, `ADD_TO_CART`, `INITIATED_CHECKOUT`, `ADD_PAYMENT_INFO`, `ADD_TO_WISHLIST`, `CONTENT_VIEW`, `COMPLETE_REGISTRATION`, `START_TRIAL`, `SUBSCRIBE`, `SEARCH`. |
| `onsite` | `list` | Required for Shops Ads. |
| | `commerce_merchant_settings_id` | `String` | Commerce account ID |

**Example**

```json
{ 
     daily_budget: 20000, 
     promoted_object: {
         omnichannel_object: { 
             app: [ 
                 { 
                     application_id: <application_id>,
                     custom_event_type: PURCHASE,
                     object_store_urls: [
                         "https://play.google.com/store/apps/details?id=com.facebook.ka"
                         "https://apps.apple.com/us/app/facebook/id284882215",
                     ],
                 },
             ],
             pixel:  [
                 {
                     Pixel_id: <pixel_id>,
                     custom_event_type: PURCHASE
                 },
             ],
         }
     }}
```

## Ad

At the Ad level, you can specify the primary destination and secondary destination that advertisers want users to land on when users click their ad. For example, you may want primary destination as apps, and if apps are not installed on users’ phones, then secondary destination can be website or app store. This destination setting is specified using `applink_treatment`. Advantage+ catalog ads already use these fields..

`applink_treatment` has the following values with the description below:

| Name | Description |
| :--- | :--- |
| `web_only` | Always send the user to the given web URL. |
| `deeplink_with_web_fallback` | If the app is installed on the user's phone and we have corresponding deep link information, send the user to the app. If one of these conditions is not met, send them to the website. |
| `deeplink_with_appstore_fallback` | Default when app links are present for the product. If the app is installed on the user's phone and we have corresponding deep link information, send the user to the app. If the app is not installed, send them to the app store for the app. |

Advantage+ shopping campaign does not support automatic mode.

There are also opportunities to specify deep links in the apps or website destinations. Learn more about [product deep links](https://www.facebook.com/business/help/1402287436662492).

The way to specify deep links is a little different for catalog ads and non-catalog ads format.

**Catalog Ads**

For catalog ads, the same `applink_treatment` setting can be used. But to specify deep links, `template_url_spec` is used instead of `omnichannel_link_spec`. In this field, you may use dynamic fields such as product URL or ID.

`template_url_spec` follows this specification.

**Example**

```json
{
   "creative":{
      "applink_treatment":"deeplink_with_web_fallback",
      "template_url_spec":{
         "android":{
            "url":"example://product/{{product.retailer_id | urlencode}}"
         },
         "config":{
            "app_id":"<application_id>"
         },
         "ios":{
            "url":"example://product/{{product.name | urlencode}}"
         },
         "web":{
            "url":"https://www.example.com/deeplink/{{product.name | urlencode}}"
         }
      }
   },
   "tracking_specs":[
      {
         "action.type":"offsite_conversion",
         "fb_pixel":"<pixel_id>"
      }
   ]}
```

**Non-Catalog Ads**

For manual upload ads, we've introduced a new field, `omnichannel_link_spec`, in Creative. It includes the following fields.

| Field | Description |
| :--- | :--- |
| `web` | Web configuration |
| | Pixel-promoted objects associated with this omnichannel object. |
| | `url` | `string` | Website that the user lands on via the browser. For web validation, `url` must be the same as the link provided in `link_data`.. |
| `app` | App destination configuration |
| | App-promoted objects associated with this omnichannel object. |
| | `application_id` | `string` | App that the user lands on via the browser. For validation, `application_id` must be consistent as the `application_id` in `omnichannel_object` within `promoted_object` |
| | `platform_specs` | `JSON` | Landing destination configuration per the platform. |

**Platform Specifications**

| Field | Description |
| :--- | :--- |
| `android` | `JSON` | Landing configuration for Android app. For web validation, `ios`, `ipad`, `iphone` are mutually exclusive. There can only be one of those keys that exist in the `platform_specs`. |
| | `url` | `string` | Deep link to open the app. [Learn more about product deep links](https://www.facebook.com/business/help/1402287436662492). |
| `ios` | `JSON` | Landing configuration for iOS app. For web validation, `ios`, `ipad`, `iphone` are mutually exclusive. There can only be one of those keys that exist in the `platform_specs`. |
| | `url` | `string` | Deep link to open the app. [Learn more about product deep links](https://www.facebook.com/business/help/1402287436662492). |
| `ipad` | `JSON` | Landing configuration for iPad-only app. For web validation, `ios`, `ipad`, `iphone` are mutually exclusive. There can only be one of those keys that exist in the `platform_specs`. |
| | `url` | `string` | Deep link to open the app. [Learn more about product deep links](https://www.facebook.com/business/help/1402287436662492). |
| `iphone` | `JSON` | Landing configuration for iPhone-only app. For web validation, `ios`, `ipad`, `iphone` are mutually exclusive. There can only be one of those keys that exist in the `platform_specs`. |
| | `url` | `string` | Deep link to open the app. [Learn more about product deep links](https://www.facebook.com/business/help/1402287436662492). |

**Example**

```json
{
  “creative”:{
  "applink_treatment": "deeplink_with_web_fallback",
  "omnichannel_link_spec": {
      "web": {
        "url": <web_url>
      },
      "app": {
        "application_id": <application_id>,
        "platform_specs": {
          "android": {
            "url": <android_deeplink>
          }, 
          "ios": {
            "url": <ios_deeplink>
          }
        }
      }
   },
  "object_story_spec": {
    "instagram_user_id": <IG_USER_ID>,
    "page_id": <page_id>,
    "link_data": {
      "call_to_action": {
        "type": "LEARN_MORE",
      },
      "link": web_url,
      "message": "Purchase now!",
      "name": "Sample creative"
    }
  },
  "object_type": "SHARE"}}
```

| Field | Description |
| :--- | :--- |
| `creative` | `Creative spec` | Required for creation. The ID or creative spec of the ad creative to be used by this ad. [Learn more about ad creatives](https://developers.facebook.com/docs/marketing-api/guides/ad-creatives). |
| | `{"creative_id": <creative_id>}` |
| | or creative spec as in the above example. |
| `tracking_specs` | `List of tracking spec` | Required tracking spec for conversion tracking. For ad validation, see the required specs below and respective example. |

For ad validation:
The tracking spec's (`tracking_specs`) `pixel_id` and `application_id` must be consistent with those in `promoted_object`. `tracking_specs` must include these specs:

| Tracking Spec | Code Sample |
| :--- | :--- |
| **Pixel** | `{` |
| | `       "action.type": ["offsite_conversion"],` |
| | `       "fb_pixel": [<pixel_id>]}` |
| **App install** | `{` |
| | `       "action.type": ["mobile_app_install"],` |
| | `       "application": [<application_id>]}` |
| **App event** | `{` |
| | `       "action.type": ["app_custom_event"],` |
| | `       "application": [<application_id>]}` |

**Example**

```json
{
     "name": "sample ad"
     "adset_id": "6170648652866",
     "creative": {
         "creative_id": <creative_id>,
    }
    "status": "PAUSED",
    "tracking_specs": [
        {
            "action.type": ["offsite_conversion"],
            "fb_pixel": [<pixel_id>]
        }
        {
            "action.type": ["mobile_app_install"],
            "application": [<application_id>]
        }
        {
            "action.type": ["app_custom_event"],
            "application": [<application_id>]
        }
    ]}
```

## Audience Type URL Parameters

The Urchin Tracking Module\* (UTM) is a standardized system for passing information from ad clicks via destination URL parameters to use in analytics. This means, when a user clicks on an ad, the request url will contain parameters that can be extracted by web plugins like Google Analytics.

At Meta, we allow advertisers to specify UTM parameters at an ad level under the **Tracking** section of the ad creation flow in Ads Manager. Typically, ads can have multiple ad sets per campaign which allows for having different URL parameters for each audience type associated with the ad set. However, Advantage+ shopping campaigns have only one ad set per campaign which is used for both retargeting and prospecting users.

Now, Advantage+ shopping campaigns will support custom audience types — new (prospecting) and existing (retargeting) for URL parameters to provide more context to the ad impressions. More specifically, we allow you to configure three (3) values of the `custom_audience_info` field to enable the audience type URL parameters: `audience_type_param_name`, `new_cusomter_tag`, and `existing_customer_tag`.

This feature is only available once the existing custom audience is set up. When that is completed, these parameters can be set in the Ad Account Settings in the **Advantage+ Shopping Campaigns** section.

**Parameters**

The `custom_audience_info` field extends the `/act_AD_ACCOUNT_ID` node.

| Name | Description |
| :--- | :--- |
| `custom_audience_info` | Required. | **Values:** `audience_type_param_name` and `new_customer_tag` or `existing_customer_tag` |
| | | For a successful `POST` call, the `audience_type_param_name` and either the `new_customer_tag` parameter or the `existing_customer_tag` parameter is required. |

**The `custom_audience_info` field**

| Name | Description |
| :--- | :--- |
| `audience_type_param_name` | `string` | Required. | **Value:** `audience_type` |
| | | The field name for the URL. Should be a non-empty string containing letters, numbers or underscores. |
| `new_customer_tag` | `string` | Optional. | **Value:** `prospecting` |
| | | The field value for new customers. Should be a non-empty string containing letters, numbers or underscores. |
| `existing_customer_tag` | `string` | Optional. | **Value:** `retargeting` |
| | | The field value for existing customers. Should be a non-empty string containing letters, numbers or underscores. |

**Examples**

**Retrieve the custom audience info**

**Request**

```curl
curl -X GET -G \
  -d 'fields=custom_audience_info' \
  -d 'access_token=ACCESS_TOKEN' \
https://graph.facebook.com/v24.0/act_AD_ACCOUNT_ID
```

**Response**

```json
{
  "custom_audience_info": {
    "audience_type_param_name": "audience_type",
    "new_customer_tag": "prospecting",
    "existing_customer_tag": "retargeting"
  },
  "id": "act_AD_ACCOUNT_ID"}
```

**Create new custom audience info**

```curl
curl -i -X POST \
  -H 'Content-Type: application/json' \
  -d '{"custom_audience_info": {"audience_type_param_name": "audience_type", "new_customer_tag": "prospecting", "existing_customer_tag": "retargeting"}}' \
  // Note: new_customer_tag and existing_customer_tag are both shown here for example only
  -d 'access_token=ACCESS_TOKEN' \
  https://graph.facebook.com/v24.0/act_AD_ACCOUNT_ID
```

# Shops Ads with Advantage+ Shopping Campaigns

```json
        "onsite_destinations": [
          {
            "storefront_shop_id": "<SHOP_STOREFRONT_ID>"
          }
        ]
      }' \
  -F 'object_story_spec={ 
    "link_data": { 
      "image_hash": "<IMAGE_HASH>", 
      "link": "<OFFSITE_LANDING_URL>", 
      "message": "try it out" 
    }, 
    "page_id": "<PAGE_ID>",
    "instagram_user_id" : "<IG_USER_ID>" 
  }' \
  -F 'degrees_of_freedom_spec={
      "creative_features_spec": {
        "standard_enhancements": {
          "enroll_status": "OPT_OUT"
        }
      }
    }' \ 
  -F 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
```

**Advantage+ catalog ads with a carousel format**

To create a carousel ad promoting products from a product set, you can follow [Get Started with Advantage+ Catalog Ads - Step 3: Provide an Ad Creative](#step-3-provide-an-ad-creative-1).

The `page_id` and/or `instagram_user_id` specified in `object_story_spec` must have at least one shop belonging to the commerce account you chose to promote in your ad set or the catalog you chose to promote in your campaign. They must also be connected to the same commerce account.

For the product set in the creative:
*   If you are setting up a campaign with `PRODUCT_CATALOG_SALES` as the objective, the product set you choose must belong to the catalog you set in your campaign and must be the same as the product set you choose to promote in your ad set.
*   If you are setting up a campaign with `CONVERSIONS` as the objective, the product set you choose must belong to the catalog of the commerce account you choose to promote in your ad set.

The additional features supported for Shops ads are optimizations for shops. If we think that it might improve your ad performance, we will automatically add different optimizations to your ads. To opt-in to this, set `shops_bundle` to `true` in the `asset_feed_spec` of your creative (This includes both automated product tags and reasons to shop at the moment, and potentially other optimizations in the future.)

Current supported shop optimizations are:
*   **Automated product tags:** We may automatically tag products in your ad. Product tags send people directly to the relevant product page in your shop.
*   **Reasons to shop:** We may automatically highlight product information from your shop, like "Free shipping", "Trending" or "Low stock". We may also add an existing offer, which lets customers save on selected items in your shop.

To opt-in to automated product tags, set `automated_product_tags` to `true` in the `template_data` of the `object_story_spec`. To opt-in to reasons to shop, set `reasons_to_shop` to `true` in the `asset_feed_spec` of your creative.

**Examples of carousel ads promoting a product set with opt-in to fully automated shop optimizations**

**Opting in to `shops_bundle`**
```curl
curl \
  -F 'name=Sample Creative' \
  -F 'product_set_id="<PRODUCT_SET_ID>"' \
  -F 'asset_feed_spec= {
        "shops_bundle": true
      }'\
  -F 'object_story_spec={ 
    "template_data": { 
      "call_to_action":  {
            "type": "SHOP_NOW"
          },
      "link": "<OFFSITE_LANDING_URL>",
      "multi_share_end_card": false,
      "name": "{{product.name}}"
    }, 
    "page_id": "<PAGE_ID>",
    "instagram_user_id": "<IG_USER_ID>" 
  }' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
```

**Opting in to `automated_product_tags`**
```curl
curl \
  -F 'name=Sample Creative' \
  -F 'product_set_id="<PRODUCT_SET_ID>"' \
  -F 'object_story_spec={ 
        "template_data": {
          "automated_product_tags": true
          "call_to_action":  {
            "type": "SHOP_NOW"
          },
          "link": "<OFFSITE_LANDING_URL>",
          "multi_share_end_card": false,
          "name": "{{product.name}}"
        }, 
        "page_id": "<PAGE_ID>",
        "instagram_user_id": "<IG_USER_ID>"
     }' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives 
```

**Opting in to `reasons_to_shop`**
```curl
curl \
  -F 'name=Sample Creative' \
  -F 'product_set_id="<PRODUCT_SET_ID>"' \
  -F 'asset_feed_spec= {
        "reasons_to_shop": true
      }'\
  -F 'object_story_spec={ 
    "template_data": { 
      "call_to_action":  {
            "type": "SHOP_NOW"
          },
      "link": "<OFFSITE_LANDING_URL>",
      "multi_share_end_card": false,
      "name": "{{product.name}}"
    }, 
    "page_id": "<PAGE_ID>",
    "instagram_user_id": "<IG_USER_ID>" 
  }' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
```

**Note:**
*   Shops ads does not support categories for Advantage+ catalog ads.
*   Automated product tags optimization is only supported on Instagram.

**Advantage+ creative for catalog**

Shops ads also support Advantage+ creative for catalog. This feature displays different formats and ad creatives to different Account Center accounts based on what they are most likely to respond to.

You can follow the instructions in [Advantage+ Creative for Catalog - Step 3: Provide Ad Creative](https://developers.facebook.com/docs/marketing-api/guides/advantage-creative/advantage-catalog-ads#provide-ad-creative) to set up your creative.

The `page_id` and/or `instagram_user_id` specified in `object_story_spec` must have at least one shop belonging to the commerce account you chose to promote in your ad set or the catalog you chose to promote in your campaign. They must also be connected to the same commerce account.

For the product set in the creative:
*   If you are setting up a campaign with `PRODUCT_CATALOG_SALES` as the objective, the product set you choose must belong to the catalog you set in your campaign and must be the same as the product set you choose to promote in your ad set.
*   If you are setting up a campaign with `CONVERSIONS` as objective, the product set you choose must belong to the catalog of the commerce account you choose to promote in your ad set.

**Example of an Advantage+ creative for catalog**

```curl
curl \
  -F 'name=Sample Creative' \
  -F 'product_set_id="<PRODUCT_SET_ID>"' \
  -F 'asset_feed_spec= {
    "optimization_type":"FORMAT_AUTOMATION",
    "ad_formats": ["CAROUSEL", "COLLECTION"],
    "images": [{"hash": "<CUSTOMIZED_IMAGE_HASH>"}],
    "descriptions": [{"text": "{{product.description}}", "From {{product.current_price}}", ...]
    } 
   }'\
  -F 'object_story_spec={ 
    "template_data": { 
      "call_to_action":  {
            "type": "SHOP_NOW"
          },
      "link": "<OFFSITE_LANDING_URL>",
      "multi_share_end_card": false,
      "name": "{{product.name}}"
    }, 
    "page_id": "<PAGE_ID>",
    “instagram_user_id” : “<IG_USER_ID>” 
  }' \
  -F 'degrees_of_freedom_spec={
      "creative_features_spec": {
        "standard_enhancements": {
          "enroll_status": "OPT_OUT"
        }
      }
    }' \ 
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
```

**Step 4: Create an ad**

Finally, you can create an ad referencing an ad creative.

```curl
curl \
-F 'status=PAUSED' \
-F 'name=Test' \
-F 'adset_id=<ADSET_ID>' \
-F 'creative= {
       "creative_id": "<CREATIVE_ID>"
    },
}' \
-F 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/ads 
```

**Shops ads with Advantage+ Shopping Campaigns**

Shops ads are supported together with Advantage+ shopping campaigns, which is believed to drive an even better performance when combined together.

To create an Advantage+ shopping campaign with Shops ads, follow the steps in [Advantage+ Shopping Campaigns - Step 2: Create Campaign](#step-2-create-campaign-1) to create a campaign first.

When creating an ad set for Advantage+ shopping campaigns with Shops ads, similar to Shops ads alone, set the `destination_type` to be `SHOP_AUTOMATIC` and specify your commerce account in `promoted_object`.

```curl
curl \
  -F 'name=Advantage+ Shopping Adset' \
  -F 'bid_amount=3000' \
  -F 'billing_event=IMPRESSIONS' \
  -F 'daily_budget=15000' \
  -F 'bid_strategy=LOWEST_COST_WITHOUT_CAP' \
  -F 'campaign_id=<CAMPAIGN_ID>' \
  -F 'targeting={"geo_locations": {"countries":["US"]}}' \
  -F 'destination_type=SHOP_AUTOMATIC' \
  -F 'promoted_object={"omnichannel_object":{"onsite":[{"commerce_merchant_settings_id":"<COMMERCE_ACCOUNT_ID>"}],"pixel":[{"pixel_id": "<PIXEL_ID>","custom_event_type": "PURCHASE"}]}}' \
  -F 'status=PAUSED' \
  -F 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adsets
```

See [Cross-Channel Conversion Optimization for Advantage+ Shopping Campaigns](#cross-channel-conversion-optimization-for-advantage-shopping-campaigns) for more information.

When creating a creative and an ad for Advantage+ shopping campaigns with Shops ads, the spec is the same as Shops ads alone. See [Step 3: Provide a creative](#step-3-provide-an-ad-creative-1) above for more detail.

## Commerce Eligibility for Shops Ads

In order to get relevant IDs for Shops ads, you need to the `catalog_management` permission from your client.

To create Shops ads for a Page, the Page has to have an onsite visible shop. You can get this from

```curl
curl -i -X GET \
"https://graph.facebook.com/v24.0/<PAGE_ID>/commerce_merchant_settings?fields=id,shops{id,fb_sales_channel{status,fb_page{id,name}},is_onsite_enabled,shop_status}&access_token=<PAGE_ACCESS_TOKEN>"
```

**Sample Response**

```json
{
  "id":"<commerce_account_id>",
  "shops": {
    "data": [
      {
        "fb_sales_channel": {
          "status": "STAGING",
          "fb_page": {
            "name": "Page 1",
            "id": "<page_id>"
          }
        },
        "id": "<shop_id_1>",
        "is_onsite_enabled": true,
        "shop_status": "INACTIVE"
      },
      {
        "fb_sales_channel": {
          "status": "ENABLED",
          "fb_page": {
            "name": "Page 2",
            "id": "<page_id>"
          }
        },
        "id": "<shop_id_2>",
        "is_onsite_enabled": true,
        "shop_status": "ACTIVE"
      }
    ],    
    // …
}
```

For the Page you wish to create Shops ads with, check if both `is_onsite_enabled` is `true` and `shop_status` is `ACTIVE`. If so, you will be able to create Shops ads for the Page through the instructions in the rest of this guide.

## Get Commerce IDs for Creating Shops Ads

To create a Shops ad for a Page, you need:
*   Commerce Account ID (for [Step 2: Create an ad set](#step-2-create-an-ad-set-1))
*   Catalog ID (for [Step 1: Create a campaign](#step-1-create-an-ad-campaign))
*   Product set ID (for [Step 2: Create an ad set](#step-2-create-an-ad-set-1) or Advantage+ catalog ads with a carousel format)
*   Shop ID (for Carousel Ads or Image/Video Ads)
*   Product ID (for Carousel Ads or Image/Video Ads)

You can get the Commerce Account ID and Shop ID by running the previous query.

```curl
curl -i -X GET \
"https://graph.facebook.com/v24.0/<PAGE_ID>/commerce_merchant_settings?fields=id,shops{id,fb_sales_channel{fb_page{id,name}}}&access_token=<PAGE_ACCESS_TOKEN>"
```

A commerce account might have multiple shops, you need to get the one with the Page you want to create Shops ads with.

For catalog ID, product set ID and product ID

```curl
curl -i -X GET \
"https://graph.facebook.com/v24.0/<PAGE_ID>/commerce_merchant_settings?fields=id,product_catalogs{id,product_sets}&access_token=<PAGE_ACCESS_TOKEN>"
```

**Sample Response**

```json
{
  "id": "<commerce_account_id>",
  "product_catalogs": {
    "data": [
      {
        "id": "<product_catalog_id>",
        "product_sets": {
          "data": [
            {
              "id": "<product_set_id>",
              "name": "Product Set 1",
              "filter": "{\"product_item_id\":{\"is_any\":[]}}"
            },
          ],
        }
      }
    ]
  }
}
```

# Creating Branded Content

Creators, celebrities, and media companies can share branded content on Facebook. Branded content posts are any content that features or is influenced by a advertiser or marketer for an exchange of value. To use this, you must comply with our [Branded Content Policy](https://www.facebook.com/policies/brandedcontent) and [Ads Policy](https://www.facebook.com/policies/ads). In addition, you must tag your business partner in the posts using the branded content tool or Marketing API.

Most people creating branded content posts already have access to the branded content tool and have verified Pages or Profiles. If the branded content tool is not available your Page, [submit an application for access](https://www.facebook.com/help/contact/308101416431940).

You can use [Marketing API](https://developers.facebook.com/docs/marketing-api) to create branded content posts. Or you can also use the branded content tool in [Ads Manager](https://www.facebook.com/ads/manager), and the [Mentions App](https://www.facebook.com/help/1297914800366679). See [Ads Help Center, Branded Content](https://www.facebook.com/business/help/162705141103282).

## Overview

Create branded content for different post formats listed in [Ads Help Center, Branded Content](https://www.facebook.com/business/help/162705141103282).

You call different endpoints per post format, and include `sponsor_tags` in the post. A sponsor tag points to a Facebook Page.

You can allow your business partners to directly boost your posts, by adding `direct_share_status` in the post. Set `direct_share_status = 1` to grant permission to a business partner to boost your post. Otherwise, set `direct_share_status = 0`.

## Create a Status Update

To start, you should post to a Page's feed endpoint to create a status update. The `POST` must contain values for the `sponsor_id`, `share_status`, and the `message` fields.

```curl
curl -X POST "https://graph.facebook.com/PAGE_ID/feed" 
  -F "access_token=TOKEN" 
  -F "message=Check out some beautiful products in this grocery store" 
  -F "direct_share_status=1"
  
  {"id":"ID"}
  
```

## Adding Photos

You can add photos to your post at a Page's photos endpoint. The `POST` must contain values for the `sponsor_id`, `share_status`, and the `message` fields.

Specify a `url` field to link to an existing photo. You can also upload the photo as an attachment to the post. See [Photo Upload](https://developers.facebook.com/docs/graph-api/reference/page/photos#Creating).

```curl
  curl -X POST "https://graph.facebook.com/PAGE_ID/feed" 
  -F "access_token=TOKEN" 
  -F "message=Check out some beautiful products in this grocery store" 
  -F "direct_share_status=1" 
  -F "url=https://xx.cdn.net/v/t31.0-8/13064650_505613696297499_6399089570275517473_o.jpg"
  
 {"id":"372501189608751_701886166670250"}
 
```

## Posting a Video

Posting a video with branded content requires several steps:
*   Make a call to specify you want to upload video. The API returns a video object ID you can use to upload the video.
*   Upload the video.
*   Complete the video transfer by setting the share status. Also provide `sponsor_id` for the video, which adds branded content to the story.

See [Uploading Videos](https://developers.facebook.com/docs/graph-api/video-uploads).

In this example, we start a request, upload the video, and set `sponsor_id` and `direct_share_status`.

```curl
 curl -X POST "https://graph-video.facebook.com/VERSION/PAGE_ID/videos" 
  -F "access_token=$at" 
  -F "upload_phase=finish" 
  -F "upload_session_id=SESSION_ID" 
  -F "sponsor_id=ID" 
  **-F "direct_share_status=1"**
```

On success you see this:

`{"success":true}`

## Live Video

To create branded live video, you should:
*   Create a live video object
*   Update the live video object and add `sponsor_id`
*   Start your video stream

To learn more about creating and managing live video streams, see our [Live Video API](https://developers.facebook.com/docs/live-video-api). You can query the list of live videos for a page and use a video ID to update `sponsor_id`. Alternately you can use the ID returned when you first create your live.

## Updating Branded Content

We do not support changes to post content with a brand ID on the web or on mobile devices. However you can use Marketing API to update a post to include or change a sponsor. You can change the sponsor by changing the value of the `sponsor_id` field on a post object.

To add a sponsor to a post, make `POST` on a Page post and specify a `sponsor_id`. To change the sponsor on a post, pass in the new `sponsor_id` field.

You can allow or prohibit a business partner directly boosting a post. Provide `sponsor_id` and your change to `direct_share_status`.

```curl
curl -X POST "https://graph.facebook.com/PAGE_POST_ID" 
  -F "access_token=TOKEN" 
  -F "direct_share_status=1"
  
 {"success":true}
 
```

# Asset Feed Spec

The `asset_feed_spec` field allows you to deliver different combinations of an ad's creative to different users. There are two ways to set up your combinations:
*   **Automatically:** You provide the creative assets and we automatically deliver different combinations to different users. To use this option, see [Dynamic Creative API](#dynamic-creative).
*   **Manually:** You provide the creative assets and you create rules on how to display those assets. To use this option, see [Asset Customization Rules](#asset-customization-rules).

The asset feed spec contains a collection of different creative elements, such as images, titles, bodies, and so on. You can specify multiple creative assets for each asset type. The spec's format is different for each use case. See also [Reference, Asset Feed Spec](https://developers.facebook.com/docs/marketing-api/reference/ad-asset-feed-spec).

## Create Asset Feed

You can use `asset_feed_spec` to provide multiple creative assets, with the following limitations:
*   For all [Asset Customization Rules](#asset-customization-rules), include at least two target customization rules in `asset_feed_spec`.
*   For [Dynamic Creative](#dynamic-creative), `asset_feed_spec` should not have customization rules. In this case, you can mix both images and videos across different placements by specifying `[“AUTOMATIC_FORMAT”]` under `ad_formats`.

For example, to create an `asset_feed_spec` for [Dynamic Creative](#dynamic-creative):

```curl
curl -X POST \
  -F 'name="Dynamic Ad Creative with Asset Feed Spec Sample"' \
  -F 'object_story_spec={
       "page_id": "<PAGE_ID>"
     }' \
  -F 'asset_feed_spec={
       "images": [
         {
           "hash": "<IMAGE_HASH>"
         }
       ],
       "bodies": [
         {
           "text": "Begin Your Adventure"
         },
         {
           "text": "Once a Trainer, always a Trainer."
         }
       ],
       "titles": [
         {
           "text": "Level Up"
         },
         {
           "text": "Swipe to evolve"
         }
       ],
       "descriptions": [
         {
           "text": "First Dynamic Ad Creative Sample"
         }
       ],
       "ad_formats": [
         "SINGLE_IMAGE"
       ],
       "call_to_action_types": [
         "SHOP_NOW"
       ],
       "link_urls": [
         {
           "website_url": "https://www.example.com/"
         }
       ],
       "videos": []
     }' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
```

You can also create an `asset_feed_spec` with two alternate videos, bodies, and titles:

```curl
curl \-F 'object_story_spec={
       "page_id": "YOUR_PAGE_ID"
       "instagram_user_id" : "&lt;IG_USER_ID>",
    }' \-F "asset_feed_spec={'videos': [{'video_id':'2053108854721025', 'thumbnail_url':'<thumnail_url>', 'url_tags':'video=video1'},{'video_id':'2104406249780616', 'thumbnail_url':'<thumnail_url>','url_tags':'video=video2'}], 'bodies': [{'text':'Begin Your Adventure'}, {'text':'Once a Trainer, always a Trainer.'}], 'titles': [{'text':'Level Up'}, {'text':'Swipe to evolve'}], 'descriptions': [{'text':'Begin Your Adventure'}], 'ad_formats': ['SINGLE_IMAGE'], 'link_urls': [{'website_url':'<WEBSITE_URL>'}]}" \-F 'access_token=<ACCESS_TOKEN>'  \
https://graph.facebook.com/<API_VERSION>/act_<AD_ACCOUNT_ID>/adcreatives
```

See all available options for [Asset Feed Spec](#asset-feed-spec-options).

## Read Asset Feed

To check your creative, read `asset_feed_spec`:

```curl
curl -X GET \
  -d 'fields="asset_feed_spec"' \
  -d 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v25.0/<CREATIVE_ID>/
```

If you have a [Dynamic Creative](#dynamic-creative) feed with multiple images and bodies, the response looks like this:

```json
{  
   "asset_feed_spec":{  
      "images":[  
         {  
            "url_tags":"image=image1",
            "hash":"785095162a2034666e0d0cc4ea1faf89"
         },
         {  
            "url_tags":"image=image2",
            "hash":"3a24122c13923569599be35567ce4e9e"
         }
      ],
      "bodies":[  
         {  
            "text":"Begin Your Adventure"
         },
         {  
            "text":"Once a Trainer, always a Trainer."
         }
      ],
      "call_to_action_types":[  
         "LEARN_MORE"
      ],
      "call_to_actions":[  
         {  
            "type":"LEARN_MORE"
         }
      ],
      "descriptions":[  
         {  
            "text":"Begin Your Adventure"
         }
      ],
      "link_urls":[  
         {  
            "website_url":"<WEBSITE_URL>"
         }
      ],
      "titles":[  
         {  
            "text":"Swipe to evolve"
         },
         {  
            "text":"Level Up"
         }
      ],
      "ad_formats":[  
         "SINGLE_IMAGE"
      ],
      "optimization_type":"REGULAR"
   },
   "id":"<AD_CREATIVE_ID>",}
```

If you have a [Dynamic Creative](#dynamic-creative) feed with multiple videos, bodies, and titles, the response looks like this:

```json
{  
   "asset_feed_spec":{  
      "videos":[  
         {  
            "url_tags":"video=video1",
            "video_id":"2053108854721025",
            "thumbnail_url":"<thumnail_url>",
            "thumbnail_hash":"<thumnail_hash>"
         },
         {  
            "url_tags":"video=video2",
            "video_id":"2104406249780616",
            "thumbnail_url":"<thumnail_url>",
            "thumbnail_hash":"<thumnail_hash>"
         }
      ],
      "bodies":[  
         {  
            "text":"Begin Your Adventure"
         },
         {  
            "text":"Once a Trainer, always a Trainer."
         }
      ],
      "call_to_action_types":[  
         "LEARN_MORE"
      ],
      "call_to_actions":[  
         {  
            "type":"LEARN_MORE"
         }
      ],
      "descriptions":[  
         {  
            "text":"Begin Your Adventure"
         }
      ],
      "link_urls":[  
         {  
            "website_url":"<WEBSITE_URL>"
         }
      ],
      "titles":[  
         {  
            "text":"Swipe to evolve"
         },
         {  
            "text":"Level Up"
         }
      ],
      "ad_formats":[  
         "SINGLE_VIDEO"
      ],
      "optimization_type":"REGULAR"
   },
   "id":"<AD_CREATIVE_ID>",}
```

## Edit Asset Feed

You can add, replace or remove any of the creative's assets. To do so, provide another creative with the new `asset_feed_spec`.

You can:
*   Add assets.
*   Remove existing assets.
*   Replace assets with completely new ones.

You cannot:
*   Change ad formats, such as from `SINGLE IMAGE` to `VIDEO`.
*   Update an Asset Feed based creative ad to be a non-Dynamic Creative ad, which has no `asset_feed_spec`.

```curl
    curl \
      -F 'access_token=<ACCESS_TOKEN>' \
      -F 'creative={
          "creative_id": <CREATIVE_ID>,
       }' \
    https://graph.facebook.com/v24.0/<AD_ID>
    
```

When you create a new ad creative to replace an old one, you must still fulfill all restrictions that apply.

## Asset Feed Spec Options

You can use the following options in your `asset_feed_spec`. See [Ad Asset Feed Spec](https://developers.facebook.com/docs/marketing-api/reference/ad-asset-feed-spec) for more reference information.

| Property Name | Description |
| :--- | :--- |
| `images` | **type: array of list** | Required for `SINGLE_IMAGE` and `CAROUSEL_IMAGE` format. |
| | Array of eligible images. Images provided in this array should be included in the ad account's image library. |
| | Provide this field as an array of list containing `{"url": "{IMAGE_URL}", "hash": "{IMAGE_HASH}", "url_tags": "{TAG}"}`. Either `url` or `hash` is required. |
| `videos` | **type: array of list** | Required for `SINGLE_VIDEO` format. |
| | Array of `video_ids`. The `video_ids` provided in this array should belong to the ad account. |
| | Provide this field as an array of list containing `{"video_id": "{VIDEO_ID}", "thumbnail_url": "{THUMBNAIL_URL}", "url_tags": "{TAG}"}` |
| `carousels` | **type: array of list** | Optional. |
| | An array of `child_attachments` along with the `multi_share_end_card` and `multi_share_optimized` Booleans, and `adlabels`. The `child_attachments` provided in this array should belong to the ad account. |
| | Provide the `child_attachments` as an array of list containing `{"image_label": {"name": "{IMAGE_LABEL}"}, "video_label": {"name": "{VIDEO_LABEL}"}, "title_label": {"name": "{TITLE_LABEL}"}, "description_label": {"name": "{DESC_LABEL}", "link_url_label": {"name": "{LINK_URL}"}}}`. |
| | **Note:** Either `image_label` or `video_label` is required. |
| | See [Field Specifications](#field-specification) for more information. |
| `bodies` | **type: array of list** | Optional. |
| | Array of bodies. The primary message or copy of the ad. |
| | Provide this field as an array of list of `{"text": "{BODY_TEXT}", "url_tags": "{TAG}"}`. |
| `call_to_action_types` | **type: array of list** | Required for all objectives, except `OUTCOME_AWARENESS`. |
| | Array of call-to-action-type values. |
| | Provide this field as an array of list of `{"{CALL_TO_ACTION}"}`. You can provide multiple values, up to five. |
| `titles` | **type: array of list** | Optional. |
| | Array of titles. A title is a short headline in the ad, generally shown next to a link, image or video. |
| | Provide this field as an array of list of `{"text": "{TITLE}", "url_tags": "{TAG}"}`. |
| `descriptions` | **type: array of list** | Optional. |
| | Array of secondary description text, displayed less prominently than bodies or titles. Generally appears next to a link, image or video. If not specified, Facebook scrapes the link you provided to generate it. Use an empty string with single space for blank description, if you do not want to use the scraped text. |
| | Provide this field as an array of list of `{"text": "{DESCRIPTION}", "url_tags": "{TAG}"}`. |
| `link_urls` | **type: array of list** | Required. |
| | Array of link URLs. |
| | Provide this field as an array of list of `{"website_url": "{URL}"}`. |
| `ad_formats` | **type: array of strings** | Required. |
| | Array of Facebook ad formats we should create the ads in. Supported formats are: `SINGLE_IMAGE`, `CAROUSEL`, `SINGLE_VIDEO`, `AUTOMATIC_FORMAT`. |
| | Provide this field as an array of strings `["{AD_FORMAT}"]`. |
| `optimization_type` | **type: string** | Optional. |
| | Optimization type used in asset feed. Possible values are `ASSET_CUSTOMIZATION`, `LANGUAGE`, `PLACEMENT`, and `REGULAR`. |
| `message_extensions` | **type: array of strings** | Optional. |
| | Message extension type used in asset feed. |
| | Possible value: `whatsapp` |
| `onsite_destinations` | **type: array of list** | Required for Shops Ads. Valid for Static Ads; `SINGLE_IMAGE`, `SINGLE_VIDEO` or `CAROUSEL` format. |
| | Provide this field as an array of list containing one of the following values to specify the landing destination for your onsite shop. |
| | `{"storefront_shop_id": "<SHOP_STOREFRONT_ID>"}`or `{"shop_collection_product_set_id": "<PRODUCT_SET_ID>"` or `{"details_page_product_id": "<PRODUCT_ID>"}` |
| `shops_bundle` | **type: boolean** | Required for Shops Ads. Valid for Advantage+ Catalog Ads. |
| | Provide this field for shop optimization. Includes both `reasons_to_shop` and `automated_product_tags` shop optimization types. |
| | Possible values: `true`, `false` |
| `reasons_to_shop` | **type: boolean** | Required for Shops Ads. Valid for Advantage+ Catalog Ads. |
| | Provide this field for shop optimization. Automatically highlights product information from your shop, like "Free shipping", "Trending" or "Low stock". |
| | Possible values: `true`, `false` |

## Asset Feed Spec Restrictions

| | |
| :--- | :--- |
| **Ad Formats** | Supported `ad_formats`: `SINGLE_IMAGE`, `CAROUSEL`, `SINGLE_VIDEO`, and `AUTOMATIC_FORMAT`. |
| | Only one `ad_format` is allowed per asset feed. |
| | `ad_format` counts as one asset in an asset feed. |
| **Number of Assets:** | Maximum of 30 total assets. For example, you have 28 assets with 10 images, 5 bodies, 5 titles, 5 description, 1 ad_format, 1 link_url, and 1 call_to_action_types. |
| | Total number of images: `<= 10`. |
| | Total number of videos: `<= 10`. If you use Instagram as your placement, only square videos or landscape videos allowed. |
| | Total number of bodies: `<= 5`. |
| | Total number of call-to-actions: `<= 5`. |
| | Total number of titles: `<= 5`. |
| | Total number of links: `<= 5`. |
| | Total number of descriptions: `<= 5`. |
| **Image requirements:** | Recommended image specs: `1.9:1`. |
| | Recommended image size: `1,200 x 628` pixels. |
| | For `CAROUSEL_IMAGE` format, you must provide at least 2 images. |
| | If you use Instagram as your placement, use square images for better performance. |
| **Text requirements:** | Title and description text: maximum length of 255 characters. |
| | Body text: maximum length of 1024 characters. |
| | If you do not specify any description, we scrape the link you provided to retrieve a description. |
| | For `CAROUSEL_IMAGE`, titles are optional. |
| | `url_tags` are optional and only available for images, videos, bodies, descriptions, and titles. Facebook appends `url_tags` to the link URL as parameters for each asset in an ad. |
| | For example, a valid asset feed combination setup for `SINGLE_IMAGE` format is: |
| | 5 images |
| | 3 bodies |
| | 3 titles |
| | 3 descriptions |
| | 1 format: `SINGLE_IMAGE` |
| | 2 link_urls |
| | `"link_urls=[{'website_url':'<WEBSITE_URL>'}, {'website_url':'<WEBSITE_URL>'}]"` |

## Use Deep Links

You can use deeplinks in asset feed specs for campaigns with the following objectives:
*   `APP_INSTALLS`
*   `CONVERSIONS`
*   `LINK_CLICKS`

Add `deeplink_url` in `link_urls` when you create your `asset_feed_spec`.

```curl
curl \
  -F 'object_story_spec={
  	"page_id": "<PAGE_ID>"
  	"instagram_user_id" : "<IG_USER_ID>",
  }' \
  -F "asset_feed_spec={
  	'images': [{'hash':'<IMAGE_HASH>'}], 
  	'bodies': [{'text':'<BODY_1>'}, {'text':'<BODY_2>'}], 
  	'titles': [{'text':'<TITLE_1>'}, {'text':'<TITLE_2>'}], 
  	'descriptions': [{'text':'<DESCRIPTION>'}], 
  	'ad_formats': ['SINGLE_IMAGE'], 
  	'link_urls': [{'website_url':'<APP_OBJECT_STORE_URL>','deeplink_url':'<DEEPLINK_URL>'}]}" \
  -F 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
```

## Website to WhatsApp Ads

You can create ads that send people to your website with a WhatsApp button appearing at the bottom of the screen, so they can contact you instantly. This will help people connect with you on WhatsApp while visiting your website.

Add the `message_extensions` parameter with `"type": "whatsapp"` when you create your `asset_feed_spec`.

```curl
curl \
  -F 'object_story_spec={
       "page_id": "<PAGE_ID>"
       "instagram_user_id" : "<IG_USER_ID>",
    }' \
  -F 'asset_feed_spec={
  	"images": [{"hash":"<IMAGE_HASH>"}], 
  	"bodies": [{"text":"<BODY_1>"}, {"text":"<BODY_2>"}],
  	"titles": [{"text":"<TITLE_1>"}, {"text":"<TITLE_2>"}], 
  	"descriptions": [{"text":"<DESCRIPTION>"}], 
  	"ad_formats": ["SINGLE_IMAGE"], 
  	"link_urls": [{"website_url":"<BUSINESS_URL>"}], 
  	"message_extensions": [{"type": "whatsapp"}]}' \
  -F 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
```

# Dynamic Creative

Dynamic Creative allows you to automatically deliver different combinations of an ad's creative to your users. It helps you find the best creative combination per impression and learns from the asset's performance across audiences.

This solution also improves your ability to explore a variety of creative asset combinations and audiences, so you can show the best images, titles, descriptions and other assets to your users.

You should use Dynamic Creative to:
*   Automate the workflow used to test creative
*   Use different audiences to learn how to pick the most effective combination of creative assets

Use this API for new and ongoing campaigns, as well as campaigns that run longer than five days. You should perform split testing with your existing campaigns to find the best approach for your needs.

## Get Started

*   Step 1: Create Campaign and Ad Set
*   Step 2: Provide the ad creative with `asset_feed_spec`
*   Step 3: Create your ad
*   Optional Step 4: Check your ad's review status.
*   Get insights and analyze your results

## Step 1: Create Campaign and Ad Set

You can create a standard ad campaign for Dynamic Creative, but there are two limitations:
*   Your objective must be one of the following: `OUTCOME_SALES`, `OUTCOME_ENGAGEMENT`, `OUTCOME_LEADS`, `OUTCOME_AWARENESS`, `OUTCOME_TRAFFIC`, or `OUTCOME_APP_PROMOTION`.
*   `buying_type` must be the default, which is `AUCTION`, or left blank.

For example, to create an ad campaign with the objective of `CONVERSIONS`:

```curl
curl \
  -F 'name=Dynamic Creative Sample Campaign'
  -F 'objective=OUTCOME_SALES'
  -F 'status=PAUSED'
  -F 'special_ad_categories=<SPECIAL_AD_CATEGORY>'
  -F access_token=<ACCESS_TOKEN>
  https://graph.facebook.com/<API_VERSION>/act_<AD_ACCOUNT_ID>/campaigns   
```

Once you have your campaign, create an ad set by using the standard ad set endpoint.

You can use all `billing_events`, `targeting`, and `promoted_objects`, as long as they are compatible with the parent ad campaign's objective.

You must set the `optimization_goal` to `OFFSITE_CONVERSIONS` for `OUTCOME_SALES`, `OUTCOME_ENGAGEMENT`, `OUTCOME_LEADS`, and `OUTCOME_TRAFFIC` objectives.

Then set `is_dynamic_creative` to `true`.

To create an ad set in a campaign with `optimization_goal` set to conversions:

```curl
curl \
  -F 'status=PAUSED'
  -F 'name=Dynamic Creative Ad Set'
  -F 'campaign_id=<CAMPAIGN_ID>'
  -F 'optimization_goal=OFFSITE_CONVERSIONS'
  -F 'is_dynamic_creative=true'
  -F 'lifetime_budget=5000'
  -F 'promoted_object={"pixel_id": "<PIXEL_ID>", "custom_event_type": "PURCHASE"}'
  -F 'billing_event=IMPRESSIONS'
  -F 'bid_strategy=LOWEST_COST_WITHOUT_CAP'
  -F 'targeting={"geo_locations": {"countries": ["US"]}}'
  -F 'start_time=2024-04-09'
  -F 'end_time=2024-04-20'
  -F access_token=<ACCESS_TOKEN>
  https://graph.facebook.com/<API_VERSION>/act_<AD_ACCOUNT_ID>/adsets
```

This returns a new ad set ID:

`{"id":"23842500259260001"}`

If you use `asset_feed_spec` with an ad set optimized for `APP_INSTALLS`, you should specify `link_url`, such as `http://www.abc.com`. The `link_url` should be the same as `object_store_url` in `promoted_object`. You should provide only one `link_url` parameter in `asset_feed_spec`.

```curl
curl -F "name=Dynamic Creative AdSet"-F "campaign_id=CAMPAIGN_ID"-F "optimization_goal=APP_INSTALLS"-F 'is_dynamic_creative=true'-F "billing_event=IMPRESSIONS"-F "is_autobid=true"-F "promoted_object={'object_store_url':'https://itunes.apple.com/us/app/facebook/id284882215','application_id':ADVERTISED_APP_ID}"  // object_store_url must match what is provided in asset feed's link_urls -F "lifetime_budget=20000"-F "end_time=1461974400"-F "targeting={
     'geo_locations':{'countries':['US']},
     'age_min':18,
     'age_max':24,
     'publisher_platforms':['facebook', 'audience_network'],
     'user_os':['ios']
   }"-F "access_token=ACCESS_TOKEN" 
https://graph.facebook.com/<API_VERSION>/act_AD_ACCOUNT_ID/adsets
```

## Step 2: Provide Ad Creative with asset\_feed\_spec

Provide your creative through the `asset_feed_spec` field, also known as [Asset Feed](#asset-feed-spec). In this field, you can specify multiple creative assets for each asset type. Some examples of asset types are images, videos, headlines and link descriptions. See the following:
*   [Setup Your Asset Feed](#create-asset-feed)
*   [Asset Feed Options](#asset-feed-spec-options)

Note you may also need to set `page_id` and `instagram_user_id`.

`asset_feed_id` is only supported in Marketing API v3.1 and earlier. You should use `asset_feed_spec` instead.

**Image Cropping**

Dynamic creative supports image cropping. Specify the image cropping parameter in your image spec. You can provide only one crop per image. We apply your crops to all placements of your image. See [Marketing API, Image Cropping](https://developers.facebook.com/docs/marketing-api/guides/ad-creatives/image-crop).

## Step 3: Create Your Ad

At this point, your ad set must be empty. When you create your ad, provide a reference to the creative ID. You can only create one ad per ad set. However, you can create additional Dynamic Creative ads in other, new ad sets.

```curl
curl 
  -F 'name=Dynamic Creative Ad' 
  -F 'adset_id=<ADSET_ID>' 
  -F 'access_token=<ACCESS_TOKEN>' 
  -F 'creative={
      "creative_id": <CREATIVE_ID>,
   }' 
https://graph.facebook.com/<API_VERSION>/act_<AD_ACCOUNT_ID>/ads
```

After you create your ad:
*   Your campaign appears in Ads Manager.
*   Facebook reviews your ad and checks if it meets our Advertising Policies.

Once you create an ad for Dynamic Creative, you cannot delete or archive it. Instead, you should delete or archive the parent ad set.

Dynamic Creative supports all placements except `sponsored_messages` on Messenger.

**Carousel Ads**

Dynamic Creative delivers the best combination of assets in carousel ad format. If your feed has less than 10 images, the number of carousel cards is the same as the number of images. If you are using more than 10 images, we display a carousel with 10 cards. We recommend square sizes for images.

If you are using carousel with Dynamic Creative, you cannot use these features from carousel ads:
*   `BODY_LABEL`
*   `CALL_TO_ACTION_TYPE_LABEL`
*   `LINK_URL_LABEL`
*   `CAPTION_LABEL`
*   `AD_FORMAT_LABEL`

In the asset insights breakdown, we aggregate impression based metrics for in-card assets for all cards to the assets in the first card. In-card assets include images, title, and description

For background information, see [Carousel ads](#carousel-ads).

## Optional Step 4: Check Review Status

After you create your campaign, ad set, and ad, check ad review status:

```curl
curl -G -d "access_token=<ACCESS_TOKEN>" -d 'fields=review_feedback' 
https://graph.facebook.com/<API_VERSION>/<ADSET_ID>
```

The result includes ad review feedback. An empty array means that your ad passed review:

```json
{
  "review_feedback":"[]",
  "id":"<ADSET_ID>"}
```

If your ad does not pass review, you see:

```json
{
  "review_feedback": {
    {"id":23842500258220001,"text":"Body 1","reason":["ALCOHOL"]},
    {"id":23842500258160001,"text":"Title 1","reason":["ALCOHOL"]},
    {"id":23842500258170001,"text":"Title 2","reason":["ALCOHOL"]}
  }",
  "id": "<AD_ID>"  
}
```

# Asset Customization Rules

Use this solution to define which creative assets you want to display in your ads. At the time of ad creation, you can pick the combination of assets you want to display, based on your asset custom rules. Examples of creative assets are images, videos, text and body of an ad.

We offer three APIs that use asset customization rules:
*   [Placement Asset Customization](#placement-asset-customization): Customize the creative assets displayed in different ad placements.
*   [Multi-Language Ads](#multi-language-ads): Customize different parts of ad creative such as the image, video, text, and body of an ad to reach speakers of different language.
*   [Segment Asset Customization](https://developers.facebook.com/docs/marketing-api/guides/asset-customization-rules/segment-asset-customization): Customize ad assets according to targeting types.

All ads using `asset_feed_spec` must contain at least two target customization rules. If your creative uses `asset_feed_spec` and includes less than two rules, you will not be able to create that ad.

## Get Started

*   Step 1: Create ad campaign and ad set.
*   Step 2: Provide the ad creative.
*   Step 3: Create your ad.
*   Step 4: Get insights and analyze your results.

## Step 1: Create Campaign and Ad Set

You can create a standard ad campaign for Asset Custom Rules, but there are limitations:

| API | Supported campaign objectives |
| :--- | :--- |
| [Segment Asset Customization](https://developers.facebook.com/docs/marketing-api/guides/asset-customization-rules/segment-asset-customization) | `APP_INSTALLS`, `BRAND_AWARENESS`, `CONVERSIONS`, `LINK_CLICKS`, `REACH`, `VIDEO_VIEWS`. |
| [Placement Asset Customization](#placement-asset-customization) | `APP_INSTALLS`, `BRAND_AWARENESS`, `CONVERSIONS`, `LEAD_GENERATION`, `LINK_CLICKS`, `REACH`, `VIDEO_VIEWS`. |
| [Multi-Language Ads](#multi-language-ads) | `APP_INSTALLS`, `BRAND_AWARENESS`, `CONVERSIONS`, `LINK_CLICKS`, `REACH`, `VIDEO_VIEWS`. |

For the Ad Set, use the standard [ad set endpoint](https://developers.facebook.com/docs/marketing-api/guides/adsets) and set `is_dynamic_creative` to `false`.

To create an ad set in a campaign with `optimization_goal` set to conversions:

```curl
curl \
  -F 'status=PAUSED'
  -F 'name=Sample Ad Set'
  -F 'campaign_id=<CAMPAIGN_ID>'
  -F 'optimization_goal=OFFSITE_CONVERSIONS'
  -F 'is_dynamic_creative=false'
  -F 'lifetime_budget=1000'
  -F 'promoted_object={"pixel_id": "<PIXEL_ID>", "custom_event_type": "PURCHASE"}'
  -F 'billing_event=IMPRESSIONS'
  -F 'bid_strategy=LOWEST_COST_WITHOUT_CAP'
  -F 'targeting={"geo_locations": {"countries": ["US"]}}'
  -F 'start_time=2019-04-02'
  -F 'end_time=2019-04-09'
  -F 'access_token=<ACCESS_TOKEN>'
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adsets
```

If you use `asset_feed_spec` with an ad set optimized for `APP_INSTALLS`, you should specify `link_url`, such as `http://www.abc.com`. The `link_url` should be the same as `object_store_url` in `promoted_object`. You should provide only one `link_url` parameter in `asset_feed_spec`.

`asset_feed_spec` provides creative for [Dynamic Creative](#dynamic-creative), [Placement Asset Customization](#placement-asset-customization), [Multi-Language Ads](#multi-language-ads), and [Segment Asset Customization](https://developers.facebook.com/docs/marketing-api/guides/asset-customization-rules/segment-asset-customization). The spec's format is different for each solution.

## Step 2: Provide the ad creative

Provide your creative through `asset_feed_spec`. An asset feed is a collection of different creative elements, such as image, titles, bodies, and so on. You can specify multiple creative assets for each asset type.

Create an `asset_feed_spec` at `/adcreative`. To apply customization options, set `asset_customization_rules` inside your `asset_feed_spec`.

*   [Asset Feed Setup for Placement Asset Customization](#placement-asset-customization)
*   [Asset Feed Setup for Multi-Language Ads](#multi-language-ads)
*   [Asset Feed Setup for Segment Asset Customization](https://developers.facebook.com/docs/marketing-api/guides/asset-customization-rules/segment-asset-customization)

After setup, verify your `asset_feed_spec`:

```curl
curl -G -d "access_token=<ACCESS_TOKEN>"-d "fields=asset_feed_spec" 
https://graph.facebook.com/v24.0/<AD_CREATIVE_ID>
```

## Step 3: Create your ad

When you create your ad, provide a reference to the creative ID. You can create multiple ads per ad set.

```curl
curl 
      -F 'name=Asset Custom Rule Ad' 
      -F 'adset_id=<ADSET_ID>' 
      -F 'access_token=<ACCESS_TOKEN>' 
      -F 'creative={
          "creative_id": <CREATIVE_ID>,
       }' 
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/ads
```

After creation:
*   Your campaign appears in Ads Manager.
*   Facebook reviews your ad and checks if it meets our Advertising Policies.

# Placement Asset Customization

Use this solution to customize the creative assets displayed in different ad placements. Maintain control over the creative, while using several different placements.

Placement Asset Customization is one of our three APIs that use [asset customization rules](#asset-customization-rules). Learn more about [Asset Customization Rules](#asset-customization-rules).

## Get Started

*   Step 1: Create an ad campaign and ad set
*   Step 2: Provide creative and customize assets
*   Step 3: Create your ad
*   Optional Step 4: Get insights and analyze results
*   Optional Step 5: Read Ad Creative

Placement Asset Customization with existing posts is no longer supported via the API. You can only use this option in Ads Manager.

## Step 2: Provide Creative

Use `asset_feed_spec` to provide your creative. You can specify multiple creative assets for each asset type, including images, videos, carousels, headlines, and body text. Only provide one link description, since the link description cannot be customized per placement.

To apply customization:
*   Set `asset_customization_rules` inside your `asset_feed_spec`.
*   For each rule, add `customization_spec` and asset labels.
*   For Placement Asset Customization, every `asset_feed_spec` needs to have more than one customization rule attached to it.

See [Asset Customization Rules](#asset-customization-rules).

**Supported Properties**

| Property Name | Description |
| :--- | :--- |
| `customization_spec` | **type: [Supported Fields](#supported-fields-in-customization_spec)** | Required. | Placements where you want to display the assets. |
| `image_label` | **format:** `{"name": "{LABEL_NAME}"}` | Required for `SINGLE_IMAGE` format. | Label of the image you want to display. It is attached to the image assets in `asset_feed_spec`. |
| `video_label` | **format:** `{"name": "{LABEL_NAME}"}` | Required for `SINGLE_VIDEO` format. | Label of the video you want to display. It is attached to the video assets in `asset_feed_spec`. |
| `carousel_label` | **format:** `{"name": "{LABEL_NAME}"}` | Required for `CAROUSELS` format. | Label of the carousel you want to display. It is attached to the carousel assets in `asset_feed_spec`. |
| | **Note:** if providing carousels via Placement Asset Customization, all child attachments must be defined within the Asset Feed Spec and referenced via `adlabels`. Child attachments may not be defined inline. See [Asset Feed Spec Options](#asset-feed-spec-options) for more details on the `carousels` format. |

**Supported Fields in `customization_spec`**

| Property Name | Description |
| :--- | :--- |
| `publisher_platforms` | Required. | Possible placements for your ad. Options are: `facebook`, `instagram`, `messenger`, `audience_network`, and `threads`. |
| `facebook_positions` | Optional, but required if Facebook is selected in `publisher_platforms`. | Facebook specific placement. Options are: `feed`, `right_hand_column`, `marketplace`, `video_feeds`, `search`, `story`, and `notification`. |
| `instagram_positions` | Optional, but required if Instagram is selected in `publisher_platforms`. | Instagram specific placements. Options are: `stream`, `story`, `explore`, `explore_home`, `profile_feed` and `ig_search`. |
| | **Note:** The `explore_home` placement only supports the `SINGLE_IMAGE` format. |
| `messenger_positions` | Optional, but required if Messenger is selected in `publisher_platforms`. | Messenger specific placements. Options are: `sponsored_messages` and `story`. |
| `audience_network_positions` | Optional, but required if Audience Networks is selected in `publisher_platforms`. | Audience Network specific placement. Options are: `classic`, `instream_video`, and `rewarded_video`. |
| `threads_positions` | Optional, but required if Threads is selected in `publisher_platforms`. | Threads specific placement: `threads_stream` |
| | **Note:** `publisher_platform: instagram` and `instagram_positions: stream` are required to select `threads_positions: threads_stream`. |

Learn more about our [available placement options](https://developers.facebook.com/docs/marketing-api/targeting-specs/v24.0#placement).

**Example — Feed Setup**

```curl
curl -X POST \
  -F 'object_story_spec={
      "page_id": "<PAGE_ID>",
      "instagram_user_id": "<IG_USER_ID>",
    }' \
  -F 'asset_feed_spec={
      "videos": [{
        "adlabels": [{"name": "labelfb"}],
        "video_id": "<VIDEO_ID>"
      },
      {
        "adlabels": [{"name": "labelig"}],
        "video_id": "<VIDEO_ID>"
      }],
      "bodies": [{"text": "Begin Your Adventure"}],
      "link_urls": [{
        "website_url": "<WEBSITE_URL>",
        "display_url": "<DISPLAY_URL>"
      }],
      "titles": [{"text": "Level Up"}],
      "ad_formats": ["SINGLE_VIDEO"],
      "call_to_action_types": ["WATCH_MORE"],
      "descriptions": [{"text": "Description"}],
      "asset_customization_rules": [{
        "customization_spec": {          
          "publisher_platforms": ["facebook"],
          "facebook_positions": ["feed","instream_video"]
        },
        "video_label": {
          "name": "labelfb"
        }
      },
      {
        "customization_spec": {
          "publisher_platforms": ["instagram"],
          "instagram_positions": ["stream"]
        },
        "video_label": {
          "name": "labelig"
        }
      }]
  }' \
  -F 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
```

**Example — Instagram Explore home Asset Customization**

```curl
curl -X POST \
  -F 'object_story_spec={
      "page_id": "<PAG_-ID>",
      "instagram_user_id": "<INSTAGRAM_ID>",
    }' \
  -F 'asset_feed_spec={
    "ad_formats": ["SINGLE_IMAGE"],
    "asset_customization_rules": [{
      "image_label": {
        "name": "<IMAGE_LABEL>"
      },
      "customization_spec": {
        "publisher_platforms": ["instagram"],
        "instagram_positions": ["explore_home"]
      }
    }],
    "bodies": [{
      "text": "",
      "adlabels": [{
        "name": "adlabel1"
      },
      {
        "name": "adlabel2"
      }]
    }],
    "call_to_action_types": ["LEARN_MORE"],
    "images": [{
      "hash": "<IMAGE_HASH>",
      "adlabels": [{"name": "adlabel1"}]
    },
    {
      "hash": "<IMAGE_HASH>",
      "image_crops": {
        "100x100": [
          [
            604,
            0
          ],
          [
            1659,
            1055
          ]
        ]
      },
      "adlabels": [{"name": "adlabel2"}]
    }],
    "link_urls": [{
      "website_url": "<WEBSITE_URL>",
      "display_url": "<DISPLAY_URL>",
      "deeplink_url": "<DEEPLINK_URL>",
      "adlabels": [
        {
          "name": "adlabel1"
        },
        {
          "name": "adlabel2"
        }
      ]
    }],
    "optimization_type": "PLACEMENT",
    "titles": [{
      "text": "<TEXT>",
      "adlabels": [
        {
          "name": "adlabel1"
        },
        {
          "name": "adlabel2"
        }
      ]
      }]
  }' \
  -F 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
```

**Example - Instagram search results Asset Customization**

```curl
curl -X POST \
  -F 'object_story_spec={
      "page_id": "<PAGE_ID>",
      "instagram_user_id": "<INSTAGRAM_ID>",
    }' \
  -F 'asset_feed_spec={
    "ad_formats": ["SINGLE_IMAGE"],
    "asset_customization_rules": [{
      "image_label": {
        "name": "placement_asset_f1048d832ecd558_1661539731099"
      },
      "customization_spec": {
        "publisher_platforms": ["instagram"],
        "instagram_positions": ["ig_search"]
      }
    }],
    "bodies": [{
      "text": "<TEXT>",
      "adlabels": [
        {
          "name": "adlabel1"
        },
        {
          "name": "adlabel2"
        }
      ]
    }],
    "call_to_action_types": ["LEARN_MORE"],
    "images": [{
      "hash": "9ffd7307eae1f9c6e5250fc8760d285f",
      "adlabels": [{"name": "adlabel1"}]
    },
    {
      "hash": "9ffd7307eae1f9c6e5250fc8760d285f",
      "image_crops": {
        "100x100": [
          [
            604,
            0
          ],
          [
            1659,
            1055
          ]
        ]
      },
      "adlabels": [{"name": "adlabel2"}]
    }],
    "link_urls": [{
      "website_url": "<WEBSITE_URL>",
      "display_url": "<DISPLAY_URL>",
      "deeplink_url": "<DEEPLINK_URL>",
      "adlabels": [
        {
          "name": "adlabel1"
        },
        {
          "name": "adlabel2"
        }
      ]
    }],
    "optimization_type": "PLACEMENT",
    "titles": [{
      "text": "",
      "adlabels": [
        {
          "name": "adlabel1"
        },
        {
          "name": "adlabel2"
        }
      ]
    }]
  }' \
  -F 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
```

**Example — Threads Feed Setup**

```curl
curl -X POST \
  -F 'object_story_spec={
    "page_id": "<PAGE_ID>",
    "instagram_user_id": "<IG_USER_ID>",
    "threads_user_id" : "<THREADS_USER_ID>",
  }' \
  -F 'asset_feed_spec={
    "videos": [{
      "adlabels": [{"name": "labelfb"}],
      "video_id": "<VIDEO_ID>"
    },
    {
      "adlabels": [{"name": "labelig"}],
      "video_id": "<VIDEO_ID>"
    },
    {
      "adlabels": [{"name": "labelthreads"}],
      "video_id": "<VIDEO_ID>"
    }],
    "bodies": [{"text": "Begin Your Adventure"}],
    "link_urls": [{
      "website_url": "<WEBSITE_URL>",
      "display_url": "<DISPLAY_URL>"
    }],
    "titles": [{"text": "Level Up"}],
    "ad_formats": ["SINGLE_VIDEO"],
    "call_to_action_types": ["WATCH_MORE"],
    "descriptions": [{"text": "Description"}],
    "asset_customization_rules": [{
      "customization_spec": {          
        "publisher_platforms": ["instagram"],
        "instagram_positions": ["stream"]
      },
      "video_label": {
        "name": "labelig"
      }
    },
    { 
      "customization_spec": {
        "publisher_platforms": ["threads"],
        "threads_positions": ["threads_stream"]
      },
      "video_label": {
        "name": "labelthreads"
      }
    },
    {
      "customization_spec": {},
      "video_label": {
        "name": "labelfb"
      }
    }],
    "optimization_type": "PLACEMENT"
  }' \
  -F 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v23.0/act_<AD_ACCOUNT_ID>/adcreatives
```

See all available options for [Asset Feed Spec](#asset-feed-spec-options).

## Optional Step 5: Read Ad Creative

For Placement Asset Customization ads, Instagram-related creative fields should be retrieved via `act_<AD_ACCOUNT_ID>/ads`. For example:

`https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/ads?fields=creative{effective_instagram_media_id,instagram_permalink_url}`

# Multi-Language Ads

Customize different parts of ad creative such as the image, video, text, and body of an ad to reach speakers of different language. Facebook optimizes your ad to show the right language version to the right people.

This helps you to easily set up an ad in multiple languages and deliver the most relevant language version in your ad to a viewer while retaining a broad targeting for the ad. This enables you to have personalized content based on a viewer's spoken language while maintaining cost-efficient ads.

For general information on this feature, see [Ads Help Center, Advertise to a multilingual audience](https://www.facebook.com/business/help/1288599478479574). See [supported ad campaign objectives](#asset-customization-rules).

Multi-Language Ads is one of our three APIs that use [asset customization rules](#asset-customization-rules).

## Get Started

Before you get started, check [restrictions for this product](#restrictions). If your use case meets our specifications, move on to the following steps:
*   Step 1: Create an ad campaign and ad set
*   Step 2: Provide creative via `asset_feed_spec` —see also [Available Languages](#available-languages).
*   Step 3: Create an ad with `asset_feed_spec` in `creative_spec`
*   Optional Step 4: Preview your ad

If you do not have the resources to manually translate your ad, check out our [automatic translation service](#automatic-translations).

## Step 2: Provide creative via asset\_feed\_spec

Multi-Language Ads creatives are specified using `asset_feed_specs`. An asset feed is a collection of different creative elements, such as image, titles, bodies, and so on. You create an `asset_feed_spec` at `/adcreative`.

To create an `asset_feed_spec`, provide an array of assets for each different language. Add a label to tag each asset to identify the language the asset belongs to. Facebook uses the labels in `asset_customization_rules` to group assets together by language. You should provide at least one asset per asset type.

**Available Parameters**

Parameters to provide in `asset_feed_spec` include:

| Property Name | Description |
| :--- | :--- |
| `images` | **type: array** | Required for `SINGLE_IMAGE` ad format. Provide `url` or `hash`. |
| | Images as `url` or `hash`. You should provide images which are in the ad account's image library. |
| | Provide this field as an array of `{"url": "<IMAGE_URL>", "hash": "<IMAGE_HASH>", "url_tags": "<TAG>", "adlabels": [{name: "<LABEL>"}]}`. |
| `videos` | **type: array** | Required for `SINGLE_VIDEO` ad format. |
| | Array of `video_ids`. Videos should be in the ad account's video library. |
| | Provide this field as an array of `{"video_id": "<VIDEO_ID>","thumbnail_url": "{<THUMBNAIL_URL>}", "url_tags": "{<TAG>}", "adlabels": [{"name": "<LABEL>"}]}`. |
| `bodies` | **type: array** | Required, but `url_tags` are optional. |
| | Array of bodies containing primary message of ad. |
| | Provide this field as an array of `{"text": "<BODY_TEXT>", "url_tags": "<TAG>", "adlabels": [{"name": "<LABEL>"}]}`. |
| `titles` | **type: array** | Required, but `url_tags` are optional. |
| | Array of titles. A short headline in the ad, generally shown next to a link, image or video. |
| | Provide this field as an array of `{"text": "<TITLE>", "url_tags": "<TAG>", "adlabels": [{"name": "<LABEL>"}]}`. |
| `descriptions` | **type: array** | Required, but `url_tags` are optional. |
| | Array of secondary description text, displayed less prominently than bodies or titles. |
| | Provide this field as an array of `{"text": "<DESCRIPTION>", "url_tags": "<TAG>", "adlabels": [{"name": "<LABEL>"}]}`. Use an empty string with a single space for blank description. |
| `link_urls` | **type: array** | Required, but `display_url` and `deeplink_url` are optional. |
| | Array of link URLs. |
| | Provide this field as an array of `{"website_url": "<URL>", "adlabels": [{"name": "<LABEL>"}], "deeplink_url": "<DEEPLINK>", "display_url": "<URL>"}`. |
| `call_to_action_types` | **type: array** | Required. |
| | Array of call-to-action-type values. |
| | Provide this field as an array of supported call to actions: `["<CALL_TO_ACTION>"]`. |
| `ad_formats` | Required. | |
| | Array of Facebook ad formats you want to create the ads in. Supported formats are: `SINGLE_IMAGE`, `SINGLE_VIDEO`. |
| | Provide this field as an array of supported ad formats: `["{<AD_FORMAT>}"]`. |
| `asset_customization_rules` | **type: see table below under [Asset Customization Rules](#asset-customization-rules-1)** | Required. | Array of asset customization rules. |

**Asset Customization Rules**

Define the assets that appear together for viewers who speak a particular language. Each rule has a `customization_spec` which defines the locales of people who view these assets during ad delivery.

Provide exactly one **default** rule. This rule must include the assets that Facebook displays if someone's preferred language does not match any locales specified in the asset feed. This helps prevent under-delivery of your ads.

| Property Name | Description |
| :--- | :--- |
| `customization_spec` | **type:** `{"locales": [<LOCALE1>, <LOCALE2>]}` | Required. | Define the locales where the assets in this rule should deliver. For supported locales, see [Available Languages](#available-languages). |
| `image_label` | **type:** `{"name": "<LABEL>"}` | Required for `SINGLE_IMAGE` ad format. | Label attached to one of the image assets in the asset feed. |
| `video_label` | **type:** `{"name": "<LABEL>"}` | Required for `SINGLE_VIDEO` ad format. | Label attached to one of the video assets in the asset feed. |
| `body_label` | **type:** `{"name": "<LABEL>"}` | Required. | Label attached to one of the body assets in the asset feed. |
| `title_label` | **type:** `{"name": "<LABEL>"}` | Required. | Label attached to one of the title assets in the asset feed. |
| `description_label` | **type:** `{"name": "<LABEL>"}` | Required. | Label attached to one of the description assets in the asset feed. |
| `link_url_label` | **type:** `{"name": "<LABEL>"}` | Required. | Label attached to one of the link_url assets in the asset feed. |
| `is_default` | **type: boolean** | Required. | Boolean flag to identify the default rule. You should set exactly one rule with `is_default` flag as `true`. |

**Available Languages**

The locales you provide in `customization_spec` must be locale IDs supported in ads targeting. See [Targeting and Placement, Locales](https://developers.facebook.com/docs/marketing-api/targeting-search#locales). You can search for specific language using the `/search` endpoint. Use the `q` parameter to search for a specific language name. Leave this parameter blank to get the list of all supported languages:

```curl
curl -G \
  -d "type=adlocale" \
  -d "q=en" \
  -d "limit=2" \
  -d "access_token=<ACCESS_TOKEN>" \ 
  https://graph.facebook.com/v24.0/search
```

On success you get a list of languages:

```json
{
  "data": [
    {
      "key": 6,
      "name": "English (US)"
    },
    {
      "key": 24,
      "name": "English (UK)"
    }
  ],
  "paging": {
    "cursors": {
      "before": "MAZDZD",
      "after": "MAZDZD",
    }
  }}
```

You should use the `keys` in these search results as locales in your asset customization rules. For more information, see [Targeting Search](https://developers.facebook.com/docs/marketing-api/targeting-search).

## Step 3: Create Ads using Asset Feed Specs

You can create an asset feed using the `asset_feed_spec` field in `POST ad_account_ID/adcreatives`:

```curl
curl \
  -F 'object_story_spec={
       "page_id": "<PAGE_ID>",
       "instagram_user_id": "<IG_USER_ID>",
     }' \
  -F 'asset_feed_spec={
       "ad_formats": ["SINGLE_IMAGE"],
       "bodies": [
         {
           "text": "Try our delicious guacamole recipe!",
           "adlabels": [{"name": "english"}],
         },
         {
           "text": "Essayez notre délicieuse recette de guacamole!",
           "adlabels": [{"name": "french"}],
         },
       ],
       "titles": [
         {
           "text": "Jaspers Market",
           "adlabels": [{"name": "english"}],
         },
         {
           "text": "Jaspers Market",
           "adlabels": [{"name": "french"}],
         },
       ],
       "descriptions": [
         {
           "text": "The best avocados!",
           "adlabels": [{"name": "english"}],
         },
         {
           "text": "Les meilleurs avocats!",
           "adlabels": [{"name": "french"}],
         },
       ],
       "link_urls": [
         {
           "website_url": "www.jaspersmarket.com/en",
           "adlabels": [{"name": "english"}],
         },
         {
           "website_url": "www.jaspersmarket.com/fr",
           "adlabels": [{"name": "french"}],
         },
       ],
       "images": [
         {
           "hash": "<IMAGE_HASH>",
         },
       ],
       "call_to_action_types": ["SHOP_NOW"],
       "asset_customization_rules": [
         {
           "customization_spec": {
             "locales": [9,44],
           },
           "title_label": {"name": "french"},
           "body_label": {"name": "french"},
           "description_label": {"name": "french"},
           "link_url_label": {"name": "french"},
         },
         {
             "is_default": true,
           "customization_spec": {
             "locales": [24]
           },
           "title_label": {"name": "english"},
           "body_label": {"name": "english"},
           "description_label": {"name": "english"},
           "link_url_label": {"name": "english"},
         },
       ]
     }' \
  -F 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
```

On success, you get the ID for the ad creative:

`{"id":"238474593777777"}`

If your `asset_feed_spec` does meet the [restrictions](#restrictions) below, you see an error.

To create an ad with this ad creative ID, call `POST act_AD_ACCOUNT_ID/ads`. Alternatively, to display different languages in your ad, provide the `asset_feed_spec` and `object_story_spec` in the `creative` parameter for the ad.

To verify the new `asset_feed_spec`, you call `GET` on the ad ID or the ad creative ID:

```curl
curl -G \-d 'fields=object_story_spec,asset_feed_spec' \-d 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/<CREATIVE_ID>
```

## Optional Step 4: Preview Your Ad

Preview the different language versions of your ad using the `generatepreview` endpoint. Add a `dynamic_asset_label` field with an `adlabel` in a rule to view a specific language version.

For example, to preview the French version of the above creative:

```curl
curl -G \
  --data-urlencode 'creative={ 
    "object_story_spec": { 
      "page_id": "<PAGE_ID>" 
    },
    "asset_feed_spec": {
      ...
    }
  }' \
  -d 'ad_format=DESKTOP_FEED_STANDARD' \
  -d 'dynamic_asset_label=french'
  -d 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/generatepreviews
```

## Automatic Translations

You can use our automatic translation service, if you do not have the resources to manually translate your ad. This capability translates your default ad copy to additional languages, so you can reach a multilingual audience.

The source for the automatic translation can be found in the text assets specified by the default asset customization rule. Automatically translated ad copies are labeled as “Automatically Translated”.

To create an automatically translated version of your ad copy, add `autotranslate` to `asset_feed_spec`. Then, specify the languages you would like your copy to be translated to. See example:

```curl
curl \
  -F 'object_story_spec={
       "page_id": "<PAGE_ID>",
       "instagram_user_id": "<IG_USER_ID>",
     }' \
  -F 'asset_feed_spec={
       "ad_formats": ["SINGLE_IMAGE"],
       "autotranslate": ["fr_XX"],
       "bodies": [
         {
           "text": "Try our delicious guacamole recipe!",
           "adlabels": [{"name": "english"}],
         }
       ],
       "titles": [
         {
           "text": "Jaspers Market",
           "adlabels": [{"name": "english"}]
         }
       ],
       "descriptions": [
         {
           "text": "The best avocados!",
           "adlabels": [{"name": "english"}]
         }
       ],
       "link_urls": [
         {
           "website_url": "www.jaspersmarket.com",
           "adlabels": [{"name": "english"}]
         }
       ],
       "images": [
         {
           "hash": "<IMAGE_HASH>"
         },
       ],
       "call_to_action_types": ["SHOP_NOW"],
       "optimization_type": "LANGUAGE",
       "asset_customization_rules": [
         {
           "is_default": true,
           "customization_spec": {
             "locales": [6]
           },
           "title_label": {"name": "english"},
           "body_label": {"name": "english"},
           "description_label": {"name": "english"},
           "link_url_label": {"name": "english"}
         }
       ]
     }' \
  -F 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
```

The automatically translated copies can be reviewed with a call to the `asset_feed_spec` field on the creative.

Any edits to the auto translated copies on the spec will be dropped if the same language is specified on the `autotranslate` field. These edits will be replaced by fresh translations from the default ad copy. If you absolutely need the edits, remove the language from the `autotranslate` field.

**link\_urls**

You can add a custom link URL to the automatically translated ad version.

To do this, add an language-specific URL to the `link_urls` field along with an `adlabel` and add a new rule into `asset_customization_rules` with the associated locale codes and `link_url_label` for this language.

## Restrictions

The following are restrictions and limits on your asset feed.

| | |
| :--- | :--- |
| **Ad Formats** | Only one ad format per `asset_feed_spec` |
| | For `SINGLE_IMAGE` format, you must provide at least one image. |
| | For `SINGLE_VIDEO` format, you must provide at least one video |
| **Assets, General** | You can provide at most 49 assets for every asset type except `call_to_action_types`. |
| | You must provide exactly one `call_to_action_type` asset for all objectives. |
| **Text Assets** | You must provide at least one text asset, such as `titles`, `bodies`, `descriptions` and `link_urls`, for every language version in the asset feed. |
| | All text assets should have the `adlabels` field. |
| | Maximum length: 255 characters for title, 4096 characters for body, and 10000 characters for description. |
| **Image and Video Assets** | For recommended image sizes by placement and objective, see the [Ads Guide](https://www.facebook.com/business/ads-guide). |
| | You can use up to one image or video asset without an `adlabel`. We use this image or video for all the language versions. |
| | If you provide additional videos or images, you must include `adlabels` and provide these labels in your asset customization rule. |
| **Link URL Assets** | If you provide `url_tags`, we append them to the `link_url` as parameters for each asset in the ad. |
| | If you use the `APP_INSTALLS` objective, your `link_url` should be the same as the ad set's `promoted_object.object_store_url`. |
| **Asset Customization Rules** | You should provide an asset customization rule for every language variant in `asset_feed_spec`. |
| | You should provide one default rule. This is an asset customization rule with `is_default` set to `true`. This acts as a backup rule and enables ads to display even when someone's locale does not match any of the languages in `asset_feed_spec`. |
| **Placements** | Multi-Language Ads supports all placements. |
| **Available Objectives and Destination Types** | `LINK_CLICKS` - Website and apps, no Messenger. |
| | `APP_INSTALLS` - Desktop or mobile apps. |
| | `CONVERSIONS` - Website and apps, no Messenger. |
| | `REACH` - All destination types. |
| | `BRAND_AWARENESS` - All destination types. |
| | `VIDEO_VIEWS` - All destination types |
| **Supported Buying Types** | `REACH` - Reach and Frequency |
| | `AUCTION` |
| **Supported Translation Directions** | The following translation directions are supported. Use the corresponding dialect code in the `autotranslate` field: |
| | **Source Language** | **Target Translation Language** | **Dialect Code** |
| | English | Spanish | `es_XX` |
| | English | French | `fr_XX` |
| | English | German | `de_DE` |
| | English | Portuguese | `pt_XX` |
| | English | Italian | `it_IT` |
| | English | Arabic | `ar_AR` |
| | English | Dutch | `nl_XX` |
| | English | Malay | `ms_MY` |
| | English | Swedish | `sv_SE` |
| | English | Indonesian | `id_ID` |
| | English | Polish | `pl_PL` |
| | English | Hindi | `hi_IN` |
| | English | Danish | `da_DK` |
| | English | Turkish | `tr_TR` |
| | English | Tagalog | `tl_XX` |
| | English | Romanian | `ro_RO` |
| | German | English | `en_XX` |
| | Arabic | English | `en_XX` |
| | Hebrew | English | `en_XX` |
| | Spanish | English | `en_XX` |
| | Japanese | English | `en_XX` |
| | Norwegian | English | `en_XX` |
| | French | English | `en_XX` |
| | Dutch | English | `en_XX` |
| | Swedish | English | `en_XX` |

## Insights

You can read insights for ad set and ad objects using Dynamic Creative, Placement Asset Customization and Segment Asset Customization.

In Ads Manager, you can view your asset level breakdowns. Using the API, you can get the following breakdowns:
*   `body_asset`
*   `description_asset`
*   `image_asset`
*   `title_asset`
*   `call_to_action_asset`
*   `link_url_asset`
*   `video_asset`
*   `ad_format_asset`

You can combine these in your results with these breakdowns:
*   `age`
*   `gender`
*   `age`, `gender`

For Dynamic Creative, we currently show only creative-asset level breakdowns such as metrics by image, title, body, video. Insights on full delivered ads are found in Ads Manager under **By Dynamic Creative Asset**.

**Build Your Query**

Get the following fields in your query:

| Field | Description |
| :--- | :--- |
| `actions` | Number of actions taken on your ad, grouped by action type. |
| `clicks` | Total number of clicks on your ad. |
| `impressions` | Number of times your ad was served. |

Facebook supports different values derived from the fields above. For example you can also retrieve `ctr` and `actions_per_impressions`.

**Examples**

To retrieve insights for an ad with the `body_asset` breakdown:

```curl
curl -G -d "breakdowns=body_asset" -d "fields=impressions" -d "access_token=<ACCESS_TOKEN>" 
https://graph.facebook.com/<API_VERSION>/<AD_ID>/insights
```

A sample response looks like this:

```json
{
  "data": [
    {
      "impressions": "8801",
      "date_start": "2016-04-29",
      "date_stop": "2016-05-13",
      "body_asset": {
        "text": "Test text",
        "id": "6051732675652"
      }
    },
    {
      "impressions": "7558",
      "date_start": "2016-04-29",
      "date_stop": "2016-05-13",
      "body_asset": {
        "text": "Test ext new",
        "id": "6051732676452"
      }
    },
  ],
  "paging": {
    "cursors": {
      "before": "MAZDZD",
      "after": "MgZDZD"
    }
  }}
```

To retrieve insights for an ad set broken down by `image_asset` and `age`:

```curl
curl -G -d "breakdowns=image_asset,age" -d "fields=impressions" -d "access_token=<ACCESS_TOKEN>" 
https://graph.facebook.com/<API_VERSION>/<ADSET_ID>/insights
```

A sample response looks like this:

```json
{
  "data": [
    {
      "impressions": "5497",
      "date_start": "2016-04-29",
      "date_stop": "2016-05-13",
      "image_asset": {
        "hash": "<REDACTED>",
        "url": "<REDACTED>",
        "id": "6051732672052"
      }
    },
    {
      "impressions": "5962",
      "date_start": "2016-04-29",
      "date_stop": "2016-05-13",
      "image_asset": {
        "hash": "<REDACTED>",
        "url": "<REDACTED>",
        "id": "6051732672652"
      }
    },
  ],
  "paging": {
    "cursors": {
      "before": "MAZDZD",
      "after": "MwZDZD"
    }
```

# Advantage+ Catalog Ads

With Advantage+ catalog ads, you can promote relevant items from an entire catalog across any device. Display ads for thousands of items to the right audience and automate the process. The solution has three major elements:

*   Create a feed from your catalog to automatically deliver images, descriptions, prices in your ads.
*   Set up App Events or Meta Pixel to measure actions, such as purchases, and profile target audiences for ads.
*   Create and deliver ads based on your catalog; they display relevant items from your catalog feed and target your audience.

Once those are set up, you can see how people on Facebook are engaging with your ads and use debugging tools to diagnose and resolve problems.

## Get Started with Advantage+ Catalog Ads

Advantage+ catalog ads enables you to create personalized ads that target to the right audiences based on a set of products.

Advertisers running ads concerning housing, employment, credit or issues, elections, and politics have different sets of restrictions. See [Special Ad Categories](https://developers.facebook.com/docs/marketing-api/guides/special-ad-categories) for more information.

### Before You Start

To create an Advantage+ catalog ads campaign, you need:
*   A Facebook Page representing the advertiser, and optionally, an Instagram Account if running this campaign on Instagram.
*   An ad account with registered payment information.
*   A catalog, such as a product catalog available in your [Business Manager account](https://www.facebook.com/business/tools/business-manager).
*   Optionally, you can set up a dynamic product audience, but you are not required to involve product set inclusions or exclusions in your targeting settings.

### Step 1: Create an Ad Campaign

See the [Ad Campaign documentation](https://developers.facebook.com/docs/marketing-api/guides/campaigns) to learn how to create an ad campagn.

At this level, you must set your advertising goal through the `objective` field. For Advantage+ catalog ads, supported objectives are `PRODUCT_CATALOG_SALES`, `CONVERSIONS`, `LINK_CLICKS`, or `APP_INSTALLS`. If the objective you provide is `CONVERSIONS`, `LINK_CLICKS`, or `APP_INSTALLS`, then the `promoted_object` field is not required.

```curl
curl \
  -F 'name=Product Catalog Sales Campaign' \
  -F 'objective=PRODUCT_CATALOG_SALES' \
  -F 'promoted_object={"product_catalog_id":"<PRODUCT_CATALOG_ID>"}' \
  -F 'status=PAUSED' \
  -F 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/campaigns
```

### Step 2: Create an Ad Set

For Advantage+ catalog ads, you must specify the `product_set_id` in `promoted_object` for your ad set level to promote products from that product set.

In addition, you can also define your own conversion event for that product set by specifying `custom_event_type` in `promoted_object` when the `optimization_goal` is `OFFSITE_CONVERSIONS`. This targets your ads to people who performed that event in your app or site.

For example, if you set this to `ADD_TO_CART`, it means an Add to Cart event is the conversion event. By default `custom_event_type` is set to `PURCHASE`. Learn more about standard events and values for `custom_event_type` at [Meta Pixel Conversion Tracking](https://developers.facebook.com/docs/marketing-api/conversions-api/guides/pixel-setup-guide).

If you want to optimize for offsite conversions, including conversions from both app events and Facebook Pixel, and to be billed on impressions:
*   Set the `optimization_goal` to `OFFSITE_CONVERSIONS`
*   Set the `billing_event` to `IMPRESSIONS`

More details on valid `optimization_goal` and `billing_event` combinations can be found in [Optimization Goal and Billing Events](https://developers.facebook.com/docs/marketing-api/reference/ad-set#billing-event-and-optimization-goal).

**Example of creating an ad set that is billed on `IMPRESSIONS` and optimizes for `OFFSITE_CONVERSIONS`:**

```curl
curl \
  -F 'name=Product Catalog Sales Adset' \
  -F 'bid_amount=3000' \
  -F 'billing_event=IMPRESSIONS' \
  -F 'optimization_goal=OFFSITE_CONVERSIONS' \
  -F 'daily_budget=15000' \
  -F 'campaign_id=<CAMPAIGN_ID>' \
  -F 'targeting={ "geo_locations": {"countries":["US"]}, 
    "dynamic_audience_ids": ["<DYNAMIC_AUDIENCE_ID>"] 
  }' \
  -F 'promoted_object={"product_set_id":"<PRODUCT_SET_ID>"}' \
  -F 'status=PAUSED' \
  -F 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adsets
```

The `DYNAMIC_AUDIENCE_ID` refers to a [product audience](https://developers.facebook.com/docs/marketing-api/reference/custom-audience). Optionally, you can omit `dynamic_audience_ids` from the call.

For e-commerce use cases, you can omit `dynamic_audience_ids` from the call and instead send the behavioral targeting information as part of `product_audience_specs` or `excluded_product_audience_specs` parameters. These specs are defined by the same parameters you use to create a [product audience](https://developers.facebook.com/docs/marketing-api/reference/custom-audience).

| Parameters | |
| :--- | :--- |
| `product_set_id` | `numeric string` | Required. | The product set to target with this audience. |
| `inclusions` | `JSON object` | Required. | A set of events to target. At least one inclusion is required. Each inclusion should have exactly one event. |
| `inclusions.retention_seconds` | `int` | Required. | The number of seconds to keep the Accounts Center account in the audience. |
| `inclusions.rule` | `object[]` | Required. | Website Custom Audience Rule referencing one event. |
| `exclusions` | `JSON object` | Optional. | A set of events that remove an Accounts Center account from targeting. |
| `exclusions.retention_seconds` | `int` | Required, if exclusion is specified. | The number seconds to retain the exclusion. |
| `exclusions.rule` | `object[]` | Required, if exclusion is specified. | Website Custom Audience Rule referencing one event. |

Each rule must include an event with the `eq` operator either as a top-level rule or as part of a top-level `and` rule.

**Retargeting**

In this example, we target people that viewed products in the last 3-5 days, but did not make a purchase. The ads placements are on mobile feed and Audience Network. To create this audience:

```curl
curl \
  -F 'name=Product Catalog Sales Adset' \
  -F 'bid_amount=3000' \
  -F 'billing_event=LINK_CLICKS' \
  -F 'optimization_goal=LINK_CLICKS' \
  -F 'daily_budget=15000' \
  -F 'campaign_id=<CAMPAIGN_ID>' \
  -F 'targeting={ 
    "publisher_platforms": ["facebook","audience_network"], 
    "device_platforms": ["mobile"], 
    "geo_locations": {"countries":["US"]}, 
    "product_audience_specs": [ 
      { 
        "product_set_id": "<PRODUCT_SET_ID>", 
        "inclusions": [{"retention_seconds":432000,"rule":{"event":{"eq":"ViewContent"}}}], 
        "exclusions": [{"retention_seconds":432000,"rule":{"event":{"eq":"Purchase"}}}] 
      } 
    ], 
    "excluded_product_audience_specs": [ 
      { 
        "product_set_id": "<PRODUCT_SET_ID>", 
        "inclusions": [{"retention_seconds":259200,"rule":{"event":{"eq":"ViewContent"}}}] 
      } 
    ] 
  }' \
  -F 'promoted_object={"product_set_id":<PRODUCT_SET_ID>"}' \
  -F 'status=PAUSED' \
  -F 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adsets
```

**Cross-Sell or Upsell**

Example for advertising products that the user has not looked at:

```curl
curl \
-F 'name=Case 1 Adset' \
-F 'bid_amount=3000' \
-F 'billing_event=IMPRESSIONS' \
-F 'status=ACTIVE' \
-F 'daily_budget=15000' \
-F 'campaign_id=<CAMPAIGN_ID>' \
-F 'targeting= { \
            "geo_locations": { \
            "countries":["US"], \
             }, \
            "interests":[ \
                {"id":6003397425735,"name":"Tennis"}, \
            ], \
        }' \
-F 'promoted_object={"product_set_id”:<PRODUCT_SET_ID>}' \
-F 'access_token=<ACCESS_TOKEN>’ \
https://graph.facebook.com/<API_VERSION>/act_<ACCOUNT_ID>/adsets
```

To cross-sell between product sets:
*   Provide the product audience with event rules related to product set A.
*   Show products from product set B in the ad by setting the `product_set_id` to product set B at the ad creative level.

For example, a business wants to increase the sale of handbags in `PRODUCT_SET_1` by targeting an ad to existing users who have shown interest in shoes that belong in `PRODUCT_SET_2`. Set the `product_set_id` in `product_audience_specs` to `PRODUCT_SET_2`'s ID or shoes and the `product_set_id` in `promoted_object` to `PRODUCT_SET_1`'s ID or handbags.

```curl
curl \
  -F 'name=My cross sell ad set' \
  -F 'bid_amount=3000' \
  -F 'billing_event=LINK_CLICKS' \
  -F 'optimization_goal=LINK_CLICKS' \
  -F 'daily_budget=15000' \
  -F 'campaign_id=<CAMPAIGN_ID>' \
  -F 'targeting={ 
    "geo_locations": {"countries":["US"]}, 
    "product_audience_specs": [ 
      { 
        "product_set_id": "<PRODUCT_SET_2_ID>", 
        "inclusions": [{"retention_seconds":432000,"rule":{"event":{"eq":"ViewContent"}}}], 
        "exclusions": [{"retention_seconds":432000,"rule":{"event":{"eq":"Purchase"}}}] 
      } 
    ], 
    "excluded_product_audience_specs": [ 
      { 
        "product_set_id": "<PRODUCT_SET_2_ID>", 
        "inclusions": [{"retention_seconds":259200,"rule":{"event":{"eq":"ViewContent"}}}] 
      } 
    ] 
  }' \
  -F 'promoted_object={"product_set_id":"<PRODUCT_SET_1_ID>"}' \
  -F 'status=PAUSED' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adsets  
```

And set `product_set_id` in the creative as `PRODUCT_SET_1`'s ID.

```curl
  curl \
  -F 'name=Advantage+ Catalog Ads Template Creative Sample' \
  -F 'object_story_spec={ 
    "page_id": "<PAGE_ID>", 
    "template_data": { 
      "description": "Description {{product.description}}", 
      "link": "<LINK>", 
      "message": "Test {{product.name | titleize}}", 
      "name": "Headline {{product.price}}" 
    } 
  }' \
  -F 'product_set_id=<PRODUCT_SET_ID>' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
```

**Broad Audience Targeting**

In addition to retargeting and cross-selling to existing customers, Advantage+ catalog ads may be used to target broad audiences, utilizing age, gender and other demographic targeting, with relevant products from your product catalog. By utilizing broadly targeted audiences combined with bidding for offsite conversions, Advantage+ catalog ads enable you to greatly expand the reach of your ads efficiently.

To target broad audiences:
*   Create an audience using basic demographic targeting such as women in the US over 18.
*   Include custom
*   Optimize for `OFFSITE_CONVERSIONS` with stronger intent signals such as Purchase or InitiateCheckout.

In this example, we create an adset targeted at women age 30-65 in the US, excluding customers who have purchased in the past 10 days. We will bid $8, using `OFFSITE_CONVERSIONS` for `PURCHASE` events.

```curl
curl \
  -F 'name=Broad Audience Targeting' \
  -F 'bid_amount=800' \
  -F 'billing_event=IMPRESSIONS' \
  -F 'daily_budget=15000' \
  -F 'campaign_id=<CAMPAIGN_ID>' \
  -F 'targeting={ 
    "age_max": 65, 
    "age_min": 30, 
    "geo_locations": {"countries":["US"]}, 
    "genders": [2], 
    "excluded_product_audience_specs": [ 
      { 
        "product_set_id": "<PRODUCT_SET_ID>", 
        "inclusions": [{"retention_seconds":864000,"rule":{"event":{"eq":"Purchase"}}}] 
      } 
    ] 
  }' \
  -F 'promoted_object={"product_set_id":"<PRODUCT_SET_ID>","custom_event_type":"PURCHASE"}' \
  -F 'optimization_goal=OFFSITE_CONVERSIONS' \
  -F 'status=PAUSED' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adsets
```

**Categories for Advantage+ Catalog Ads**

Advertisers running ads concerning housing, employment, credit or issues, elections, and politics have different sets of restrictions. See [Special Ad Categories](https://developers.facebook.com/docs/marketing-api/guides/special-ad-categories) for more information.

Categories for Advantage+ catalog ads introduces two new creative options for the Advantage+ catalog ads platform, both of which can be used to personalize creative for shoppers who are earlier in their decision journey. With this feature, you can create what is effectively a second, smaller creative catalog of images that represent each category (in addition to the catalog you already have of product imagery), and we will match product categories to people in your ads the same way we match products to people.

Categories for Advantage+ catalog ads can be used with any targeting option in the traffic, conversion, or catalog sales objective. If you don't have a high-quality image representative of each category or brand, Facebook can auto-generate a 2x2 collage of top products for each group of products.

When mapping this new imagery to existing product catalogs, you can use one of three columns in your feed to group items: `brand`, `product type`, and `Google product category`.

In the example catalog below, the `Product Type` column has five unique values. The advertiser can provide up to five collages or lifestyle images — one for each unique value in `product_type`. The product type is the category's categorization criteria, which is the catalog field name used to define the categories. The catalog field's value is the category's criteria value.

A category can be uniquely identified by:
*   Product catalog ID
*   Categorization criteria (`brand`, `product type`, or `Google product product category`)
*   Criteria value (pulled from the catalog)

| RetailerID | Name | Price | Product Type | Brand | Category |
| :--- | :--- | :--- | :--- | :--- | :--- |
| `prod_1` | T-Shirt | USD 25 | Clothes | Brand A | Category A |
| `prod_2` | FB Hoodie | USD 30 | Clothes | Brand B | Category A |
| `prod_3` | iPhone 6 | USD 800 | Phone | Brand C | Category B |
| `prod_4` | Samsung Galaxy S5 | USD 750 | Phone | Brand C | Category B |
| `prod_5` | Rice cooker | USD 120 | Appliance | Brand C | Category C |
| `prod_6` | Parker Sofa | USD 500 | Appliance | Brand D | Category D |
| `prod_7` | Sunscreen | USD 14 | Personal Care | Brand E | Category E |

You can associate each category (for example, each group of products as defined by unique values in one of the columns specified above) with assets:
*   **Name** — A user-facing short name of the category (up to 40 characters).
*   **Description** — A user-facing description of the category (up to 20 characters).
*   **destination\_uri** — The URL of the landing page when a user clicks the category.
*   **image\_url** — Optional. The URL of a life style image representing the category. If no `image_url` is provided, we will auto-generate a collage of top products from that category.

During ads delivery time, we dynamically match each Accounts Center account with the categories they are most likely to respond to based using the same machine learning models that power Advantage+ catalog ads today.

**Categories Management API**

Categories information is stored at the catalog level, meaning that different ads promoting the categories from the same catalog would share assets, the same as ads promoting products would share assets defined in catalogs. We do support different creative options to customize category ads.

Below are the APIs to get and update categories information.

**Reading**

*   **Request**

    ```curl
      curl -G \
        -d 'fields=["criteria_value","name","description","destination_uri","image_url"]' \
        -d 'categorization_criteria=product_type' \
        -d 'filter={"price_amount":{"gt":1500}}' \ # optional
        -d 'access_token=<ACCESS_TOKEN>' \
        https://graph.facebook.com/v24.0/<PRODUCT_CATALOG_ID>/categories
    ```

    We query for all products (the optional filter is supported) and find the top 1,000 categories (ordered by number of products).

*   **Sample response**

    ```json
    {
      "data": [
        {
          "criteria_value": "clothes",
          "name": "Awesome clothes",
          "description": "Check out these awesome clothes!",
          "destination_uri": "http://www.example.com/clothes",
          "image_url": "http://www.example.com/clothes.jpg"
        },
        ...
        {
          "criteria_value": "shoes",
          "name": "Awesome shoes",
          "description": "Check out these awesome shoes!",
          "destination_uri": "http://www.example.com/shoes",
          "image_url": "http://www.example.com/shoes.jpg"
        }
      ]
    }
    ```

**Updating**

You can specify multiple categories information in `data`. For each category, `categorization_criteria` and `criteria_value` are required, while the `name`, `description`, `destination_uri`, and `image_url` fields are optional. When updating the information of a category for the first time, you must specify the `destination_uri`. If you want to skip delivery of a category, simply set its `destination_uri` to be empty.

**Note:** Deleting a category is not supported at this time.

*   **Request**

    ```curl
    curl \
      -F 'data=[{"categorization_criteria":"product_type","criteria_value":"product_type_value","name":"Name","description":"Description","destination_uri":"http://www.example.com/","image_url":"<IMAGE_URL>"}]' \
      -F 'access_token=<ACCESS_TOKEN>' \
      https://graph.facebook.com/v24.0/<lPRODUCT_CATALOG_ID>/categories
    ```

**Ads Creation**

Categories for Advantage+ catalog ads ad creation is similar to ad creation for other Advantage+ catalog ads, but the creative selection is slightly different. You are still promoting a product set with dynamic category ads; the difference is that we're showing category creatives instead.

```curl
curl \
  -F "name=Dynamic Category Ad Creative" \
  -F 'object_story_spec={"page_id": "<PAGE_ID>", "template_data": {"description": "{{category.description}}", "link": "https://www.example.com/", "message": "<MESSAGE>", "name": "{{category.name}}"}}' \
  -F 'product_set_id=<PRODUCT_SET_ID>' \
  -F 'categorization_criteria=brand' \
  -F 'category_media_source=MIXED' \ # optional
  -F access_token=<ACCESS_TOKEN> \
  https://graph.facebook.com/v24.0/act_<ACCOUNT_ID>/adcreatives
```

This creates a category ad creative rendered in a carousel format:

**Category Tokens**

Supported category tokens:
*   `category.name` — The category name within the promoted product set.
*   `category.description` — The category description within the promoted product set.
*   `category.destination_uri` — The category destination URI.
*   `category.min_price` — The minimum price for this category within the promoted product set. This information is pulled from the catalog.

| Parameters | |
| :--- | :--- |
| `categorization_criteria` | Specifies which category type to use. |
| | **Values:** |
| | `brand` |
| | `product_type` |
| | `google_product_category` |
| `category_media_source` | Specifies how to render the category carousel card. |
| | **Values:** |
| | `mixed` (default) |
| | Uses the category's image if exists; otherwise, falls back to `products_collage`. |
| | `category` |
| | Uses the category's image. Skip this category if this category doesn't have a image. |
| | `products_collage` |
| | Generates a 2x2 collage of product images from this category. |
| | `products_slideshow` |
| | Renders a slideshow of products from this category. |

During the category ad creative creation, we search for possible renderable categories.

**Note:** We filter out categories without a name or destination URL. We also filter out categories without images if `category_media_source = category`.

**Common Errors**

Creative creation fails if there are less than four eligible categories (for example, to use categories for Advantage+ catalog ads as your creative for a given campaign, there must be at least four unique values in a given column from your data feed file).

### Step 3: Provide an Ad Creative

Advantage+ catalog ads templates use inline page posts for creating Advantage+ catalog template creatives.

**Build a Template Creative**

Creating an Advantage+ catalog ads template creative is similar to creating other ad creatives. The difference is that you can add template parameters that properly render at runtime based on data in your data feed file.

Build the template based on the `template_data` object of the `object_story_spec` and use the following fields:

| Name | Description | Accepts Template Parameters |
| :--- | :--- | :--- |
| `call_to_action` | `object` | Call to Action object. | The `value` field should be omitted. | No |
| `message` | `string` | Message for your ad, visible on Instagram. | Yes |
| `link` | `string` | Link to your website, used to generate the caption of the ad. | This field will always be replaced with the link field from your data feed file, except for the end card of carousel ads, which will link to this. | **Note:** This cannot be a Facebook URL. | No |
| `name` | `string` | Name or title for your ad, visible on Instagram. | Yes |
| `description` | `string` | Description for your ad, not visible on Instagram. | Yes |
| `force_single_link` | `boolean` | Optional. | Force to render a single link format. | When set to `true`, the creative will be a link page post ad showing a single product. When left out, the resulting ad will be a carousel ad. Facebook will choose the number of cards to optimize the performance of your ad. | No |
| `show_multiple_images` | `boolean` | Show multiple images in the carousel for a single product. | **Note:** `force_single_link` and `multi_share_end_card` must be set to `true` and `false` respectively. | No |
| `multi_share_end_card` | `boolean` | Optional. | Default is `true`. | Use this in carousel format. If set to `false`, it will remove the end card that displays the page icon. | No |
| `child_attachments` | `array` | Enables you to provide one or more static cards in Advantage+ catalog ads for the carousel format. | The static cards appear either before or after all Advantage+ catalog ads. Provide the `static_card` field set to `true` for each static card under `child_attachments`. | No |
| `image_layer_specs` | `AdCreativeLinkDataImageLayerSpecs` | Specifies how to transform the images when they are delivered to users in the ad. | One `AdCreativeLinkDataImageOverlaySpec` is needed for each layer to define how to render the layer. The layers will be rendered in the order they appear in the list. | **Note:** `AdCreativeLinkDataImageLayerSpec` is available on a limited basis. Please contact your Facebook representative for more details. | No |
| `image_overlay_spec` | `AdCreativeLinkDataImageOverlaySpec` | Specifies how to render overlays on an image for a dynamic item. | No |
| `preferred_image_tags` | `array` | Selects which image to use, if you have added tags to your images. | For any item, we choose the image as follows: we get the first tag in `preferred_image_tags` that has at least one image for the item, then render the first image for that tag. If no tags correspond to an image, we serve the first image. | No |
| `preferred_video_tags` | | Selects which video to use, if you have added tags to your videos. | For any item, we choose the video as follows: we get the first tag in `preferred_video_tags` that has at least one video for the item, then render the most performant video for that tag and placement. If no tags correspond to a video, we serve the first video. If there are no videos, we fall back to image rendering. | **Note:** `preferred_video_tags` will only be applied if your ad is opted into [Dynamic Media](#dynamic-media). | No |

**Examples**

**Create a carousel Advantage+ catalog ads template**

```curl
curl \
  -F 'name=Advantage+ Catalog Ads Template Creative Sample' \
  -F 'object_story_spec={ 
    "page_id": "<PAGE_ID>", 
    "template_data": { 
      "description": "Description {{product.description}}", 
      "link": "<LINK>", 
      "message": "Test {{product.name | titleize}}", 
      "name": "Headline {{product.price}}" 
    } 
  }' \
  -F 'product_set_id=<PRODUCT_SET_ID>' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives  
```

**Use a Advantage+ catalog ads template with image overlays**

```curl
curl \
  -F 'name=Advantage+ Catalog Ads Template Creative Sample' \
  -F 'object_story_spec={ 
    "page_id": "<PAGE_ID>", 
    "template_data": { 
      "call_to_action": {"type":"SHOP_NOW"}, 
      "description": "Description {{product.description}}", 
      "link": "<LINK>", 
      "message": "Test {{product.name | titleize}}", 
      "name": "Headline {{product.price}}",
      "image_layer_specs": [
        {
          "layer_type": "image",
          "image_source": "catalog"
        },
        {
          "layer_type": "frame_overlay",
          "blending_mode": "lighten",
          "frame_image_hash": "<HASH>",
          "frame_source": "custom",
          "opacity": 100,
          "overlay_position": "center",
          "scale": 100
        },
        {
          "layer_type": "text_overlay",
          "content": {
            "type": "price",
            "auto_show_enroll_status": "OPT_IN"
          },
          "opacity": 100,
          "overlay_position": "top_left",
          "overlay_shape": "rectangle",
          "shape_color": "DF0005",
          "text_color": "FFFFFF",
          "text_font": "open_sans_bold"
        }
      ]
    } 
  }' \
  -F 'product_set_id=<PRODUCT_SET_ID>' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/<API_VERSION>/act_<AD_ACCOUNT_ID>/adcreatives
```

**Create a single product Advantage+ catalog ads template with a call to action**

```curl
curl \
  -F 'name=Advantage+ Catalog Ads Template Creative Sample' \
  -F 'object_story_spec={ 
    "page_id": "<PAGE_ID>", 
    "template_data": { 
      "call_to_action": {"type":"SHOP_NOW"}, 
      "description": "Description {{product.description}}", 
      "force_single_link": true, 
      "link": "<LINK>", 
      "message": "Test {{product.name | titleize}}", 
      "name": "Headline {{product.price}}" 
    } 
  }' \
  -F 'product_set_id=<PRODUCT_SET_ID>' \
  -F 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives  
```

**Create a carousel Advantage+ catalog ads template for a single product where each image comes from additional images array in the catalog**

```curl -X POST \
     -F 'name=Advantage+ Catalog Ads Template Creative Sample' \
     -F 'object_story_spec={
           "page_id": <PAGE_ID>,
           "template_data": {
             "message": "Test {{product.name | titleize}}",
             "link": "<YOUR_LINK_URL>",
             "name": "Headline {{product.price}}",
             "description": "Description {{product.description}}",
             "multi_share_end_card": false,
             "force_single_link": true,
             "show_multiple_images": true,
           }
         }' \
     -F 'product_set_id=<PRODUCT_SET_ID>' \
     -F 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
```

**Create a carousel Advantage+ catalog ads template with the first card as a coupon static card**

```curl
curl \
  -F 'name=Advantage+ Catalog Ads Template Creative Sample' \
  -F 'object_story_spec={ 
    "page_id": "<PAGE_ID>", 
    "template_data": { 
      "child_attachments": [ 
        { 
          "call_to_action": {"type":"SHOP_NOW"}, 
          "description": "30% off", 
          "image_hash": "<IMAGE_HASH>", 
          "link": "https:\/\/www.link.com\/coupon", 
          "name": "Coupon Static Card", 
          "static_card": true 
        }, 
        { 
          "call_to_action": {"type":"SHOP_NOW"}, 
          "description": "Description {{product.description}}", 
          "name": "Headline {{product.price}}" 
        } 
      ], 
      "link": "<LINK>", 
      "message": "Test Message" 
    } 
  }' \
  -F 'product_set_id=<PRODUCT_SET_ID>' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives  
```

**Create a carousel slideshow from an Advantage+ catalog ads template**

We render each dynamic card in the carousel as a slideshow. Each slideshow displays images from one dynamic item if the item has multiple images. If the dynamic item only has one image, we render a card as a static image.

```curl
curl \
  -F 'name=Advantage+ Catalog Ads Template Creative Sample' \
  -F 'object_story_spec={
    "page_id": "PAGE_ID",
    "template_data": {
      "call_to_action": {"type":"SHOP_NOW"},
      "description": "Description {{product.description}}",
      "link": "LINK",
      "message": "Test {{product.name | titleize}}",
      "name": "Headline {{product.price}}",
      "format_option": "carousel_slideshows"
    }
  }' \
  -F 'product_set_id=PRODUCT_SET_ID' \
  -F 'access_token=ACCESS_TOKEN' \
  https://graph.facebook.com/v24.0/AD_ACCOUNT_ID/adcreatives
```

The response to these calls is the ID of a new Advantage+ catalog ads template creative.

`{"id":"creative_id"}`

**Upload a catalog**

When uploading a catalog, you can specify arbitrary alphanumeric string tags for each image in each property.

```xml
<listing>
 <hotel_id>hotel_1</hotel_id>
 ...
 <image>
 <url>https://media-cdn.tripadvisor.com/media/photo-o/05/ca/40/af/the-epiphany-a-joie-de.jpg (https://l.facebook.com/l.php?u=https%3A%2F%2Fmedia-cdn.tripadvisor.com%2Fmedia%2Fphoto-o%2F05%2Fca%2F40%2Faf%2Fthe-epiphany-a-joie-de.jpg&h=ATPTuLcCa7Vsnmn07cEVa0YseTFl1C2hOax9NezejmXDbR48w3CLdjLlwlpuGCRDQmuafQvk03ybGqfhk-2mBcH7xtuKAsnuuq9xKwBd8DwfuBMZkq3n1qX5MdychRKGy2bo2ax9BZQzgqVDY_AvC1EqE6aAdUEc)</url>
 <tag>exterior</tag>
 <tag>first image</tag>
 <tag>tree</tag>
 </image>
 <image>
 <url>http://www3.hilton.com/resources/media/hi/DFWANHH/en_US/img/shared/full_page_image_gallery/main/HH_exteriorview001_1270x560_FitToBoxSmallDimension_Center.jpg (http://l.facebook.com/l.php?u=http%3A%2F%2Fwww3.hilton.com%2Fresources%2Fmedia%2Fhi%2FDFWANHH%2Fen_US%2Fimg%2Fshared%2Ffull_page_image_gallery%2Fmain%2FHH_exteriorview001_1270x560_FitToBoxSmallDimension_Center.jpg&h=ATPTuLcCa7Vsnmn07cEVa0YseTFl1C2hOax9NezejmXDbR48w3CLdjLlwlpuGCRDQmuafQvk03ybGqfhk-2mBcH7xtuKAsnuuq9xKwBd8DwfuBMZkq3n1qX5MdychRKGy2bo2ax9BZQzgqVDY_AvC1EqE6aAdUEc)</url>
 <tag>skyline</tag>
 ...
 </image>
 ...</listing>
```

**Create an ad creative**

When creating an ad creative, an array of `preferred_image_tags` can be passed in the `object_story_spec`.

```curl
 -F 'name=Ad Creative Test'\
 -F 'object_story_spec={
     "page_id": '<PAGE_ID>',
     "template_data": {
       "preferred_image_tags": ["skyline","exterior"],
       "preferred_video_tags": ["landscape","city"],
       "call_to_action": {"type":"BOOK_TRAVEL"},
       "description": "{{hotel.description}}",
       "link": "<URL>",
        "message": "Book your stay in {{hotel.city}}",
        "name": "{{hotel.name | titleize}}"
     }
    }' \
 -F 'product_set_id=<PRODUCT_SET_ID>' \
 -F 'access_token=<ACCESS_TOKEN>' \
 https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
```

**Enable Video for Advantage+ Catalog Ads**

The main steps for creating Advantage+ catalog ads still holds the same. To enable video, you need to include video data and provide that data inside the catalog.

**Step 1: Set up a catalog**

This example uses an XML file; other formats should be similar.

When you add video to the listing, the `url` and `tag` fields are supported. Currently, only one video is supported for each product.

```xml
<?xml version="1.0" encoding="utf-8"?><listings>
  <title>Test hotel feed</title>
  <listing>
    <hotel_id>hotel_1</hotel_id>
    <name>Test Hotel 1</name>
    <description>A very nice hotel</description>
    <brand>Facebook</brand>
    <address format="simple">
      <component name="addr1">180 Hamilton Ave</component>
      <component name="city">Palo Alto</component>
      <component name="city_id">12345</component>
      <component name="region">California</component>
      <component name="postal_code">94301</component>
      <component name="country">United States</component>
    </address>
    <latitude>37.4435997</latitude>
    <longitude>-122.1615219</longitude>
    <neighborhood>Palo Alto</neighborhood>
    <neighborhood>Silicon Valley</neighborhood>
    <margin_level>8</margin_level>
    <base_price>200.5 USD</base_price>
    <phone>+1 650 666-3311</phone>
    <star_rating>2.5</star_rating>
    <guest_rating>
      <score>7.8</score>
      <rating_system>tripAdvisor</rating_system>
      <number_of_reviewers>300</number_of_reviewers>
    </guest_rating>
    <guest_rating>
      <score>9.8</score>
      <rating_system>Hotels.com</rating_system>
      <number_of_reviewers>35000</number_of_reviewers>
    </guest_rating>
    <image>
      <url>https://media-cdn.tripadvisor.com/media/photo-o/05/ca/40/af/the-epiphany-a-joie-de.jpg</url>
      <tag>front view</tag>
      <tag>first image</tag>
    </image>
    <image>
      <url>http://www.jdvhotels.com/content/uploads/2014/06/72-1200x800.jpg</url>
      <tag>room</tag>
      <tag>bed</tag>
    </image>
    <loyalty_program>Starwood</loyalty_program>
    <url>http://www.jdvhotels.com/hotels/california/silicon-valley-hotels/the-epiphany-hotel/</url>
    <applink property="ios_url" content="example-ios://electronic"/>
    <applink property="ios_app_store_id" content="42"/>
    <applink property="ios_app_name" content="Electronic Example iOS"/>
*    <video>
      <url>http://example.com/some_video1.mp4</url>
      <tag>City</tag>
      <tag>Package</tag>
    </video>*
  </listing></listings>
```

**Video specs**

| | |
| :--- | :--- |
| **Max duration** | 60 seconds |
| **Max size** | 200MB |
| **Video formats** | 3g2, 3gp, 3gpp, asf, avi, dat, divx, dv, f4v, flv, gif, m2ts, m4v, mkv, mod, mov, mp4, mpe, mpeg, mpeg4, mpg, mts, nsv, ogm, ogv, qt, tod, ts, vob, wmv |

**Step 2: Use the API to get video metadata for troubleshooting**

You can use the API to check the uploaded data. For Marketing API v23.0 and above, use the `videos` field to access video metadata. For earlier versions, use `videos_metadata`. We recommend upgrading to v23.0 or above and using the `videos` field.

*   **Request**

    ```curl
    curl -i -X GET \
    "https://graph.facebook.com/v24.0/1234567890?fields=videos&access_token=<ACCESS TOKEN>"
    ```

*   **Sample response**

    ```json
    {
      "videos": [
        {
          "content_type": "video/mp4",
          "url": "http://example.com/some_video1.mp4",
          "tag": [
            "City",
            "Package"
          ]
        }
      ],
      "id": "1234567890"
    }
    ```

**Step 3: Enable the video in the creative or ad**

To enable product-level video content in ads, see the [Create Ads with Dynamic Media](https://developers.facebook.com/docs/marketing-api/guides/advantage-catalog-ads/dynamic-media#create-ads-with-dynamic-media) documentation.

**Click Tracking and Templates**

If you track link clicks through a third-party click tracker before redirecting to the final product URL, you can use the `template_url_spec` field in the ad creative. This allows adding a click tracker template to the ad level without the need to hard code it in your data feed file. You can also use this field to create templates for deep linking.

In this field, you may use dynamic fields such as product URL or ID, and those should be url-encoded if their values can contain characters that make the URL invalid.

**Example**

To create a carousel Advantage+ catalog ads template with the `template_url_spec` setting:

```curl
curl \
  -F 'name=Advantage+ Catalog Ads Template Creative Sample' \
  -F 'object_story_spec={ 
    "page_id": "<PAGE_ID>", 
    "template_data": { 
      "description": "Description {{product.description}}", 
      "link": "<URL>", 
      "message": "Test {{product.name | titleize}}", 
      "name": "Headline {{product.price}}" 
    } 
  }' \
  -F 'template_url_spec={ 
    "ios": { 
      "app_store_id": "123", 
      "url": "example:\/\/link\/?nav=item.view&id={{product.retailer_id | urlencode}}&referrer=http:\/\/rover.example.com\/rover\/1\/711-198453-24755-9\/16%3Fitemid={{product.retailer_id | urlencode | urlencode}}" 
    }, 
    "web": { 
      "url": "http:\/\/clicktrack.com\/cm325?id={{product.retailer_id | urlencode}}&redirect_url={{product.url | urlencode | urlencode}}" 
    } 
  }' \
  -F 'product_set_id=<PRODUCT_SET_ID>' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives  
```

**Use Data Feed File Data in Your Template**

When an ad is displayed, Facebook replaces the content in the `{{ }}` section with the proper values from your data feed file. Available template values are:

| Name | Description |
| :--- | :--- |
| `brand` | The item's brand value from your data feed file. |
| `current_price` | The formatted sale price if the product has a specified sale price. Optionally you can specify sale start and end dates for a product and `current_price` will show the sale price while the item is on sale. If no sale price is specified or the sale dates have passed, this will show the `price` field. |
| `description` | The item's description value from your data feed file. |
| `name` | The item's title value from your data feed file. |
| `price` | The formatted price column (like $1,234.56). |
| `retailer_id` | The item's id value from your data feed file. |
| `url` | The item's link value from your data feed file. |
| `custom_label_0` | The item's custom_label\_0 value from your data feed file. |
| `custom_label_1` | The item's custom_label\_1 value from your data feed file. |
| `custom_label_2` | The item's custom_label\_2 value from your data feed file. |
| `custom_label_3` | The item's custom_label\_3 value from your data feed file. |
| `custom_label_4` | The item's custom_label\_4 value from your data feed file. |

**Options**

Some template values may receive options, in any order, in the following format:

`{{field option1 option2 ...}}`

The following options are available:

| Option | Description | Supported by |
| :--- | :--- | :--- |
| `raw` | Omits the currency symbol | `price` |
| `current_price` | |
| `strip_zeros` | Omits the cents part in currency if cents are zeros | `price` |
| `current_price` | |
| `round` | Omits the cent amount of the currency while rounding up the price | All price fields |

**Transformations**

You can use template values with transformations, which adjust your value based on this format:

`{{field | transform}}`

Use one of these transformations:

| Transformations | Description |
| :--- | :--- |
| `number_format` | Format the number in a default format, using a comma (",") as thousand separator, rounded to the nearest integer (e.g., 1234.56->"1,235"). The value to format must be an unformatted number ("1234", not "1,234"). |
| `titleize` | Capitalize the words for a better looking title (e.g., "box" -> "Box"). |
| `urlencode` | Encode the value for URL. |

**Specify Desired Behavior of Ads Click from Mobile**

When you display a dynamic creative, you can specify the desired behavior when a someone clicks on the ad in the native Facebook app. There are two requirements to be able to use deep linking:
*   The native mobile app where the user should be sent to supports deep linking (iOS or Android).
*   The deep link information has been included in the data feed file or deep link information is available through App Links.

If both these requirements are fulfilled, you can use the `applink_treatment` field while creating an ad creative to specify the desired behavior when a user clicks on an ad.

| Name | Description |
| :--- | :--- |
| `web_only` | Always send the user to the given web URL. |
| `deeplink_with_web_fallback` | If the app is installed on the user's phone and we have corresponding deep link information, send the user to the app. If one of these conditions is not met, send them to the website. |
| `deeplink_with_appstore_fallback` | Default when app links are present for the product. If the app is installed on the user's phone and we have corresponding deep link information, send the user to the app. If the app is not installed, send them to the app store for the app. |

**Examples**

**Creating a carousel Advantage+ catalog ads template with a call to action that will deep link into a native app if available or fall back to the web:**

```curl
curl \
  -F 'name=Advantage+ Catalog Ads Template Creative Sample' \
  -F 'applink_treatment=deeplink_with_web_fallback' \
  -F 'object_story_spec={ 
    "page_id": "<PAGE_ID>", 
    "template_data": { 
      "call_to_action": {"type":"SHOP_NOW"}, 
      "description": "Description {{product.description}}", 
      "link": "<LINK>", 
      "message": "Test {{product.name | titleize}}", 
      "name": "Headline {{product.price}}" 
    } 
  }' \
  -F 'product_set_id=<PRODUCT_SET_ID>' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives  
```

**Creating a carousel Advantage+ catalog ads template with URL tags enabled that will deep link into a native app if available or fall back to app store for the app:**

```curl
curl \
  -F 'name=Advantage+ Catalog Ads Template Creative Sample' \
  -F 'applink_treatment=deeplink_with_appstore_fallback' \
  -F 'object_story_spec={ 
    "page_id": "<PAGE_ID>", 
    "template_data": { 
      "call_to_action": {"type":"SHOP_NOW"}, 
      "description": "Description {{product.description}}", 
      "link": "<LINK>", 
      "message": "Test {{product.name | titleize}}", 
      "name": "Headline {{product.price}}" 
    } 
  }' \
  -F 'product_set_id=<PRODUCT_SET_ID>' \
  -F 'access_token<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
```

**Create a Localized Catalog for Advantage+ Catalog Ads**

See details in [Localized Catalog for Advantage+ Catalog Ads](https://developers.facebook.com/docs/marketing-api/guides/localized-catalog-for-advantage-catalog-ads).

**Automated Product Tags**

Automated product tags are designed to improve your ad performance and help people discover your products from ads more easily.

We may automatically tag products in your Advantage+ catalog ads. To opt-in to automated product tags, set `automated_product_tags` to `true` in the `template_data` of the `object_story_spec`. You must also provide a product set ID.

**Example**

```curl
curl \
  -F 'name=Sample Creative' \
  -F 'product_set_id="<PRODUCT_SET_ID>"' \
  -F 'object_story_spec={ 
        "template_data": {
          "automated_product_tags": true
          "call_to_action":  {
            "type": "SHOP_NOW"
          },
          "link": "<OFFSITE_LANDING_URL>",
          "multi_share_end_card": false,
          "name": "{{product.name}}"
        }, 
        "page_id": "<PAGE_ID>",
        "instagram_user_id": "<IG_USER_ID>"
     }' \
  -F 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives 
```

### Step 4: Create an Ad

Finally, you can create an ad. The ad references an ad creative.

**Example**

```curl
curl -X POST \
  -F 'name="My Ad"' \
  -F 'adset_id="<AD_SET_ID>"' \
  -F 'creative={
       "creative_id": "<CREATIVE_ID>"
     }' \
  -F 'status="PAUSED"' \
  -F 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/ads
```

Congratulations! You have created your first Advantage+ catalog ad. Feel free to unpause it to start delivery.

When published as an Instagram Stories' ad, Advantage+ catalog ads are cropped to 1:1 regardless of the dimensions of the original image.

### Next Steps

**Preview Advantage+ Catalog Ads**

You can generate previews of your dynamic creative with the [Ad Previews endpoint](https://developers.facebook.com/docs/marketing-api/ad-preview). Specify the `product_item_ids` parameter or specify multiple `product_item_ids` to preview a carousel ad.

```curl
curl -X GET \
  -d 'ad_format="DESKTOP_FEED_STANDARD"' \
  -d 'product_item_ids=[
       "<PRODUCT_ITEM_ID>"
     ]' \
  -d 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/<CREATIVE_ID>/previews
```

| Parameters | |
| :--- | :--- |
| `product_item_ids` | `array[string]` | List of product FBIDs or Base64 URL-encoded product ID tokens. |
| | Each token is of the form `catalog:{catalog_id}:{base64urlencode(retailer_id)}`. |

**Fetch Product Ad Statistics**

You can fetch statistics per product by making a `GET` call to the `insights` endpoint. Add `product_id` to the `fields` parameter.

This shows statistics for all products in an account's product sets displayed in Advantage+ catalog ads.

*   **Example**

    This example reports clicks, actions, and impressions for each `product_id`.

    **Request**

    ```curl
    curl -G \
      -d 'date_preset=last_week' \
      -d 'action_breakdowns=["action_type"]' \
      -d 'breakdowns=["product_id"]' \
      -d 'fields=account_name,impressions,actions' \
      -d 'access_token=<ACCESS_TOKEN>' \
    https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/insights
    ```

    **Response**

    ```json
    {
     "data": [ 
       {
          "account_id": "123456", 
    ```json
      "product_id": "60750", 
      "date_start": "2015-02-03", 
      "date_stop": "2015-02-03", 
      "impressions": 880, 
      "clicks": 8, 
      "actions": [ 
        {
          "action_type": "link_click", 
          "value": 6
        }, 
        {
          "action_type": "offsite_conversion.other", 
          "value": 5
        },  
        {
          "action_type": "offsite_conversion", 
          "value": 5
        }
      ], 
      "account_name": "My Account"
    }, 
 ], 
...
}
```

**Fetch Comments and Likes**

You can retrieve the comments, likes, and the `product_id` for an Advantage+ catalog ads post. Make a `GET` call as follows with a `post_id`. The `post_id` is the `effective_object_story_id` of an ad creative, in the format of `PageID_PostID`.

**Note:** You cannot use this endpoint to retrieve comments from Instagram.

```curl
curl -G \
  -d 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/<API_VERSION>/<POST_ID>/dynamic_posts
```

This endpoint returns dynamic post objects.

Once you get dynamic posts, you can fetch comments, likes, `product_id`, and `child_attachments` for carousel format, if applicable.

Placement Asset Customization ads will not be returned by the `dynamic_posts` edge.

**Learn More**

*   [Set Up Catalog](https://developers.facebook.com/docs/marketing-api/guides/catalog)
*   [Build Audiences](https://developers.facebook.com/docs/marketing-api/guides/audiences)
*   [Ad Set Reference](https://developers.facebook.com/docs/marketing-api/reference/ad-set)
*   [Ad Creative Reference](https://developers.facebook.com/docs/marketing-api/reference/ad-creative)
*   [Meta Blueprint course: Prepare and Set Up Catalog for Advantage+ Catalog Ads](https://www.facebook.com/blueprint/courses/prepare-and-set-up-catalog-for-advantage-catalog-ads)
*   [Meta Blueprint course: Troubleshoot Catalog for Advantage+ Catalog Ads](https://www.facebook.com/blueprint/courses/troubleshoot-catalog-for-advantage-catalog-ads)
*   [Meta Blueprint live training: Troubleshoot Catalog for Advantage+ Catalog Ads](https://www.facebook.com/blueprint/live-training/troubleshoot-catalog-for-advantage-catalog-ads)

### Dynamic Media

Starting September 2025, we will be updating dynamic media to be opt-in by default for Advantage+ catalog ads. You may notice that videos are showing more frequently in ads. You may continue to use `media_type_automation` to control whether videos surface in ads and set to `OPT_OUT` as needed.

Dynamic media allows advertisers to deliver video assets from their catalog in their Advantage+ catalog ads.

**Before You Begin**

You will need:
*   A product catalog with existing products
*   A video for each product item in a downloadable video URL format

See the [Advantage+ catalog ads documentation](#advantage-catalog-ads) to learn more about how they work.

**Limitations**

*   We recommend a minimum of 20 products, but there are no required minimums.
*   Each video size should not exceed 200MB. There are no length restrictions.
*   Videos must be in one of the following formats: `3g2`, `3gp`, `3gpp`, `asf`, `avi`, `dat`, `divx`, `dv`, `f4v`, `flv`, `gif`, `m2ts`, `m4v`, `mkv`, `mod`, `mov`, `mp4`, `mpe`, `mpeg`, `mpeg4`, `mpg`, `mts`, `nsv`, `ogm`, `ogv`, `qt`, `tod`, `ts`, `vob`, or `wmv`.
*   The `video_fetch_status` may show as `NO_STATUS` until the video is used in an ad or another event that requires the video is triggered.

**Add Videos to Your Catalog**

There are 3 ways to add videos to product items in your catalog: catalog feed file, catalog batch API, and manual upload via your Commerce Manager.

**Add videos with the catalog feed file**

**Step 1. Prepare Your Catalog Feed File**

You can use one of the following processes to implement your catalog feed file.

*   **Process 1: Change the main feed**

    Add a `video[0].url` column to your existing catalog feed file, populate the video URL to only the selected products, and leave it empty for other product rows.

    Additional videos for the same product can be added with additional columns: `video[1].url`, `video[2].url`, `video[3].url`, etc.

    Tags may be added to the videos by including the tags in separate columns. For example: `video[0].tag[0]`, `video[0].tag[1]`, `video[1].tag[0]`, and so on.

*   **Process 2: Supplemental feed**

    Prepare a supplementary catalog feed file to supplement an existing feed upload. This supplemental feed can only add or replace videos to already existing product items. Add a `video[0].url` column and an ID column to associate the video with the product item ID.

    Optional:
    *   Instead of the `video[0].url` column, you can create a column called `video` and add tags to the video. The video column can contain multiple video URLs per product and multiple tags per URL encoded in a JSON format. If you choose to use a tag column for the product set filter, you’ll need to add this column to the feed file too.

    **Example video column format:**

    ```json
    [{"url": "http://www.jaspersmarket-example1.com/video-file.avi", "tag": ["Optional Tag1", "Optional Tag2"]},{"url": "http://www.jaspersmarket-example2.com/video-file.avi", "tag": ["Optional Tag1", "Optional Tag2"]}]
    ```

    For an XML feed, video URLs can be added using `<video>` tags like:

    ```xml
    <video>
        <url>https://{URL1}</url>
        <tag>video_product_set1</tag>
        <tag>video_product_set2 </tag></video><video>
        <url>https://{URL2}</url>
        <tag>video_product_set1</tag></video>
    ```

**Query video data from the product item API**

The `videos`, `videos_metadata`, and `video_fetch_status` fields are available on the catalog APIs to retrieve catalog product video details.

`curl -i GET \
  "http://graph.facebook.com/v24.0/<PRODUCT_ITEM_ID>?fields=videos,videos_metadata,video_fetch_status"`

For more details on video information, see the [Product Item details](https://developers.facebook.com/docs/marketing-api/reference/product-item).

**Add videos with the catalog batch API**

Updates to product items are supported using the `/{product_catalog_id}/items_batch` endpoint. You can make a `POST` API call with the `video` field, which is an array of URLs.

```curl
curl \
  -d @body.json \
  -H "Content-Type: application/json"> cat body.json{
  "access_token": "<ACCESS_TOKEN>",
  "item_type": "PRODUCT_ITEM",
  "requests": [
    {
      "method": "CREATE",
      "data": {
        "id": "retailer-2",
        "availability": "in stock",
        "brand": "BrandName",
        "google_product_category": "t-shirts",
        "description": "product description",
        "image_link": "http://www.images.example.com/t-shirts/1.png",
        "title": "product name",
        "price": "10.00 USD",
        "shipping": [
          {
            "shipping_country": "US",
            "shipping_region": "CA",
            "shipping_service": "service",
            "shipping_price_value": "10",
            "shipping_price_currency": "USD"
          }
        ],
        "condition": "new",
        "link": "http://www.images.example.com/t-shirts/1.png",
        "item_group_id": "product-group-1",
        "video": [
          {"url": "http://www.jaspersmarket-example1.com/video-file.avi", "tag": ["Optional Tag1", "Optional Tag2"]}, 
          {"url": "http://www.jaspersmarket-example2.com/video-file.avi", "tag": ["Optional Tag1", "Optional Tag2"]}
        ]
      }
    },
    {
      "method": "UPDATE",
      "data": {
        "availability": "out of stock",
        "id": "retailer-3",
        "video": [
          {
            "url": "https://yourvideo.com/demo.mp4?q=1411"
          },
          {
            "url": "https://yourvideo.com/demo.mp4?q=1421"
          }
        ]
      }
    }
  ]}
```

See this example in the [Graph API Explorer](https://developers.facebook.com/tools/explorer).

**Create Ads with Dynamic Media**

When creating ads, there are three types of options that leverage video from the catalog:
*   Carousel/Collection dynamic media (recommended)
*   Show video when available (only available for single video format)
*   Single image opted into dynamic media

**Note:** Selecting the dynamic media type with the API is similar to selecting the **Dynamic Media** options in Ads Manager. With changes starting in September 2025, Advantage+ catalog ads will be opted into using dynamic media by default.

**Dynamic media type ads**

When creating an ad creative object with the `act_<AD_ACCOUNT_ID>/adcreatives` endpoint
Starting September 2025, Advantage+ catalog ads will begin delivering catalog product videos by default. You may set `media_type_automation` to `OPT_out` to turn off catalog product videos from surfacing in ads.

The `media_type_automation` key works with Carousel, Collection, and Single Image formats.

```curl
curl -X POST \
-F 'name=Dynamic Media Ad Creative' \
-F 'object_story_spec={
    ...
  }' \
-F 'degrees_of_freedom_spec={
    "creative_features_spec": {
      "media_type_automation": {
        "enroll_status": "OPT_IN"
      }
    }
  }' \
-F 'product_set_id=<PRODUCT_SET_ID>' \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
```

Likewise, if creating an Advantage+ catalog ad object with the `act_<AD_ACCOUNT_ID>/ads` endpoint, the ad will begin delivering available catalog product videos by default. You may set the `media_type_automation` key to `OPT_out` to turn off catalog product videos from surfacing in ads.

```curl
curl -X POST \
  -F 'adset_id=<ADSET_ID>' \
  -F 'creative={
    "name": "Dynamic Media Adgroup",
    "object_story_spec": {
      ...
    },
    "degrees_of_freedom_spec": {
      "creative_features_spec": {
        "media_type_automation": {
          "enroll_status": "OPT_IN"
        }
      }
    },
    "product_set_id": "<PRODUCT_SET_ID>"
  }' \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/ads
```

**Dynamic media ads (with Collection format)**

Dynamic media only replaces hero media. Product thumbnails in pre-click experience and in Instant Experiences will always be images.

If opted into dynamic media and if the product video is available, we will replace the dynamic video hero media with a product video. Advantage+ catalog ads in Collection format will be opted into dynamic media by default and begin delivering catalog product videos starting September 2025. You may continue to set `media_type_automation` to `OPT_OUT` to turn off catalog product videos from surfacing in ads.

Dynamic media only replaces dynamic video hero media when opted-in. Currently a static hero image and video won’t be replaced by a product video, i.e., The image slideshow experience is replaced with a product video.

**Example Creative Spec for Collection with Dynamic Media**

```curl
curl -X POST \
-F 'name=Dynamic Media Ad Creative' \
-F 'object_story_spec={
      "template_data": {
          ...
          "format_option": "collection_video",
          "link": "https://fb.com/canvas_doc/<CANVAS_ID>",
          "message": "Your Collection Ad",
          ...
    }
  }' \
-F 'degrees_of_freedom_spec={
    "creative_features_spec": {
      "media_type_automation": {
        "enroll_status": "OPT_IN"
      }
    }
  }' \
-F 'product_set_id=<PRODUCT_SET_ID>' \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
```

**Dynamic media ads (Show videos when available)**

In the `object_story_spec`, change `format_option` to `single_video`. This is only available for single image/video format.

```curl
curl -X POST \
  -F 'adset_id=<ADSET_ID>' \
  -F 'creative={
    "name": "Dynamic Media Ad Creative",
    "object_story_spec": {
      "page_id": "<PAGE_ID>",
      "template_data": {
        ...
        "format_option": "single_video",
        ...
      }
    },
    "product_set_id": "<PRODUCT_SET_ID>"
    }' \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/ads
```

**Dynamic media ads (Single image opted into dynamic media)**

In the `object_story_spec`, the `format_option` of `single_image` will show dynamic media when opted into `media_type_automation`.

Starting September 2025, Advantage+ catalog ads using `format_option` of `single_image` will be opted into dynamic media by default and will surface available catalog product videos in ads. You may set `media_type_automation` to `OPT_OUT` to turn off catalog product videos from surfacing in ads.

```curl
curl -X POST \
  -F 'adset_id=<ADSET_ID>' \
  -F 'creative={
 "name": "Dynamic Media Ad Creative",
 "object_story_spec": {
   "page_id": "<PAGE_ID>",
   "template_data": {
     "format_option": "single_image"
   }
 },
 "degrees_of_freedom_spec": {
   "creative_features_spec": {
     "media_type_automation": {
       "enroll_status": "OPT_IN"
     }
   }
 }
},
    "product_set_id": "<PRODUCT_SET_ID>"
    }' \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/ads
```

**Optional: Opt into or out of automatic video cropping**

Use the `video_crop_style` field to control automatic video cropping. The available values are `AUTO` or `NONE`.

To opt out of automatic video cropping, set `video_crop_style` to `NONE`, or remove customizations from the `media_type_automation` settings.

```curl
curl -X POST \
  -F 'adset_id=<ADSET_ID>' \
  -F 'creative={
    "name": "Dynamic Media Ad Creative",
    "object_story_spec": {
      ...
    },
    "degrees_of_freedom_spec": {
      "creative_features_spec": {
        "media_type_automation": {
          "customizations": {
            "video_crop_style": "NONE"
          },
          "enroll_status": "OPT_IN"
        }
      }
    },
  "product_set_id": "<PRODUCT_SET_ID>"
  }' \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/ads
```

Auto-crop only applies to videos that don't meet the placement size requirements, and auto-crop is currently designed to primarily fit the video into the player's viewport.

If there is a video that matches the aspect ratio for the ad placement, that video will be returned. If all the aspect ratios of a given product video are provided, auto-crop will not be applied. Otherwise, the ad will select a video of the item and check the auto-crop setting: `AUTO` returns the auto-cropped video and `NONE` returns the original video.

**Dynamic Media Insights**

Video Engagement metrics from the Ads Manager can also be queried on the API. Use the following chart for comparison.

| Ads Manager metric | Ads Insights API field |
| :--- | :--- |
| Impressions | `impressions` |
| 2-second continuous video plays | `video_continuous_2_sec_watched_actions:video_view` |
| Cost per 2-second continuous video play (BRL) | `cost_per_2_sec_continuous_video_view:video_view` |
| 3-second video plays | `actions:video_view` |
| Cost per 3-second video play (BRL) | `cost_per_action_type:video_view` |
| ThruPlays | `video_thruplay_watched_actions:video_view` |
| Cost per ThruPlay (BRL) | `cost_per_thruplay:video_view` |
| Reach | `reach` |
| Amount spent (BRL) | `spend` |
| Video plays at 25% | `video_p25_watched_actions:video_view` |
| Video plays at 50% | `video_p50_watched_actions:video_view` |
| Video plays at 75% | `video_p75_watched_actions:video_view` |
| Video plays at 95% | `video_p95_watched_actions:video_view` |
| Video plays at 100% | `video_p100_watched_actions:video_view` |
| Video plays | `video_play_actions:video_view` |

**Example Request**

```curl
curl GET \
  -d 'access_token=<ACCESS_TOKEN>' \
  -d 'fields=impressions,video_continuous_2_sec_watched_actions,actions,video_thruplay_watched_actions' \
https://graph.facebook.com/v24.0/<AD_ID>/insights
```

For more information, see the [Insights API documentation](https://developers.facebook.com/docs/marketing-api/insights).

### Managing Multiple Aspect Ratio Images in Advantage+ Catalog Ads

Catalog feed supports uploading multiple images for one product, and there are different options to select which image is going to be displayed to the customer.

**Image selection by tag**

You can use image tags in your feed to select the image you want to display. Some tags are automatically matched based on the placement of the ads.

| Tag | Placement |
| :--- | :--- |
| `INSTAGRAM_PREFERRED` | Used on Instagram (e.g., to display different images between Instagram and Facebook) |
| `STORY_PREFERRED` | Used for Facebook and Instagram Stories (9:16 ratio) |
| `REELS_PREFERRED` | Used for Facebook and Instagram reels (9:16 ratio) |
| `ASPECT_RATIO_4_5_PREFERRED` | Used if the placement is eligible to display 4:5 images |
| `ASPECT_RATIO_9_16_PREFERRED` | Used if the placement is eligible to display 9:16 images |

There are 2 different tags for 9:16 placements because the safe zone for Stories and Reels is different and you may want to upload different 9:16 images for each placement.

You can also use custom tags (for example, to select different images depending on the ad displayed) using the `preferred_image_tags` parameter.

Other legacy image selections, such as by index, are discouraged and will be eventually removed.

**9:16 aspect ratio images**

9:16 aspect ratio images can be displayed full screen to customers on Stories and Reels for carousel and single image ads.

To activate the full screen display, you need to activate the **Adapt to placement** option in the Advantage+ catalog ads optimizations in Ads Manager or use the `adapt_to_placement` field in the `creative_spec` parameter.

When adapt to placement is activated, we try to go through all the images of your product to find a matching one for 9:16 placements. For example, if you have a 1:1 image and 9:16 image, the 9:16 image will be used for 9:16 placements. It is recommended to review the 9:16 images available in your catalog before activating the option.

You can also use tags in your feed to select the image yourself if you have multiple 9:16 images. The tagged image must be 9:16 aspect-ratio to be selected (otherwise we'll fallback to the first available 9:16 image, if any).

Once activated, adapt to placement also provides an option to deactivate the showcase card in Instagram Stories, which displays a thumbnail of 4 products in one card, in order to display the first selected product full screen instead.

**Note:** On Stories, the title and caption of the product are currently not displayed if the image is displayed full screen.

**Fallback**

If you activate the adapt to placement option and none of the products to be displayed in the carousel have 9:16 images, we will use the default display. If at least one of the products has a 9:16 image, we will fill the rest of the image with the image background color.

**`preferred_image_tags` multi-ratio support**

You can combine the selection of different images for different ads with multi-ratio support. Instead of providing a simple tag, you can replace the tag with serialized (and escaped) JSON that may provide different tags for different aspect ratios.

The deserialized JSON should be this format (each ratio is optional):

```json
{
 "DEFAULT":"my-tag",
 "4_5":"my-tag-4-5",
 "9_16":"my-tag-9-16"}
```

**Example**

`preferred_image_tags: ["{\"DEFAULT\":\"my_default_tag_1\",\"9_16\":\"my_9_16_tag_1\"}","{\"DEFAULT\":\"my_default_tag_2\",\"9_16\":\"my_9_16_tag_2\"}"]`

In this case, an image with tag `my_9_16_tag_1` or `my_9_16_tag_2` will be used for 9:16 placements and an image with `my_default_tag_1` or `my_default_tag_2` will be used otherwise.

# Get Started with Advantage+ Creative

This guide covers creating ads and ad creatives with opted-in Advantage+ Creative features.

Previously, Advantage+ Creative was only supported through standard enhancements, a bundle of Advantage+ Creative features. Starting with Marketing API v22.0 and applying to all subsequent versions, the opt-in and preview functionality for standard enhancements will be deprecated. Instead, you can opt-in to or preview individual Advantage+ Creative features by following the guidelines outlined in this document.

Note that the support for automatic removal of ineligible features and preview are gradually rolling out to all API versions, and will be available to all developers by February 2025.

## Before You Begin

Set up your ad campaigns using the following instructions:
*   [Create an ad campaign](#create-an-ad-campaign)
*   [Create an ad set](#create-an-ad-set)

## Step 1: Create an ad or ad creative opted-in to Advantage+ Creative features

You can create an ad through the `/ads` endpoint or create a standalone creative through the `/adcreatives` endpoint. In either approach, specify the individual features to opt-in within the `creative_features_spec`.

**Example**

To opt-in features `image_touchups`, `inline_comment`, and `image_templates`:

```curl
// creative example
curl -X POST \
  -F 'name=Advantage+ Creative Creative' \
  -F 'degrees_of_freedom_spec={
    "creative_features_spec": {
      "image_touchups": {
        "enroll_status": "OPT_IN"
      },
     "inline_comment": {
        "enroll_status": "OPT_IN"
      },
     "image_template": {
        "enroll_status": "OPT_IN"
      }
    }
  }' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
  
// ad example
curl -X POST \
  -F 'adset_id=<ADSET_ID>' \
  -F 'creative={
    "name": "Advantage+ Creative Adgroup",
    "object_story_spec": {
      "link_data": {
         "image_hash": "<IMAGE_HASH>", 
         "link": "<URL>", 
         "message": "You got this.",
      },
      "page_id": "<PAGE_ID>"
    },
    "degrees_of_freedom_spec": {
      "creative_features_spec": {
        "image_touchups": {
          "enroll_status": "OPT_IN"
        },
       "inline_comment": {
          "enroll_status": "OPT_IN"
        },
       "image_template": {
          "enroll_status": "OPT_IN"
        }
      }
    }
  }' \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/ads
```

**Features**

The Advantage+ Creative features that can be opted-in within the `creative_features_spec` parameter.

| Name | Description |
| :--- | :--- |
| `text_translation` | Optional. Opt-in if you want your ad to be translated to different languages on Facebook and Instagram. The `enroll_status` field can be set to `OPT_IN` or `OPT_OUT`. **Note:** This feature is labeled **Translate Text** in Ads Manager. |
| `inline_comment` | Optional. Opt-in if you want the most relevant comment to be displayed below your ad on Facebook and Instagram. The `enroll_status` field can be set to `OPT_IN` or `OPT_OUT`. **Note:** This feature is labeled **Relevant comments** in Ads Manager. |
| `image_templates` | Optional. Opt-in if you want overlays added that show text you have provided along with your selected ad creative when it is likely to improve performance. This feature is generated with AI. The `enroll_status` field can be set to `OPT_IN` or `OPT_OUT`. **Note:** This feature is labeled **Add overlays** in Ads Manager. |
| `image_touchups` | Optional. Opt-in if you want your chosen media to be automatically cropped and expanded to fit more placements. Only applicable to image ads. The `enroll_status` field can be set to `OPT_IN` or `OPT_OUT`. **Note:** This feature is labeled **Visual-touch ups** in Ads Manager. |
| `video_auto_crop` | Optional. Opt-in if you want your chosen media to be automatically cropped and expanded to fit more placements. Only applicable to video ads. The `enroll_status` field can be set to `OPT_IN` or `OPT_OUT`. **Note:** This feature is labeled **Visual-touch ups** in Ads Manager. |
| `image_brightness_and_contrast` | Optional. Opt-in if you want the brightness and contrast of your image to be adjusted when likely to improve performance. The `enroll_status` field can be set to `OPT_IN` or `OPT_OUT`. **Note:** This feature is labeled **Adjust brightness and contrast** in Ads Manager. |
| `enhance_cta` | Optional. Opt-in if you want keyphrases from your ad sources to be paired with your CTA. The `enroll_status` field can be set to `OPT_IN` or `OPT_OUT`. The `customizations` field can be set to below to use potential high-performing phrases identified by AI: |
| | `{` |
| | `    "text_extraction": {` |
| | `        "enroll_status": "OPT_IN"` |
| | `}` |
| | **Note:** This feature is labeled **Enhance CTA** in Ads Manager. |
| `text_optimizations` | Optional. Opt-in if you want text options you provide appear as primary text, headline or description when it’s likely to improve performance. We may add a caption introduction from your headline options and highlight key sentences when it’s likely to improve performance. The `enroll_status` field can be set to `OPT_IN` or `OPT_OUT`. The `customizations` field can be set to below to use potential high-performing phrases identified by AI: |
| | `{` |
| | `    "text_extraction": {` |
| | `        "enroll_status": "OPT_IN"` |
| | `}` |
| | **Note:** This feature is labeled **Text improvements** in Ads Manager. |
| `image_background_gen` | Optional. Opt-in if you want different backgrounds for eligible product images to be created and the version that your audience is most likely to respond to delivered. This feature is generated with AI. The `enroll_status` field can be set to `OPT_IN` or `OPT_OUT`. **Note:** This feature is labeled **Generate backgrounds** in Ads Manager. |
| `image_uncrop` | Optional. Opt-in if you want your image to be automatically expanded to fit more placements. This feature is generated with AI. The `enroll_status` field can be set to `OPT_IN` or `OPT_OUT`. **Note:** This feature is labeled **Expand image** in Ads Manager. |
| `adapt_to_placement` | Optional. Opt-in if you want 9:16 images in your catalog to be displayed in supported placements (Instagram Stories/Instagram Reels/Facebook Stories/Facebook Reels). The `enroll_status` field can be set to `OPT_IN` or `OPT_OUT`. **Note:** This feature is labeled **Adapt to placement** in Ads Manager. |
| `media_type_automation` | Optional. Opt-in if you want videos from your catalog to be displayed (along with images) in supported placements. The `enroll_status` field can be set to `OPT_IN` or `OPT_OUT`. **Note:** This feature is labeled **Dynamic media** in Ads Manager. See [Dynamic Media](#dynamic-media) for more information. |
| `product_extensions` | Optional. Opt-in if you want items from your catalog to be shown next to your selected media when it’s likely to improve performance. The `enroll_status` field can be set to `OPT_IN` or `OPT_OUT`. **Note:** This feature is labeled **Add catalog items** in Ads Manager. See [Product Extensions (Add Catalog Items) Features on Marketing API](#product-extensions-for-advantage-creative) for more details. |
| `description_automation` | Optional. For Advantage+ catalog ads, opt-in if you want item information from your catalog to be used for your ad's description based on what each person who views your ad is likely to engage with. For static carousel ads, opt-in if you want your carousel description to be dynamically chosen when to show. The `enroll_status` field can be set to `OPT_IN` or `OPT_OUT`. For Advantage+ catalog ads, the `customizations` field can be set as below to use AI to identify product names and selling points from your catalog. We will show them in your ad footer's headline and description when we predict it will make your ad more engaging. |
| | `{` |
| | `  "text_extraction": {` |
| | `    "enroll_status": "OPT_IN"` |
| | `  }` |
| | `}` |
| `add_text_overlay` | Optional. This feature is labeled ‘Add Dynamic Overlays’ in Ads Manager.Opt-in if you want to add information from catalog items as visually-unique overlays The `enroll_status` field can be set to `OPT_IN` or `OPT_OUT`. If you want to have manual control on how the overlay is rendered, see the [Ad Creative Link Data Image Layer Spec reference documentation](https://developers.facebook.com/docs/marketing-api/reference/ad-creative-link-data-image-layer-spec) for more details. |
| `creative_stickers` | Optional. Opt-in if you want to add AI-generated stickers to help tell your story better and make your call-to-actions easier to understand. We'll automatically place CTA stickers based on where they're likely to perform best. The `enroll_status` field can be set to `OPT_IN` or `OPT_OUT`. **Note:** This feature is labeled **Create sticker CTA** in Ads Manager. |
| `reveal_details_over_time` | Optional. Opt-in if you want information from your website or app store product page to be revealed when people spend a few seconds looking at your ad. This can help people feel more confident before they click your call-to-action. The `enroll_status` field can be set to `OPT_IN` or `OPT_OUT`. **Note:** This feature is labeled **Reveal details over time** in Ads Manager. |
| `pac_relaxation` | Optional. Opt-in if you want to show media you chose for a specific aspect ratio across all placements when it's likely to improve performance. The `enroll_status` field can be set to `OPT_IN` or `OPT_OUT`. **Note:** This feature is labeled **Flex media** or **Flexible media** in Ads Manager. |

Features specified as `OPT_IN` but ineligible for the given ad setup will be automatically removed from `creative_features_spec`. For example, '`image_templates`' (or Add Overlays) is not eligible to be applied to video format creatives — if you opt in to this feature on a video ad, it is ineligible and thus will be automatically removed. To confirm the final outcome, you can send a `GET` request to retrieve the `creative_features_spec` field.

Do not worry if you see `standard_enhancements` and some standard enhancements sub-features appended to `creative_features_spec` when you retrieve it. As long as these sub-features are not set to `OPT_IN`, they will not be applied. We are in the process of deprecating standard enhancements and this behavior will be phased out once the deprecation is complete.

Most Advantage+ Creative features can be opted-in through `creative_features_spec`, with the exception of the **music** feature, which is opted-in through `asset_feed_spec`.

**Example**

```curl
curl -X POST \
  -F 'name="Advantage+ Creative Music"' \
  -F 'object_story_spec={
       "page_id": "<PAGE_ID>"
     }' \
  -F 'asset_feed_spec={
       "audios": [
         {
           "type": "random"
         }
       ]
     }' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
```

If the features opted-in include features generated with AI, it's necessary to create the ad with a `PAUSED` status, then follow [Step 2](#step-2-preview-for-advantage-creative) and [Step 3](#step-3-set-the-ad-status-to-active) below to complete the publishing process. When creating an ad through the `/ads` endpoint, the `status` field on the ad is set to `PAUSED` by default. On the other hand, if no AI-generated features are included, Step 2 and Step 3 are optional and you can directly create the ad with an `ACTIVE` status.

## Step 2: Preview for Advantage+ Creative

See the [Ad Previews reference](https://developers.facebook.com/docs/marketing-api/ad-preview) for more information on the existing functionality of previews.

To preview an Advantage+ Creative feature, add the `creative_feature` parameter to your existing preview request and specify the desired feature name.

Features that support preview include `image_templates`, `image_touchups`, `video_auto_crop`, `enhance_cta`, `text_optimizations`, `image_background_gen`, `image_uncrop`, `description_automation`, `creative_stickers`, and `text_translation`.

**Example request**

```curl
curl -X GET -G \
  -d 'ad_format="DESKTOP_FEED_STANDARD"' \
  -d 'creative_feature=<FEATURE_NAME> \
  -d 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/<AD_ID>/previews
```

**Example response**

```json
{
  "data": [
    {
      "body": "<iframe src='<PREVIEW_URL>'></iframe>",
      "transformation_spec": {
        "<FEATURE_NAME>": [
          {
            "body": "<iframe src='<PREVIEW_URL>'></iframe>",
            "status": "eligible"
          }
        ]
      }
    }
  ]
}
```

Click on the link to see the previews.

**Note:** If a `transformation_spec` node is not shown, that means the creative is not eligible for the Advantage+ Creative feature on the given placement, and therefore the feature will not be applied.

Once the previews have been reviewed and appear acceptable to publish, move on to [Step 3](#step-3-set-the-ad-status-to-active) to set the ad to `ACTIVE` if it is not already. If any of the previews are not acceptable, create a new ad or creative without opt-in to the corresponding features.

## Step 3: Set the ad status to ACTIVE

After you have verified the previews, you can set the `status` of the ad to `ACTIVE`.

**Example**

```curl
curl -X POST \
  -F 'status=ACTIVE' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/<AD_ID>
```

## Learn More

Some Advantage+ Creative features have already been covered in other Marketing API docs:
*   `adapt_to_placement` and `media_type_automation`: [Advantage+ Creative for Catalog](https://developers.facebook.com/docs/marketing-api/guides/advantage-creative/advantage-catalog-ads)
*   `product_extensions`: [Product Extensions (Add Catalog Items) Features on Marketing API](#product-extensions-for-advantage-creative)
*   `image_background_gen` and `image_uncrop`: [Get Started with the Generative AI Features on Marketing API](#get-started-with-the-generative-ai-features-on-marketing-api)

Advantage+ Creative was previously available as standard enhancements on Marketing API:
*   [Standard Enhancements for Advantage+ Creative](#standard-enhancements-for-advantage-creative)
*   [Advantage+ Creative Preview API](#standard-enhancements-preview)
*   [Others](https://developers.facebook.com/docs/marketing-api/guides/advantage-creative)

# Add Site Links Feature

The Add site links feature in Ads Manager is an Advantage+ Creative optimization that showcases additional URLs below your static or dynamic single media (only on Facebook feed) when it's likely to improve performance. This guide covers using the Add site links feature using the Marketing API.

## Eligibility Criteria

To be eligible to use this feature, your ad campaign must have:
*   Either Traffic, Engagement, Leads or Sales as your ad objective.
*   Website as your conversion location.
*   Single image or video ad format.

## Before You Begin

Set up your ad campaigns using the following instructions:
*   [Create an ad campaign](#create-an-ad-campaign)
*   [Create an ad set](#create-an-ad-set)

## Create an Ad Creative and Ad

**Standalone Creative Creation**

**Before**

```curl
curl -X POST \
  -F 'name=Creative With Site Links' \
  -F 'object_story_spec={
      "link_data": {
         "link": "<URL>",
      },
      "page_id": "<PAGE_ID>",
      "instagram_actor_id": "<INSTAGRAM_ACTOR_ID>",
  }' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
```

**After**

New fields are highlighted in **bold**.

```curl
curl -X POST \
  -F 'name=Creative With Site Links' \
  -F 'object_story_spec={
    "link_data": {
      "link": "<URL>",
    },
    "page_id": "<PAGE_ID>",
    "instagram_actor_id": "<INSTAGRAM_ACTOR_ID>",
    }' \
  -F 'creative_sourcing_spec={
    "site_links_spec": [{
      "site_link_title": "<SITE_LINK_TITLE>",
      "site_link_url" : "<SITE_LINK_URL>",
    },
    {
      "site_link_title": "<SITE_LINK_TITLE>",
      "site_link_url" : "<SITE_LINK_URL>",
    },
    {
      "site_link_title": "<SITE_LINK_TITLE>",
      "site_link_url" : "<SITE_LINK_URL>",
    },
    {
      "site_link_title": "<SITE_LINK_TITLE>",
      "site_link_url" : "<SITE_LINK_URL>",
    }],
  }' \
  -F 'degrees_of_freedom_spec={
    "creative_features_spec": {
      "site_extensions": {
        "enroll_status": "OPT_IN",
      },
    },
  }' \ 
  -F 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
```

**Ad Creation**

**Before**

```curl
  -F 'creative={
    "object_story_spec": {
      "page_id": "<PAGE_ID>",
      "link_data": {
        "link": "<WEBSITE_URL>",
      }
    },
  }' \
  -F "adset_id=<ADSET_ID>" \
  -F "name=New Ad" \
  -F "status=PAUSED" \
  -F "access_token=<ACCESS_TOKEN>" \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/ads
```

**After**

New fields are highlighted in **bold**.

```curl
curl -X POST \
  -F 'creative={
    "object_story_spec": {
      "page_id": "<PAGE_ID>",
      "link_data": {
        "link": "<WEBSITE_URL>",
      }
    },
    "creative_sourcing_spec": {
      "site_links_spec": [{
        "site_link_title": "<SITE_LINK_TITLE>",
        "site_link_url" : "<SITE_LINK_URL>",
      },
      {
        "site_link_title": "<SITE_LINK_TITLE>",
        "site_link_url" : "<SITE_LINK_URL>",
      },
      {
        "site_link_title": "<SITE_LINK_TITLE>",
        "site_link_url" : "<SITE_LINK_URL>",
      },
      {
        "site_link_title": "<SITE_LINK_TITLE>",
        "site_link_url" : "<SITE_LINK_URL>",
      }],
    },
    "degrees_of_freedom_spec": {
      "creative_features_spec": {
        "site_extensions": {
          "enroll_status": "OPT_IN",
        }
      }
    }
  }' \
  -F "adset_id=<ADSET_ID>" \
  -F "name=New Ad" \
  -F "status=PAUSED" \
  -F "access_token=<ACCESS_TOKEN>" \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/ads
```

| Name | Description |
| :--- | :--- |
| `site_link_title` | Specifies the display label of the site link. It can be added in `site_links_spec`, see [Ad Creative Site Links Spec, Reference](https://developers.facebook.com/docs/marketing-api/reference/ad-creative-site-links-spec). |
| `site_link_url` | Specifies the url of the site link. It can be added in `site_links_spec`, see [Ad Creative Site Links Spec, Reference](https://developers.facebook.com/docs/marketing-api/reference/ad-creative-site-links-spec). |
| `site_link_image_hash` | Specifies the image of the site link. Use either `site_link_image_hash` or `site_link_image_url`. When both exist, `site_link_image_url` will be prioritized. It can be added in `site_links_spec`, see [Ad Creative Site Links Spec, Reference](https://developers.facebook.com/docs/marketing-api/reference/ad-creative-site-links-spec). |
| `site_link_image_url` | Specifies the image of the site link. Use either `site_link_image_hash` or `site_link_image_url`. When both exist, `site_link_image_url` will be prioritized. It can be added in `site_links_spec`, see [Ad Creative Site Links Spec, Reference](https://developers.facebook.com/docs/marketing-api/reference/ad-creative-site-links-spec). |
| `site_extensions` | “Add site links”, an Advantage+ Creative optimization that showcases additional URLs below your static single media or dynamic single media when it's likely to improve performance. Set the `enroll_status` field with `OPT_IN` to enable it. It can be added in `creative_features_spec`. For more details, see [Ad Creative Features Details, Reference](https://developers.facebook.com/docs/marketing-api/reference/ad-creative-features-details). |

## Learn More

**Business Help Center**

*   [Create ads with site links in Meta Ads Manager](https://www.facebook.com/business/help/645167520630806)

**Marketing API Reference**

*   [Ad Creative](https://developers.facebook.com/docs/marketing-api/reference/ad-creative)
*   [Ad Creative Sourcing Spec](https://developers.facebook.com/docs/marketing-api/reference/ad-creative-sourcing-spec)
*   [Ad Creative Site Links Spec](https://developers.facebook.com/docs/marketing-api/reference/ad-creative-site-links-spec)

# Product Extensions for Advantage+ Creative

Product extensions (the "Add catalog items" feature in Meta Ads Manager) is an Advantage+ creative optimization that showcases products from your catalog below your static single media when it's likely to improve performance. This document shows you how to use product extensions features for ads.

## API Support for Product Extensions

Product extension creative creation is supported in all versions of the Marketing API, but beginning with v20.0, all ad creation requests that are eligible for product extensions must specify if the ad opts in to use it or not. The `enroll_status` field must be provided with either an `OPT_IN` or `OPT_OUT` value.

## Eligibility Criteria

*   Campaign with `SALES` or `TRAFFIC` objective
*   Single image or video ad format
*   A catalog

## Before You Begin

Follow the steps below to set up your ad campaigns.
*   [Create a campaign](#create-an-ad-campaign)
*   [Create an ad set](#create-an-ad-set)

**Standalone Creative Creation**

**Before**

```curl
curl -X POST \
  -F 'name=Product Extension Creative' \
  -F 'object_story_spec={
      "link_data": {
         "link": "<URL>",
      },
      "page_id": "<PAGE_ID>",
      "instagram_actor_id": "<INSTAGRAM_ACTOR_ID>",
  }' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
```

**After**

(new fields are highlighted in **bold**)

```curl
curl -X POST \
  -F 'name=Product Extension Creative' \
  -F 'object_story_spec={
      "link_data": {
         "link": "<URL>",
      },
      "page_id": "<PAGE_ID>",
      "instagram_actor_id": "<INSTAGRAM_ACTOR_ID>",
  }' \
  -F 'creative_sourcing_spec={
    "associated_product_set_id": "<PRODUCT_SET_ID>",
  }' \
  -F 'degrees_of_freedom_spec={
    "creative_features_spec": {
      "product_extensions": {
        "enroll_status": "OPT_IN",
        "action_metadata": {
           "type": "MANUAL",
        },
      },
    },
  }' \ 
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
```

**Ad Creation**

**Before**

```curl
curl -X POST \
  -F 'creative={
    "object_story_spec": {
      "page_id": "<PAGE_ID>",
      "link_data": {
        "link": "<WEBSITE_URL>",
      }
    },
  }' \
  -F "adset_id=<ADSET_ID>" \
  -F "name=New Ad" \
  -F "status=PAUSED" \
  -F "access_token=<ACCESS_TOKEN>" \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/ads
```

**After**

(new fields are in **bold**)

```curl
curl -X POST \
  -F 'creative={
    "object_story_spec": {
      "page_id": "<PAGE_ID>",
      "link_data": {
        "link": "<WEBSITE_URL>",
      }
    },
    "creative_sourcing_spec": {
      "associated_product_set_id": "<PRODUCT_SET_ID>",
    },
    "degrees_of_freedom_spec": {
      "creative_features_spec": {
        "product_extensions": {
          "enroll_status": "OPT_IN",
          "action_metadata": {
            "type": "MANUAL"
          },
        }
      }
    }
  }' \
  -F "adset_id=<ADSET_ID>" \
  -F "name=New Ad" \
  -F "status=PAUSED" \
  -F "access_token=<ACCESS_TOKEN>" \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/ads
```

| Name | Description |
| :--- | :--- |
| `product_extensions` | Product extensions is an Advantage+ creative optimization that showcases products from your catalog below your static single media when it's likely to improve performance. Please set the `enroll_status` field with `OPT_IN` to enable it. It can be added in `creative_features_spec`. For more details, see the [Ad Creative Features Details reference documentation](https://developers.facebook.com/docs/marketing-api/reference/ad-creative-features-details). |
| `associated_product_set_id` | Specifies the product set ID for product extensions in Advantage+ creative optimization. This product set will be shown below your single media. It can be added in the `creative_sourcing_spec`. See the [Ad Creative Sourcing Spec reference documentation](https://developers.facebook.com/docs/marketing-api/reference/ad-creative-sourcing-spec) for more details. |

# Standard Enhancements for Advantage+ Creative

Starting with Marketing API v22.0, opting in or out of standard enhancements will no longer be available. Instead, you can opt in or out of individual Advantage+ Creative features by following the instructions in [Get Started with Advantage+ Creative](#get-started-with-advantage-creative). Opting in or out of sub-features within the standard enhancements bundle will have the same effect as previously opting in or out of standard enhancements.

The sub-features within the standard enhancement bundle for single image ads include `image_template`, `image_touchups`, `text_optimizations`, and `inline_comment`. For single video ads, the sub-features are `video_auto_crop`, `text_optimizations`, and `inline_comment`.

Standard enhancements is for ads using a single image, video, or carousel. It automatically creates multiple variations of your ad and shows a personalized variation to each Account Center account based on what they're most likely to respond to. You can create ads with standard enhancements using the `TRAFFIC` or `CONVERSIONS` objectives to help drive performance and deliver more tailored ads to each Account Center account. For more information, please see [About Advantage+ creative](https://www.facebook.com/business/help/1098651080332840).

## API Support for Standard Enhancements

**Standalone Creative Creation**

**Before:**

```curl
curl -X POST \
  -F 'name="My creative title"' \
  -F 'object_story_spec={
       "page_id": "<PAGE_ID>",
       "instagram_user_id": "<IG_USER_ID>",
       "link_data": {
             "link": "www.google.com",
      }
     }' \
  -F "access_token=<ACCESS_TOKEN>" \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
```

**After** (new fields are in **bold**):

```curl
curl -X POST \
  -F 'name="My creative title"' \
  -F 'object_story_spec={
       "page_id": "<PAGE_ID>",
       "instagram_user_id": "<IG_USER_ID>",
       "link_data": {
             "link": "www.google.com",
      }
     }' \
  -F 'degrees_of_freedom_spec={
      "creative_features_spec": {
        "standard_enhancements": {
          "enroll_status": "OPT_IN"
        }
      }
    }' \ 
  -F "access_token=<ACCESS_TOKEN>" \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
```

**Ad Creation**

**Before:**

```curl
curl -X POST \
  -F 'creative={
    "object_story_spec": {
      "page_id": "<PAGE_ID>",
      "link_data": {
        "link": "<WEBSITE_URL>",
      }
    },
  }' \
  -F "adset_id=<ADSET_ID>" \
  -F "name=New Ad" \
  -F "status=PAUSED" \
  -F "access_token=<ACCESS_TOKEN>" \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/ads
```

**After** (new fields are in **bold**):

```curl
curl -X POST \
  -F 'creative={
    "object_story_spec": {
      "page_id": "<PAGE_ID>",
      "link_data": {
        "link": "<WEBSITE_URL>",
      }
    },
    "degrees_of_freedom_spec": {
      "creative_features_spec": {
        "standard_enhancements": {
          "enroll_status": "OPT_IN"
        }
      }
    }
  }' \
  -F "adset_id=<ADSET_ID>" \
  -F "name=New Ad" \
  -F "status=PAUSED" \
  -F "access_token=<ACCESS_TOKEN>" \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/ads
```

For more details, see [Ad Creative](https://developers.facebook.com/docs/marketing-api/reference/ad-creative).

| Parameters | |
| :--- | :--- |
| `degrees_of_freedom_spec` | Specifies the types of transformations that are enabled for the given creative. For more information, see [Ad Creative Degrees Of Freedom Spec, Reference](https://developers.facebook.com/docs/marketing-api/reference/ad-creative-degrees-of-freedom-spec). |
| | The following features can be opted in the `creative_features_spec`: |
| `standard_enhancements` | Basic set of enhancements to optimize your ad creative and improve performance. This can include: |
| | * Automatically adjusting the aspect ratio of your image or video |
| | * Applying a template to your image to help it better fit certain ad placements |
| | * Displaying relevant Meta comments below your ad. |
| | The `enroll_status` field can be set to `OPT_IN` or `OPT_OUT`. For more details, see [Ad Creative Features Details, Reference](https://developers.facebook.com/docs/marketing-api/reference/ad-creative-features-details). |

# Standard Enhancements Preview

Starting with Marketing API v22.0, previews for standard enhancements will no longer be available. Instead, you can get the previews of individual Advantage+ Creative features by following the instructions in [Get Started with Advantage+ Creative](#get-started-with-advantage-creative).

The sub-features within the standard enhancement bundle for single image ads include `image_template`, `image_touchups`, `text_optimizations`, and `inline_comment`. For single video ads, the sub-features are `video_auto_crop`, `text_optimizations`, and `inline_comment`.

The Advantage+ Creative Preview API supports generating previews for ads both before and after publishing the ad.

*   Provide the creative ID or ad ID to see previews of published ads
*   Provide the creative spec to see previews of unpublished ads

## Existing Functionality

See the [Ad Preview documentation](https://developers.facebook.com/docs/marketing-api/ad-preview) for more information on the existing functionality.

**Provide the creative or ad ID and placement**

```curl
curl -X GET \
  -d 'ad_format="DESKTOP_FEED_STANDARD"' \
  -d 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/<CREATIVE_ID>/previews
```

**Receive the iframe response.**

```json
{
  "data": [
    {
      "body": "<PREVIEW_LINK>",
    }
  ]}
```

Click on the link to see the previews.

## Updated Functionality

**Provide the creative or ad ID and placement with new parameters.**

```curl
curl -X GET \
  -d 'ad_format="DESKTOP_FEED_STANDARD"' \
  -d 'access_token=<ACCESS_TOKEN>' \
  -d 'creative_feature=standard_enhancements' \
  https://graph.facebook.com/v24.0/<CREATIVE_ID>/previews
```

**Receive the iframe response.**

```json
{
  "data": [
    {
      "body": "<preview link>",
      "transformation_spec": {
        "standard_enhancements": [
          {
            "body": "<preview link>",
            "optimization_type_description": "Vary image aspect ratio",
            "status": "eligible"
          },
          {
            "body": "<preview link>",
            "optimization_type_description": "Image templates for Feed",
            "status": "eligible"
          }
        ]
      }
    }
  ]}
```

Click on the link to see the previews.

| Parameters | |
| :--- | :--- |
| **`creative_feature`** | Creative feature to apply to preview. **Possible values:** `standard_enhancements` |

**Limitations**

*   Advantage+ Creative previews are currently only supported on the `MOBILE_FEED_STANDARD`, `INSTAGRAM_STANDARD`, `INSTAGRAM_REELS` and `INSTAGRAM_STORY` placements.

*   Image ad previews on `MOBILE_FEED_STANDARD` may appear cropped, even without manual crops, because the placement supports a limited range of aspect ratios. See [Aspect ratios supported by placements in Meta Ads Manager](https://www.facebook.com/business/help/1288599478479574) for more information about aspect ratio support for each placement.

*   The following transformations in Standard Enhancements do not have preview support:
    *   Inline Comment
    *   Text Liquidity

# Get Started with the Generative AI Features on Marketing API

## API support for Generative AI features

Advertisers are responsible for previewing ad creative featuring AI-generated creatives before publishing their ads. See [preview configuration instructions](#step-2-preview-for-text-generation).

Meta does not make any warranties regarding the completeness, reliability, and accuracy of the suggested text generations, generated backgrounds, or expanded images. If you use Marketing API to access our Generative AI features outlined below, the [Ad Creative Generative AI Terms](https://www.facebook.com/legal/commerce_product_seller_terms/ad_creative_generative_ai_terms) apply in addition to the Meta [Platform Terms](https://www.facebook.com/legal/commerce_product_seller_terms/general_terms) and [Developer Policies](https://developers.facebook.com/policy/details/).

This document shows you how to use text generation, image expansion, and background generation generative AI features for ads.

## Before You Begin

You need to follow these steps to set up your ad campaigns with Meta generative AI features.
*   [Create a Campaign](#create-an-ad-campaign)
*   [Create an Ad Set](#create-an-ad-set)
*   [Create the Ad or a standalone Creative](#step-1-create-an-ad-or-creative-opted-in-to-text-generation)
*   [Preview the Creative](#step-2-preview-for-text-generation)
*   [Enable the Ad](#step-3-set-the-adgroup-status-to-active)

## Text Generation

Text variations are generated with AI inspired by your original primary text, your previous ads, or content from your business Page to help make suggestions more relevant. Adding more text options to your ad can help customize your creative and reduce creative fatigue which can help increase performance. Learn more about this feature [here](https://www.facebook.com/business/help/380695076296338).

**Step 1: Opt-in to use Text Generation when creating the ad**

You can create an ad through the `/ads` endpoint or create a standalone creative through the `/adcreatives` endpoint. Opt-in to the feature only applies to the ad or creative created in the current request. In either approach, opt-in to use the **Text Generation** feature by:
*   Providing a primary text in the `message` field in the `object_story_spec`
*   Opting in to use `text_generation`

See example requests below:

**Opt-in through `/adcreatives` endpoint**

```curl
curl -X POST \
  -F 'name=Text Gen Creative' \
  -F 'object_story_spec={
      "link_data": {
         "image_hash": "<IMAGE_HASH>", 
         "link": "<URL>", 
         "message": "<PRIMARY_TEXT_HERE>",  <--- Primary Text Here
      },
      "page_id": "<PAGE_ID>"
  }' \
  -F 'degrees_of_freedom_spec={
    "creative_features_spec": {
      "text_generation": {
        "enroll_status": "OPT_IN"
      }
    }
  }' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
```

Or you can create an ad object with the `act_<AD_ACCOUNT_ID>/ads` endpoint:

**Opt-in through `/ads` endpoint**

```curl
curl \
  -F 'adset_id=<ADSET_ID>' \
  -F 'creative={
    "name": "Text Gen Adgroup",
    "object_story_spec": {
      "link_data": {
         "image_hash": "<IMAGE_HASH>", 
         "link": "<URL>", 
         "message": "<PRIMARY_TEXT_HERE>",  <--- Primary Text Here
      },
      "page_id": "<PAGE_ID>"
    },
    "degrees_of_freedom_spec": {
      "creative_features_spec": {
        "text_generation": {
          "enroll_status": "OPT_IN"
        }
      }
    }
  }' \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/ads
```

**Step 2: Preview for Text Generation**

When an ad is created with opt-in to use `text_generation`, the feature will only be applied to the current ad, and generated primary texts will be inserted to the creative spec. If the feature was opted-in through the `/ads` endpoint, the `status` field on the adgroup will be set to `PAUSED` by default (see [documentation](https://developers.facebook.com/docs/marketing-api/guides/ads)). You can review the generated suggestions before manually setting the ad’s status to `ACTIVE` so it can be delivered.

The creative spec containing generated suggestions can be previewed by reading the `asset_feed_spec` through the creative ID or the ad ID. See example request and response below:

Start by querying `asset_feed_spec` of your standalone ad creative created in step 1.

*   **Request**

    ```curl
    // request from creative
    curl -X GET -G \
      -d 'fields=asset_feed_spec' \
      -d 'access_token=<ACCESS_TOKEN>' \
      https://graph.facebook.com/v24.0/<CREATIVE_ID>
      // request from ad
    curl -X GET -G \
      -d 'fields=creative{asset_feed_spec,status}' \
      -d 'access_token=<ACCESS_TOKEN>' \
      https://graph.facebook.com/v24.0/<AD_ID>
    ```

*   **Response**

    ```json
    {
  "asset_feed_spec": {
    "bodies": [
      {
        "text": "Buy some cool LED TV at cheap price"
      },
      {
        "text": "Get your dream LED TV at an unbeatable price! Buy now and save big!"
      },
      {
        "text": "Get the best LED TV deals! 📺 Save money and upgrade your entertainment."
      },
      {
        "text": "Get an LED TV at a low cost! Cheap, high-quality options are available."
      },
      {
        "text": "Get LED TVs at affordable prices  ✨  !"
      }
    ],
    "optimization_type": "DEGREES_OF_FREEDOM"
  },
  "id": "<CREATIVE_ID>"}
    ```

Once the suggestions have been reviewed and appear acceptable to publish, please move on to [Step 3](#step-3-set-the-adgroup-status-to-active) to set the ad to `ACTIVE`. If any of the generated suggestions are not acceptable, please create a new ad or creative without opt-in to Text Generation:

**Create creative without opt-in to Text Generation**

```curl
curl -X POST \
  -F 'name=Text Gen Creative' \
  -F 'object_story_spec={
      "link_data": {
         "image_hash": "<IMAGE_HASH>", 
         "link": "<URL>", 
         "message": "<PRIMARY_TEXT_HERE>",
      },
      "page_id": "<PAGE_ID>"
  }' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
```

**Step 3: Set the adgroup status to ACTIVE**

After you have verified the generated text suggestions, you can set the `status` of the ad to `ACTIVE`. This step needs to be done in both cases:
*   When an ad opts in to the feature through the `/ads` endpoint
*   If the ad is the first ad to use an existing creative with opt-in to text generation.

*   **Request**

    ```curl
    curl \
      -F 'status=ACTIVE' \
      -F 'access_token=<ACCESS_TOKEN>' \
      https://graph.facebook.com/v24.0/<AD_ID>
    ```

## Image Expansion

Automatically expand your image to fit more placements.

**Step 1: Create an ad or creative opted-in to image expansion**

You can create an ad through the `/ads` endpoint or create a standalone creative through the `/adcreatives` endpoint. In either approach, opt-in to use the **Image Expansion** feature in the creative spec (see examples below).

*   **Request**

    ```curl
    // creative example
    curl -X POST \
      -F 'name=Image Expansion Creative' \
      -F 'degrees_of_freedom_spec={
        "creative_features_spec": {
          "image_uncrop": {
            "enroll_status": "OPT_IN"
          }
        }
      }' \
      -F 'access_token=<ACCESS_TOKEN>' \
      https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
      // ad example
    curl \
      -F 'adset_id=<ADSET_ID>' \
      -F 'creative={
        "name": "Image Expansion Adgroup",
        "object_story_spec": {
          "link_data": {
             "image_hash": "<IMAGE_HASH>", 
             "link": "<URL>", 
             "message": "You got this.",
          },
          "page_id": "<PAGE_ID>"
        },
        "degrees_of_freedom_spec": {
          "creative_features_spec": {
            "image_uncrop": {
              "enroll_status": "OPT_IN"
            }
          }
        }
      }' \
    https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/ads
    ```

**Step 2: Preview for Image Expansion**

This feature is supported for `INSTAGRAM_STANDARD`, `FACEBOOK_REELS_MOBILE`, `INSTAGRAM_REELS`, `MOBILE_FEED_STANDARD`, `INSTGRAM_STORY` placements. To look at a preview for these placements, make a `GET` request to the `/<AD_ID>/previews` endpoint.

If any of the generated images are not acceptable, please re-create the ad or creative without opt-in to Image Expansion:
*   Set the `creative_feature` as `image_uncrop`.
*   Re-request the preview if the `status` shows as `pending`.

**Note:** If a `transformation_spec` node is not shown, that means the creative is not eligible for image expansion.

*   **Request**

    **`INSTAGRAM_STANDARD`**

    ```curl
    curl -X GET -G \
      -d 'ad_format=INSTAGRAM_STANDARD' \
      -d 'creative_feature=image_uncrop' \
      -d 'access_token=/<ACCESS_TOKEN>' \
      https://graph.facebook.com/v19.0/<AD_ID>/previews
    ```

    **`FACEBOOK_REELS_MOBILE`**

    ```curl
    curl -X GET -G \
      -d 'ad_format=FACEBOOK_REELS_MOBILE' \
      -d 'creative_feature=image_uncrop' \
      -d 'access_token=/<ACCESS_TOKEN>' \
      https://graph.facebook.com/v19.0/<AD_ID>/previews
    ```

*   **Response**

    ```json
    {
  "data": [
    {
      "body": "<iframe src='<PREVIEW_URL>'></iframe>",
      "transformation_spec": {
        "image_uncrop": [
          {
            "body": "<iframe src='<PREVIEW_URL>'></iframe>",
            "status": "eligible"
          }
        ]
      }
    }
  ]}
    ```

**(Optional) Direct preview without ad creation**

You can also request a preview using the `act_<AD_ACCOUNT_ID>/generatepreviews` endpoint without actually creating an ad.

*   **Request**

    **`FACEBOOK_REELS_MOBILE`**

    ```curl
    curl -X GET -G \
      -d 'ad_format=FACEBOOK_REELS_MOBILE' \
      -d 'creative_feature=image_uncrop' \
      -d 'creative={
           "object_story_spec": {
             "page_id": "<PAGE_ID>",
              "link_data": {
                "image_hash": "<IMAGE_HASH>",
                "link": "<WEBSITE_LINK>"
              }
            }
         }'
      -d 'access_token=<ACCESS_TOKEN>'
      https://graph.facebook.com/v19.0/act_<AD_ACCOUNT_ID>/generatepreviews
    ```

## Background Generation

We'll create different backgrounds for eligible product images and deliver the version that your audience is most likely to respond to. These backgrounds were created based on your original asset.

**Step 1: Create an ad or creative opted-in to background generation**

Background generation currently only works with dynamic product ads or Advantage+ catalog ads on Mobile Feed.

You can create an ad through the `/ads` endpoint or create a standalone creative through the `/adcreatives` endpoint. In either approach, opt-in to use the **Background Generation** feature in the creative spec (see examples below).

*   **Request**

    ```curl
    // creative example
      curl -X POST \
      -F 'name=Background Gen Creative' \
      -F 'degrees_of_freedom_spec={
        "creative_features_spec": {
          "image_background_gen": {
            "enroll_status": "OPT_IN"
          }
        }
      }' \
      -F 'product_set_id=<PRODUCT_SET_ID>'
      -F 'access_token=<ACCESS_TOKEN>' \
      https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives// ad example
    curl \
      -F 'adset_id=<ADSET_ID>' \
      -F 'creative={
        "name": "Background Gen Adgroup",
        "object_story_spec": {
          "page_id": "<PAGE_ID>",
          "template_data": {
            "description": "Description {{product.description}} ",
            "link": "https://www.example.com/",
            "message": "Test {{product.name | titleize}} ",
            "name": "Headline {{product.price}}"
          }
        },
        "product_set_id": "<PRODUCT_SET_ID>",
        "degrees_of_freedom_spec": {
          "creative_features_spec": {
            "image_background_gen": {
              "enroll_status": "OPT_IN"
            }
          }
        }
      }' \
    https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/ads
    ```

**Step 2: Preview for Background Generation**

With opt-in to the feature, we will create different backgrounds for eligible product images and deliver the version that your audience is most likely to respond to. Feature opt-in only applies to the ad created in the current request. These backgrounds are created based on your original asset, featuring different colors or patterns for eligible product images. You will see a static or live preview of your generated background depending on catalog eligibility.

If any of the generated backgrounds are not acceptable, please re-create the ad or creative without opt-in to Background Generation.
*   Preview is currently supported only the `MOBILE_FEED_STANDARD` placement
*   Set the `creative_feature` as `image_background_gen`
*   If the live preview for your catalog products is not ready, a stock preview is shown with `status` set to `PENDING`

*   **Request**

    **`MOBILE_FEED_STANDARD`**

    ```curl
    curl -X GET -G \
      -d 'ad_format=MOBILE_FEED_STANDARD' \
      -d 'creative_feature=image_background_gen' \
      -d 'access_token=/<ACCESS_TOKEN>' \
      https://graph.facebook.com/v19.0/<AD_ID>/previews
    ```

*   **Response**

    ```json
    {
  "data": [
    {
      "body": "<iframe src='<PREVIEW_URL>'></iframe>",
      "transformation_spec": {
        "image_background_gen": [
          {
            "body": "<iframe src='<PREVIEW_URL>'></iframe>",
            "status": "eligible" // or one of "pending", "ineligible"
          }
        ]
      }
    }
  ]}
    ```

**(Optional) Direct preview without ad creation**

You can also request a preview of a creative using the `/<AD_CREATIVE_ID>/previews` endpoint without actually creating an ad.

*   **Request**

    **`MOBILE_FEED_STANDARD`**

    ```curl
    curl -X GET -G \
      -d 'ad_format=MOBILE_FEED_STANDARD' \
      -d 'creative_feature=image_background_gen' \
      -d 'access_token=<ACCESS_TOKEN>'
      https://graph.facebook.com/v19.0/<AD_CREATIVE_ID>/generatepreviews
    ```

*   **Response**

    ```json
    {
  "data": [
    {
      "body": "<iframe src='<PREVIEW_URL>'></iframe>",
      "transformation_spec": {
        "image_background_gen": [
          {
            "body": "<iframe src='<PREVIEW_URL>'></iframe>",
            "status": "eligible" // or one of "pending", "ineligible"
          }
        ]
      }
    }
  ]}
    ```

## About AI transparency

Ad images created or materially edited with certain Meta generative AI creative features available in our marketing tools may include AI info within the three-dot menu of an ad or have an AI info label next to the **Sponsored** label. [Learn about generative AI transparency for ads](https://www.facebook.com/business/help/807802100808240).

# Collaborative Ads

Collaborative Ads is a solution built on top of Advantage+ catalog ads. It enables brand advertisers to safely collaborate with a retailer or a marketing partner and achieve advertising goals such as target product for sales using retailer-provided content.

The retailer or marketing partner should share a catalog segment with the brand advertiser with all their products. This segment is a portion of their catalog or a superset of product sets. The brand advertiser can then accept this catalog segment and start running Advantage+ catalog ads using this catalog segment. Brand advertisers cannot edit the catalog segment but they can create their own product sets from it.

An advertiser essentially runs a Advantage+ catalog ads campaign for catalog sales with a product catalog. Therefore they can use standard Facebook ads reports which now include metrics related to the catalog segment.

In addition, you can use product-level reporting and retailer-level reporting to show only the brand’s purchases to the brand advertiser.

## High-Level Steps

**For retailers and marketing partners:**
*   Step 1: Onboard into Collaborative Ads
*   Step 2: Create Catalog Segment - The segment must contain products belonging to one of its prospective brand partners.
*   Step 3: Share Catalog Segment with Brand Partner
*   (For Marketing Partners Only) Step 4: Provide Discovery Tools for Brands

**For brands:**
*   Step 1: Accept Catalog Segment
*   Step 2: Create Ad Campaign with Catalog Segment
*   Step 3: View Reporting - View reporting related to the products in the catalog segment.
*   Optional Step 4: Debugging - Use tools to diagnose and resolve problems, see [Advantage+ catalog ads, Debugging Tools](https://developers.facebook.com/docs/marketing-api/guides/advantage-catalog-ads/debugging-tools).

## Steps For Retailers and Marketing Partners

**Step 1: Onboard into Collaborative Ads**

To complete this step, your app needs `business_management` and `catalog_management` permissions.

Currently, this is not supported via API, and must be completed via UI. To start this process, click **‘Become a Retail Partner’** in the [Collaborative Ads Retailer Directory](https://www.facebook.com/business/help/861780820612984).

**Step 2: Create Catalog Segment**

To complete this step, your app needs `business_management` and `catalog_management` permissions.

Create a catalog segment from one of your existing catalogs. The segment must contain all the products you would like to share with your brand partner.

To create a catalog segment via API, make a `POST` request to the `owned_product_catalogs` edge. The following fields are required for catalog segment creation:
*   `parent_catalog_id`: The parent catalog from which your segment was created. This catalog needs to be Collaborative Ads compliant. You can find your catalog’s status in Commerce Manager.
*   `catalog_segment_filter`: A JSON-encoded rule used to create the catalog segment.

**Step 3: Share Catalog Segment**

To complete this step, your app needs `business_management` and `catalog_management` permissions.

Share your catalog segment with your brand partner. To do this via API, make a `POST` request to `/{catalog_segment_id}/agencies`. In your call, you can add the following fields:

| Field | Description |
| :--- | :--- |
| `business` | **type: numeric string or integer** | Required. | ID for the business the catalog will be shared with. |
| `permitted_tasks` | **type: array < enum {MANAGE, ADVERTISE} >** | Required. | Tasks the business will be allowed to execute. Available options are: `['ADVERTISE', 'MANAGE']`. |
| `utm_settings` | **type: JSON object {enum{campaign_source,campaign_medium,campaign_name}: string}** | Optional. | You can specify `campaign_source`, `campaign_medium`, and `campaign_name`. |
| | | For example: `{campaign_source: “fb_campaign_source”}`. |
| `enabled_collab_terms` | **type: array < enum {ENFORCE_CREATE_NEW_AD_ACCOUNT, ENFORCE_SHARE_AD_PERFORMANCE_ACCESS} >** | Optional. | Collaboration terms to be enforced on new brand partners. Available options are: `['ENFORCE_CREATE_NEW_AD_ACCOUNT', 'ENFORCE_SHARE_AD_PERFORMANCE_ACCESS']`. |

**(For Marketing Partners Only) Step 4: Provide Discovery Tools for Brands**

To complete this step, your app needs the `business_management` permission. The API call must include a user access token and that user needs to have permission on the suggested partner, business, or collaboration request.

As a marketing partner, you should provide a way for brands to discover possible Collaborative Ads partners. You can use the following endpoints to find retailers to work with:
*   `GET {business-id}?fields=collaborative_ads_suggested_partners` — Find partners for a specific business.
*   `GET collaborative_ads_directory?fields=collaborative_ads_merchants` — Get the complete list of collaborative ads retailers.
*   `GET {cpas-advertiser-partnership-recommendation-id}?fields=advertiser_business_id,brand_business_id,brands,countries,merchant_business_id,status,status_reason` — Get one single retailer recommendation.

If a brand finds a partner, you can reach out to the retailer with a collaboration request. Do that by making the following `POST` request to `/{cpas-collaboration-request-id}`:

`{business-id}/collaborative_ads_collaboration_requests?
brands=”[“[BRAND NAME]”, “[BRAND NAME 2]”]”&
contact_email=[CONTACT_EMAIL]&
contact_first_name=[CONTACT_FIRST_NAME]&
contact_last_name=[CONTACT_LAST_NAME]&
phone_number=[PHONE NUMBER]&
receiver_business=[RECEIVING BUSINESS ID]
requester_agency_or_brand=[REQUESTING ENTITY - AGENCY, BRAND or MERCHANT]`

Keep track of your reach outs with the following endpoints:
*   `GET {business-id}/collaborative_ads_collaboration_requests`
*   `GET {cpas-collaboration-request-id}?fields=phone_number,receiver_business,request_type,source,status`

## Steps For Brands

**Step 1: Accept Catalog Segment**

If your brand has not accepted the Terms of Service for the new shared business, you must do so.
After receiving the shared asset, the business admin user needs to:
*   Go to the [Collaboration Center](https://business.facebook.com/collaboration_center).
*   Select the business you're accepting Terms of Service for.
*   Select **Partners** from the left side navigation.
*   Click the **Accept assets** button to begin the acceptance workflow.

After accepting the terms, your brand can add people to the catalog segment using the `/{product-catalog-id}/assigned_users` endpoint. **Note:** This requires the `business_management` permission.

In addition to accepting the terms of service, brands may also be required to agree to retailer-mandated collaboration terms; creating a new ad account and/or granting view access so the retailer can see ad performance. It is necessary to accept these terms in order to complete onboarding.

**Step 2: Create Ad Campaign**

To complete this step, your app needs `business_management` and `ads_management` permissions.

Your brand can use the accepted catalog segment to create ad campaigns. You should use a separate ad account for each retailer you want to run Collaborative Ads for. Once the dedicated ad account is linked to a retailer, it can only select catalog segments belonging to that specific retailer.

To create and run ads you do as you normally do for your own product catalog, however you should provide `catalog_segment_ID` instead of a catalog ID:

```curl
curl \
  -F 'name=Product Catalog Sales Campaign' \
  -F 'objective=PRODUCT_CATALOG_SALES' \
  -F 'promoted_object={"product_catalog_id":"<CATALOG_SEGMENT_ID>"}' \
  -F 'status=PAUSED' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/<API_VERSION>/act_<AD_ACCOUNT_ID>/campaigns
```

On success, you get a new ad campaign ID:

`{"id": "<CAMPAIGN_ID>"}`

There are four fields which you can normally set with Advantage+ catalog ads which you cannot with a catalog segment:
*   `multi_share_end_card` is set to `false` by default and you cannot change
*   You cannot change `description` in `template_data`
*   `template_url_spec` which you can use for deeplink URLs must point to merchant's website
*   Custom tracking specs are disabled

**Step 3: View Reports**

Once the ads are running, Brand Advertisers can get metrics on how ads are performing. We have several new insights metrics at different ad object levels. See `catalog_segment_value` and related metrics for:
*   Ad Account
*   Ad Campaign
*   Ad Set
*   Ad

`catalog_segment_value` includes a breakdown of the conversion events, including purchases, add-to-carts and view products for the catalog segment at each ad object level. It aggregates events across website, mobile and omni-channel sources. Learn more about [Estimated and In-Development Insights Metrics](https://developers.facebook.com/docs/marketing-api/insights/metrics#estimated).

**Step 4: Debug and Diagnose Issues**

Brands should now troubleshoot and debug any issues running their Advantage+ catalog ads for the catalog segment.

See [Advantage+ Catalog Ads Debugging Tools](https://developers.facebook.com/docs/marketing-api/guides/advantage-catalog-ads/debugging-tools).

## Insights

The following [estimated metrics](https://developers.facebook.com/docs/marketing-api/insights/metrics#estimated) are related to Collaborative Ads —see [About Estimated, In development, and Third-party metrics](https://developers.facebook.com/docs/marketing-api/insights/metrics#estimated).

To query any of our reporting metrics:
*   Your app needs to have `ads_management` and `business_management` permissions. See [App Review](https://developers.facebook.com/docs/apps/review).
*   You need to have a [user access token](https://developers.facebook.com/docs/facebook-login/access-tokens) and this user must be allowed to view reporting for the ad account in question.
*   Queries can be made on the following objects: ad account, ad campaign, ad set, and ad.
*   The `action_converted_product_id` breakdown is not supported on the ad account level.

| Metric | Description |
| :--- | :--- |
| `catalog_segment_value` | Value from conversion events, including a breakdown of purchases, add-to-carts and view products for the catalog segment at each ad object level. |
| `catalog_segment_value_omni_purchase_roas` | Total return on ad spend (ROAS) from purchases of items shared between Brand and Retailer. This number is based on information received from one or more Retailer' connected Facebook Business Tools. The amount is attributed to your ads. |
| `catalog_segment_value_website_purchase_roas` | Total return on ad spend (ROAS) from website purchases of items shared between Brand and Retailer. This number is based on information received from one or more Retailers' connected Facebook Business Tools. The amount is attributed to your ads. |
| `catalog_segment_value_mobile_purchase_roas` | The total return on ad spend (ROAS) from mobile app purchases of items shared between Brand and Retailer. This number is based on information received from one or more Retailers' connected Facebook Business Tools. The amount is attributed to your ads. |
| `catalog_segment_actions` | Similar to `catalog_segment_value`, when using this metric a breakdown of actions is given for the catalog segment at each ad object level. |
| `converted_product_value` | Value of conversions driven by your ads for a given product ID. This number is recorded by your Retailer partner's Pixel or App SDK. |
| | The API only returns Product IDs —see `/{product-item-id}` for information. If you want to get brand names as well, please use Ads Manager. |
| `converted_product_quantity` | Quantity of conversions driven by your ads for a given product ID. This number is recorded by your Retailer partner's Pixel or App SDK. |
| | The API only returns Product IDs —see `/{product-item-id}` for information. If you want to get brand names as well, please use Ads Manager. |

**Breakdowns**

Breakdowns are used to group your insights results into different sets —see [Breakdowns](#insights-api-breakdowns). You can use following breakdowns with Collaborative Ads metrics:
*   **Date:** Get insights for a specific date range. To use this breakdown, add `time_range` to your query. For example: `&time_range[since]=2020-03-01&time_range[until]=2020-04-01`.
*   **Product Level:** Get insights for a specific product. Use this breakdown for `converted_product_value` and `converted_product_quantity` metrics by adding `&action_breakdowns=action_converted_product_id` to your query.

**Combining Breakdowns**

Use the following combining breakdowns for Collaborative Ads:

The `action_converted_product_id` breakdown is not supported on the ad account level.
*   `action_converted_product_id`
*   `action_type`, `action_converted_product_id`

# Managed Partner Ads

Managed Partner Ads is primarily an API-based solution from [Collaborative Ads](#collaborative-ads) for marketplaces to run ads on behalf of their sellers as a monetizable service at scale.

Marketplaces can help run Meta ads on behalf of sellers who typically lack the expertise or resources to do it on their own. This also allows them to apply insights captured from onsite and offsite data to optimize seller campaigns, which can help target seller ads to high intent customers. This results in greater exposure of small, unknown seller businesses via brand equity of the marketplace.

Sellers interact with the ad service exclusively through the marketplace’s dedicated, self-contained and built surface, and not through a Meta onsite experience. This allows the marketplace to control and manage all aspects of the seller ads ecosystem, even though the ads appear offsite on Facebook.

To get started, please review the [Get Started](#managed-partner-ads-integration) section and follow the link to the [Integration page](#managed-partner-ads-integration).

## Benefits

Some of the key benefits listed for both Marketplaces and Sellers:

**Marketplace**
*   Get more traffic and sales on your eCommerce site by empowering your sellers on running Meta ads
*   Have an additional revenue stream by monetizing through an optional service fee
*   Monitor all seller marketing activity on Meta through Collaboration Center, a platform powered by Meta
*   Measure the impact of seller-funded campaigns on sales
*   Apply insights captured from onsite and offsite data to optimize seller campaigns, which can help target seller ads to high intent customers
*   Build a custom interface for sellers to engage your services by utilising the Managed Partner Ads APIs

**Seller**
*   Enable more online discovery and sales of products where people already spend their time
*   Boost exposure and brand image of small, unknown seller businesses via brand equity of the marketplace host
*   Reduce the operational and creative cost of running ads by enabling marketplaces to run it for them
*   Requires no Meta Pixel or Meta SDK implementation on the sellers’ side
*   Measure the impact of marketplace-run ads

## Terminology

The common terminology referenced in our API documentation/reference.

| Term | Description |
| :--- | :--- |
| **Marketplace (Parent) or Retailer** | Platforms that bring consumers and sellers together exclusively online. They often stock and sell products from different brands. This is sometimes referred to as "parent" in our API documentation. |
| **Seller (Child)** | Businesses that sell their products through marketplaces and/or retailers. This is sometimes referred to as "child" in our API documentation. |
| **Access Token** | A unique-string generated by Meta to allow developers to make Meta API calls from their application. |
| **Admin System User** | An admin system user from the marketplace Business Manager that is a financial editor and an admin on the marketplace/parent catalog. |

## Get Started

There are three main steps to start the integration process for Managed Partner Ads:
*   **Preparation** - ensure you meet all the minimum requirements to be eligible for Managed Partner Ads
*   **Integration** - start building the integration for your sellers using our APIs
*   **Launch** - communicate and launch this service to your sellers

To understand these steps in more detail, please review the [Integration Section](#managed-partner-ads-integration) of the Managed Partner Ads developer documentation to start the integration process.

# Managed Partner Ads: Integration

## Overview

There are three main steps involved in the overall Managed Partner Ads integration process, as outlined below. This section provides an overview to help you understand and plan your work accordingly.

The end-goal is to set up an automated process to onboard your sellers and build an interface for sellers to engage with. Through this service, Meta ads are run and operated.

## Step 1: Preparation

*   Onboard into Collaborative Ads. To start this process, click **Become a Retail Partner** in the [Collaborative Ads Retailer Directory](https://www.facebook.com/business/help/861780820612984).
*   Own the following assets:
    *   Your marketplace Business Manager — If you don't have one, see the [Create a Business Manager](https://www.facebook.com/business/help/113164948792015) to learn how to create it.
    *   A registered Meta app — This is used to interact with the [Marketing API](https://developers.facebook.com/docs/marketing-api), which the Managed Partner Ads API is built upon.
        *   Your app must have the `business_management` and `ads_management` permissions.
        *   Ensure your app has [Ads Management Standard Access](https://developers.facebook.com/docs/features/reference/ads-management-standard-access) for higher rate limiting.
    *   Pass the [App Review process](https://developers.facebook.com/docs/apps/review).
    *   A marketplace access token (user token) — Follow the instructions found in [Add Systems Users to Your Business Manager](https://developers.facebook.com/docs/marketing-api/business-management/system-users) to generate the token.
    *   At least 20,000 unique sellers in your catalog with each seller having a unique ID (Vendor ID) associated with them.
    *   Each seller must have a unique ID associated with them. This is referred to as the **Vendor ID** and is used to automatically create a [Catalog Segment](https://developers.facebook.com/docs/marketing-api/guides/collaborative-ads/brand-advertiser-integration#step-2-create-catalog-segment) when onboarding a seller.

## Step 2: Integration

You are now ready to start integrating your platform with the Managed Partner Ads APIs.

In order to create a **Minimum Viable Product (MVP)** for your sellers, the following 4 modules will need to be built or setup:
*   **[Build] Seller Onboarding** — This is a process that you as a marketplace will create in order to allow sellers to sign-up for the service you provide using Managed Partner Ads. During your pilot phase of testing Managed Partner Ads, you may utilise our seller onboarding tool in order to quickly assess the performance of using Managed Partner Ads. This should be a temporary process and you should be creating your own process once you are ready to start offering Managed Partner Ads to your sellers. Please contact your Meta representative for access to this tool.

*   **[Setup] Default Template for campaigns** — This is a standard template that you create for all your sellers to run campaigns. This can be created in the [Collaboration Center](https://www.facebook.com/business/help/902720913926868) and must be set up before any sellers can run a campaign. The template will use Catalog Sales as the objective with two ad sets (prospecting and retargeting) using the carousel format. The following parameters can be configured:
    *   Budget allocation
    *   Ad creative primary text
    *   URL

    Both default templates and custom templates are supported. More information can be found in the [Types of Templates](https://www.facebook.com/business/help/278553075591321) section.

*   **[Build] Seller Ad Campaigns** — This is a custom interface you provide your sellers in order to create, manage and display reports for campaigns. See the [API section](#partner-ads-management) under Partner Ads Management to understand how to build this.
*   **[Build] Billing** — This should be integrated with your own existing billing infrastructure and should be provided as part of the Managed Partner Ads service and allow sellers to view/manage their finances with respect to the campaigns being run. Meta will send an invoice to the marketplace every billing cycle for payment settlement between Meta and the marketplace. The default invoice setting is 1 invoice to 1 seller.
    *   To consolidate invoices, you can create an invoice group and add ad accounts into the group up to 3 days before the invoice is sent. This can be achieved using our [Business Management API](https://developers.facebook.com/docs/marketing-api/business-management/invoice-groups) to manage invoice groups (add/update/delete).

Marketplaces are expected to provide services to sellers using a dedicated, self-contained and built platform that utilises the Managed Partner Ads APIs. This allows the marketplace to control and manage all aspects of the seller ads ecosystem, even though the ads appear offsite on Meta.

**APIs overview and UI mock**

| Marketplace Managed Partner Ads API Overview | |
| :--- | :--- |
| **Endpoint** | **Description** |
| `/seller_eligible` | Check eligibility of a seller to join Managed Partner Ads (MPA) |
| `/seller_business` | Get the list of sellers in your marketplace with their status |
| `/seller_business/create` | Create a seller business ID for a new seller in your marketplace |
| `/seller_business/configure` | Configure a seller business with the seller identity Page and access token |

| Seller Managed Partner Ads API Overview | |
| :--- | :--- |
| **Endpoint** | **Description** |
| `/seller_business/configure` | Configure a seller business with the seller identity Page and access token |

**Seller onboarding and lookup**

To onboard and search for existing sellers, use the [Seller Eligibility API](https://developers.facebook.com/docs/marketing-api/managed-partner-ads/seller-management/check-eligibility), [Lookup Seller Business API](https://developers.facebook.com/docs/marketing-api/managed-partner-ads/seller-management/lookup), [Seller Business Creation API](https://developers.facebook.com/docs/marketing-api/managed-partner-ads/seller-management/onboard) and [Seller Business Configuration API](https://developers.facebook.com/docs/marketing-api/managed-partner-ads/seller-management/configure).

An example flow chart of the seller onboarding and lookup flow:

![Flowchart detailing the steps for seller onboarding and lookup. It shows the check eligibility phase, the lookup seller business phase, and the creation and configuration phase for new sellers.](https://developers.facebook.com/docs/marketing-api/managed-partner-ads/images/MPA_FlowChart.png)

In addition, you will also be using other Meta Graph APIs for campaign management and invoicing. For full technical details on our APIs, please refer to the [Managed Partner Ads API Reference](https://developers.facebook.com/docs/marketing-api/managed-partner-ads/reference).

**Example: User Interfaces for Sellers**

As a marketplace, you are expected to use the Managed Partner Ads APIs to create an interface for your sellers to engage with as part of your service offering. The below mockups are some examples and for illustration purposes ONLY.
*   **Seller registration** — This is where the seller will express interest in onboarding onto Managed Partner Ads. Please note, the Facebook page URL refers to the Seller's Identity Page and is compulsory for integrity check purposes.
*   **Ad creation** — A custom interface built by the marketplace using the Managed Partner Ads APIs to allow sellers to run Meta ad campaigns.
*   **Ad update** — Modify existing ad campaigns.
*   **Ad performance viewing** — Review performance of ad campaigns.

**Managed Sellers Dashboard**

As a marketplace, you can access a list of your managed sellers to view details of the campaigns you are running on their behalf by going to **Business Manager > Collaboration Center > Partnerships > Managed partners**. This will allow you to:
*   View a dashboard of all managed sellers, including business information.
*   See an overview of campaign delivery, credit, catalog segment, ad account, page and business account issues.

If you have use cases in addition to the ones in the Collaboration Center, you may want to consider developing an internal admin portal for your business operations team.

## Step 3: Launch

Before launching, please ensure that your Meta app has passed our [App Review process](https://developers.facebook.com/docs/apps/review).

You are now all set to launch your Managed Partner Ads solution. You may consider rolling it out to eligible sellers in batches and devise communication plans accordingly.
*   Ensure eligible sellers are aware of the Managed Partner Ads solution.
*   Provide a channel to receive feedback on the seller interface, including any feature requests and bug reports.
*   Monitor seller activity on Collaboration Center through Seller Dashboard or build your own monitoring tool for your own needs using [Marketing API](https://developers.facebook.com/docs/marketing-api).
*   Keep track of your sellers’ campaign performance, build automated systems to detect problems and make changes for further optimization of delivery and performance.
*   Test different creatives, targeting and optimization options, understand what works/what does not for which seller.
*   When your solution starts delivering value and can scale, start rolling it out to more sellers gradually, promote it in different channels and scale the number of sellers in your platform and their overall investment through Managed Partner Ads.

# Managed Partner Ads API Guide

These are the resources you'll need to run manged partner ads using API calls.

## Prerequisites

Before you can begin the managed partner ads API integration, you will need to:
*   [Create an Admin System User](https://developers.facebook.com/docs/marketing-api/managed-partner-ads/prerequisites#create-admin-system-user)
*   [Assign Permissions to the Admin System User](https://developers.facebook.com/docs/marketing-api/managed-partner-ads/prerequisites#assign-permissions)
*   [Generate an Access Token for the Admin System User](https://developers.facebook.com/docs/marketing-api/managed-partner-ads/prerequisites#generate-access-token)

## Seller Management

| Seller Management | |
| :--- | :--- |
| [Check Seller Eligibility](https://developers.facebook.com/docs/marketing-api/managed-partner-ads/seller-management/check-eligibility) | |
| [Onboard a Seller](https://developers.facebook.com/docs/marketing-api/managed-partner-ads/seller-management/onboard) | |
| [Delete a Seller](https://developers.facebook.com/docs/marketing-api/managed-partner-ads/seller-management/delete) | |

## Partner Ads Management

| Partner Ads Management | |
| :--- | :--- |
| [Get the List of Campaigns for a Seller](https://developers.facebook.com/docs/marketing-api/managed-partner-ads/partner-ads-management/get-campaigns) | |
| [Create a Campaign for a Seller](https://developers.facebook.com/docs/marketing-api/managed-partner-ads/partner-ads-management/create-campaign) | |
| [Update a Campaign for a Seller](https://developers.facebook.com/docs/marketing-api/managed-partner-ads/partner-ads-management/update-campaign) | |
| [Delete a Campaign for a Seller](https://developers.facebook.com/docs/marketing-api/managed-partner-ads/partner-ads-management/delete-campaign) | |
| [Get the List of Ads for a Seller](https://developers.facebook.com/docs/marketing-api/managed-partner-ads/partner-ads-management/get-ads) | |
| [Create an Ad for a Seller](https://developers.facebook.com/docs/marketing-api/managed-partner-ads/partner-ads-management/create-ad) | |
| [Update an Ad for a Seller](https://developers.facebook.com/docs/marketing-api/managed-partner-ads/partner-ads-management/update-ad) | |
| [Delete an Ad for a Seller](https://developers.facebook.com/docs/marketing-api/managed-partner-ads/partner-ads-management/delete-ad) | |
| [Get Ad Performance for a Seller](https://developers.facebook.com/docs/marketing-api/managed-partner-ads/partner-ads-management/get-performance) | |

## Async API User Guide

| Poll Async Session ID for Results | |
| :--- | :--- |
| [Check Async Session Status](https://developers.facebook.com/docs/marketing-api/managed-partner-ads/async-api/check-session-status) | |
| [Get Results](https://developers.facebook.com/docs/marketing-api/managed-partner-ads/async-api/get-results) | |

## Error Handling

| Error Handling Guide | |
| :--- | :--- |
| [Error Codes](https://developers.facebook.com/docs/marketing-api/managed-partner-ads/errors/codes) | |

# Multi-advertiser Ads

Multi-advertiser ads delivery will become `OPT-IN` by default beginning August 19, 2024. Partners will need to implement the multi-advertiser request in order to opt out of multi-advertiser ads. Ads created on or after August 19 that do not specify the `enroll_status` field within the `contextual_multi_ads` field will be opted into multi-advertiser ads by default.

Multi-advertiser ads showcase ads from multiple advertisers, helping advertisers drive performance by reaching more people looking to go deeper in their shopping journey. Multi-advertiser ads are available for select placements on Facebook and Instagram. For more information, please visit the [Business Help Center](https://www.facebook.com/business/help/2653245038318856).

## API support for multi-advertiser ads

Multi-advertiser ads are supported in all versions of the Marketing API. Multi-advertiser ads support all campaign objectives and all ad formats across all available placements. The `enroll_status` field must be provided with either an `OPT_IN` or `OPT_OUT` value. Ads created on or after August 19, 2024 that do not specify the `enroll_status` field will be opted into multi-advertiser ads by default.

## Ad creation

*   **Request**

    ```curl
    curl -X POST \
      -F 'name="My creative title"' \
      -F 'object_story_spec={
           "page_id": "<PAGE_ID>",
           "link_data": {
             "link": "https://www.google.com",
             "image_hash": "<IMAGE_HASH>",
             "attachment_style": "link",
          }
         }' \
      -F 'contextual_multi_ads={
           "enroll_status": "OPT_IN"
         },'
      -F "access_token=<ACCESS_TOKEN>" \
       https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
    ```

    For more details, see [Ad Creative](https://developers.facebook.com/docs/marketing-api/reference/ad-creative).

| Parameters | |
| :--- | :--- |
| `contextual_multi_ads` | The `enroll_status` field can be set to `OPT_IN` or `OPT_OUT`. For more details, see [Ad Creative Features Details, Reference](https://developers.facebook.com/docs/marketing-api/reference/ad-creative-features-details). |

## Learn More

**Business Help Center**
*   [About multi-advertiser ads](https://www.facebook.com/business/help/2653245038318856)

**Marketing API Reference**
*   [Ad Creative](https://developers.facebook.com/docs/marketing-api/reference/ad-creative)
*   [Ad Account Ads](https://developers.facebook.com/docs/marketing-api/reference/ad-account/ads)

# Reels Ads

Create a Meta ad with a focus on available reels placements and learn best practices around our ads operations.

## Prerequisites

*   You have previously created a [Facebook app](https://developers.facebook.com/docs/apps/register)
*   You are familiar with [Marketing APIs](https://developers.facebook.com/docs/marketing-api) and have enabled [Facebook Login](https://developers.facebook.com/docs/facebook-login)

If you do not meet those prerequisites, please refer to our [developer documentation](https://developers.facebook.com/docs/marketing-api).

## Sandbox Testing

Meta offers a testing environment, which doesn't actually deliver ads, but allows you to:
*   Add Marketing API as a product within your Meta app in the **Tools** section to create and edit ads using our APIs without incurring costs
*   [Create an ad account](https://developers.facebook.com/docs/marketing-api/guides/ads-for-testing) to use the Marketing API
*   [Read through our testing best practices](https://developers.facebook.com/docs/marketing-api/guides/testing)

## Step 1: Access Asset

An access token is an opaque string that identifies a user, app, or Page and can be used by the app to make graph API calls. You can see when it expires and which app generated it. Marketing API calls on Meta apps need to include an access token.

Get an access token with necessary permissions:
*   `ads_management`: make changes in selected ad accounts
*   `ads_read`: read out ads data
*   `read_insights`: read out performance insights

Use [system access tokens](https://developers.facebook.com/docs/marketing-api/business-management/system-users) as they have longer expiration times.

**Additional Authorization Layer**

To access Marketing API endpoints, you need to create a **Business app**. They are subject to an additional layer of Graph API authorization called [access levels](https://developers.facebook.com/docs/development/release/access-levels). During [App Review](https://developers.facebook.com/docs/apps/review), your app must also request specific permissions and features. You must complete [Business Verification](https://developers.facebook.com/docs/development/release/business-verification) if your app will be used by app users who do not have a role on the app itself, or a role in a Business that has claimed the app.

If your app is managing other people’s ad accounts, you need:
*   [Advanced Access](https://developers.facebook.com/docs/development/release/access-levels#advanced-access) `ads_read`
    *   and/or
*   [Advanced Access](https://developers.facebook.com/docs/development/release/access-levels#advanced-access) `ads_management`

## Step 2: Fetch Ad Account

Fetch your advertisers ad account(s) and allow them to select the one for ads creation.

Through our [Business Management API](https://developers.facebook.com/docs/marketing-api/business-management), you can see all the ad accounts their business has access to. This returns all ad accounts owned by a business. Note that you will need the `business_management` permission at app and user level. Refer to [Business Asset Management APIs](https://developers.facebook.com/docs/marketing-api/business-management/business-assets).

**Sample Call**

```curl
curl -G \-d "access_token=<ACCESS_TOKEN>" \"https://graph.facebook.com/v24.0/<BUSINESS_ID>/owned_ad_accounts"
```

## Step 3: Create Campaign

A campaign is the highest level organizational structure within an ad account and should represent a single objective for an advertiser. These objects contain your advertising objective and one or more ad sets. This helps you optimize and measure results for each advertising objective. Learn more about creating, reading, updating and deleting a campaign [here](https://developers.facebook.com/docs/marketing-api/guides/campaigns).

**Sample Call**

```curl
curl -X POST \
  -F 'name="My campaign"' \
  -F 'objective="OUTCOME_TRAFFIC"' \
  -F 'status="PAUSED"' \
  -F 'special_ad_categories=[]' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/campaigns
```

## Step 4: Target Definition

To enable advertisers to reach specific groups, specific these parameters in your API requests:
*   demographics (age, gender, location)
*   interests
*   behaviors

Then potential customers who are most likely to be interested in your products or services will be reached.

**Sample Call**

```curl
curl -X POST \
  -F 'access_token=YOUR_ACCESS_TOKEN' \
  -F 'name=My Custom Audience' \
  -F 'subtype=CUSTOM' \
  -F 'description=People who live in New York, aged 25-40, interested in technology' \
  -F 'customer_file_source=USER_PROVIDED_ONLY' \
  -F 'targeting_spec={
        "geo_locations": {
          "countries": ["US"],
          "regions": [{"key": "4081"}]  # New York region key
        },
        "age_min": 25,
        "age_max": 40,
        "interests": [{"id": "6003139266461", "name": "Technology"}]
      }' \
  https://graph.facebook.com/v24.0/act_YOUR_AD_ACCOUNT_ID/customaudiences
```

## Step 5: Create Ad Set

Ad sets can have one or more ads. Ads within an ad set should have the same targeting, budget, billing, optimization goal, and duration.

You can set the budget, schedule, targeting, bid strategy, and placement options. Ad sets allow for fine-tuning how and where ads are delivered to specific audience segments, optimizing performance, and achieving marketing goals.

Key parameters:
*   audience targeting criteria
*   daily or lifetime budgets
*   scheduling options to control when ads are shown

More comprehensive details [here](https://developers.facebook.com/docs/marketing-api/guides/adsets).

You can pick a manual placement that includes Instagram and Facebook reels ads, or default to automatic placements. If you do not specify anything for a particular placement field, it considers all possible default positions for that field.

**Sample Call**

```curl
curl -X POST \
  -F 'access_token=YOUR_ACCESS_TOKEN' \
  -F 'name=Reels Ad Set' \
  -F 'campaign_id=YOUR_CAMPAIGN_ID' \
  -F 'daily_budget=5000' \
  -F 'billing_event=IMPRESSIONS' \
  -F 'optimization_goal=REACH' \
  -F 'start_time=2024-07-10T10:00:00-0700' \
  -F 'end_time=2024-07-20T10:00:00-0700' \
  -F 'targeting={"geo_locations":{"countries":["US"]},"age_min":18,"age_max":65}' \
  -F 'promoted_object={"page_id":"YOUR_PAGE_ID"}' \
  -F 'status=PAUSED' \
  -F 'instagram_user_id=<IG_USER_ID>' \
  -F 'publisher_platforms=["instagram"]' \
  -F 'instagram_positions=["reels"]' \
  https://graph.facebook.com/v24.0/act_YOUR_AD_ACCOUNT_ID/adsets
```

**Placement Targeting: Reels Available Positions, Compatible Objectives, and Optimization Goals**

| `publisher_platforms` | `facebook_position` or `instagram position` | Compatible Objectives | `optimization_goal` |
| :--- | :--- | :--- | :--- |
| instagram | reels, profile\_reels | `OUTCOME_APP_PROMOTION` | `LINK_CLICKS` |
| | | | `OFFSITE_CONVERSIONS` |
| | | | `APP_INSTALLS` |
| instagram | reels, profile\_reels | `OUTCOME_AWARENESS` | `REACH` |
| | | | `IMPRESSIONS` |
| | | | `AD_RECALL_LIFT` |
| | | | `THRUPLAY` |
| instagram | reels, profile\_reels | `OUTCOME_LEADS` | `OFFSITE_CONVERSIONS` |
| | | | `LANDING_PAGE_VIEWS` |
| | | | `LINK_CLICKS` |
| | | | `REACH` |
| | | | `IMPRESSIONS` |
| | | | `LEAD_GENERATION` |
| | | | `QUALITY_LEAD` |
| instagram | reels, profile\_reels | `OUTCOME_TRAFFIC` | `LINK_CLICKS` |
| | | | `LANDING_PAGE_VIEWS` |
| | | | `REACH` |
| | | | `CONVERSATIONS` |
| | | | `IMPRESSIONS` |
| | | | `VISIT_INSTAGRAM_PROFILE` |
| instagram | reels, profile\_reels | `OUTCOME_ENGAGEMENT` | `CONVERSATIONS` |
| | | | `LINK_CLICKS` |
| | | | `THRUPLAY` |
| | | | `POST_ENGAGEMENT` |
| | | | `REACH` |
| | | | `IMPRESSIONS` |
| | | | `REMINDERS_SET` |
| | | | `OFFSITE_CONVERSIONS` |
| | | | `LANDING_PAGE_VIEWS` |
| instagram | reels, profile\_reels | `OUTCOME_SALES` | `OFFSITE_CONVERSIONS` |
| | | | `LANDING_PAGE_VIEWS` |
| | | | `LINK_CLICKS` |
| | | | `REACH` |
| | | | `IMPRESSIONS` |
| | | | `CONVERSATIONS` |
| facebook | facebook\_reels | `OUTCOME_APP_PROMOTION` | `LINK_CLICKS` |
| | | | `OFFSITE_CONVERSIONS` |
| | | | `APP_INSTALLS` |
| facebook | facebook\_reels | `OUTCOME_AWARENESS` | `REACH` |
| | | | `IMPRESSIONS` |
| | | | `AD_RECALL_LIFT` |
| | | | `THRUPLAY` |
| | | | `TWO_SECOND_CONTINUOUS_VIDEO_VIEWS` |
| facebook | facebook\_reels | `OUTCOME_LEADS` | `OFFSITE_CONVERSIONS` |
| | | | `LANDING_PAGE_VIEWS` |
| | | | `LINK_CLICKS` |
| | | | `REACH` |
| | | | `IMPRESSIONS` |
| | | | `LEAD_GENERATION` |
| | | | `QUALITY_LEAD` |
| facebook | facebook\_reels | `OUTCOME_TRAFFIC` | `LINK_CLICKS` |
| | | | `LANDING_PAGE_VIEWS` |
| | | | `REACH` |
| | | | `CONVERSATIONS` |
| | | | `IMPRESSIONS` |
| | | | `QUALITY_CALL` |
| facebook | facebook\_reels | `OUTCOME_ENGAGEMENT` | `CONVERSATIONS` |
| | | | `LINK_CLICKS` |
| | | | `THRUPLAY` |
| | | | `TWO_SECOND_CONTINUOUS_VIDEO_VIEWS` |
| | | | `POST_ENGAGEMENT` |
| | | | `REACH` |
| | | | `IMPRESSIONS` |
| | | | `EVENT_RESPONSES` |
| | | | `QUALITY_CALL` |
| | | | `OFFSITE_CONVERSIONS` |
| | | | `LANDING_PAGE_VIEWS` |
| | | | `PAGE_LIKES` |
| facebook | facebook\_reels | `OUTCOME_SALES` | `OFFSITE_CONVERSIONS` |
| | | | `LANDING_PAGE_VIEWS` |
| | | | `LINK_CLICKS` |
| | | | `REACH` |
| | | | `IMPRESSIONS` |
| | | | `CONVERSATIONS` |
| | | | `QUALITY_CALL` |

**Limitations**

| Compatible Objective + `optimization_goal` Combination | FB Reels Eligible? | IG Reels Eligible? |
| :--- | :--- | :--- |
| `OUTCOME_AWARENESS` + `TWO_SECOND_CONTINUOUS_VIDEO_VIEWS` | ✅ | ❌ |
| `OUTCOME_TRAFFIC` + `VISIT_INSTAGRAM_PROFILE` | ❌ | ✅ |
| `OUTCOME_TRAFFIC` + `QUALITY_CALL` | ✅ | ❌ |
| `OUTCOME_ENGAGEMENT` + `TWO_SECOND_CONTINUOUS_VIDEO_VIEWS` | ✅ | ❌ |
| `OUTCOME_ENGAGEMENT` + `EVENT_RESPONSES` | ✅ | ❌ |
| `OUTCOME_ENGAGEMENT` + `REMINDERS_SET` | ❌ | ✅ |
| `OUTCOME_ENGAGEMENT` + `QUALITY_CALL` | ✅ | ❌ |
| `OUTCOME_ENGAGEMENT` + `PAGE_LIKES` | ✅ | ❌ |
| `OUTCOME_SALES` + `QUALITY_CALL` | ✅ | ❌ |

## Step 6: Select Creative

Ad creatives are the visual and textual components of ads, which support the following ad formats:
*   images
*   videos
*   carousels
*   enabling customized ad designs

Automate design elements and optimize performance using our [creative process](https://developers.facebook.com/docs/marketing-api/guides/ad-creatives).

**Repurpose an Existing Reel as the Ad Creative**

Users can provide a new asset or repurpose an existing reel from their Instagram account as the ad creative.

You can create ads from existing, organic Instagram or Facebook reels that are eligible to be promoted, provided they are:
*   Less than 90 seconds
*   Have a full-screen (9:16) vertical aspect ratio
*   Free of copyrighted music, GIFs, interactive stickers or camera filters from a third party
*   Not shared to Facebook

To repurpose an organic Instagram reel as the ad creative for a new ad campaign:
*   Obtain the Instagram Business account ID, which needs to be connected to a Facebook Page
    *   `GET/{ad_account_id}/connected_instagram_accounts` or
    *   `GET/{business_id}/instagram_business_accounts`
*   **Find the Reel You Want to Promote**
    *   `GET/{ig-business-account-user-id}/media`
*   **Provide Ad Creative**
    *   Instead of specifying `instagram_user_id` in the creative spec, set `instagram_user_id` as the Instagram user ID
    *   Specify `source_instagram_media_id` as the media ID
    *   Optionally, update `call_to_action` for your promotion
*   Leverage `boost_eligibility_info` as a convenient way to determine whether media is eligible to be boosted as an ad and `boost_ads_list` to trace related past boost Instagram ad information.

**Sample Call**

```curl
curl -i -X POST \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT>/adcreatives?object_id=<PAGE_ID>&instagram_user_id=<IG_USER_ID>&source_instagram_media_id=<IG_ORGANIC_MEDIA_ID>&call_to_action="{'type':'LEARN_MORE','value':{'link': '<YOUR_LINK>'}}"&access_token=<API_ACCESS_TOKEN>
```

**Gen AI Creative Toolbox**

You can automate the generation of diverse and engaging ad elements, such as: images, videos, and text. These AI-driven tools help optimize ad performance by tailoring content to audience preferences and enhancing creative variety. Ad creation will result in higher engagement and better campaigns.

## Step 7: Preview Ad

Preview the ad in the Facebook and Instagram Reels formats tabulated below using:
*   Ad ID
*   Ad Creative ID
*   Ad Creative spec

| PUBLISHING PLATFORM | Ad Format |
| :--- | :--- |
| **Facebook** | `DESKTOP_FEED_STANDARD`, `FACEBOOK_STORY_MOBILE`, `INSTANT_ARTICLE_STANDARD`, `INSTREAM_VIDEO_DESKTOP`, `INSTREAM_VIDEO_MOBILE`, `MARKETPLACE_DESKTOP`, `MARKETPLACE_MOBILE`, `MOBILE_FEED_BASIC`, `MOBILE_FEED_STANDARD`, `RIGHT_COLUMN_STANDARD`, `SUGGESTED_VIDEO_DESKTOP`, `SUGGESTED_VIDEO_MOBILE`, `WATCH_FEED_MOBILE`, `FACEBOOK_REELS_BANNER`, `FACEBOOK_REELS_BANNER_DESKTOP`, `FACEBOOK_REELS_MOBILE`, `FACEBOOK_REELS_POSTLOOP`, `FACEBOOK_REELS_STICKER`, `FACEBOOK_STORY_STICKER_MOBILE`, `WATCH_FEED_HOME` |
| **Instagram** | `INSTAGRAM_STANDARD`, `INSTAGRAM_STORY`, `INSTAGRAM_EXPLORE_CONTEXTUAL`, `INSTAGRAM_EXPLORE_IMMERSIVE`, `INSTAGRAM_EXPLORE_GRID_HOME`, `INSTAGRAM_FEED_WEB`, `INSTAGRAM_FEED_WEB_M_SITE`, `INSTAGRAM_PROFILE_FEED`, `INSTAGRAM_REELS`, `INSTAGRAM_REELS_OVERLAY`, `INSTAGRAM_SEARCH_CHAIN`, `INSTAGRAM_SEARCH_GRID`, `INSTAGRAM_STORY_CAMERA_TRAY`, `INSTAGRAM_STORY_WEB`, `INSTAGRAM_STORY_WEB_M_SITE` |

**Sample Call**

```curl
curl -X POST \
  'https://graph.facebook.com/v24.0/act_{ad_account_id}/adpreviews' \
  -F 'access_token={your_access_token}' \
  -F 'creative={
        "object_story_spec": {
            "instagram_user_id": "<IG_USER_ID>",
            "video_data": {
                "video_id": "{video_id}",
                "title": "Check out our new product!",
                "description": "Exciting new features and benefits.",
                "call_to_action": {
                    "type": "LEARN_MORE",
                    "value": {
                        "link": "https://www.example.com/product"
                    }
                }
            }
        }
    }' \
  -F 'ad_format=INSTAGRAM_REELS'
```

## Step 8: Schedule Ad Delivery

To book an ad using the marketing API, create an ad group object and link your ad set object to the Ad Creative. Use `/act_{ad_account_id}/ads` to submit your Ad object, and validate the response to confirm successful booking. This step finalizes your ad setup, making it ready for delivery based on the configurations provided.

**Sample Call**

```curl
curl -X POST \
  -F 'name="My Ad"' \
  -F 'adset_id="<AD_SET_ID>"' \
  -F 'creative={
       "creative_id": "<CREATIVE_ID>"
     }' \
  -F 'status="PAUSED"' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/ads
```

## Step 9: Review Performance

Use the Insights API to fetch metrics from ad account to ads:
*   `act_<AD_ACCOUNT_ID>/insights`
*   `<CAMPAIGN_ID>/insights`
*   `<ADSET_ID>/insights`
*   `<AD_ID>/insights`

When running a campaign on Instagram and Facebook, add `breakdowns=publisher_platform` to see the stats of Facebook and Instagram placements separately, as shown in the sample call below. When breaking down insights by Placement level, it will be possible to see how ads perform via Instagram and Facebook Reels placement.

**Sample Call**

```curl
curl -X GET \
  'https://graph.facebook.com/v24.0/{ad_account_id}/insights' \
  -F 'access_token={your_access_token}' \
  -F 'level=campaign' \
  -F 'fields=campaign_name,impressions,clicks,spend' \
  -F 'breakdowns=publisher_platform,platform_position' \
  -F 'filtering=[{"field":"platform_position","operator":"IN","value":["instagram_reels"]}]' \
  -F 'time_range={"since":"2024-06-01","until":"2024-06-30"}'
```

## Important Considerations

**New Objectives Supported in ODAX (Outcome-Driven Ads Experiences Objective Validation)**
*   `OUTCOME_APP_PROMOTION`
*   `OUTCOME_AWARENESS`
*   `OUTCOME_ENGAGEMENT`
*   `OUTCOME_LEADS`
*   `OUTCOME_SALES`
*   `OUTCOME_TRAFFIC`

**Rate Limits**

The Marketing API has its own rate limiting logic and is excluded from all the Graph API rate limitations. The feature that impacts the Marketing API rate limit quota is [Ads Management Standard Access](https://developers.facebook.com/docs/features/reference/ads-management-standard-access). By default, you get Standard Access when you add the Marketing API product to your App Dashboard, which provides you development access to the Marketing API. To increase the rate limiting quota, upgrade to Advanced Access.

## Creative Essentials

Reels ads turn attention into action, supercharging results. When you build them the right way, they are even more effective.
1.  **Build in 9:16 video to make your video captivating:** Reels is a full-screen, immersive video format. To help your creative feel at home here, consider leading with video and resizing it to 9:16.
2.  **Build in safe zones so that your messages are clear:** Work within the [safe zones](https://developers.facebook.com/docs/marketing-api/guides/video-ads/ad-videos#safe-zone) so your text sticker overlays, calls to action or key messages aren’t obscured by the Reels user interface. Keep the bottom 35% of your 9:16 creative free of text, logos, and other key elements.
3.  **Build for sound on to make your video entertaining:** Audio – whether that's music, voiceover or sound effects – is a key driver of engagement and entertainment on Reels.

## Dynamic Media with Catalog Product Video

Use Catalog Product Video for your Reels placements to enhance your catalog and ad experience. With Dynamic Media, you can deliver video assets from your catalog along with the existing product images in your Advantage+ catalog ads campaigns. Dynamic Media allows you to extend your reach to Instagram Reels and Facebook Reels. In addition, it consolidates multiple video campaigns into a single dynamic ad campaign. You can use Dynamic Media ads across different placements, but we focus on using Dynamic Media ads in Reels placements here.

Dynamic Media ads will show either images or videos of your catalog items based on what each person viewing your ad is likely to find engaging. Dynamic media uses automation and product ranking to deliver not only the most relevant products, but also the highest-performing assets to audiences across placements.

**Why use catalog product video?**

Catalog product video is supported across all catalog verticals, and Dynamic Media ads are open to all advertisers. Catalog product video is a good fit for advertisers who would like to enhance their Advantage+ catalog ads campaigns with more inspirational video creatives.

**Requirements**

To create Dynamic Media ads that deliver on Reels, you will need a product catalog with existing products and at least one video for each product item in a downloadable video URL format. For more information, see [Dynamic Media](#dynamic-media).

**Step 1: Configure the catalog for catalog product videos**
*   Ensure that at least one video per product is a 9:16 aspect ratio for the best performance on Reels
    *   Dynamic Media ads will automatically select a 9:16 video for the Reels placements
    *   If a 9:16 video is not available, the first video will be used
*   Ensure that the videos provided for your catalog are hosted on downloadable URLs
*   Audio is welcome and may have a positive impact on your ad, but is not required
*   You may add tags to your catalog videos to use `preferred_video_tags` on the ad

**Step 2: Create an ad campaign compatible with Reels placements and Advantage+ catalog ads**
*   [Reels campaign creation](#step-3-create-campaign)
*   [Advantage+ catalog ads campaign creation](#step-1-create-an-ad-campaign)
*   Ensure that your ad campaign objective is `OUTCOME_SALES`, `LINK_CLICKS`, `APP_INSTALLS`, or `CONVERSIONS`

**Step 3: Create an adset targeting Reels Placements with a product set**
*   [Advantage+ Catalog adset creation](#step-2-create-an-ad-set-1)
*   [Reels placement adset creation](#step-5-create-ad-set)
*   Set an optimization goal that aligns with your objective at the campaign level that adheres to our [validation rules](https://developers.facebook.com/docs/marketing-api/reference/ad-set#billing-event-and-optimization-goal)
*   Set the appropriate targeting options, budget, billing event, and schedule
*   Ensure that `publisher_platforms` is set for `["instagram","facebook"]`, `facebook_positions` and `instagram_positions` are set for `reels`
*   Set your desired `product_set_id` in `promoted_object` for your ad set to promote products from that product set

**Step 4: Create a Dynamic Media ad**
*   Ensure that you are creating either a carousel ad or a single video format ad. Collection ads featuring catalog product videos are not yet supported on Reels placements. Carousel ads contain a series of different products from a set. Single video will show one product at a time from the specified product set
*   [More information on catalog product videos](#dynamic-media)

# Get Started with the Flexible Ad Format

This document shows you how the flexible ad format empowers multi-asset creative automation by grouping related assets in a single ad without needing to select a specific format.

## Before You Start

You need to familiarize yourself with these steps to set up your ad campaigns for the flexible ad format:
*   [Create a Campaign](#create-an-ad-campaign)
*   [Create an Ad Set](#create-an-ad-set)
*   [Create the Ad or a standalone Creative](#create-an-ad-using-the-flexible-ad-format)
*   [Enable the Ad](#create-an-ad-using-the-flexible-ad-format)

**Limitations**

Currently only `OUTCOME_SALES` and `OUTCOME_APP_PROMOTION` campaign objectives support the flexible ad format.

## Create an Ad using the Flexible Ad Format

You can use `creative_asset_groups_spec` to provide multiple creative assets, with the following limitations:
*   At least 1 image or video is required per group.
*   All `call_to_actions` provided must have the same type.
*   There can be no more than 5 texts per `text_type` in a group.

For example, to create an ad using the flexible ad format through the `/ads` endpoint:

```curl
curl \
  -F 'adset_id=<ADSET_ID>' \
  -F "creative={
    'name': 'Sample Creative',
    'object_story_spec': {  
      ...    
    },
  }" \
  -F 'creative_asset_groups_spec={
  "groups": [
    {
      "images": [
        {
          "hash": <IMAGE_HASH_1>,
        },
        {
          "hash": <IMAGE_HASH_2>,
        }
      ],
      "videos": [
        {
          "video_id": <VIDEO_ID_1>,
        },
        {
          "video_id": <VIDEO_ID_2>,
        },
      ],
      "texts": [
        {
          "text": "Summer Sale",
          "text_type": "primary_text",
        },
        {
          "text": "Everything 50% Off",
          "text_type": "headline",
        }
      ],
      "call_to_action": {
        "type": "LEARN_MORE",
        "value": {
          "link": "https://www.example.com/",
        }
      }
    }
  ],
}' \
  -F 'status=PAUSED' \
  -F "access_token=<ACCESS_TOKEN>" \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/ads 
```

## Read the Flexible Ad Format

To check your ad, read `creative_asset_group_spec`:

```curl
curl -G \
  -d 'fields=creative_asset_groups_spec' \
  -d 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/<AD_ID>/
```

**Response**

```json
{
  "creative_asset_groups_spec": {
    "groups": [
      {
        "images": [
          {
            "hash": <IMAGE_HASH_1>,
          },
          {
            "hash": <IMAGE_HASH_2>,
          }
        ],
        "texts": [
          {
            "text": "Summer Sale",
            "text_type": "primary_text"
          },
          {
            "text": "Everything 50% off",
            "text_type": "headline"
          }
        ],
        "videos": [
          {
            "video_id": <VIDEO_ID_1>,
            "image_hash": <VIDEO_THUMBNAIL_HASH_1>
          },
          {
            "video_id": <VIDEO_ID_2>,
            "image_hash": <VIDEO_THUMBNAIL_HASH_2>
          }
        ],
        "group_uuid": <GROUP_ID>
      }
    ]
  },
  "id": <AD_ID>}
```

# Get Started with Format Automation

This document shows you how to enable format automation so you can create a single ad that automatically delivers multiple optimized ad formats.

## Before You Start

Familiarize yourself with these topics to set up your ad campaigns for format automation:
*   [Get Started with the Marketing API](#get-started-with-the-marketing-api)
*   [Advantage+ Catalog Ads: Get Started](#advantage-catalog-ads)

**Permissions**
*   `page_manage_ads`

**Limitations**

Format automation only supports carousel Advantage+ catalog ads.

## Create an Advantage+ Catalog Ad using Format Transformation

You can use the `format_transformation_spec` paramter to opt-in to different types of formats and data sources used to build the formats.

Not including the `format_transformation_spec` in the creative spec will result in the default system behavior.

**Example request**

```curl
curl -X POST \
  -F 'name="Ad Creative with Format Transformation Spec Sample"' \
  -F 'object_story_spec={
    "page_id": "<PAGE_ID>"
    ... // Fields to create a Advantage+ catalog ad carousel creative \
  }' \
  -F 'product_set_id=<PRODUCT_SET_ID>' \
  -F 'asset_feed_spec= {
    "ad_formats": [
      "CAROUSEL",
      "COLLECTION"
    ],
    "optimization_type": "FORMAT_AUTOMATION"
  }' \
  -F 'format_transformation_spec=[{
    "data_source": ["catalog"],
    "format": "da_collection"
  }]' \
  -F 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/adcreatives
```

| Parameters | |
| :--- | :--- |
| `format` | Required. Specifies the format transformation type. **Value:** `da_collection` |
| `data_source` | Optional. Specifies the data used to assemble the format. **Values:** |
| | `none`: Opts out of all data sources. |
| | `catalog`: Opts into the catalog data source. |
| | **Note:** Not including the `data_source` field or leaving it empty indicates an opt-in to all data sources available. |

To opt into format automation, specify the format transformations `format`:

```json
"format_transformation_spec": [
  {
    "format": "da_collection", 
  }
]
```

To opt-out of all transformations and data sources, set the `data_source` parameter to `none`:

```json
"format_transformation_spec": [
  {
    "format": "da_collection", 
    "data_source": ["none"],
  }
]
```

To opt into the catalog data source set the `data_source` parameter to `catalog`:

```json
"format_transformation_spec": [
  {
    "format": "da_collection", 
    "data_source": ["catalog"]
  }
]
```

Leave the `data_source` field empty to opt into all `data_sources`:

```json
"format_transformation_spec": [
  {
    "format": "da_collection", 
    "data_source": []
  }
]
```

## Retrieve the Format Transformation

To check your ad, make an API call requesting the `format_transformation_spec`:

**Example request**

```curl
curl -G \
  -d 'fields=format_transformation_spec' \
  -d 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/<CREATIVE_ID>
```

**Example response**

```json
{
  {
    "format_transformation_spec": [
    {
      "data_source": ["catalog"]
      "format": "da_collection"
    }]
  },
  "id": <AD_CREATIVE_ID>
}
```

## See Also

*   [Ad Creative](https://developers.facebook.com/docs/marketing-api/reference/ad-creative)
*   [Adgroup](https://developers.facebook.com/docs/marketing-api/reference/ad-set)
*   [Advantage+ Catalog Ads](#advantage-catalog-ads)
*   [Collection Ads](#collection-ads)

# Insights API

Provides a single, consistent interface to retrieve ad statistics.
*   [Breakdowns](#insights-api-breakdowns) - Group results
*   [Action Breakdowns](https://developers.facebook.com/docs/marketing-api/insights/action-breakdowns) - Understanding the response from action breakdowns.
*   [Async Jobs](#insights-api-asynchronous-jobs) - For requests with large results, use asynchronous jobs
*   [Limits and Best Practices](#limits-and-best-practices) - Call limits, filtering and best practices.

Before you can get data on your ad's performance, you should set up your ads to track the metrics you are interested in. For that, you can use [URL Tags](https://developers.facebook.com/docs/marketing-api/guides/ads-for-testing#url), [Meta Pixel](https://developers.facebook.com/docs/marketing-api/conversions-api/guides/pixel-setup-guide), and the [Conversions API](https://developers.facebook.com/docs/marketing-api/conversions-api).

## Before you begin

You will need:
*   The `ads_read` permission.
*   An app. See [Meta App Development](https://developers.facebook.com/docs/development) for more information.

## Campaign Statistics

To get the statistics of a campaign's last 7 day performance:

```curl
curl -G \
  -d "date_preset=last_7d" \
  -d "access_token=ACCESS_TOKEN" \
  "https://graph.facebook.com/API_VERSION/AD_CAMPAIGN_ID/insights"
```

To learn more, see the [Ad Insights Reference](https://developers.facebook.com/docs/marketing-api/reference/ad-campaign-insights).

## Making Calls

The Insights API is available as an edge on any ads object.

| API Method | |
| :--- | :--- |
| `act_<AD_ACCOUNT_ID>/insights` | |
| `<CAMPAIGN_ID>/insights` | |
| `<ADSET_ID>/insights` | |
| `<AD_ID>/insights` | |

*   **Request**

    You can request specific fields with a comma-separated list in the `fields` parameters. For example:

    ```curl
    curl -G \-d "fields=impressions" \-d "access_token=ACCESS_TOKEN" \"https://graph.facebook.com/v24.0/<AD_ID>/insights"
        
    ```

*   **Response**

    ```json
    {
  "data": [
    {
      "impressions": "2466376",
      "date_start": "2009-03-28",
      "date_stop": "2016-04-01"
    }
  ],
  "paging": {
    "cursors": {
      "before": "MAZDZD",
      "after": "MAZDZD"
    }
  }}
    ```

## Levels

Aggregate results at a defined object level. This automatically deduplicates data.

*   **Request**

    For example, get a campaign's insights on ad level.

    ```curl
    curl -G \-d "level=ad" \-d "fields=impressions,ad_id" \-d "access_token=ACCESS_TOKEN" \"https://graph.facebook.com/v24.0/CAMPAIGN_ID/insights"
    ```

*   **Response**

    ```json
    {
  "data": [
    {
      "impressions": "9708",
      "ad_id": "6142546123068",
      "date_start": "2009-03-28",
      "date_stop": "2016-04-01"
    },
    {
      "impressions": "18841",
      "ad_id": "6142546117828",
      "date_start": "2009-03-28",
      "date_stop": "2016-04-01"
    }
  ],
  "paging": {
    "cursors": {
      "before": "MAZDZD",
      "after": "MQZDZD"
    }
  }}
    ```

If you don't have access to all ad objects at the requested level, the insights call returns no data. For example, while requesting insights with level set to `ad`, if you don't have access to one or more ad objects under the ad account, this API call will return a permission error.

## Attribution windows

The conversion attribution window provides timeframes that define when we attribute an event to an ad on a Meta app. For background information, see [Meta Business Help Center, About attribution windows](https://www.facebook.com/business/help/330543667106622). We measure the actions that occur when a conversion event occurs and look back in time 1-day and 7-days. To view actions attributed to different attribution windows, make a request to `/{ad-account-id}/insights`. If you do not provide `action_attribution_windows` we use 7d\_click and provide it under `value`.

For example specify `action_attribution_windows` and 'value' is fixed at 7d\_click attribution window. Make a request to `act_10151816772662695/insights?action_attribution_windows=['1d_click','1d_view']` and get this result:

`"spend": 2352.45,"actions": [{"action_type": "link_click","value": 6608,"1d_view": 86,"1d_click": 6510},"cost_per_action_type": [{"action_type": "link_click","value": 0.35600030266344,"1d_view": 27.354069767442,"1d_click": 0.36135944700461},// if attribution window is _not_ specified in query. And note that the number under 'value' key is the same even if attribution window is specified.// act_10151816772662695/insights"spend": 2352.45,"actions": [{"action_type": "link_click","value": 6608},"cost_per_action_type": [{"action_type": "link_click","value": 0.35600030266344},`

## Field Expansion

Request fields at the node level and by fields specified in field expansion.

*   **Request**

    ```curl
    curl -G \-d "fields=insights{impressions}" \-d "access_token=ACCESS_TOKEN" \"https://graph.facebook.com/v24.0/AD_ID"
    ```

*   **Response**

    ```json
    {
  "id": "6042542123268",
  "name": "My Website Clicks Ad",
  "insights": {
    "data": [
      {
        "impressions": "9708",
        "date_start": "2016-03-06",
        "date_stop": "2016-04-01"
      }
    ],
    "paging": {
      "cursors": {
        "before": "MAZDZD",
        "after": "MAZDZD"
      }
    }
  }}
    ```

## Sorting

Sort results by providing the `sort` parameter with `{fieldname}_descending` or `{fieldname}_ascending`:

*   **Request**

    ```curl
    curl -G \-d "sort=reach_descending" \-d "level=ad" \-d "fields=reach" \-d "access_token=ACCESS_TOKEN" \"https://graph.facebook.com/v24.0/AD_SET_ID/insights"
    ```

*   **Response**

    ```json
    {
  "data": [
    {
      "reach": 10742,
      "date_start": "2009-03-28",
      "date_stop": "2016-04-01"
    },
    {
      "reach": 5630,
      "date_start": "2009-03-28",
      "date_stop": "2016-04-03"
    },
    {
      "reach": 3231,
      "date_start": "2009-03-28",
      "date_stop": "2016-04-02"
    },
    {
      "reach": 936,
      "date_start": "2009-03-29",
      "date_stop": "2016-04-02"
    }
  ],
  "paging": {
    "cursors": {
      "before": "MAZDZD",
      "after": "MQZDZD"
    }
  }}
    ```

## Ads Labels

Stats for all labels whose names are identical. Aggregated into a single value at an ad object level. See the [Ads Labels Reference](https://developers.facebook.com/docs/marketing-api/adlabels/reference) for more information.

*   **Request**

    ```curl
    curl -G \  -d "fields=id,name,insights{unique_clicks,cpm,total_actions}" \-d "level=ad" \-d 'filtering=[{"field":"ad.adlabels","operator":"ANY", "value":["Label Name"]}]'  \-d 'time_range={"since":"2015-03-01","until":"2015-03-31"}' \-d "access_token=ACCESS_TOKEN" \"https://graph.facebook.com/v24.0/AD_OBJECT_ID/insights"
    ```

*   **Response**

    ```json
    {
  "data": [
    {
      "unique_clicks": 74,
      "cpm": 0.81081081081081,
      "total_actions": 49,
      "date_start": "2015-03-01",
      "date_stop": "2015-03-31",
    },
  ], 
  "paging": {
    "cursors": {
      "before": "MA==",
      "after": "MA==",
    }
  }}
    ```

## Clicks definition

To better understand the click metrics that Meta offers today, please read the definitions and usage of each below:

*   **Link Clicks, `actions:link_click`** - The number of clicks on ad links to select destinations or experiences, on or off Meta-owned properties. See [Ads Help Center, Link Clicks](https://www.facebook.com/business/help/1183756771694200)

*   **Clicks (All), `clicks`** - The metric counts multiple types of clicks on your ad, including certain types of interactions with the ad container, links to other destinations, and links to expanded ad experiences. See [Ads Help Center, Clicks(All)](https://www.facebook.com/business/help/1458994504153036)

## Deleted and Archived Objects

Ad units may be `DELETED` or `ARCHIVED`. The stats of deleted or archived objects appear when you query their parents. This means if you query impressions at the ad set level, results include impressions from all ads in the set it, regardless of whether the the ads are in a deleted or archived state. See also, [Storing and Retrieving Ad Objects Best Practice](#object-archive-and-delete-status).

However, if you query using `filtering`, status filtering will be applied by default to return only Active objects. As a result, the total stats of the parent node may be greater than the stats of its children.

You can get the stats of `ARCHIVED` objects from their parent nodes though, by providing an extra filtering parameter.

*   **Request**

    To get the stats of all `ARCHIVED` ads in an ad account listed one by one:

    ```curl
    curl -G \
      -d "level=ad" \
      -d "filtering=[{'field':'ad.effective_status','operator':'IN','value':['ARCHIVED']}]" \
      -d "access_token=<ACCESS_TOKEN>" \
      "https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/insights/"
    ```

*   **Response**

    Note that only archived objects are returned in this response.

    ```json
    {
  "data": [
    {
      "impressions": "1741",
      "date_start": "2016-03-11",
      "date_stop": "2016-03-12"
    }
  ],
  "paging": {
    "cursors": {
      "before": "MAZDZD",
      "after": "MAZDZD"
    }
  }}
    ```

**Deleted Objects Insights**

You can query insights on deleted objects if you have their IDs or by using the `ad.effective_status` filter.

*   **Request**

    For example, if you have the ad set ID:

    ```curl
    curl -G \-d "fields=id,name,status,insights{impressions}" \-d "access_token=ACCESS_TOKEN" \"https://graph.facebook.com/v24.0/AD_SET_ID"
        
    ```

    In this example, we query with `ad.effective_status`:

    `POST https://graph.facebook.com/<VERSION>/act_ID/insights?access_token=token&appsecret_proof=proof&fields=ad_id,impressions&date_preset=lifetime&level=ad&filtering=[{"field":"ad.effective_status","operator":"IN","value":["DELETED"]}]`

*   **Response**

    ```json
    {
  "id": "6042147342661",
  "name": "My Like Campaign",
  "status": "DELETED",
  "insights": {
    "data": [
      {
        "impressions": "1741",
        "date_start": "2016-03-11",
        "date_stop": "2016-03-12"
      }
    ],
    "paging": {
      "cursors": {
        "before": "MAZDZD",
        "after": "MAZDZD"
      }
    }
  }}
    ```

## Troubleshooting

**Timeouts**

The most common issues causing failure at this endpoint are too many requests and time outs:
*   On `/GET` or synchronous requests, you can get out-of-memory or timeout errors.
*   On `/POST` or asynchronous requests, you can possibly get timeout errors. For asynchronous requests, it can take up to an hour to complete a request including retry attempts. For example if you make a query that tries to fetch large volume of data for many ad level objects.

**Recommendations**

*   There is no explicit limit for when a query will fail. When it times out, try to break down the query into smaller queries by putting in filters like date range.
*   Unique metrics are time consuming to compute. Try to query unique metrics in a separate call to improve performance of non-unique metrics.

**Rate Limiting**

The Meta Insights API utilizes rate limiting to ensure an optimal reporting experience for all of our partners. For more information and suggestions, see our [Insights API Limits & Best Practices](#limits-and-best-practices).

**Discrepancy with Ads Manager**

Beginning June 10, 2025, to reduce discrepancies with Meta Ads Manager, `use_unified_attribution_setting` and `action_report_time` parameters will be disregarded and API responses will mimic Ads Manager settings:
*   Attributed values will be based on Ad-Set-level attribution settings (similar to `use_unified_attribution_setting=true`), and inline/on-ad actions will be included in 1d\_click or 1d\_view attribution window data. After this change, standalone inline attribution window data will no longer be returned.
*   Actions will be reported using `action_report_time=mixed`: on-Meta actions (like Link Clicks) will use impression-based reporting time; whereas off-Meta actions (like Web Purchases) will leverage conversion-based reporting time.

The default behavior of the API is different from the default behavior in Ads Manager. If you would like to observe the same behavior as in Ads Manager, please set the field `use_unified_attribution_setting` to `true`.

## Learn More

*   [Ad Account Insights](https://developers.facebook.com/docs/marketing-api/reference/ad-account-insights)
*   [Ad Campaign Insights](https://developers.facebook.com/docs/marketing-api/reference/ad-campaign-insights)
*   [Ad Set Insights](https://developers.facebook.com/docs/marketing-api/reference/ad-set-insights)
*   [Ad Insights](https://developers.facebook.com/docs/marketing-api/reference/ad-insights)

Any endpoints not in the above list are not covered in this API. If you plan to include reports from Meta in your solution, see [Meta Platform Terms and Developer Policies for Marketing API](https://developers.facebook.com/policy).

# Insights API Breakdowns

You can group the Insights API results into different sets using breakdowns.

The Insights API can return several metrics that are estimated, in development, or both. Insights breakdown values are estimated. For more information, see [Insights API, Estimated and Deprecated Metrics](https://developers.facebook.com/docs/marketing-api/insights/metrics#estimated).

## Limitations

**Unavailable fields**

The following fields cannot be requested when specifying a breakdown:
*   `app_store_clicks`
*   `newsfeed_avg_position`
*   `newsfeed_clicks`
*   `relevance_score`
*   `newsfeed_impressions`

**Restrictions for Off-Meta Action Metrics**

The following breakdowns will no longer be available for off-Meta action metrics.

| Type 1 | |
| :--- | :--- |
| `region` | |
| `dma` | |
| `hourly_stats_aggregated_by_audience_time_zone` | |
| `hourly_stats_aggregated_by_advertiser_time_zone` | |

| Type 2 | |
| :--- | :--- |
| `action_device` | |
| `action_destination` | |
| `action_target_id` | |
| `product_id` | |
| `action_carousel_card_id`/`action_carousel_card_name` | |
| `action_canvas_component_name` | |

Rules related to queries containing above breakdowns:
*   **Type 1** — The Insights API will not return unsupported offsite metrics (e.g., `actions` metric with Type 1 breakdowns).
*   **Type 2** — Offsite web metrics will continue to be returned from the API, however will not contain the breakdown value. The mobile metrics will not be returned anymore when queried with these breakdowns.

**Note:** The breakdowns listed above will still be supported for on-Meta metrics such as impressions, link clicks, etc. The changes will also not impact historical data prior to April 27, 2021; breakdowns for historical data will continue to be available.

**Action Metrics**

Metrics will not be available under the following scenarios:
*   When there is an attempted aggregation across multiple attribution settings
*   When requested with impacted breakdowns (this restriction only applies for off-Meta & action types).

**Note:** Metrics will be available if querying with `action_attribution_windows=1d_click,7d_click,1d_view,incrementality` (not including the default window).

## Generic Breakdowns

The following breakdowns are available.

| Breakdown | Description |
| :--- | :--- |
| `action_device` | The device on which the conversion event you're tracking occurred. For example, \"Desktop\" if someone converted on a desktop computer. |
| `action_canvas_component_name` | Name of a component within a Canvas ad. |
| `action_carousel_card_id` | The ID of the specific carousel card that people engaged with when they saw your ad. |
| `action_carousel_card_name` | The specific carousel card that people engaged with when they saw your ad. The cards are identified by their headlines. |
| `action_destination` | The destination where people go after clicking on your ad. This could be your Facebook Page, an external URL for your conversion pixel or an app configured with the software development kit (SDK). |
| `action_reaction` | The number of reactions on your ads or boosted posts. The reactions button on an ad allows people to share different reactions on its content: Like, Love, Haha, Wow, Sad or Angry. |
| `action_target_id` | The ID of destination where people go after clicking on your ad. This could be your Facebook Page, an external URL for your conversion pixel or an app configured with the software development kit (SDK). |
| `action_type` | The kind of actions taken on your ad, Page, app or event after your ad was served to someone, even if they didn't click on it. Action types include Page likes, app installs, conversions, event responses, and more. |
| `action_video_sound` | The sound status (on/off) when someone plays your video ad. |
| `action_video_type` | Video metrics breakdown. |
| `ad_format_asset` | The ID of the ad format asset involved in impression, click, or action |
| `age` | The age range of the people you've reached. |
| `app_id` | The ID of the application associated with the ad account or campaign requested. The application information, including its ID, is viewable in the App Dashboard. |
| | This breakdown is only supported by the `total_postbacks` field. |
| `body_asset` | The ID of the body asset involved in impression, click, or action. |
| `call_to_action_asset` | The ID of the call to action asset involved in impression, click, or action. |
| `country` | The country where the people you've reached are located. This is based on information, such as a person's hometown, their current city, and the geographical location where they tend to be when they visit Meta. |
| `description_asset` | The ID of the description asset involved in impression, click, or action. |
| `device_platform` | The type of device, mobile or desktop, used by people when they viewed or clicked on an ad, as shown in ads reporting. |
| `dma` | The Designated Market Area (DMA) regions are the 210 geographic areas in the United States in which local television viewing is measured by The Nielsen Company. |
| `frequency_value` | The number of times an ad in your Reach and Frequency campaign was served to each Accounts Center account. |
| `gender` | Gender of people you've reached. People who don't list their gender are shown as 'not specified'. |
| `hourly_stats_aggregated_by_advertiser_time_zone` | Hourly breakdown aggregated by the time ads were delivered in the advertiser's time zone. For example, if your ads are scheduled to run from 9 AM to 11 AM, but they reach audiences in multiple time zones, they may deliver from 9 AM to 1 PM in the advertiser's time zone. Stats will be aggregated into four groups 9 AM - 10 AM, 10 AM - 11 AM, 11 AM - 12 PM, and 12 PM - 1 PM. |
| `hourly_stats_aggregated_by_audience_time_zone` | Hourly breakdown aggregated by the time ads were delivered in the audiences' time zone. For example, if your ads are scheduled to run from 9:00 am to 11:00 am, but they reach audiences in multiple time zones, they may deliver from 9:00 am to 1:00 pm in the advertiser's time zone. Stats are aggregated into 2 groups: 9:00 am to 10:00 am and 10:00 am to 11:00 am. |
| `image_asset` | The ID of the image asset involved in impression, click, or action. |
| `impression_device` | The device where your last ad was served to someone on Meta. For example \"iPhone\" if someone viewed your ad on an iPhone. |
| `is_conversion_id_modeled` | A boolean flag that indicates whether the conversion\_bits are modeled. A 0 indicates conversion\_bits aren't modeled, and a 1 indicates that conversion\_bits are modeled. |
| | This breakdown is only supported by the `total_postbacks_detailed` field. |
| `link_url_asset` | The ID of the URL asset involved in impression, click or action. |
| `place_page_id` | The ID of the place page involved in impression or click. |
| | Account-level insights and `page_place_id` are not compatible with each other, so they cannot be queried together. |
| `platform_position` | Where your ad was shown within a platform, for example on Facebook desktop Feed, or Instagram Mobile Feed. |
| `product_id` | The ID of the product involved in impression, click, or action. |
| `publisher_platform` | Which platform your ad was shown, for example on Facebook, Instagram, or Audience Network. |
| `region` | The regions where the people you've reached are located. This is based on information such as a person's hometown, their current city and the geographical location where they tend to be when they visit Facebook. |
| `skan_campaign_id` | The raw campaign ID received as a part of Skan postback from iOS 15+. |
| | Note: This breakdown is only supported by the `total_postbacks_detailed` field. |
| `skan_conversion_id` | The assigned Conversion ID (also referred to as Priority ID) of the event and/or event bundle configured in the application’s SKAdNetwork configuration schema. The app events configuration can be viewed and adjusted in Meta Events Manager. You can learn more about configuring your app events for Apple's SKAdNetwork [here](https://developers.facebook.com/docs/app-events/skadnetwork#configuration). |
| | Note: This breakdown is only supported by the `total_postbacks` field. |
| `title_asset` | The ID of the title asset involved in impression, click or action. |
| `user_segment_key` | User segment (ex: new, existing) of Advantage+ Shopping Campaigns (ASC). Existing user is specified by the custom audience in ASC settings. |
| `video_asset` | The ID of the video asset involved in impression, click or action. |

**Notes**
*   Filtering `app_id` and `skan_conversion_id` using the `filtering` field is currently not supported.
*   The `dma` breakdown is not available for the `estimated_ad_recall_rate` metric or `video_thruplay_watched_actions` metric.
*   The `dma` breakdown employs a sampling methodology to compute unique metrics like reach. In instances where there are a large number of DMA regions with comparatively low volumes, they might not be represented in the sample or could be scaled up to a power of 2. Therefore, it's advisable to query the corresponding impressions as well for enhanced accuracy.
*   `frequency_value` is used with `reach` only. For example, how frequently a unique user saw an ad.
*   By design, `image_asset` and `video_asset` breakdowns are not available at the ad account level for assets used in Dynamic Creative.
*   Ad actions `video_p25_watched_actions`, `video_p50_watched_actions`, `video_p75_watched_actions`, `video_p95_watched_actions`, and `video_p100_watched_actions` do not support `region` breakdown.
*   All Dynamic Creative asset breakdowns only support a limited set of metrics:

| Dynamic Creative Breakdowns | Supported metrics for Dynamic Creative Breakdowns |
| :--- | :--- |
| `ad_format_asset` | `impressions` |
| `body_asset` | `clicks` |
| `call_to_action_asset` | `spend` |
| `description_asset` | `reach` |
| `image_asset` | `actions` |
| `link_url_asset` | `action_values` |
| `title_asset` | |
| `video_asset` | |

The following call groups the results by age and gender.

**cURL**

```curl
curl -G \
  -d "breakdowns=age,gender" \
  -d "fields=impressions" \
  -d "access_token=<ACCESS_TOKEN>" \
  "https://graph.facebook.com/<API_VERSION>/<AD_CAMPAIGN_ID>/insights"
```

**Show Response**

```json
{
  "data": [
    {
      "impressions": "304",
      "date_start": "2015-08-01",
      "date_stop": "2015-08-01",
      "age": "18-24",
      "gender": "male"
    },
    {
      "impressions": "100",
      "date_start": "2015-08-01",
      "date_stop": "2015-08-01",
      "age": "25-34",
      "gender": "male"
    }
  ],
  "paging": {
    "cursors": {
      "before": "MAZDZD",
      "after": "MQZDZD"
    }
  }}
```

## Hourly Breakdowns

Hourly stats are now an available breakdown using the following breakdowns:
*   `hourly_stats_aggregated_by_advertiser_time_zone`
*   `hourly_stats_aggregated_by_audience_time_zone`

See [Combining Breakdowns](#combining-breakdowns) for limits on number of breakdowns you may request with the hourly breakdown. Hourly breakdowns do not support unique fields, which are any fields prepended with `unique_*`, `reach` or `frequency`. `reach` and `frequency` fields will return 0 when hourly breakdowns are in use.

**cURL**

```curl
curl -G \-d "fields=impressions" \-d "breakdowns=hourly_stats_aggregated_by_audience_time_zone" \-d "access_token=<ACCESS_TOKEN>" \"https://graph.facebook.com/<API_VERSION>/<AD_CAMPAIGN_ID>/insights"
```

**Show Response**

```json
{
  "data": [
    {
      "impressions": "1883",
      "date_start": "2015-08-01 00:00:00",
      "date_stop": "2015-08-01 01:00:00"
    },
    {
      "impressions": "1883",
      "date_start": "2015-08-01 01:00:00",
      "date_stop": "2015-08-01 02:00:00"
    }
  ],
  "paging": {
    "cursors": {
      "before": "MAZDZD",
      "after": "MQZDZD"
    }
  }}
```

## Action Breakdown

Group results in the `actions` field. You can use the following breakdowns for `action_breakdowns`:

The following are the possible breakdowns that can be supplied into the `action_breakdowns` field.
*   `action_device`
*   `conversion_destination`
*   `matched_persona_id`
*   `matched_persona_name`
*   `signal_source_bucket`
*   `standard_event_content_type`
*   `action_canvas_component_name`
*   `action_carousel_card_id`
*   `action_carousel_card_name`
*   `action_destination`
*   `action_reaction`
*   `action_target_id`
*   `action_type`
*   `action_video_sound`
*   `action_video_type`
*   `is_business_ai_assisted`

If `action_breakdowns` parameter is not specified, `action_type` is implicitly added as the `action_breakdowns`.

**Total Count in `actions`**

The total count (sum) of all values returned in group results (`actions`).

This result may not equal `total_actions` since fields returned in `actions` are hierarchical and include detailed actions not counted.

| | |
| :--- | :--- |
| `total_actions` - 33 | |
|     `page_engagement` - 10 | |
|         `post_engagement` - 10 | |
|             `link_click` - 2 | |
|             `comment` - 3 | |
|             `post_reaction` - 3 | |
|             `like` - 2 | |
|     `mobile_app_install` - 12 | |
|     `app_custom_event` - 11 | |
|         `app_custom_event.fb_mobile_activate_app` - 6 | |
|         `app_custom_event.other` - 5 | |

In this example, `post_engagement` is a sum of `link_click`, `comment`, `like`, and `post_reaction`, where `post_reaction` is the count of all reactions, including likes. The `total_actions` field represents a sum of top-level actions for an object, such as `page_engagement`, `mobile_app_install`, and `app_custom_event`.

## Combining Breakdowns

Due to storage constraints, only some permutations of breakdowns are available. Permutations marked with an asterisk (\*) can be joined with `action_type`, `action_target_id` and `action_destination` which is the name for `action_target_id`.

| Permutation | |
| :--- | :--- |
| `action_converted_product_id` | - Under limited availability for Collaborative Ads. |
| `action_type`\* | |
| `action_type`, `action_converted_product_id` | - Under limited availability for Collaborative Ads. |
| `action_target_id`\* | |
| `action_device`\* | |
| `action_device`, `impression_device`\* | |
| `action_device`, `publisher_platform`\* | |
| `action_device`, `publisher_platform`, `impression_device`\* | |
| `action_device`, `publisher_platform`, `platform_position`\* | |
| `action_device`, `publisher_platform`, `platform_position`, `impression_device`\* | |
| `action_reaction` | |
| `action_type`, `action_reaction` | |
| `age`\* | |
| `gender`\* | |
| `age`, `gender`\* | |
| `app_id`, `skan_conversion_id` | |
| `country`\* | |
| `region`\* | |
| `publisher_platform`\* | |
| `publisher_platform`, `impression_device`\* | |
| `publisher_platform`, `platform_position`\* | |
| `publisher_platform`, `platform_position`, `impression_device`\* | |
| `product_id`\* | |
| `hourly_stats_aggregated_by_advertiser_time_zone`\* | |
| `hourly_stats_aggregated_by_audience_time_zone`\* | |
| `action_carousel_card_id` / `action_carousel_card_name` | |
| `action_carousel_card_id` / `action_carousel_card_name` | |
| `action_carousel_card_id` / `action_carousel_card_name`, `impression_device` | |
| `action_carousel_card_id` / `action_carousel_card_name`, `country` | |
| `action_carousel_card_id` / `action_carousel_card_name`, `age` | |
| `action_carousel_card_id` / `action_carousel_card_name`, `gender` | |
| `action_carousel_card_id` / `action_carousel_card_name`, `age`, `gender` | |

**Limitations**
*   `video_*` fields cannot be requested with any hourly stats breakdowns.
*   `video_avg_time_watched_actions` field cannot be requested with the `region` breakdown.
*   `action_type` is implicitly added as the `action_breakdowns` when `action_breakdowns` parameter is not specified.

# Limits and Best Practices

Beginning June 10, 2025, to improve overall API performance, `reach` will no longer be returned for standard queries that apply breakdowns and use `start_dates` more than 13 months old. (Responses to such requests will omit `reach` and related fields, such as `frequency` and `cpp`.)

To apply breakdowns and still retrieve >13-month-old `reach` values, you can use [asynchronous jobs](#insights-api-asynchronous-jobs) to make up to 10 requests per Ad Account per day. Check the `x-Fb-Ads-Insights-Reach-Throttle` header to monitor how close you are to that rate-limit, and note that once the rate-limit is breached, requests will omit `reach` and related fields.

When the rate limit threshold for reach-related breakdowns is exceeded, the following error message will be returned:

` Reach-related metric breakdowns are unavailable due to rate limit threshold.`

Facebook Insights API provides performance data from Facebook marketing campaigns. To protect system performance and stability, we have protective measures to equally distribute system resources among applications. All policies we describe below are subject to change.

## Data Per Call Limits

We use data-per-call limits to prevent a query from retrieving too much data beyond what the system can handle. There are 2 types of data limits:
*   By number of rows in response, and
*   By number of data points required to compute the total, such as summary row.

These limits apply to both sync and async `/insights` calls, and we return an error:

`error_code = 100,  CodeException (error subcode: 1487534)`

**Best Practices, Data Per Call Limits**

*   Limit your query by limiting the date range or number of ad ids. You can also limit your query to metrics that are necessary, or break it down into multiple queries with each requesting a subset of metrics.
*   Avoid account-level queries that include high cardinality breakdowns such as `action_target_id` or `product_id`, and wider date ranges like `lifetime`.
*   Use `/insights` edge directly with lower level ad objects to retrieve granular data for that level. For example, first use the account-level query to fetch the list of lower-level object ids with `level` and `filtering` parameters. In this example, we fetch all campaigns that recorded some impressions:

    ```curl
    curl -G \-d 'access_token=<ACCESS_TOKEN>' \-d 'level=campaign' \-d 'filtering=[{field:"ad.impressions",operator:"GREATER_THAN",value:0}]' \'https://graph.facebook.com/v2.7/act_<ACCOUNT_ID>/insights'
    ```

    We can then use `/<campaign_id>/insights` with each returned value to query and batch the insights requests for these campaigns in a single call:

    ```curl
    curl \-F 'access_token=<ACCESS_TOKEN>' \-F 'batch=[ \
      { \
        "method": "GET", \
        "relative_url": "v24.0/<CAMPAIGN_ID_1>/insights?fields=impressions,spend,ad_id,adset_id&level=ad" \
      }, \
      { \
        "method": "GET", \
        "relative_url": "v24.0/<CAMPAIGN_ID_2>/insights?fields=impressions,spend,ad_id,adset_id&level=ad" \
      }, \
      { \
        "method": "GET", \
        "relative_url": "v24.0/<CAMPAIGN_ID_3>/insights?fields=impressions,spend,ad_id,adset_id&level=ad" \
      } \
    ]' \'https://graph.facebook.com'
    ```

*   Use `filtering` parameter only to retrieve insights for ad objects with data. The field value specified in `filtering` uses DOT notation to denote the fields under the object. Please note that filtering with `STARTS_WITH` and `CONTAIN` does not change the summary data. In this case, use the `IN` operator. See example of a filtering request:

    ```curl
    curl -G \-d 'access_token=<ACCESS_TOKEN>' \-d 'level=ad' \-d 'filtering=[{field:"ad.impressions",operator:"GREATER_THAN",value:0},]' \'https://graph.facebook.com/v24.0/act_<ACCOUNT_ID>/insights'
    ```

*   Use `date_preset` if possible. Custom date ranges are less efficient to run in our system.
*   Use [batch requests](#batch-requests) for multiple sync calls and [async](#insights-api-asynchronous-jobs) to query for large volume of data to avoid timeouts.
*   Try sync calls first and then use async calls in cases where sync calls timeout
*   Insights refresh every 15 minutes and do not change after 28 days of being reported

## Insights Call Load Limits

Ninety days from the release of v3.3 and effective for all public versions, we change the ad account level rate limit to better reflect the volume of API calls needed. We compute the rate limit quota on your Marketing API access tier and the business owning your app. see [Access and Authentication](#authorization). This change applies to all Ads Insights API endpoints: `GET {adaccount_ID}/insights`, `GET {campaign_ID}/insights`, `GET {adset_ID}/insights`, `GET {ad_ID}/insights`, `POST {adaccount_ID}/insights`, `POST {campaign_ID}/insights`, `POST {adset_ID}/insights`, `POST {ad_ID}/insights`.

We use load limits for optimal reporting experience. We measure API calls for their rate as well as the resources they require. We allow a fixed load limit per application per second. When you exceed that limit, your requests fail.

Check the `x-fb-ads-insights-throttle` HTTP header in every API response to know how close your app is to its limit as well as to estimate how heavy a particular query may be. Insights calls are also subject to the default ad account limits shown in the `x-ad-account-usage` HTTP header. More details can be found here [Marketing API, Best Practices](https://developers.facebook.com/docs/marketing-api/best-practices).

Once an app reaches its limit, the call gets an error response with `error_code = 4`, `CodedException`. You should stay well below your limit. If your app reaches its allowed limits, only a certain percentage of requests go through, depending on the query, and the rate.

We apply rate limiting to each app sending synchronous and asynchronous `/insights` calls combined. The two main parameters limits are counted against are by application, and by ad account.

Here's an example of the HTTP header with an application's accrued score as a percentage of the limits:

`X-FB-Ads-Insights-Throttle: { "app_id_util_pct": 100, "acc_id_util_pct": 10, "ads_api_access_tier": "standard_access" }`

The header `"x-fb-ads-insights-throttle"` is a JSON value containing these info:
*   `app_id_util_pct` — The percentage of allocated capacity for the associated `app_id` has consumed.
*   `acc_id_util_pct` — The percentage of allocated capacity for the associated ad `account_id` has consumed.
*   `ads_api_access_tier` — Tiers allows your app to access the Marketing API. `standard_access` enables lower rate limiting.

## Global Rate Limits

During periods of elevated global load to the `/insights` endpoint, the system can throttle requests to protect the backend. This can occur in rare cases when too many queries of high complexity (large time ranges, complex metrics, and/or high number of ad object IDs) are coming at the same time. This will manifest in an error that looks like this:

`error_code = 4,  CodeException (error subcode: 1504022), error_title: Too many API requests`

During these periods, it is advised to reduce calls, wait a short period, and query again.

## Rate Limits Best Practices

*   Sending several queries at once are more likely to trigger our rate limiting. Try to spread your `/insights` queries by pacing them with wait time in your job.
*   Use the rate information in the HTTP response header to moderate your calls. Add a back-off mechanism to slow down or pause your `/insights` queries when you come close to hitting 100% utility for your application, or for your ad account.
*   We report ad insights data in the ad account's timezone. To retrieve insights data for the associated ad account daily, consider the time of day using the account timezone. This helps pace queries throughout the day.
*   Check the `ads_api_access_tier` that allows you to access the Marketing API. By default, apps are in the `development_access` tier and `standard_access` enables lower rate limiting. To get a higher rate limit and get to the standard tier, you can apply for the "[Advanced Access](https://developers.facebook.com/docs/development/release/access-levels#advanced-access)" to the [Ads Management Standard Access feature](#authorization).

## Insights API Asynchronous Jobs

Fetch stats on many objects and apply filtering and sorting; we made the asynchronous workflow simpler:

1.  Send a `POST` request to `<AD_OBJECT>/insights` endpoint, which responds with the `id` of an Ad Report Run.

    ```json
    {
  "report_run_id": 6023920149050,}
    ```

    Do not store the `report_run_id` for long term use, it expires after 30 days.

2.  Ad Report Runs contain information about this asynchronous job, such as `async_status`. Poll this field until `async_status` is **Job Completed** and `async_percent_completion` is 100.

    ```json
    {
  "id": "6044775548468",
  "account_id": "1010035716096012",
  "time_ref": 1459788928,
  "time_completed": 1459788990,
  "async_status": "Job Completed",
  "async_percent_completion": 100}
    ```

3.  Then you can query `<AD_REPORT_RUN_ID>/insights` edge to fetch the final result.

    ```json
    {
  "data": [
    {
      "impressions": "9708",
      "date_start": "2009-03-28",
      "date_stop": "2016-04-04"
    },
    {
      "impressions": "18841",
      "date_start": "2009-03-28",
      "date_stop": "2016-04-04"
    }
  ],
  "paging": {
    "cursors": {
      "before": "MAZDZD",
      "after": "MQZDZD"
    }
  }}
    ```

This job gets all stats for the account and returns an asynchronous job ID:

```curl
curl \
  -F 'level=campaign' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/<CAMPAIGN_ID>/insights
curl -G \
  -d 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/1000002
curl -G \
  -d 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/1000003/insights
```

| Async Job Status | Description |
| :--- | :--- |
| **Job Not Started** | Job has not started yet. |
| **Job Started** | Job has been started, but is not yet running. |
| **Job Running** | Job has started running. |
| **Job Completed** | Job has successfully completed. |
| **Job Failed** | Job has failed. Review your query and try again. |
| **Job Skipped** | Job has expired and skipped. Please resubmit your job and try again. |

## Export Reports

We provide a convenience endpoint for exporting `<AD_REPORT_RUN_ID>` to a localized human-readable format.

**Note:** this endpoint is not part of our versioned Graph API and therefore does not conform to its breaking-change policy. Scripts and programs should not rely on the format of the result as it may change unexpectedly.

```curl
  curl -G \
  -d 'report_run_id=<AD_REPORT_RUN_ID>' \
  -d 'name=myreport' \
  -d 'format=xls' \'https://www.facebook.com/ads/ads_insights/export_report/'
  
```

| Name | Description |
| :--- | :--- |
| `name` | `string` | Name of downloaded file |
| `format` | `enum{csv,xls}` | Format of file |
| `report_run_id` | `integer` | ID of report to run |
| `access_token` | `string` | Permissions granted by the logged-in user. Provide this to export reports for another user. |

# Tracking and Conversion Specs

**Tracking Specs** are used primarily for monitoring and reporting purposes. They define what user actions should be tracked after they view or click on an ad. These specs help advertisers understand how users interact with the ad content and whether it leads to offsite conversions, app installs, or other key actions. Tracking specs do not directly influence the optimization of ad delivery but are essential for gathering data on user engagement.

**Conversion specs** are used to define the conditions under which a conversion (a desired action by the user) is counted. These specs are crucial for attributing conversions to specific ads and for optimizing ad performance. Conversion specs are used in the optimization process of ad delivery, where the system predicts and improves conversion rates. `Conversion_specs` has been read-only since v2.4. The value is derived from `optimization_goal` from ad set.

## Set Tracking Specs

Use with any bid type and creative combination. To specify tracking specs, you need an additional field in an ad, named `tracking_specs`. The `tracking_specs` field takes arguments identical to [action spec](https://developers.facebook.com/docs/marketing-api/insights/action-breakdowns). To create an ad, see [ad creation](#create-an-ad).

## Default Tracking Specs

There will be a set of default tracking specs for certain objective, bid\_type and creative combinations. If you set any additional new tracking specs, the default tracking specs are still available and won't be overwritten. Except for `APP_INSTALLS` or `OUTCOME_ENGAGEMENT` objectives, the default tracking specs will be overwritten. If you want to have the defaults you must add them to your custom specs.

You can use both string or array notation in the spec such as `'APPLICATION_ID'` or `['APPLICATION_ID']`.
*   `CPM` refers to `billing_event=IMPRESSIONS`, `optimization_goal=IMPRESSIONS`
*   `CPC` refers to `billing_event=CLICKS`, `optimization_goal=CLICKS`
*   `oCPM` refers to `billing_event=IMPRESSIONS`, `optimization_goal` set to an action
*   `CPA` refers to both `billing_event` and `optimization_goal` set to an action

| Objective | Creative, Bid type | Tracking Spec | Description |
| :--- | :--- | :--- | :--- |
| `CANVAS_APP_ENGAGEMENT` | Canvas app engagement ads with `optimization_goal= APP_INSTALLS` | `[{'action.type':'app_engagement','application':'APPLICATION_ID'}, {'action.type':'post_engagement','post':'POST_ID', 'page':'PAGE_ID'}]` | See `app_engagement` and `post_engagement` meta specs |
| `CANVAS_APP_INSTALLS` | Canvas app install ads with optimization not set to `optimization_goal= APP_INSTALLS` | `[{'action.type':'app_engagement','application':'APPLICATION_ID'}, {'action.type':'post_engagement','post':'POST_ID', 'page':'PAGE_ID'}]` | See `app_engagement` and `post_engagement` meta specs |
| `CONVERSIONS` | Page post link and photo ads with `promoted_object` set to a pixel ID and `optimization_goal= OFFSITE_CONVERSIONS` | `{'action.type':'post_engagement','post':'POST_ID', 'page':'PAGE_ID'},{'action.type':'like','page':PAGE_ID}` | Post Engagement, Page Like specs. Number of link clicks on the specific page post if there is only one link, number of engagements on the post, and number of times users generate stories or engage with a page |
| `CONVERSIONS` | Page post link and photo ads with optimization not set to `optimization_goal= OFFSITE_CONVERSIONS` | `{'action.type':'offsite_conversion','fb_pixel':'FACEBOOK_PIXEL_ID'}, {'action.type':{'action.type':'post_engagement','post':'POST_ID', 'page':'PAGE_ID'},{'action.type':'like','page':PAGE_ID}` | Conversions, Post Engagement, Page Like specs. Number of link clicks on the specific page post if there is only one link, number of engagements on the post, and number of times users generate stories or engage with a page |
| `CONVERSIONS` | Domain ads with `promoted_object` set to a pixel ID and `optimization_goal= OFFSITE_CONVERSIONS` | `{'action.type':'link_click','object':'PAGE_ID'}, {'action.type':'like','page':PAGE_ID}` | Page Likes, Link Clicks specs. Number of link clicks on the specific page post if there is only one link, number of engagements on the post, and number of times users generate stories or engage with a page. |
| `CONVERSIONS` | Domain ads with optimization not set to `optimization_goal= OFFSITE_CONVERSIONS` | `{'action.type':'offsite_conversion','fb_pixel':'FACEBOOK_PIXEL_ID'}, {'action.type':'link_click','object':'PAGE_ID'}, {'action.type':'like','page':PAGE_ID}` | Conversion, Page Likes, Link Clicks specs. Number of link clicks on the specific page post if there is only one link, number of engagements on the post, and number of times users generate stories or engage with a page. |
| `EVENT_RESPONSES` | Event ads with optimization not set to `optimization_goal= EVENT_RESPONSES` | `[{'action.type':'rsvp' ,'response':'yes', 'event':'EVENT_ID'},{'action.type':'rsvp' ,'response':'maybe', 'event':'EVENT_ID'},[{'action.type':'rsvp' ,'response':'no', 'event':'EVENT_ID'}]` | Number of RSVPs (yes, maybe, no) to an event. |
| `EVENT_RESPONSES` | Event ads with `optimization_goal= EVENT_RESPONSES` | empty (conversion spec will cover the tracked actions) | Number of RSVPs (yes, maybe, no) to an event. |
| `LINK_CLICKS` | Page post link and photo ads with any bid option | `{'action.type':'post_engagement','post':'POST_ID', 'page':'PAGE_ID'}` | Post Engagement. Number of times an offsite url link, link with particular url domain, offsite link on a page, offsite link on a post was clicked. |
| `LINK_CLICKS` | Domain ads with `optimization_goal= LINK_CLICKS` | `{'action.type':'like','page':PAGE_ID}]` | Page likes. Number of times an offsite url link, link with particular url domain, offsite link on a page, offsite link on a post was clicked. |
| `LINK_CLICKS` | Domain ads with optimization not set to `optimization_goal= LINK_CLICKS` | `{'action.type':'link_click','object':'PAGE_ID'}, {'action.type':'like','page':PAGE_ID}` | Website Click, Page Likes. Number of times an offsite url link, link with particular url domain, offsite link on a page, offsite link on a post was clicked. |
| `MOBILE_APP_ENGAGEMENT` | Mobile app engagement ads with any bid option | `{'action.type':'post_engagement','post':'POST_ID', 'page':'PAGE_ID'}` | For App Engagement Ads you must specify a tracking spec explicitly using the Facebook App ID: `[{'action.type': 'mobile_app_install', 'application': 'APP_ID'}, {'action.type':'app_custom_event','application':APP_ID}]` See `post_engagement` meta spec. Also, number of times an app event occurs. |
| `MOBILE_APP_INSTALLS` | Mobile app install ads with any bid option | `{'action.type':'post_engagement','post':'POST_ID', 'page':'PAGE_ID'}` | For App Install Ads you must specify a tracking spec explicitly using the Facebook App ID: `[{'action.type':'app_custom_event','application':APP_ID}, {'action.type': 'mobile_app_install', 'application': 'APP_ID'}]` See `post_engagement` meta spec. Also, number of times users install the app through a mobile app install ad if there is an iOS/Android version and the number of times an app event occurs. |
| `NONE` | Any ad type | See default tracking specs by ad type | |
| `PAGE_LIKES` | Page Like ads or page post ads with any bid option | `{'action.type':'page_engagement', 'page':'PAGE_ID'}` | See Page Engagement meta spec |
| `POST_ENGAGEMENT` | Page post ads with optimization not set to `optimization_goal= POST_ENGAGEMENT` | `{'action.type':'post_engagement','post':'POST_ID', 'page':'PAGE_ID'}` | See Page Post Engagement meta spec |
| `POST_ENGAGEMENT` | Page post ads with `optimization_goal= POST_ENGAGEMENT` | empty | See Page Post Engagement meta spec |
| `POST_ENGAGEMENT` (testing) | any | `{'action.type':'dwell','post':'POST_ID', 'page':'PAGE_ID'}` | A small percentage of this kind of ads has dwell tracking type, forcusing on users spending at least a min time on the ads. |
| `PRODUCT_ CATALOG_SALES` | Dynamic Product Ads | `{'action.type': 'post_engagement', 'page': PAGE_ID, 'post': POST_ID}` | Number of link clicks on the specific page post if there is only one link, number of engagements on the post, number of times users generate stories or engage with a page. You can specify a product set that is different from the product set in the promoted object but the default is the product set specified in the promoted object. |

## Meta Specs

You can specify multiple types of actions on a single object using a single spec.

| Object | Conversion Spec | Description |
| :--- | :--- | :--- |
| **Application** | `{"action.type":["app_engagement"], "application":["APPLICATION_ID"]}` | Number of times users generate stories `app_story` or engage with content via `app_use`, `app_install`, `credit_spent`. |
| **Page** | `{"action.type":["page_engagement"], "page":["PAGE_ID"]}` | Number of times users perform any of the following actions in the context of the specified page: `checkin`, `comment`, `follow`, `like`, `page post like`, `mention`, `post on page`, `share a post`, `answer a question`. Plus the number of times users perform any of the following actions in the context of the specified page: `click a link`, `view a photo`, `play a native FB video`. |
| **Page Post** | `{"action.type":["post_engagement"], "post":["POST_ID"], "page":["PAGE_ID"]}` | Number of times users perform any of the following actions in the context of the specified post: `comment`, `follow question`, `like`, `share`, `answer question`. Plus the number of times users perform any of the following actions: `click a link`, `page like`, `view photo`, `play a video hosted on Facebook or an inline Youtube video play`. For non embedded videos use `link_click`. |

## Custom Tracking Specs

To define your own tracking specs, use the [action spec framework](https://developers.facebook.com/docs/marketing-api/insights/action-breakdowns). See the [Action Specs, Reference](https://developers.facebook.com/docs/marketing-api/insights/action-breakdowns).

| Action (Object Types) | Description, Tracking spec details | Tracking or Conversion Spec |
| :--- | :--- | :--- |
| `app_custom_event` (application) | Custom event on an aplication. Number of custome events on a mobile app. | `{'action.type':'app_custom_event','application':APP_ID}` |
| `app_install` (application) | Installing an app. Number of installs on canvas or mobile app | `[{'action.type':'app_install','application':APP_ID},{'action.type':'mobile_app_install','application':APP_ID}]` |
| `app_use` (application) | Number of times app was used. | `{'action.type':'app_use','application':APP_ID}` |
| `checkin` (place) | Check in a place. Number of checkins into the place or into any child places of this page. | `{'action.type':'checkin','page': PAGE_ID},{'action.type':'checkin','page.parent:PAGE_ID}` |
| `comment` (post) | Commenting on a post. Number of comments on any or specific page post. | `{'action.type':'comment','post.wall':PAGE_ID},{'action.type':'comment','post':POST_ID,'post.wall':PAGE_ID}` |
| `credit_spend` (application) | Instances of spending credit in an app. | `'action.type':'credit_spent','application':APP_ID}` |
| `follow` (question) | Subscribing to an object. Number of answers or follows to a question. | `{'action.type':'vote', 'question':QUESTION_ID, 'question.creator':PAGE_ID}, {'action.type':'follow', 'question':QUESTION_ID, 'question.creator':PAGE_ID}` |
| `leadgen_quality_conversion` (pixel) | Down funnel lead conversion (CRM) events. | `{'action.type': 'leadgen_quality_conversion', 'fb_pixel': 'FACEBOOK_PIXEL_ID'}, {'action.type': 'leadgen_quality_conversion', 'dataset': 'OFFLINE_EVENT_SET_ID'}` |
| `like` (page, post) | Liking an object. Number of likes on a page or a post. | `{'action.type':'like','page':PAGE_ID},{'action.type':'like','post.wall':PAGE_ID},{'action.type':'like','post':POST_ID,'post.wall':PAGE_ID}` |
| `link_click` (page,post, url, url domain) | Clicking on a link. Number of times an offsite url link, link with particular url domain, offsite link on a page, offsite link on a post was clicked. | `{'action.type':['link_click'],'object':['PAGE_ID']},{'action.type':['link_click'],'object.domain':['URL_DOMAIN']},{'action.type':['link_click'],'post.wall':['PAGE_ID']},{'action.type':['link_click'],'post':['POST_ID'],'post.wall':['PAGE_ID']}` |
| `mention` (page) | Mentioning of a Page. Number of mentions of a page. | `{'action.type':'mention','object':PAGE_ID'}` |
| `offsite_conversion` (pixel) | Number of offsite conversions, and accumulated revenue. | `{'action.type':'offsite_conversion','fb_pixel':'FACEBOOK_PIXEL_ID'}` |
| `photo_view` (page) | Viewing a photo. Number of photo views, video\_plays or link\_clicks of the photos/videos/link-shares of any or specific post on a page. | `{'action.type':'photo_view', 'post.wall':PAGE_ID}{'action.type':'photo_view', 'post':POST_ID,'post.wall':PAGE_ID}` |
| `post` (post) | Sharing a story. Number of users post on a page. | `{'action.type':'post','post.wall':PAGE_ID}` |
| `receive_offer` (offer) | Claiming an Offer. Number of people who claimed a specific offer. | `{'action.type':'receive_offer','offer':OFFER_ID}` |
| `rsvp` (event) | Rsvping into an Event. Number of RSVPs (yes and maybe) to an event. Valid values are yes, maybe, and no. | `{'action.type':'rsvp','event': EVENT_ID},{'action.type':'rsvp','response':'yes','event': EVENT_ID},{'action.type':'rsvp','response':'no','event': EVENT_ID},{'action.type':'rsvp','response':'maybe','event': EVENT_ID}` |
| `tab_view` (page) | Viewing a page tab Number of views of a specific page tab. If you want all tab views just specify the page. | `{'action.type':'tab_view','page.tab.name':'PAGE_TAB_NAME', 'page':PAGE_ID},{'action.type':'tab_view','page':PAGE_ID}` |
| `video_play` (post) | Watching a video. Number of video watches for any or a specific video post on a page. | `{'action.type':'video_play', 'post.wall':PAGE_ID},{'action.type':'video_play', 'post':POST_ID,'post.wall':PAGE_ID}` |

## Examples

**Pixel Tracking**

Track the performance of different pixels in an ad by specifying the tracking pixel in the ad's `tracking_specs` field. For example:

`tracking_specs="[
  {'action.type':'offsite_conversion','fb_pixel':1},
  {'action.type':'offsite_conversion','fb_pixel':2},
  {'action.type':'offsite_conversion','fb_pixel':3}
]"`

This tracks the performance of pixels "1", "2" and "3". If you want to optimize for pixel "1" only, define the `promoted_object` of the parent ad set. This is useful when you want to optimize for CHECKOUT, but also want to track the number of REGISTRATION and ADD\_TO\_CART.

Pixels optimized by specifying the pixel ID in the `promoted_object` are automatically tracked, so you do not need to specify the same pixel in `tracking_specs`.

## Using Conversion Specs

`conversion_specs` is a field for ad. It follows the format `{'action.type':'{ACTION}', ... }` where each action applies to an object. Here are examples of conversion specs for various ad types:

| Ad type | Conversion Spec |
| :--- | :--- |
| Domain ad with social context | `{'action.type':'link_click', 'object':'PAGE_ID'}` |
| Page like ad | `{'action.type':'like', 'page':PAGE_ID}` |
| Page post link ad | `{'action.type':['link_click'], 'post': [POST_ID], 'post.wall':[PAGE_ID]}` |
| All other page post ads | `{'action.type':'post_engagement', 'post':'POST_ID', 'page':'PAGE_ID'}` |
| Event ad | `{'action.type':'rsvp' , 'response':'yes', 'event':'EVENT_ID'}` |
| Offer ad | `{'action.type':'receive_offer', 'offer':OFFER_ID, 'offer.creator':PAGE_ID}` |
| Mobile app install ad | N/A - cannot create such an ad with `NONE` objective. |
| Mobile app engagement ads | N/A - only CPC and CPM bid types are supported |
| Canvas app install ad | N/A - cannot create such an ad with `NONE` objective |
| Canvas app engagment ad | N/A - cannot create such an ad with `NONE` objective |

Some conversion specs contain multiple actions that apply to a single object. These are called meta specs. Below are examples:

| Object | Conversion Spec | Description |
| :--- | :--- | :--- |
| **Page** | `{"action.type":["page_engagement"], "page":["PAGE_ID"]}` | Times someone takes the following actions in a specific page: `checkin`, `comment`, `follow`, `like`, `page post like`, `mention`, `post on page`, `share a post`, `answer a question`. Includes the number of times someone performs these actions in a specific page: `view a photo`, `play a native Facebook video`. |
| **Page Post** | `{"action.type":["post_engagement"], "post":["POST_ID"], "page":["PAGE_ID"]}` | Number of times somone takes one of these actions in a specific post: `comment`, `follow question`, `like`, `share`, `claim offer`, `answer question`. Includes the number of times someone perform these actions: `click a link`, `page like`, `view photo`, `play a video hosted on Facebook or an inline Youtube video play`. |
| **Application** | `{"action.type":["app_engagement"], "application":["APPLICATION_ID"]}` | Number of times someone generate `app_story` or engage with content as `app_use`, `app_install`, or `credit_spent`. |

# Marketing Mix Modeling Breakdown on Insights API

The marketing mix modeling breakdown on the Insights API is a self-service data extraction option you can use in order to export Meta ads data quickly and easily without going through a Meta Marketing Science Partner or third-party agencies and mobile measurement partners.

The API calls are built into the Insights API using the `breakdowns=mmm` parameter. **Note:** It is not supported in combination with other breakdowns or `action_breakdowns`.

The responses contain similar metrics and breakdowns as results from the [Marketing Mix Modeling Data Export](https://www.facebook.com/business/help/902720913926868) in Ads Reporting. Marketing mix modeling data is available only on the ad set level (equivalent to the `level=adset` parameter). Currently, the supported metrics for marketing mix modeling data are `impressions` and `spend`. **Note:** The `spend` metric is estimated. See [Insights API, Estimated and Deprecated Metrics](https://developers.facebook.com/docs/marketing-api/insights/metrics#estimated) for more information.

## Permissions

You will need the following permissions for your ad account:
*   `ads_read`

## Async Export Queries (Preferred)

Running an async export query using the `export_format=csv` parameter results in a downloaded file with column names that match those in Ads Manager.

**Note:** The `time_increment` can be set to 1 day (i.e., 1), otherwise `all_time` will be used by default.

*   **Example request**

    ```curl
    curl GET \
      -F "access_token=<ACCESS_TOKEN>" \ 
      -F "breakdowns=mmm" \ 
      -F “export_format=csv” \
      -F "time_increment=1" \ 
    "https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/insights
    ```

## Retrieve the Marketing Mix Modeling Data

Send a `GET` API call to the `/insights` endpoint with `breakdowns=mmm`.

```curl
curl GET \
  -F "access_token=<ACCESS_TOKEN>" \ 
  -F "breakdowns=mmm" \ 
"https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/insights"
```

**Note:** The Insights API uses default values for parameters not specified in the call. We recommend using the `time_range` and `date_preset` parameters. The granularity of the response can be increased further by using `time_increment`.

*   **Example request**

    TRetrieve daily marketing mix modeling data for the last week:

    ```curl
    curl GET \
      -F "access_token=<ACCESS_TOKEN>" \ 
      -F "breakdowns=mmm" \ 
      -F "date_preset=last_7d" \ 
      -F "time_increment=1” \ 
    "https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/insights"
    ```

For more information about the Insights API and how to onboard to the Marketing API see the [Insights API Quickstart](#insights-api).

## Querying at the Business Manager Level

A common use case is to retrieve marketing mix modeling data for a single Business Manager. This operation isn't directly supported because the Insights API works on the ad account level and below.

To download data for a Business Manager you first need to query available ad accounts with the `/owned_ad_accounts` and `/client_ad_accounts` endpoints. Then iterate over the returned individual ad account IDs to query the marketing mix modeling data for each ad account.

*   **Example requests**

    **Using `/owned_ad_accounts`**

    ```curl
    curl GET \
      -F "access_token=<ACCESS_TOKEN>" \ "https://graph.facebook.com/v24.0/<BUSINESS_ID>/owned_ad_accounts"
    ```

    **Using `/client_ad_accounts`**

    ```curl
    curl GET \
      -F "access_token=<ACCESS_TOKEN>" \ "https://graph.facebook.com/v24.0/<BUSINESS_ID>/client_ad_accounts"
    ```

## Limits and Best Practices

The granularity of marketing mix modeling data causes the response to have a large number of records as well as a substantial record size. This can cause your requests to time out during computation. To mitigate this, decrease the size of the request by using the `time_range` and `filtering` parameters and query for the total time range in sections. To learn more, see [Insights API Limits & Best Practices](#limits-and-best-practices).

Only specific filtering supported for querying the marketing mix modeling data. Only these listed operator combinations are allowed for a field; other usages of filtering will return an error.

| Field | Allowed Operators |
| :--- | :--- |
| `campaign.id` | `IN`, `NOT_IN` |
| `campaign.name` | `CONTAIN`, `NOT_CONTAIN` |
| `adset.id` | `IN`, `NOT_IN` |
| `adset.name` | `CONTAIN`, `NOT_CONTAIN` |
| `country` | `IN` |
| `region` | `IN` |
| `dma` | `IN` |
| `device_platform` | `IN` |
| `publisher_platform` | `IN` |
| `platform_position` | `IN` |

We recommend leveraging the [Marketing Mix Modeling Data Export](https://www.facebook.com/business/help/902720913926868) in Ads Reporting to export historical data if the API is not needed.

Alternatively, you can use the [Insights API Asynchronous Jobs flow](#insights-api-asynchronous-jobs). This creates a job that computes the data in an asynchronous fashion. The endpoint responds with the `id` of an Ad Report Run, which you can query for the job status and to retrieve the computed data. **Note:** Some requests can time out even as an asynchronous job. For more information, see [Insights API Asynchronous Jobs](#insights-api-asynchronous-jobs).

You may encounter slightly different column header mappings and column header ordering than the Marketing Mix Modeling Data Export in Ads Reporting. You also have full flexibility to join the marketing mix modeling breakdown's default data with other tables queried from the API.

| Column Index | Default Column Headers from Marketing Mix Modeling Breakdown |
| :--- | :--- |
| 0 | `account_id` |
| 1 | `campaign_id` |
| 2 | `adset_id` |
| 3 | `date_start` |
| 4 | `date_stop` |
| 5 | `impressions` |
| 6 | `spend` |
| 7 | `country` |
| 8 | `region` |
| 9 | `dma` |
| 10 | `device_platform` |
| 11 | `platform_position` |
| 12 | `publisher_platform` |
| 13 | `creative_media_type` |

# Split Testing

Test different advertising strategies on mutually exclusive audiences to see what works. The API automates audience division, ensures no overlap between groups and helps you to test different variables. Test the impact of different audience types, delivery optimization techniques, ad placements, ad creative, budgets and more. You or your marketing partner can create, initiate and view test results in one place. See [Ad Study Reference](https://developers.facebook.com/docs/marketing-api/reference/ad-study).

## Guidelines

*   Define KPIs with your marketing partner or internal team you create a test.
*   **Confidence Level** Determine this before creating a test. Tests with larger reach, longer schedules, or higher budgets tend to deliver more statistically significant results.
*   Select only one variable per test. This helps determine the most likely cause of difference in performance.
*   **Comparable Test Sizes** When you test for volume metrics, such as number of conversions, you should scale results and audience sizes so both both test sizes are comparable.

## Test Restrictions

*   Max concurrent studies per advertiser: 100
*   Max cells per study: 150
*   Max ad entities per cell: 100

## Variable Testing

While you can test many different types of variables, we recommend you only test one variable at a time. This preserves the scientific integrity of your test, and helps you identify the specific difference that drives better performance.

For example, consider a split test with ad set A and ad set B. If A uses conversions as its delivery optimization method and automatic placements, while B uses link clicks for delivery optimization and custom placements, you cannot determine if the different delivery optimization methods or the different placements drove better performance.

In this example, if both ad sets used conversions for delivery optimization, but had different placements, you know that placement strategy is responsible for differences in performance.

To setup this test at the ad set level:

```curl
curl \-F 'name="new study"' \-F 'description="test creative"' \ -F 'start_time=1478387569' \-F 'end_time=1479597169' \-F 'type=SPLIT_TEST' \-F 'cells=[{name:"Group A",treatment_percentage:50,adsets:[<AD_SET_ID>]},{name:"Group B",treatment_percentage:50,adsets:[<AD_SET_ID>]}]' \-F 'access_token=<ACCESS_TOKEN>' \ https://graph.facebook.com/<API_VERSION>/<BUSINESS_ID>/ad_studies
```

## Testing Strategies

You can test two or more strategies against one another. For example, do ads with the conversion objective have a greater impact on your direct response marketing than a website visits objective? To setup this test at the campaign level:

```curl
curl \-F 'name="new study"' \-F 'description="test creative"' \ -F 'start_time=1478387569' \-F 'end_time=1479597169' \-F 'type=SPLIT_TEST' \-F 'cells=[{name:"Group A",treatment_percentage:50,campaigns:[<CAMPAIGN_ID>]},{name:"Group B",treatment_percentage:50,campaigns:[<CAMPAIGN_ID>]}]' \-F 'access_token=<ACCESS_TOKEN>' \ https://graph.facebook.com/<API_VERSION>/<BUSINESS_ID>/ad_studies
```

## Evaluating Tests

To determine the test that performs the best, chose a strategy or variable that achieves the highest efficiency metric based on your campaign objective. For example, to test the conversions objective, the ad set that achieves the lowest cost-per-action (CPA) performs the best.

Avoid evaluating tests with uneven test group sizes, or significantly different audience sizes. In this case, you should increase the size and results of one split so that it is comparable to you other tests. If your budget is not proportionate to the size of the test group you should consider the volume of outcomes in addition to efficiency.

You should also use an attribution model that makes sense for your business, and to agree upon it before initiating a split test. If your current attribution model needs reevaluation, contact your Facebook representative to run a lift study. This can show the true causal impact of your conversion and brand marketing efforts.

## Budgeting

You can use custom budgets with your split tests, and choose to test different budgets against each other. However, budget directly impacts reach for your test groups. If your test groups result in large differences in reach or audience size, you increase budget to improve your results and make your test comparable.

# Ad Volume

## View Ad Volume for Your Ad Account

View the volume of ads running or in review for your ad accounts. These ads count against the ads limit per page that we enacted in early 2021. Query the number of ads running or in review for a given ad account.

To see the ad volume for your ad account:

```curl
curl -G \
  -d "access_token=<ACCESS_TOKEN>" \
  "https://graph.facebook.com/v<API_VERSION>/act_<AD_ACCOUNT_ID>/ads_volume"
```

**Response**

`{"data":[{"ads_running_or_in_review_count":2}]}`

For information on managing ad volume, see [About Managing Ad Volume](https://www.facebook.com/business/help/113164948792015).

## View Running or In Review Status

To see if an ad is running or in review, we check `effective_status`, then `configured_status`, and the ad account's status:
*   If an ad has `effective_status` of 1 - `active`, we consider it in running or in review state.
*   If an ad has `configured_status` of `active` and `effective_status` of 9 - `pending review` or 17 - `pending processing`, we consider it a running or in review.
*   The ad can be running or in review only if the ad account status is in 1 - `active`, 8 - `pending settlement`, or 9 - `in grace period`.

We also determine if an ad is running or in review based on the ad set's schedule:
*   If start time is before current time, and current time is before end time, then we consider the ad running or in review.
*   If start time is before current time and the ad set has no end time, we also consider it running or in review.

For example, if the ad set is scheduled to run in the future, the ads are not running or in review. However, if the ad set is scheduled to run from now until 3 months from now, we consider the ads running or in review.

If you are using special ads scheduling features, such as day-parting, we consider the ad running or in review the whole day not just for the part of the day when the ad starts running.

## Breakdown by Actors

Use the `show_breakdown_by_actor` field to get a breakdown of ad limits by a specific `actor_id`:

```curl
curl -G \
  -d "show_breakdown_by_actor=true" \
  -d "access_token=<ACCESS_TOKEN>" \
  "https://graph.facebook.com/v<API_VERSION>/act_<AD_ACCOUNT_ID>/ads_volume"
```

**Response**

```json
{
  "data": [
    {
      "ads_running_or_in_review_count": 0,
      "current_account_ads_running_or_in_review_count": 0,
      "actor_id": "<ACTOR_ID_1>",
      "recommendations": [
      ]
    },
    {
      "ads_running_or_in_review_count": 2,
      "current_account_ads_running_or_in_review_count": 2,
      "actor_id": "<ACTOR_ID_2>",
      "recommendations": [
      ]
    }
  ],}
```

Use `page_id` to get the ad limits for a specific page:

```curl
curl -G \
  -d "page_id=<PAGE_ID>" \
  -d "access_token=<ACCESS_TOKEN>" \
  "https://graph.facebook.com/v<API_VERSION>/act_<AD_ACCOUNT_ID>/ads_volume"
```

**Response**

```json
{
  "data": [
    {
      "ads_running_or_in_review_count": 2,
      "current_account_ads_running_or_in_review_count": 2,
      "actor_id": "<ACTOR_ID>",
      "recommendations": [
      ]
    }
  ],}
```

## Supported Fields

| Field | Description |
| :--- | :--- |
| `actor_id` | Actor that the limit is enforced against. Currently, this is always the page ID. |
| `ads_running_or_in_review_count` | Number of ads running or in review for a specific actor. |
| `current_account_ads_running_or_in_review_count` | Number of ads running or in review within the current ad account on a specific actor. |
| `actor_name` | Actor that the ads volume aggregated on. Currently, it can only be page name. |
| `ad_limit_scope_business` | Used in cases where an ad account belongs to a Business Manager and the ad account is subject to Business Manager level ad limits. |
| | This field has the business that defines the ad limits for an ad account. |
| `ad_limit_scope_business_manager_id` | Used in cases where an ad account belongs to a Business Manager and the ad account is subject to Business Manager level ad limits. |
| | This field has the Business Manager ID for a business that defines the ad limits for an ad account. |
| `ad_limit_set_by_page_admin` | Ad limit set by a page admin for the business that owns the ad account. |
| `ads_running_or_in_review_count_subject_to_limit_set_by_page` | Number of ads running or in review for a group of ad accounts. In this case, the group can contain ad accounts that belong to a business or individual ad accounts. |
| | If ad limit is not set by the page owner, it returns null. |
| | If ad limit is set by the page owner, it returns the number of ads running or in review for the group of ad accounts. |
| `future_limit_activation_date` | Starting date of ad limit that will be effective in the future. |
| `future_limit_on_ads_running_or_in_review` | Ad limit that will be effective in the future. This limit is related to the number of ads running or in review for the given actor. |
| `limit_on_ads_running_or_in_review` | Current ad limit for a given actor ID. This limit is related to the number of ads running or in review. |
| `recommendations` | Recommendations to help reduce the ad volume. Currently, supported values are: |
| | `zero_impression` |
| | `learning_limited` |
| | `top_campaigns_with_ads_under_cap` |
| | `top_adsets_with_ads_under_cap` |
| | More information can be found in the [Business Help Center](https://www.facebook.com/business/help/113164948792015). |

## Parameters

| Field | Description |
| :--- | :--- |
| `recommendation_type` | Type of the recommendation to help reduce the ad volume. Currently, supported values are: |
| | `zero_impression` |
| | `learning_limited` |
| | `top_campaigns_with_ads_under_cap` |
| | `top_adsets_with_ads_under_cap` |
| | See [more information about managing ad volume](https://www.facebook.com/business/help/113164948792015). |

## Best Practices

**Ad Changes Triggering Ad Reviews**

If you make any changes to the following scenarios, your ad will be triggered for review:
*   Any changes to your creative (image, text, link, video, and so on)
*   Any changes to targeting
*   Any changes of optimization goals and billing events may also trigger review

**Note:** Changes to bid amount, budget, and ad set schedule will not have any effect on the review status.

Additionally, if an ad enters Ad Review with the run status of "Paused", then it will remain Paused upon exiting Ad Review. Otherwise, the ad will be considered Active and ready to deliver.

## Pagination

For paging response data, see the [Graph API Pagination](#paginated-results).

## User Information

You should store user IDs, session keys, and the ads account ID so it is easy to programmatically access them and keep them together. This is important because any calls made with an account ID belonging to one user and the session key for another user will fail with a permissions error. Any storages of user data must be done in compliance with [Facebook Platform Terms](https://developers.facebook.com/policy) and [Developer Policies](https://developers.facebook.com/policy/details).

## Suggested Bids

Run frequent reports on your campaigns, as suggested bids change dynamically in response to bidding by competitors using similar targeting. Bid suggestions get updated within a few hours, depending upon the bidding of competitors.

## Batch Requests

Make multiple requests to the API with a single call, see:
*   [Multiple Requests](#batch-requests-2)
*   [Batch Requests](#batch-requests-2)

You can also query for multiple objects by ID as follows:

`https://graph.facebook.com/<API_VERSION>?ids=[id1,id2]`

To query for a specific field:

`https://graph.facebook.com/<API_VERSION>?ids=[id1,id2]&amp;fields=field1,field2`

## Check Data Changes using ETags

Quickly check if the response to a request has changed since you last made it, see:
*   [ETags blog](https://developers.facebook.com/blog/post/2012/03/14/using-etags-with-the-graph-api/)
*   [ETags Reference](#etags)

## Object Archive and Delete Status

Ad objects have two types of delete states: archived and deleted. You can query both archived and deleted objects with the object id. However, we do not return deleted objects if you request it from another object's edge.

You can have up to 5000 archived objects at any time. You should move ad objects from archived states to deleted states if you no longer need to retrieve them via edges. To learn how states work and for sample calls see [Storing Ad Objects](#manage-your-ad-object's-status).

## Viewing Errors

People make mistakes and try to create ads that are not accepted, [Error Codes](#error-codes) provide reasons an API call failed. You should share some form of the error to users so they can fix their ads.

## Facebook Marketing Developer Community Group

Join [Facebook Marketing Developer Community group](https://www.facebook.com/groups/marketingapidevelopers/) on Facebook for news and update on for Marketing API. We post items from the [Marketing API blog](https://developers.facebook.com/blog/marketing-api) to the group.

## Testing

*   [Sandbox mode](https://developers.facebook.com/docs/marketing-api/guides/testing#sandbox) is a testing environment to read and write Marketing API calls without delivering actual ads. See [Sandbox Mode for Developers](https://developers.facebook.com/docs/marketing-api/guides/testing)
*   Try API calls with [Graph API Explorer](https://developers.facebook.com/tools/explorer). You can try any API call you would like to make to the Marketing API, see [blog post](https://developers.facebook.com/blog/post/2012/05/17/introducing-the-new-graph-api-explorer/). Select your app in **App**, and grant your app `ads_management` or `ads_read` permission in extended permissions when you create an access token. Use `ads_read` if you only need Ads Insights API access for reporting. Use `ads_management` to read and update ads in an account.
*   For development and basic access, configure a list of ad accounts your app is able to make API calls for, see [account list](https://developers.facebook.com/docs/apps/review/account-list).
*   You can use sandbox mode to demonstrate your app for app review. However in sandbox mode you cannot create ads or ad creative. Therefore you should use hard coded ad IDs and ad creative IDs to demonstrate your use of our API for app review.

**Basic Criteria**

*   Demonstrate value beyond Facebook's core solutions, such as Facebook Ads Manager.

*   Focus on business objectives, such as increase in sales. Facebook business objectives can be found [here](https://www.facebook.com/business/goals).

**Policies**

Understand the API policies; Facebook has the right to audit your activity anytime:
*   [Platform Terms](https://developers.facebook.com/policy)
*   [Developer Policies](https://developers.facebook.com/policy/details)
*   [Promotion Policies](https://www.facebook.com/policies/pages_groups_events)
*   [Data Use Policy](https://www.facebook.com/about/privacy/update)
*   [Statement of Rights and Responsibilities](https://www.facebook.com/legal/terms)
*   [Advertising Guidelines](https://www.facebook.com/policies/ads)

Be ready to adapt quickly to changes. Most changes are versioned and change windows are 90 days, ongoing.

In [Statement of Rights and Responsibilities](https://www.facebook.com/legal/terms), you are financially and operationally responsible for your application, its contents, and your use of the Meta Platform and the Ads API. You should manage your app's stability and potential bugs.

# Paginated Results

We cover the basics of Graph API terminology and structure in the [Graph API overview](https://developers.facebook.com/docs/graph-api/overview). This document goes into more detail about the results from your API requests.

## Traversing Paged Results

When making an API request to a node or edge, you usually don't receive all of the results of that request in a single response. This is because some responses could contain thousands of objects so most responses are paginated by default.

## Cursor-based Pagination

Cursor-based pagination is the most efficient method of paging and should always be used when possible. A cursor refers to a random string of characters which marks a specific item in a list of data. The cursor will always point to the item, however it will be invalidated if the item is deleted or removed. Therefore, your app shouldn't store cursors or assume that they will be valid in the future.

When reading an edge that supports cursor pagination, you see the following JSON response:

```json
{
  "data": [
     ... Endpoint data is here
  ],
  "paging": {
    "cursors": {
      "after": "MTAxNTExOTQ1MjAwNzI5NDE=",
      "before": "NDMyNzQyODI3OTQw"
    },
    "previous": "https://graph.facebook.com/{your-user-id}/albums?limit=25&before=NDMyNzQyODI3OTQw"
    "next": "https://graph.facebook.com/{your-user-id}/albums?limit=25&after=MTAxNTExOTQ1MjAwNzI5NDE="
  }}
```

A cursor-paginated edge supports the following parameters:
*   **before**: This is the cursor that points to the start of the page of data that has been returned.
*   **after**: This is the cursor that points to the end of the page of data that has been returned.
*   **limit**: This is the maximum number of objects that may be returned. A query may return fewer than the value of `limit` due to filtering. Do not depend on the number of results being fewer than the `limit` value to indicate that your query reached the end of the list of data, use the absence of `next` instead as described below. For example, if you set `limit` to 10 and 9 results are returned, there may be more data available, but one item was removed due to privacy filtering. Some edges may also have a maximum on the `limit` value for performance reasons. In all cases, the API returns the correct pagination links.
*   **next**: The Graph API endpoint that will return the next page of data. If not included, this is the last page of data. Due to how pagination works with visibility and privacy, it is possible that a page may be empty but contain a `next` paging link. Stop paging when the `next` link no longer appears.
*   **previous**: The Graph API endpoint that will return the previous page of data. If not included, this is the first page of data.

**Don't store cursors**. Cursors can quickly become invalid if items are added or deleted.

## Time-based Pagination

Time pagination is used to navigate through results data using Unix timestamps which point to specific times in a list of data.

When using an endpoint that uses time-based pagination, you see the following JSON response:

```json
{
  "data": [
     ... Endpoint data is here
  ],
  "paging": {
    "previous": "https://graph.facebook.com/{your-user-id}/feed?limit=25&since=1364849754",
    "next": "https://graph.facebook.com/{your-user-id}/feed?limit=25&until=1364587774"
  }}
```

A time-paginated edge supports the following parameters:
*   **until**: A Unix timestamp or `strtotime` data value that points to the end of the range of time-based data.
*   **since**: A Unix timestamp or `strtotime` data value that points to the start of the range of time-based data.
*   **limit**: This is the maximum number of objects that may be returned. A query may return fewer than the value of `limit` due to filtering. Do not depend on the number of results being fewer than the `limit` value to indicate your query reached the end of the list of data, use the absence of `next` instead as described below. For example, if you set `limit` to 10 and 9 results are returned, there may be more data available, but one item was removed due to privacy filtering. Some edges may also have a maximum on the `limit` value for performance reasons. In all cases, the API returns the correct pagination links.
*   **next**: The Graph API endpoint that will return the next page of data.
*   **previous**: The Graph API endpoint that will return the previous page of data.

For consistent results, specify both `since` and `until` parameters. Also, it is recommended that the time difference is a maximum of 6 months.

## Offset-based Pagination

Offset pagination can be used when you do not care about chronology and just want a specific number of objects returned. Only use this if the edge does not support cursor or time-based pagination.

An offset-paginated edge supports the following parameters:
*   **offset**: This offsets the start of each page by the number specified.
*   **limit**: This is the maximum number of objects that may be returned. A query may return fewer than the value of `limit` due to filtering. Do not depend on the number of results being fewer than the `limit` value to indicate that your query reached the end of the list of data, use the absence of `next` instead as described below. For example, if you set `limit` to 10 and 9 results are returned, there may be more data available, but one item was removed due to privacy filtering. Some edges may also have a maximum on the `limit` value for performance reasons. In all cases, the API returns the correct pagination links.
*   **next**: The Graph API endpoint that will return the next page of data. If not included, this is the last page of data. Due to how pagination works with visibility and privacy, it is possible that a page may be empty but contain a `next` paging link. Stop paging when the `next` link no longer appears.
*   **previous**: The Graph API endpoint that will return the previous page of data. If not included, this is the first page of data.

Note that if new objects are added to the list of items being paged, the contents of each offset-based page will
change.

Offset based pagination is not supported for all API calls. To get consistent results, we recommend you to paginate using the `previous/next` links we return in the response.

For objects that have many items returned, such as comments which can number in the tens of thousands, you may encounter limits while paging. The API will return an error when your app has reached the cursor limit:

```json
{
  "error": {
    "message": "(#100) The After Cursor specified exceeds the max limit supported by this endpoint",
    "type": "OAuthException",
    "code": 100
  }}
```

## Next Steps

Now that you are more familiar with the Graph API visit our [Graph Explorer Tool Guide](https://developers.facebook.com/docs/graph-api/explorer) to explore the Graph without writing code, [Common Uses](https://developers.facebook.com/docs/graph-api/guides/common-uses) to view the most common tasks performed, and the [SDKs](https://developers.facebook.com/docs/sdks) available.

# Rate Limits

A rate limit is the number of API calls an app or user can make within a given time period. If this limit is exceeded or if CPU or total time limits are exceeded, the app or user may be throttled. API requests made by a throttled user or app will fail.

All API requests are subject to rate limits. Graph API requests are subject to Platform Rate Limits, while Marketing API and Instagram Platform requests are subject to Business Use Case (BUC) Rate Limits.

Pages API requests are subject to either Platform or BUC Rate Limits, depending on the token used in the request; requests made with application or user access tokens are subject to Platform Rate Limits, while requests made with system user or page access tokens are subject to Business Use Case Rate Limits.

Real time rate limit usage statistics are described in headers that are included with most API responses once enough calls have been made to an endpoint. Platform Rate Limit usage statistics are also displayed in the App Dashboard. Once a rate limit is reached, any subsequent requests made by your app will fail and the API will return an error code until enough time has passed for the call count to drop below the limit.

If both Platform and Business Use Case rate limits can be applied to a request, BUC rate limits will be applied.

## Platform Rate Limits

Platform Rate Limits are tracked on an individual application or user level, depending on the type of token used in the request.

**Applications**

Graph API requests made with an application access token are counted against that app’s rate limit. An app’s call count is the number of calls it can make during a rolling one hour window and is calculated as follows:

$$
\text{Calls within one hour} = 200 \times \text{Number of Users}
$$

The **Number of Users** is based on the number of unique daily active users an app has. In cases where there are slow periods of daily usage, such as if your app has high activity on weekends but low activity over weekdays, the weekly and monthly active Users are used to calculate the number of Users for your app. Apps with high daily engagement will have higher rate limits than apps with low daily engagement, regardless of the actual number of app installs.

Note that this is not a per User limit but a limit on calls made by your app. Any individual User can make more than 200 calls per hour using your app, as long as the total calls from your app does not exceed the app maximum. For example, if your app has 100 Users, your app can make 20,000 calls per hour. However, your top ten most engaged Users could make 19,000 of those calls.

**Users**

Graph API requests made with a user access token are counted against that user’s call count. A user’s call count is the number of calls a user can make during a rolling one hour window. Due to privacy concerns, we do not reveal actual call count values for users.

Note that a user’s call count can be spread over multiple apps. For example, a user could make X calls through App1 and Y calls through App2. If X+Y exceeds the user’s call count that user will be rate limited. This does not necessarily mean that any app is doing something wrong; it could be that the user is using multiple apps or is misusing the API.

**Headers**

Endpoints that receive enough requests from your app will include a `X-App-Usage` or `X-Ad-Account-Usage` (for v3.3 and older Ads API calls) HTTP header in their responses. The header will contain a JSON-formatted string that describes current application rate limit usage.

| Header Contents | |
| :--- | :--- |
| **Key** | **Value Description** |
| `call_count` | A whole number expressing the percentage of calls made by your app over a rolling one hour period. |
| `total_cputime` | A whole number expressing the percentage of CPU time allotted for query processing. |
| `total_time` | A whole number expressing the percentage of total time allotted for query processing. |

| X-Ad-Account-Usage Header Contents | |
| :--- | :--- |
| **Key** | **Value Description** |
| `acc_id_util_pct` | The percentage of calls made for this ad account before the rate limit is reached. |
| `reset_time_duration` | Time duration (in seconds) it takes to reset the current rate limit to 0. |
| `ads_api_access_tier` | Tiers allows your app to access the Marketing API. By default, apps are in the `development_access` tier. `Standard_access` enables lower rate limiting. To get a higher rate limit and get to the standard tier, you can apply for the "[Advanced Access](#authorization)" to the [Ads Management Standard Access feature](#authorization). |

*   **Total CPU Time**

    The amount of CPU time the request takes to process. When `total_cputime` reaches 100, calls may be throttled.

*   **Total Time**

    The length of time the request takes to process. When `total_time` reaches 100, calls may be throttled.

*   **Sample X-App-Usage Header Value**

    ```
    x-app-usage: {
        "call_count": 28,         //Percentage of calls made 
        "total_time": 25,         //Percentage of total time
        "total_cputime": 25       //Percentage of total CPU time}
    ```

*   **Sample X-Ad-Account-Usage Header Value**

    ```
    x-ad-account-usage: {
        "acc_id_util_pct": 9.67,   //Percentage of calls made for this ad account.
        "reset_time_duration": 100,   //Time duration (in seconds) it takes to reset the current rate limit score.
        "ads_api_access_tier": 'standard_access'   //Tiers allows your app to access the Marketing API. standard_access enables lower rate limiting.}
    ```

**Dashboard**

The app dashboard displays the number of rate limited app users, the app’s current Application Rate Limits usage percentage, and displays average activity for the past 7 days. In the **Application Rate Limit** card, click **View Details** and hover over any point on the graph to see more details about usage for that particular moment. Because usage depends on call volume, this graph may not show a full 7 days. Apps with a higher volume of calls will show more days.

**Error Codes**

When an app or user has reached their rate limit, requests made by that app or user will fill and the API will respond with an error code.

| Throttle Error Codes | |
| :--- | :--- |
| **Error Code** | **Description** |
| 4 | Indicates that the app whose token is being used in the request has reached its rate limit. |
| 17 | Indicates that the User whose token is being used in the request has reached their rate limit. |
| 17 with subcode 2446079 | Indicates that the token being used in the Ads API v3.3 or older request has reached its rate limit. |
| 32 | Indicates that the User or app whose token is being used in the Pages API request has reached its rate limit. |
| 613 | Indicates that a custom rate limit has been reached. To help resolving this issue, visit the supporting docs for the specific API you are calling for custom rate limits that may be applied. |
| 613 with subcode 1996 | Indicates that we have noticed inconsistent behavior in the API request volume of your app. If you have made any recent changes that affect the number of API requests, you may be encountering this error. |

*   **Sample Response**

    ```json
    {
      "error": {
        "message": "(#32) Page request limit reached",
        "type": "OAuthException",
        "code": 32,
        "fbtrace_id": "Fz54k3GZrio"
      }}
    ```

| Facebook Stability Throttle Codes | |
| :--- | :--- |
| **Error Code** | **Description** |
| `throttled` | Whether the query is throttled or not. Values: `True`, `False` |
| `backend_qps` | First throttling factor `backend_qps`. Supported values: |
| | `actual_score`—Actual `backend_qps` of this app. Value: 8 |
| | `limit`—`backend_qps` limit of this app. Value: 5 |
| | `more_info`—Queries need a large number of backend requests to handle. We suggest to send fewer queries or simplify queries with narrower time ranges, fewer object IDs, and so on. |
| `complexity_score` | Second throttling factor `complexity_score`. Supported values: |
| | `actual_score`—Actual `complexity_score` of this app. Value: 0.1 |
| | `limit`—`complexity_score` limit of this app. Value: 0.01 |
| | `more_info`—High `complexity_score` means your queries are very complex and request large amounts of data. We suggest to simplify queries with shorter time ranges, fewer object IDs, metrics or breakdowns, and so on. Split large, complex queries into multiple smaller queries and space them out. |

**Best Practices**

*   When the limit has been reached, stop making API calls. Continuing to make calls will continue to increase your call count, which will increase the time before calls will be successful again.
*   Spread out queries evenly to avoid traffic spikes.
*   Use filters to limit the data response size and avoid calls that request overlapping data.
*   Check the `X-App-Usage` HTTP header to see how close your app is to its limit and when you can resume making calls when the limit has been reached.
*   If Users are being throttled, be sure your app is not the cause. Reduce the user’s calls or spread the user’s calls more evenly over time.

## Business Use Case Rate Limits

All Marketing API requests, and Pages API requests made with a system or page access token, are subject to Business Use Case (BUC) Rate Limits, and depend on the endpoints you are querying.

For Marketing API, the rate limit is applied to the ad account across the same Business Use Case. For example, all endpoints with the Ads Management business use case will share the total quota within the same ad account. If a certain endpoint makes a lot of API requests and causes throttling, other endpoints configured with the same business use case will also receive rate limiting errors. The quota depends on the app's Marketing API Access Tier. The standard access Marketing API tier will have more quotas than the development access Marketing API tier. By default, an new app should be on the development tier. If you need to upgrade to get more rate limiting quota, upgrade to [Advanced Access of Ads Management Standard Access](#authorization) in [App Review](https://developers.facebook.com/docs/apps/review).

| Business Use Cases | |
| :--- | :--- |
| [Ad Insights](#ad-insights) | |
| [Ads Management](#ads-management) | |
| [Catalog](#catalog) | |
| [Custom Audience](#custom-audience) | |
| [Instagram Platform](#instagram-platform) | |
| [Lead Generation](#lead-generation) | |
| [Messenger](#messenger) | |
| [Pages](#pages) | |
| [Spark AR Commerce Effect Management](#spark-ar-commerce-effect-management) | |
| [WhatsApp Business Management API](#whatsapp-business-management-api) | |

**Ads Insights**

Requests made by your app to the Ads Insights API are counted against the app's rate limit metrics such as call count, total CPU time and total time. An app's call count is the number of calls it can make during a rolling one hour window and is calculated as follows:

*   For apps with **Standard Access** to the [Ads Management Standard Access feature](#authorization):

$$
\text{Calls within one hour} = 600 + 400 \times \text{Number of Active ads} - 0.001 \times \text{User Errors}
$$

*   For apps with **Advanced Access** to the [Ads Management Standard Access feature](#authorization):

$$
\text{Calls within one hour} = 190000 + 400 \times \text{Number of Active ads} - 0.001 \times \text{User Errors}
$$

The **Number of Active ads** is the number of ads currently running per ad account. **User Errors** is the number of errors received when calling the API. To get a higher rate limit, you can apply for the [Ads Management Standard Access feature](#authorization).

Rate limiting may also be subject to the total CPU time and total wall time during a rolling one hour window. For more details, check the HTTP X-Business-Use-Case header `total_cputime` and `total_time`.

If you are receiving rate limiting errors, you can also refer to `estimated_time_to_regain_access` in the X-Business-Use-Case header for the estimated blocking time.

**Ads Management**

Requests made by your app to the Ads Management API are counted against the app's rate limit metrics such as call count, total CPU time and total time. An app's call count is the number of calls it can make during a rolling one hour window and is calculated as follows:

*   For apps with **Standard Access** to the [Ads Management Standard Access feature](#authorization):

$$
\text{Calls within one hour} = 300 + 40 \times \text{Number of Active ads}
$$

*   For apps with **Advanced Access** to the [Ads Management Standard Access feature](#authorization):

$$
\text{Calls within one hour} = 100000 + 40 \times \text{Number of Active ads}
$$

The **Number of Active Ads** is the number of ads for each ad account.

Rate limiting may also be subject to the total CPU time and total wall time during a rolling one hour window. For more details, check the HTTP X-Business-Use-Case header `total_cputime` and `total_time`.

If you are receiving rate limiting errors, you can also refer to `estimated_time_to_regain_access` in the X-Business-Use-Case header for the estimated blocking time.

**Catalog**

*   **Catalog Batch**

    Requests made by your app are counted against the rate limit metrics such as call count, total CPU time and total time your app can make in a rolling one minute period per each catalog ID and is calculated as follows:

$$
\text{Calls within one minute} = 8 + 8 \times \log_{2}(\text{DA impressions} + \text{PDP visits})
$$

The **DA impressions** and **PDP visits** are a number of dynamic ads impressions and product detail page visits of the individual catalog with intent in the last 28 days. The more users see products from your catalogs, the more call quota is allocated.

| Type of Call | Endpoint |
| :--- | :--- |
| `POST` | `/{catalog_id}/items_batch` |
| `POST` | `/{catalog_id}/localized_items_batch` |
| `POST` | `/{catalog_id}/batch` |

*   **Catalog Management**

    Requests made by your app are counted against the number of calls your app can make in a rolling one hour period per each catalog ID and is calculated as follows:

$$
\text{Calls within one hour} = 20,000 + 20,000 \times \log_{2}(\text{DA impressions} + \text{PDP visits})
$$

The **DA impressions** and **PDP visits** are a number of dynamic ads impressions and product detail page visits of the business (on all catalogs) with intent in the last 28d. The more users see products from your catalogs, the more call quota is allocated.

This formula is applied on various catalog endpoints.

For more information on how to get your current rate usage, see [Headers](#headers).

Rate limiting may also be subject to the total CPU time and total wall time during a rolling one hour window. For more details, check the HTTP X-Business-Use-Case header `total_cputime` and `total_time`.

If you are receiving rate limiting errors, you can also refer to `estimated_time_to_regain_access` in the X-Business-Use-Case header for the estimated blocking time.

**Custom Audience**

Requests made by your app to the Custom Audience API are counted against the app's rate limit metrics such as call count, total CPU time and total time. An app's call count is the number of calls it can make during a rolling one hour window and is calculated as follows but will never exceed 700000:

*   For apps with **Standard Access** to the [Ads Management Standard Access feature](#authorization):

$$
\text{Calls within one hour} = 5000 + 40 \times \text{Number of Active Custom Audiences}
$$

*   For apps with **Advanced Access** to the [Ads Management Standard Access feature](#authorization):

$$
\text{Calls within one hour} = 190000 + 40 \times \text{Number of Active Custom Audiences}
$$

The **Number of Active Custom Audiences** is the number of active custom audiences for each ad account.

Rate limiting may also be subject to the total CPU time and total wall time during a rolling one hour window. For more details, check the HTTP X-Business-Use-Case header `total_cputime` and `total_time`.

If you are receiving rate limiting errors, you can also refer to `estimated_time_to_regain_access` in the X-Business-Use-Case header for the estimated blocking time.

**Instagram Platform**

Calls to the Instagram Platform endpoints, excluding messaging, are counted against the calling app's call count. An app's call count is unique for each app and app user pair, and is the number of calls the app has made in a rolling 24 hour window. It is calculated as follows:

$$
\text{Calls within 24 hours} = 4800 \times \text{Number of Impressions}
$$

The **Number of Impressions** is the number of times any content from the app user's Instagram professional account has entered a person's screen within the last 24 hours.

**Notes**
*   [Business Discovery](https://developers.facebook.com/docs/instagram-api/reference/ig-user/business_discovery) and [Hashtag Search API](https://developers.facebook.com/docs/instagram-api/guides/hashtag-search-api) are subject to [Platform Rate Limits](#platform-rate-limits).

*   **Messaging Rate Limits**

    Calls to the Instagram messaging endpoints are counted against the number of calls your app can make per Instagram professional account and the API used.

    | Conversations API | |
    | :--- | :--- |
    | Your app can make 2 calls per second per Instagram professional account. | |
    | Private Replies API | |
    | Your app can make 100 calls per second per Instagram professional account for private replies to Instagram Live comments | |
    | Your app can make 750 calls per hour per Instagram professional account for private replies to comments on Instagram posts and reels | |
    | Send API | |
    | Your app can make 100 calls per second per Instagram professional account for messages that contain text, links, reactions, and stickers | |
    | Your app can make 10 calls per second per Instagram professional account for messages that contain audio or video content | |

**Lead Generation**

Requests made by your app to the LeadGen API are counted against the app’s call count. An app’s call count is the number of calls it can make during a rolling 24 hour window and is calculated as follows:

$$
\text{Calls within 24 hours} = 4800 \times \text{Leads Generated}
$$

The **Number of Leads Generated** is the number of leads generated per Page for this Ad Account over the past 90 days.

**Messenger Platform**

Rate limits for the Messenger Platform are dependent on the API used and, in some instances, the message content.

*   **Messenger API**

    Requests made by your app are counted against the number of calls your app can make in a rolling 24 hour period and is calculated as follows:

$$
\text{Calls within 24 hours} = 200 \times \text{Number of Engaged Users}
$$

The **Number of Engaged Users** is the number of people the business can message via Messenger.

*   **Conversations API**

    Your app can make 2 calls per second per Facebook Page

*   **Send API**

    *   Your app can make 300 calls per second per Facebook Page for messages that contain text, links, reactions, and stickers
    *   Your app can make 10 calls per second per Facebook Page account for messages that contain audio or video content
    *   Your app may be rate limited if too many messages are being sent to a single thread

*   **Private Replies API**

    *   Your app can make 750 calls per hour per Facebook Page for private replies to comments on Instagram posts and reels

*   **Messenger API for Instagram**

    Requests made by your app are counted against the number of calls your app can make per Instagram professional account and the API used.

    *   **Conversations API**

        Your app can make 2 calls per second per Instagram professional account

    *   **Send API**

        *   Your app can make 300 calls per second per Instagram professional account for messages that contain text, links, reactions, and stickers
        *   Your app can make 10 calls per second per Instagram professional account for messages that contain audio or video content
        *   Your app may be rate limited if too many messages are being sent to a single thread

    *   **Private Replies API**

        *   Your app can make 100 calls per second per Instagram professional account for private replies to Instagram Live comments
        *   Your app can make 750 calls per hour per Instagram professional account for private replies to comments on Instagram posts and reels

**Pages**

The Page Rate Limits may use either the Platform or BUC rate limit logic depending on the type of token used. Any Pages API calls that are made using a Page or system user access token use the rate limit calculation below. Any calls made with application or user access tokens are subject to application or User rate limits.

Requests made by your app to the Pages API using a Page access token or system User access token are counted against the app’s call count. An app’s call count is the number of calls it can make during a rolling 24 hour window and is calculated as follows:

$$
\text{Calls within 24 hours} = 4800 \times \text{Number of Engaged Users}
$$

The **Number of Engaged Users** is the number of Users who engaged with the Page per 24 hours.

Requests made by your app to the Pages API using a User access token or App access token follow the [Platform Rate Limit](#platform-rate-limits) logic.

To avoid rate limiting issues when using the Page Public Access Content feature, using a system user access token is recommended.

**Spark AR Commerce Effect Management**

Requests made by your app to any Commerce endpoints are counted against the app’s call count. An app’s call count is the number of calls it can make during a rolling one hour window and is calculated as follows:

$$
\text{Calls within one hour} = 200 + 40 \times \text{Number of Catalogs}
$$

The **Number of Catalogs** is the total number of catalogs across all commerce accounts managed by your app.

**Threads**

Calls to the Threads API are counted against the calling app's call count. An app's call count is unique for each app and app user pair and is the number of calls the app has made in a rolling 24-hour window. It is calculated as follows:

$$
\text{Calls within 24 hours} = 4800 \times \text{Number of Impressions}
$$

The **Number of Impressions** is the number of times any content from the app user's Threads account has entered a person's screen within the last 24 hours. Rate limiting may also be subject to total CPU time per day:
*   $720000 \times \text{number\_of\_impressions}$ for `total_cputime`
*   $2880000 \times \text{Number of Impressions}$ for `total_time`

**Note:** The minimum value for impressions is 10 (so if the impressions is less than 10 we default to 10).

**WhatsApp Business Management API**

Requests made by your app on your WhatsApp Business Account (WABA) are counted against your app's request count. An app's request count is the number of requests it can make during a rolling one hour.

For the following endpoints, your app can make 200 requests per hour, per app, per WABA, by default. For active WABAs with at least one registered phone number, your app can make 5000 requests per hour, per app, per active WABA.

| Type of request | Endpoint |
| :--- | :--- |
| `GET` | `/<WHATSAPP_BUSINESS_ACCOUNT_ID>` |
| `GET`, `POST`, and `DELETE` | `/<WHATSAPP_BUSINESS_ACCOUNT_ID>/assigned_users` |
| `GET` | `/<WHATSAPP_BUSINESS_ACCOUNT_ID>/phone_numbers` |
| `GET`, `POST`, and `DELETE` | `/<WHATSAPP_BUSINESS_ACCOUNT_ID>/message_templates` |
| `GET`, `POST`, and `DELETE` | `/<WHATSAPP_BUSINESS_ACCOUNT_ID>/subscribed_apps` |
| `GET` | `/<WHATSAPP_BUSINESS_ACCOUNT_TO_NUMBER_CURRENT_STATUS_ID>` |

For the following Credit Line API requests, your app can make 5000 requests per hour.

| Type of request | Endpoint |
| :--- | :--- |
| `GET` | `/<BUSINESS_ID>/extendedcredits` |
| `POST` | `/<EXTENDED_CREDIT_ID>/whatsapp_credit_sharing_and_attach` |
| `GET` and `DELETE` | `/<ALLOCATION_CONFIG_ID>` |
| `GET` | `/<EXTENDED_CREDIT_ID>/owning_credit_allocation_configs` |

For more information on how to get your current rate usage, see [Headers](#headers).

**Headers**

All API responses made by your app that are rate limited using the BUC logic include an `X-Business-Use-Case-Usage` (for v3.3 and older Ads API calls) HTTP header with a JSON-formatted string that describes current application rate limit usage. This header can return up to 32 objects in one call.

| X-Business-Use-Case Usage Header Contents | |
| :--- | :--- |
| **Error Code** | **Value Description** |
| `business-id` | The ID of the business associated with the token making the API calls. |
| `call_count` | A whole number expressing the percentage of allowed calls made by your app over a rolling one hour period. |
| `estimated_time_to_regain_access` | Time, in minutes, until calls will not longer be throttled. |
| `total_cputime` | A whole number expressing the percentage of CPU time allotted for query processing. |
| `total_time` | A whole number expressing the percentage of total time allotted for query processing. |
| `type` | Type of rate limit applied. Value can be one of the following: `ads_insights`, `ads_management`, `custom_audience`, `instagram`, `leadgen`, `messenger`, or `pages`. |
| `ads_api_access_tier` | For `ads_insights` and `ads_management` types only. Tiers allows your app to access the Marketing API. By default, apps are in the `development_access` tier. `Standard_access` enables lower rate limiting. To get a higher rate limit and get to the standard tier, you can apply for the "[Advanced Access](#authorization)" to the [Ads Management Standard Access feature](#authorization). |
| **Total CPU Time** | The amount of CPU time the request takes to process. When `total_cputime` reaches 100, calls may be throttled. |
| **Total Time** | The length of time the request takes to process. When `total_time` reaches 100, calls may be throttled. |
| **Ads API Access Tier** | For `ads_insights` and `ads_management` types only. Tiers allows your app to access the Marketing API. By default, apps are in the `development_access` tier. `Standard_access` enables lower rate limiting. To get a higher rate limit and get to the standard tier, you can apply for the "[Advanced Access](#authorization)" to the [Ads Management Standard Access feature](#authorization). |

*   **Sample X-Business-Use-Case-Usage Header Value**

    ```json
    x-business-use-case-usage: {
        "{business-object-id}": [
            {
                "type": "{rate-limit-type}",           //Type of BUC rate limit logic being applied.
                "call_count": 100,                     //Percentage of calls made. 
                "total_cputime": 25,                   //Percentage of the total CPU time that has been used.
                "total_time": 25,                      //Percentage of the total time that has been used.   
                "estimated_time_to_regain_access": 19,  //Time in minutes to regain access.
                "ads_api_access_tier": "standard_access"  //Tiers allows your app to access the Marketing API. standard_access enables lower rate limiting.
            }
        ],      
        "66782684": [
            {
                "type": "ads_management",
                "call_count": 95,
                "total_cputime": 20,
                "total_time": 20,
                "estimated_time_to_regain_access": 0,
                "ads_api_access_tier": "development_access" 
            }
        ],
        "10153848260347724": [
            {
                "type": "ads_insights",
                "call_count": 97,
                "total_cputime": 23,
                "total_time": 23,
                "estimated_time_to_regain_access": 0,
                "ads_api_access_tier": "development_access"
            }
        ],
        "10153848260347724": [
            {
                "type": "pages",
                "call_count": 97,
                "total_cputime": 23,
                "total_time": 23,
                "estimated_time_to_regain_access": 0
            }
        ],...}
    ```

**Error Codes**

When your app reaches its Business Use Case rate limit, subsequent requests made by your app will fail and the API will respond with an error code.

| Error Code | BUC Rate Limit Type |
| :--- | :--- |
| `error code 80000`, `error subcode 2446079` | Ads Insights |
| `error code 80004`, `error subcode 2446079` | Ads Management |
| `error code 80003`, `error subcode 2446079` | Custom Audience |
| `error code 80002` | Instagram |
| `error code 80005` | LeadGen |
| `error code 80006` | Messenger |
| `error code 32` | Page calls made with a User access token |
| `error code 80001` | Page calls made with a Page or System User access token |
| `error code 17`, `error subcode 2446079` | V3.3 and Older Ads API excluding Ads Insights |
| `error code 80008` | WhatsApp Business Management API |
| `error code 80014` | Catalog Batch |
| `error code 80009` | Catalog Management |

*   **Sample Error Code Message**

    ```json
    {   "error": {      
        "message": "(#80001) There have been too many calls to this Page account. Wait a bit and try again. For more info, please refer to https://developers.facebook.com/docs/graph-api/overview/rate-limiting.",      
        "type": "OAuthException",      
        "code": 80001,      
        "fbtrace_id": "AmFGcW_3hwDB7qFbl_QdebZ"   
        }}
    ```

**Best Practices**

*   When the limit has been reached, stop making API calls. Continuing to make calls will continue to increase your call count, which will increase the time before calls will be successful again.
*   Check the `X-Business-Use-Case-Usage` HTTP header to see how close your ad account is to its limit and when you can resume making calls.
*   Verify the error code and API endpoint to confirm the throttling type.
*   Switch to other ad accounts and come back to this account later.
*   It is better to create a new ad than to change existing ones.
*   Spread out queries evenly between two time intervals to avoid sending traffic in spikes.
*   Use filters to limit the data response size and avoid calls that request overlapping data.

## FAQ

**What do we consider an API call?**

All calls count towards the rate limits, not just individual API requests. For example, you can make a single API request specifying multiple IDs, but each ID counts as one API call.

The following table illustrates this concept.

| Example Request(s) | Number of API Calls |
| :--- | :--- |
| `GET https://graph.facebook.com/photos?ids=4` | 3 |
| `GET https://graph.facebook.com/photos?ids=5` | |
| `GET https://graph.facebook.com/photos?ids=6` | |
| `GET https://graph.facebook.com/photos?ids=4,5,6` | 3 |

We strongly recommend specifying multiple IDs in one API request when possible, as this improves performance of your API responses.

**I'm building a scraper, is there anything else I should worry about?**

If you are building a service that scrapes data, please read our [scraping terms](https://www.facebook.com/legal/commerce_product_seller_terms/scraper_terms).

# Platform Versioning

Facebook's Platform supports versioning so that app builders can roll out changes over time. This document explains how SDKs and APIs affected by versions and how to use those versions in your requests.

## Versioning

Not all APIs and SDKs share the same versioning system. For example, the Graph API is versioned with a different pace and numbering compared to the Facebook SDK for iOS. All Facebook SDKs support the ability to interact with different versions of our APIs. Multiple versions of APIs or SDKs can exist at the same time with different functionality in each version.

**What is the latest Graph API Version?**

The latest Graph API version is **v24.0**

**Why do we have versions?**

The goal for having versioning is for developers building apps to be able to understand in advance when an API or SDK might change. They help with web development, but are critical with mobile development because a person using your app on their phone may take a long time to upgrade (or may never upgrade).

Each version will remain for at least 2 years from release giving you a solid timeline for how long your app will remain working, and how long you have to update it to newer versions.

**Version Schedules**

Each version is guaranteed to operate for at least two years. A version will no longer be usable two years after the date that the subsequent version is released. For example, if API version v2.3 is released on March 25th, 2015 and API version v2.4 is released August 7th, 2015 then v2.3 would expire on August 7th, 2017, two years after the release of v2.4.

For APIs, once a version is no longer usable, any calls made to it will be defaulted to the next oldest, usable version. Here is a timeline example:

| Version | Release Date | End of Life |
| :--- | :--- | :--- |
| v2.3 | March 25, 2015 | August 7, 2017 |
| v2.4 | August 7, 2015 | October 10, 2017 |
| v2.5 | October 10, 2015 | May 1, 2018 |
| v2.6 | April 12, 2016 | July 2, 2018 |

For SDKs, a version will always remain available as it is a downloadable package. However, the SDK may rely upon APIs or methods which no longer work, so you should assume an end-of-life SDK is no longer functional.

You can find specific information about our version timelines, changes, and release dates on our [changelog page](https://developers.facebook.com/docs/graph-api/changelog).

**Will everything remain completely unchanged in a version?**

Facebook does reserve the right to make changes in any API in a short period of time for issues related to security or privacy. These changes don't happen often, but they do happen.

**What happens if I don't specify a version for an API?**

We refer to an API call made without specifying a version as an **unversioned call**. For example, let's say the current version is v4.0. The call is as follows:

`curl -i -X "https://graph.facebook.com/v4.0/{my-user-id}&access_token={access-token}"`

The same unversioned call is as follows:

`curl -i -X "https://graph.facebook.com/{my-user-id}&access_token={access-token}"`

An unversioned call uses the version set in the app dashboard **Upgrade API Version** card under **Settings > Advanced**. In following example, the version set in the app dashboard is v2.10 and the unversioned call is equivalent to:

`curl -i -X "https://graph.facebook.com/v2.10/{my-user-id}&access_token={access-token}"`

We recommend you always specify the version where possible.

**Limitations**

You can not make unversioned API calls to the Facebook JavaScript SDK.

**Can my app make calls to versions older than the current version?**

You can specify older versions in your API calls as long as they are available and your app has made calls to that version. For example, if your app was created after v2.0 was released and makes calls using v2.0, it will be able to make calls to v2.0 until the version expires even after newer versions have been released. If you created your app after v2.0 but did not make any calls until v2.2, your app will not be able to make calls using v2.0 or to v2.1. It will only be able to make calls using v2.2 and newer versions.

**Marketing API Versioning**

The Marketing API has its own versioning scheme. Both version numbers and their schedules are different from the Graph API's state of things.

[Learn more about Marketing API Versioning](https://developers.facebook.com/docs/marketing-api/versioning)

## Making Versioned Requests

**Graph API**

Whether core or extended, almost all Graph API endpoints are available through a versioned path. We've a full guide to using versions with the Graph API in our [Graph API quickstart guide](https://developers.facebook.com/docs/graph-api/quickstart).

**Dialogs**

Versioned paths aren't just true for API endpoints, they're also true for dialogs and social plugins. For example, if you want to generate the Facebook Login dialog for a web app, you can prepend a version number to the endpoint that generates the dialog:

```
https://www.facebook.com/v24.0/dialog/oauth?
  client_id={app-id}
  &redirect_uri={redirect-uri}
```

**Social Plugins**

If you're using the HTML5 or xfbml versions of our social plugins, the version rendered will be determined by the version specified when you're initialising the JavaScript SDK.

If you're inserting an iframe or plain link version of one of our plugins, you'd prepend the version number to the source path of the plugin:

```html
<iframe
  src="//www.facebook.com/v24.0/plugins/like.php?href=https%3A%2F%2Fdevelopers.facebook.com%2Fdocs%2Fplugins%2F&amp;width&amp;layout=standard&amp;action=like&amp;show_faces=true&amp;share=true&amp;height=80&amp;appId=634262946633418" 
  scrolling="no" 
  frameborder="0" 
  style="border:none; overflow:hidden; height:80px;" 
  allowTransparency="true"></iframe>
```

## Making Versioned Requests from SDKs

If you're using the Facebook SDK for iOS, Android or JavaScript, making versioning calls is largely automatic. Note that this is distinct from each SDKs own versioning system.

**JavaScript**

The JavaScript SDK can only use different API versions if you're using the `sdk.js` path.

If you're using `FB.init()` from the JavaScript SDK, you need to use the `version` parameter, like this:

```javascript
FB.init({
  appId      : '{app-id}',
  version    : 'v24.0'});
```

If you set the version flag in the `init`, then any calls to `FB.api()` will automatically have the version prepended to the path that's called. The same is true for any dialogs for Facebook Login that happen to get called. You will get the Facebook Login dialog for that version of the API.

If you need to, you can override a version by just prepending the version to the path of the endpoint in the `FB.api()` call.

**iOS**

Each version of the Facebook SDK for iOS that's released is tied to the version that's available on the date of release. This means that if you're upgrading to a new SDK you're also upgrading to the latest API version as well (although you can manually specify any earlier, available API version with `[FBSDKGraphRequest initWithGraphPath]`). The API version is listed with the release of each version of the Facebook SDK for iOS.

Much like the JavaScript SDK, the version is prepended to any calls you make to the graph API through the Facebook SDK for iOS. For example, if v2.7 was the most recent version of the API, the call `/me/friends` - used in the following code sample - will actually call `/v2.7/me/friends`:

```objective-c
[[[FBSDKGraphRequest alloc] initWithGraphPath:@"me/friends"
  parameters:@{@"fields": @"cover,name,start_time"}]
    startWithCompletionHandler:^(FBSDKGraphRequestConnection *connection, id result, NSError *error) {
        (...)
    }];
```

You can override the version of the call with `[FBSDKGraphRequestConnection overrideVersionPartWith]`.

**Android**

Each version of the Facebook SDK for Android that's released is tied to the version that's available on the date of release. This means that if you're upgrading to a new SDK you're also upgrading to the latest API version as well (although you can manually specify any earlier, available API version with `GraphRequest.setVersion()`). The API version is listed with the release of each version of the Facebook SDK for Android.

Much like the JavaScript SDK, the version is prepended to any calls you make to the graph API through the Facebook SDK for Android. For example, if v2.7 was the most recent version of the API, the call `/me` - used in the following code sample - will actually call `/v2.7/me`:

```java
GraphRequest request = GraphRequest.newGraphPathRequest (
        accessToken,
        "/me/friends",
        new GraphRequest.GraphJSONObjectCallback() {
            @Override
            public void onCompleted(
                   JSONObject object,
                   GraphResponse response) {
                // Application code
            }
        });Bundle parameters = new Bundle();
parameters.putString("fields", "id,name,link");
request.setParameters(parameters); 
request.executeAsync();
```

You can override the version of the call with `GraphRequest.setVersion()`.

# Batch Requests

Send a single HTTP request that contains multiple Facebook Graph API calls. Independent operations are processed in parallel while dependent operations are processed sequentially. Once all operations are complete, a consolidated response is passed back to you and the HTTP connection is closed.

The ordering of responses correspond with the ordering of operations in the request. You should process responses accordingly to determine which operations were successful and which should be retried in a subsequent operation.

## Limitations

Batch requests are limited to 50 requests per batch. Each call within the batch is counted separately for the purposes of calculating API call limits and resource limits. For example, a batch of 10 API calls will count as 10 calls and each call within the batch contributes to CPU resource limits in the same manner. Please see our [Rate Limiting Guide](#rate-limits) for more information.

Batch requests cannot include multiple Adsets under the same Campaign. [Learn more about batching Marketing API requests](#asynchronous-and-batch-requests).

## Batch Request

A batch request takes a JSON object consisting of an array of your requests. It returns an array of logical HTTP responses represented as JSON arrays. Each response has a status code, an optional `headers` array, and an optional `body` (which is a JSON encoded string).

To make a batched request, send a `POST` request to an endpoint where the `batch` parameter is your JSON object.

`POST /ENDPOINT?batch=[JSON-OBJECT]`

*   **Sample Batch Request**

    In this example, we are getting information about two Pages that our app manages.

    Formatted for readability.

    ```curl
    curl -i -X POST 'https://graph.facebook.com/me?batch=  
      [
        {
          "method":"GET",
          "relative_url":"PAGE-A-ID"
        },  
        {
          "method":"GET",
          "relative_url":"PAGE-B-ID"
        }
      ]
      &include_headers=false             // Included to remove header information
      &access_token=ACCESS-TOKEN'
    ```

    Once all operations are complete, a response is sent with the result of each operation. Because the headers returned can sometimes be much larger than the actual API response, you might want to remove them for efficiency. To include header information, remove the `include_headers` parameter or set it to `true`.

*   **Sample Response**

    The `body` field contains a string encoded JSON object:

    ```json
    [
      {
        "code": 200,
        "body": "{
          \"name\": \"Page A Name\",
          \"id\": \"PAGE-A-ID\"
          }"
      },
      {
        "code": 200,
        "body": "{
          \"name\": \"Page B Name\",
          \"id\": \"PAGE-B-ID\"
          }"
      }]
    ```

## Complex Batch Requests

It is possible to combine operations that would normally use different HTTP methods into a single batch request. While `GET` and `DELETE` operations can only have a `relative_url` and a `method` field, `POST` and `PUT` operations may contain an optional `body` field. The `body` should be formatted as a raw HTTP POST string, similar to a URL query string.

*   **Sample Request**

    The following example publishes a post to a Page we manage and have publish permissions and then the Page's feed in a single operation:

    ```curl
    curl "https://graph.facebook.com/PAGE-ID?batch=
      [
        { 
          "method":"POST",
          "relative_url":"PAGE-ID/feed",
          "body":"message=Test status update"
        },
        { 
          "method":"GET",
          "relative_url":"PAGE-ID/feed"
        }
      ]
      &access_token=ACCESS-TOKEN"
    ```

    The output of this call would be:

    ```json
    [
        { "code": 200,
          "headers": [
              { "name":"Content-Type", 
                "value":"text/javascript; charset=UTF-8"}
           ],
          "body":"{\"id\":\"…\"}"
        },
        { "code": 200,
          "headers": [
              { "name":"Content-Type", 
                "value":"text/javascript; charset=UTF-8"
              },
              { "name":"ETag", 
                "value": "…"
              }
          ],
          "body": "{\"data\": [{…}]}
        }
    ]
    ```

    The following example creates a new ad for a campaign, and then gets the details of the newly created object. Note the URLEncoding for the body param:

    ```curl
    curl \-F 'access_token=...' \-F 'batch=[
      {
        "method":"POST",
        "name":"create-ad",
        "relative_url":"11077200629332/ads",
        "body":"ads=%5B%7B%22name%22%3A%22test_ad%22%2C%22billing_entity_id%22%3A111200774273%7D%5D"
      }, 
      {
        "method":"GET",
        "relative_url":"?ids={result=create-ad:$.data.*.id}"
      }
    ]' \
    https://graph.facebook.com
    ```

    The following example adds multiple pages to a Business Manager:

    ```curl
    curl \-F 'access_token=<ACCESS_TOKEN>' \-F 'batch=[
      {
        "method":"POST",
        "name":"test1",
        "relative_url":"<BUSINESS_ID>/owned_pages",
        "body":"page_id=<PAGE_ID_1>"
      }, 
      {
        "method":"POST",
        "name":"test2",
        "relative_url":"<BUSINESS_ID>/owned_pages",
        "body":"page_id=<PAGE_ID_2>"
      }, 
      {
        "method":"POST",
        "name":"test3",
        "relative_url":"<BUSINESS_ID>/owned_pages",
        "body":"page_id=<PAGE_ID_3>"
      }, 
    ]' \"https://graph.facebook.com/v12.0"
    ```

    Where:
    *   `<ACCESS_TOKEN>` is an access token with the `business_management` permission.
    *   `<BUSINESS_ID>` is the ID of the Business Manager to which the pages should be claimed.
    *   `<PAGE_ID_n>` are the Page IDs to be claimed.

## Errors

Its possible that one of your requested operations may throw an error. This could be because, for example, you don't have permission to perform the requested operation. The response is similiar to the standard Graph API, but encapsulated in the batch response syntax:

```json
[
    { "code": 403,
      "headers": [
          {"name":"WWW-Authenticate", "value":"OAuth…"},
          {"name":"Content-Type", "value":"text/javascript; charset=UTF-8"} ],
      "body": "{\"error\":{\"type\":\"OAuthException\", … }}"
    }]
```

Other requests within the batch should still complete successfully and will be returned, as normal, with a 200 status code.

## Timeouts

Large or complex batches may timeout if it takes too long to complete all the requests within the batch. In such a circumstance, the result is a partially-completed batch. In a partially-completed batch, requests that are completed successful will return the normal output with the 200 status code. Responses for requests that are not successful will be null. You can retry any unsuccessful request.

## Batch calls with JSONP

The Batch API supports JSONP, just like the rest of the Graph API - the JSONP callback function is specified using the `callback` query string or form post parameter.

## Using Multiple Access Tokens

Individual requests of a single batch request can specify its own access tokens as a query string or form post parameter. In that case the top level access token is considered a fallback token and is used if an individual request has not explicitly specified an access token.

This may be useful when you want to query the API using several different User or Page access tokens, or if some of your calls need to be made using an app access token.

You must include an access token as a top level parameter, even when all individual requests contain their own tokens.

## Upload Binary Data

You can upload multiple binary items as part of a batch call. In order to do this, you need to add all the binary items as `multipart/mime` attachments to your request, and need each operation to reference its binary items using the `attached_files` property in the operation. The `attached_files` property can take a comma separated list of attachment names in its value.

The following example shows how to upload 2 photos in a single batch call:

```curl
curl 
     -F 'access_token=…' \
     -F 'batch=[{"method":"POST","relative_url":"me/photos","body":"message=My cat photo","attached_files":"file1"},{"method":"POST","relative_url":"me/photos","body":"message=My dog photo","attached_files":"file2"},]' \
     -F 'file1=@cat.gif' \
     -F 'file2=@dog.jpg' \
    https://graph.facebook.com
```

# Debug Requests

## Graph API Debug Mode

When **Debug Mode** is enabled, Graph API response may contain additional fields that explain potential issues with the request.

To enable debug mode, use the `debug` query string parameter. For example:

| cURL | Android SDK | Objective-C | Java SDK | PHP SDK |
| :--- | :--- | :--- | :--- | :--- |
| `curl -i -X GET \
  "https://graph.facebook.com/{user-id}
    ?fields=friends
    &debug=all
    &access_token={your-access-token}"` | `request.setParameter("debug", "all");` | `[request setParameters:@{@"debug" : @"all"}];` | `request.setParameters(parameters);` | `$request->setParams(array('debug' => 'all'));` |

If `user_friends` permission was not granted, this produces the following response:

```json
{
  "data": [
  ], 
  "__debug__": {
    "messages": [
      {
        "message": "Field friends is only accessible on User object, if user_friends permission is granted by the user", 
        "type": "warning"
      }, 
      {
        "link": "https://developers.facebook.com/docs/apps/changelog#v2_0", 
        "message": "Only friends who have installed the app are returned in versions greater or equal to v2.0.", 
        "type": "info"
      }
    ]
  }}
```

The `debug` parameter value can be set to `"all"` or to a minimal requested severity level that corresponds to `type` of the message:

| Debug Param Value | What Will Be Returned |
| :--- | :--- |
| `all` | All available debug messages. |
| `info` | Debug messages with type `info` and `warning`. |
| `warning` | Only debug messages with type `warning`. |

Debug information, when available, is returned as a JSON object under the `__debug__` key in the `messages` array. Every element of this array is a JSON object that contains the following fields:

| Field | Datatype | Description |
| :--- | :--- | :--- |
| `message` | `String` | The message. |
| `type` | `String` | The message severity. |
| `link` | `String` | [Optional] A URL pointing to related information. |

You can also use Debug Mode with [Graph API Explorer](https://developers.facebook.com/tools/explorer).

## Determining Version used by API Requests

When you're building an app and making Graph API requests, you might find it useful to determine what API version you're getting a response from. For example, if you're making calls without a version specified, the API version that responds may not be known to you.

The Graph API supplies a request header with any response called `facebook-api-version` that indicates the exact version of the API that generated the response. For example, a Graph API call that generates a request with v2.0 produces the following HTTP header:

`facebook-api-version:v2.0`

This `facebook-api-version` header allows you to determine whether API calls are being returned from the version that you expect.

## Debug Info for Reporting Bugs

When reporting a bug in the Graph API, we include some additional request headers to send with your bug report to help us pinpoint and reproduce your issue. These request headers are `X-FB-Debug`, `x-fb-rev`, and `X-FB-Trace-ID`.

# Handling Errors

Requests made to our APIs can result in several different error responses. The following document describes the recovery tactics and provides a list of error values with a map to the most common recovery tactic to use.

## Error Responses

The following represents a common error response resulting from a failed API request:

```json
{
  "error": {
    "message": "Message describing the error", 
    "type": "OAuthException", 
    "code": 190,
    "error_subcode": 460,
    "error_user_title": "A title",
    "error_user_msg": "A message",
    "fbtrace_id": "EJplcsCHuLu"
  }}
```

*   `message`: A human-readable description of the error.
*   `code`: An error code. Common values are listed below, along with common recovery tactics.
*   `error_subcode`: Additional information about the error. Common values are listed below.
*   `error_user_msg`: The message to display to the user. The language of the message is based on the locale of the API request.
*   `error_user_title`: The title of the dialog, if shown. The language of the message is based on the locale of the API request.
*   `fbtrace_id`: Internal support identifier. When reporting a bug related to a Graph API call, include the `fbtrace_id` to help us find log data for debugging. However, this ID will expire shortly. To help the support team reproduce your issue, please attach a saved graph explorer session.

## Error Codes

| Code or Type | Name | What To Do |
| :--- | :--- | :--- |
| `OAuthException` | | If no subcode is present, the login status or access token has expired, been revoked, or is otherwise invalid. Get a [new access token](#get-an-access-token-for-ad-accounts-you-manage). If a subcode is present, see the subcode. |
| 102 | API Session | If no subcode is present, the login status or access token has expired, been revoked, or is otherwise invalid. Get a [new access token](#get-an-access-token-for-ad-accounts-you-manage). If a subcode is present, see the subcode. |
| 1 | API Unknown | Possibly a temporary issue due to downtime. Wait and retry the operation. If it occurs again, check that you are requesting an existing API. |
| 2 | API Service | Temporary issue due to downtime. Wait and retry the operation. |
| 3 | API Method | Capability or permissions issue. Make sure your app has the necessary capability or permissions to make this call. |
| 4 | API Too Many Calls | Temporary issue due to throttling. Wait and retry the operation, or examine your [API request volume](#rate-limits). |
| 17 | API User Too Many Calls | Temporary issue due to throttling. Wait and retry the operation, or examine your [API request volume](#rate-limits). |
| 10 | API Permission Denied | Permission is either not granted or has been removed. [Handle the missing permissions](https://developers.facebook.com/docs/apps/allowing-people-to-log-in/#handle-errors). |
| 190 | Access token has expired | Get a [new access token](#get-an-access-token-for-ad-accounts-you-manage). |
| 200-299 | API Permission (Multiple values depending on permission) | Permission is either not granted or has been removed. [Handle the missing permissions](https://developers.facebook.com/docs/apps/allowing-people-to-log-in/#handle-errors). |
| 341 | Application limit reached | Temporary issue due to downtime or throttling. Wait and retry the operation, or examine your [API request volume](#rate-limits). |
| 368 | Temporarily blocked for policies violations | Wait and retry the operation. |
| 506 | Duplicate Post | Duplicate posts cannot be published consecutively. Change the content of the post and try again. |
| 1609005 | Error Posting Link | There was a problem scraping data from the provided link. Check the URL and try again. |
| 100, subcode 1487694 | Invalid parameter. | The category you selected is no longer available. Several behavior-based targeting categories are deprecated. If you try to use them to create ads, your requests fails and returns this error. Use [Targeting Search](https://developers.facebook.com/docs/marketing-api/targeting-search) to see categories available for targeting. |
| 100, subcode 1752129 | Invalid parameter. | This Task Combination Is Not Supported. To assign a user for this ad account valid capabilities, you should pass in a combination of tasks defined in the [mapping](https://developers.facebook.com/docs/marketing-api/business-management/business-assets#tasks-mapping). See [Business Manager API, Permitted Roles](https://developers.facebook.com/docs/marketing-api/business-management/business-assets#tasks-mapping). |
| 1870034 | Custom Audience Terms Not Accepted | You'll need to agree to the Custom Audience terms before you can create or edit an audience or an ad set. See [Facebook, Custom Audience Terms](https://www.facebook.com/business/help/985551378129759) |
| 1870047 | Audience Size too Low | You cannot remove users from this audience because it will result in a low audience size and may result in under-delivery or non-delivery of your ads. |
| 1870065 | This can't be used because it contains at least one audience that was disabled. | Disabled audiences were shared by accounts that are no longer active. To fix this issue, remove the affected audiences |
| 1870088 | Connection targeting is being deprecated. | Please remove connections from your campaign to publish your campaign. |
| 1870090 | To create or edit audience or ad set, please agree to the Custom Audience terms. | |
| 1870092 | To create or edit audience or ad set, please agree to the Meta Business Tools terms | |
| 1870165 | Your audience contains targeting options that can no longer be used to target ads to people under 18 globally, 20 in Thailand or 21 in Indonesia. | Increase the minimum age of your audience or remove all targeting options apart from location, age and gender. |
| 1870199 | All location targeting will now reach people living in or recently in the locations you selected. | Please remove all values from the location\_types field. |
| 1870219 | Only employer exclusions are allowed to be saved in account control. | If you are trying to save anything other than employer exclusions then this error will be thrown. |
| 1870220 | If you are trying to save more than the allowed number of employer exclusions then this error will be thrown. | |
| 1885029 | The Page selected for your ad doesn't match the Page associated with the object you're promoting, like a Page post or app. | Please make sure the Pages are the same. |
| 1885088 | This ad has been archived and can not be edited. | Only name is allowed to be edited for this ad. If you want to edit other fields, you can duplicate this ad, which will create a new ad with the same settings that you can then edit. |
| 1885183 | Ads creative post was created by an app that is in development mode. | It must be in public to create this ad.ate this ad, which will create a new ad with the same settings that you can then edit. |
| 1885204 | You need to set your bid to automatic for the chosen optimization. | Remove any billing or bid info or change your optimization. |
| 1885272 | Budget is too low. | |
| 1885557 | Your ad is promoting an unavilable post. | It is either deleted, unpublished, not owned by the ad's page or you do not have permissions to see or promote it. |
| 1885621 | You can only set an ad set budget or a campaign budget. | |
| 1885650 | Your budget is too low. | This minimum amount is required to account for any spending that occurs while your budget is updated, which may take up to 15 minutes. |
| 2238055 | You can not pass both `instagram_user_id` and `instagram_actor_id` or `instagram_story_id` and `source_instagram_media_id` in creative spec | |
| 2446149 | You can not pass both `instagram_user_id` and `instagram_actor_id` or `instagram_story_id` and `source_instagram_media_id` in creative spec | |
| 2446307 | Campaign group spend cap is less than minimum | |
| 2446173 | Target rule label with name {label} doesn't refer to any of the asset labels. | Please fix it by removing all ad creatives. |
| 2446289 | The {post\_type} you selected for your ad is not available. | It could be deleted or you might not have permissions to see it. Please check your ad creative and try again. |
| 2446347 | The ad of an existing post should have the flag `use_existing_post` (default rule in "asset\_feed\_spec:target\_rules") set to true. | This is part of the POST request to the server, not something that can be done through the UI. |
| 2446383 | Your campaign objective requires an external website URL. | Select a call to action and enter a website URL in the ad creative section. |
| 2446394 | This ad set includes detailed targeting options that are either no longer available or aren't available when excluding people from an audience. | You may need to remove items from your detailed targeting or confirm the changes to turn it back on. |
| 2446509 | The ad campaign destination type is not valid | |
| 2446580 | Cannot specify both `components` and `child_attachments` field when providing `interactive_components_spec` params | |
| 2446712 | The ability to create or run an ad set with store visits optimization is no longer available. | Choose the reach or store sales optimization instead. |
| 2446867 | You've already reached the limit of {campaigns\_per\_country\_cap} Advantage+ Shopping Campaigns for the following countries: {country\_names}. | If you'd like to create additional campaigns for these countries, use a standard conversions campaign. |
| 2446880 | The WhatsApp number connected to your Facebook page or Instagram profile was disconnected. | You can run this ad again when you reconnect your WhatsApp account. |
| 2490085 | The 191x100 crop key will no longer be available in the newest Ads API version. | The recommended crop key will be 100x100. |
| 2490155 | The post associated with your ad is not available. | It may have been removed, or you might not have permission to view it. |
| 2490372 | You need to choose a shop destination in order to continue. | |
| 2490427 | Your ad has been rejected in its latest review and is currently disabled. | In order to enable the ad, you will need to make updates to it and create a new ad. |
| 2490468 | Your ad has been rejected in its latest review and is currently disabled. | In order to enable the ad, you will need to make updates to it and create a new ad. |
| 2708008 | You haven't been authorized to run ads about social issues, elections or politics. | Please have an authorized ad account user place this ad, or complete the ID confirmation process yourself at `https://www.facebook.com/id` |
| 2859015 | You have been temporarily blocked from performing this action. | |
| 3858064 | This campaign contains options that can no longer be used in campaigns with audiences under age 18 globally, 20 in Thailand or 21 in Indonesia. | Increase the minimum age of your audience or remove all targeting options except for age and locations that are cities or larger (excluding postal codes). |
| 3858082 | This creative is eligible for Standard Enhancements, but `enroll_status` was not provided. | Please choose whether you want to turn on standard enhancements or not. [Learn more here](https://developers.facebook.com/docs/marketing-api/guides/advantage-creative) |
| 3858152 | This ad belongs to an ad set that must be published with beneficiary and payer information. | Go to the ad set to add or review this information, and then click "Publish". |
| 3867105 | This content can’t be used for your partnership ad. | Select different content. |
| 3910001 | We're facing some trouble with your account. | Please try again later. |

Error handling should be done using only the Error Codes. The Description string is subject to change without prior notice.

**blame\_field\_specs**

This is a property included in the `error_data` blob of any API call that results in a validation error, which indicates which field(s) is at fault for the validation error. This can be used to provide contextual errors, e.g. displaying an error right next to the field(s) at fault in the GUI of an ad creation tool.

`blame_field_specs` is an array, where each element of the array is a `blame_field_spec` which indicates a single field from the API spec that is at fault.

A `blame_field_spec` itself is an array also, which indicates the name of the field that is at fault and the location of this field within the overall API spec provided.

*   **Examples:**

    **Single field at fault**

    ```json
    {  
      "error":{  
        "type":"Exception",
        "message":"The budget for your Ad-Set is too low.  It must be at least $1.00 per day.",
        "code":1487901,
        "is_transient":false,
        "error_data":{  
          "blame_field_specs":[  
            ["daily_budget"]
          ]
        }
      }}
    ```

    Indicates that the `daily_budget` field of the API spec is at fault and in this case it was too low.

    **Multiple fields at fault**

    `"blame_field_specs":[  
      ["targeting_spec", "interested_in"], 
      ["bid_info", "impressions"]]`

    Indicates that there is an error related to the `interested_in` subfield within the `targeting_spec` field of the API spec, and the error is also related to field `impressions` within the `bid_info` field of the API spec.

## Frequently Asked Questions

| General | |
| :--- | :--- |
| Can I use the API in a production environment without app review? | **Answer:** No, all apps that access live data must complete [App Review](https://developers.facebook.com/docs/apps/review). |
| Authorization and Authentication | |
| How do I create an access token for the Marketing API? | **Answer:** You can use the [Graph API Explorer](#graph-api-explorer) to generate an access token with the necessary permissions. |
| Ad Campaigns | |
| How do I create a new campaign? | **Answer:** Send a `POST` request to the `/act_<AD_ACCOUNT_ID>/campaigns` endpoint. |
| Ad Sets | |
| Can I change my ad set's budget after it's created? | **Answer:** Yes, you can modify the budget using a `POST` request to the `/<AD_SET_ID>` endpoint. |
| Insights | |
| What is the best way to analyze my campaign performance? | **Answer:** Use the [Insights API](#insights-api) to retrieve detailed metrics, applying breakdowns as needed. |
| Troubleshooting | |
| What should I do if my ads are not being approved? | **Answer:** Check the [Advertising Policies](https://www.facebook.com/policies/ads) and revise your ad creative or targeting. |
| How can I help improve the performance of my ads? | **Answer:** Implement [Optimization Tips](#optimization-tips) like refining audience targeting or testing creatives. |
| What should I do if my API call returns an error code? | **Answer:** Refer to the [Error Codes](#error-codes) section for troubleshooting and recovery tactics. |
| How can I get developer support? | **Answer:** Join the [Facebook Marketing Developer Community Group](#facebook-marketing-developer-community-group) for assistance. |

# Marketing API Reference

## Marketing API Root Nodes

This is a full list of root nodes for the Facebook Marketing API with links to reference docs for each. For background on the API's architecture how to call root nodes and their edges, see [Using the Graph API](https://developers.facebook.com/docs/graph-api/overview).

To access all reference information you will need to be logged in to Facebook.

| Node | Description |
| :--- | :--- |
| `/{AD_ACCOUNT_USER_ID}` | Someone on Facebook who creates ads. Each ad user can have a role on several ad accounts. |
| `/act_{AD_ACCOUNT_ID}` | Represents the business entity managing ads. |
| `/{AD_ID}` | Contains information for an ad, such as creative elements and measurement information. |
| `/{AD_CREATIVE_ID}` | Format for your image, carousel, collection, or video ad. |
| `/{AD_SET_ID}` | Contains all ads that share the same budget, schedule, bid, and targeting. |
| `/{AD_CAMPAIGN_ID}` | Defines your ad campaigns' objective. Contains one or more ad set. |

## User

| Edges | |
| :--- | :--- |
| **Edge** | **Description** |
| `/adaccounts` | All ad accounts associated with this person |
| `/accounts` | All pages and places that someone is an admin of |
| `/promotable_events` | All promotable events you created or promotable page events that belong to pages you are an admin for |

## Ad Account

Represents the business entity managing ads. All collections of ad objects in Marketing APIs belong to an ad account.

| Edges | |
| :--- | :--- |
| **Edge** | **Description** |
| `/adcreatives` | Defines your ad's appearance and content |
| `/adimages` | Library of images to use in ad creatives. Can be uploaded and managed independently |
| `/ads` | Data for an ad, such as creative elements and measurement information |
| `/adsets` | Contain all ads that share the same budget, schedule, bid, and targeting |
| `/advideos` | Library of videos for use in ad creatives. Can be uploaded and managed independently |
| `/campaigns` | Define your campaigns' objective and contain one or more ad sets |
| `/customaudiences` | The custom audiences owned by/shared with this ad account |
| `/insights` | Interface for insights. De-dupes results across child objects, provides sorting, and async reports. |
| `/users` | List of people assocated with an ad account |

## Ad

An individual ad associated with an ad set.

| Edges | |
| :--- | :--- |
| **Edge** | **Description** |
| `/adcreatives` | Defines your ad's appearance and content |
| `/insights` | Insights on your advertising performance. |
| `/leads` | Any leads associated with with a Lead Ad. |
| `/previews` | Generate ad previews from an existing ad |

## Ad Set

An ad set is a group of ads that share the same daily or lifetime budget, schedule, bid type, bid info, and targeting data.

| Edges | |
| :--- | :--- |
| **Edge** | **Description** |
| `/activities` | Log of actions taken on the ad set |
| `/adcreatives` | Defines your ad's content and appearance |
| `/ads` | Data necessary for an ad, such as creative elements and measurement information |
| `/insights` | Insights on your advertising performance. |

## Ad Campaign

A campaign is the highest level organizational structure within an ad account and should represent a single objective for an advertiser.

| Edges | |
| :--- | :--- |
| **Edge** | **Description** |
| `/ads` | Data necessary for an ad, such as creative elements and measurement information |
| `/adsets` | Contain all ads that share the same budget, schedule, bid, and targeting. |
| `/insights` | Insights on your advertising performance. |

## Ad Creative

The format which provides layout and contains content for the ad.

| Edges | |
| :--- | :--- |
| **Edge** | **Description** |
| `/previews` | Generate ad previews from the existing ad creative object |

## Ad Account

Represents a business, person or other entity who creates and manages ads on Facebook

In response to Apple’s new policy, we are announcing breaking changes that will affect `SDKAdNetwork`, Marketing API and Ads Insights API endpoints.
To learn more about how Apple’s iOS 14.5 requirements will impact Facebook advertising, visit our [Business Help Center aricles](https://www.facebook.com/business/help/316380618483864) and [changelog](https://developers.facebook.com/docs/graph-api/changelog):
*   [Facebook SDK for iOS, App Events API and Mobile Measurement Partners Updates for Apple's iOS 14 Requirements](https://developers.facebook.com/docs/app-events/ios14-updates)
*   [Facebook Pixel Updates for Apple's iOS 14 Requirements](https://developers.facebook.com/docs/facebook-pixel/pixel-updates-for-ios14)
*   **January 19, 2021** - Breaking Changes
    *   The `agency_client_declaration` field requires Admin privileges for all operations starting with v10.0 and will be required for all versions on May 25, 2021.

**Ad Volume**

You can view the volume of ads running or in review for your ad accounts. These ads will count against the ads limit per page that we will enact in early 2021. Query the number of ads running or in review for a given ad account.

*   Ad Limit Per Page enforcement begins for when a Page reaches its ad limit enforcement date. Enforcement date can be queried [here](https://developers.facebook.com/docs/marketing-api/reference/page/ad_limit_page_setting).
*   When a Page is at its ad limit:
    *   New ads (or ads scheduled to begin at that time) do not publish successfully.
    *   Actions on existing ads are limited to pausing and archiving until the number of ads running or in review is below the ad limit.

To see the ads volume for your ad account:

```curl
curl -G 
  -d "access_token=<access_token>" 
  "https://graph.facebook.com/<API_VERSION>/act_<ad_account_ID>/ads_volume"
```

The response looks like this:

`{"data":[{"ads_running_or_in_review_count":2}]}`

For information on managing ads volume, see [About Managing Ad Volume](https://www.facebook.com/business/help/113164948792015).

**Running Or In Review**

To see if an ad is running or in review, we check `effective_status`, `configured_status`, and the ad account's status:
*   If an ad has `effective_status` of 1 - `active`, we consider it a running or in review.
*   If an ad has `configured_status` of `active` and `effective_status` of 9 - `pending review`, or 17 - `pending processing` we consider it a running or in review.
*   The ad can be running or in review only if the ad account status is in 1 - `active`, 8 - `pending settlement`, 9 - `in grace period`.

We also determine if an ad is running or in review based on the ad set's schedule.
*   If start time is before current time, and current time is before end time, then we consider the ad running or in review.
*   If start time is before current time and the ad set has no end time, we also consider it running or in review.

For example, if the ad set is scheduled to run in the future, the ads are not running or in review. However if the ad set is scheduled to run from now until three months from now, we consider the ads running or in review.

If you are using special ads scheduling features, such as day-parting, we consider the ad running or in review the whole day, not just for the part of the day when the ad starts running.

**Breakdown By Actors**

We’ve added the `show_breakdown_by_actor` parameter to the `act_123/ads_volume` endpoint so you can query ad volume and ad limits-related information for each page. For more details, see [Breakdown by Actors](#breakdown-by-actors).

**Limits**

| Limit | Value |
| :--- | :--- |
| **Maximum number of ad accounts per person** | 25 |
| **Maximum number of people with access, per ad account** | 25 |
| **Maximum number of ads per regular ad account** | 6,000 non-archived non-deleted ads |
| **Maximum number of ads per bulk ad account** | 50,000 non-archived non-deleted ads |
| **Maximum number of archived ads per ad account** | 100,000 archived ads |
| **Maximum number of ad sets per regular ad account** | 6,000 non-archived non-deleted ad sets |
| **Maximum number of ad sets per bulk ad account** | 10,000 non-archived non-deleted ad sets |
| **Maximum number of archived ad sets per ad account** | 100,000 archived ad sets |
| **Maximum number of ad campaigns per regular ad account** | 6,000 non-archived non-deleted ad campaigns |
| **Maximum number of ad campaigns per bulk ad account** | 10,000 non-archived non-deleted ad campaigns |
| **Maximum number of archived ad campaigns per ad account** | 100,000 archived ad campaigns |
| **Maximum number of images per ad account** | Unlimited |

**Reading**

An ad account is an account used for managing ads on Facebook

**Digital Services Act Saved Beneficiary/Payor Information**

Use the following code examples to download the beneficiary and payor information.

| Android SDK |
| :--- |
| ```java
      GraphRequest request = GraphRequest.newGraphPathRequest(
 accessToken,
 "/act_<AD_ACCOUNT_ID>",
 new GraphRequest.Callback() {
   @Override
   public void onCompleted(GraphResponse response) {
     // Insert your code here
   }});Bundle parameters = new Bundle();
parameters.putString("fields", "default_dsa_payor,default_dsa_beneficiary");
request.setParameters(parameters);
request.executeAsync();
``` |

| iOS SDK |
| :--- |
| ```objective-c
FBSDKGraphRequest *request = [[FBSDKGraphRequest alloc]
    initWithGraphPath:@"/act_<AD_ACCOUNT_ID>"
           parameters:@{ @"fields": @"default_dsa_payor,default_dsa_beneficiary",}
           HTTPMethod:@"GET"];[request startWithCompletionHandler:^(FBSDKGraphRequestConnection *connection, id result, NSError *error) {
    // Insert your code here}];
``` |

| Javascript SDK: |
| :--- |
| ```javascript
FB.api(
  '/act_<AD_ACCOUNT_ID>',
  'GET',
  {"fields":"default_dsa_payor,default_dsa_beneficiary"},
  function(response) {
      // Insert your code here
  });
``` |

| cURL |
| :--- |
| ```curl -X GET \"https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>?fields=default_dsa_payor%2Cdefault_dsa_beneficiary&access_token=<ACCESS_TOKEN>"
      
``` |

The return value is in JSON format. For example:

`{"default_dsa_payor":"payor2","default_dsa_beneficiary":"bene2","id":"act_426197654150180"}`

| Parameters | |
| :--- | :--- |
| This endpoint doesn't have any parameters. | |

| Fields | |
| :--- | :--- |
| **Field** | **Description** |
| `id` | `string` | The string `act_{ad_account_id}`. |
| | **Default** | |
| `account_id` | `numeric string` | The ID of the Ad Account. |
| | **Default** | |
| `account_status` | `unsigned int32` | Status of the account: |
| | 1 = ACTIVE | |
| | 2 = DISABLED | |
| | 3 = UNSETTLED | |
| | 7 = PENDING\_RISK\_REVIEW | |
| | 8 = PENDING\_SETTLEMENT | |
| | 9 = IN\_GRACE\_PERIOD | |
| | 100 = PENDING\_CLOSURE | |
| | 101 = CLOSED | |
| | 201 = ANY\_ACTIVE | |
| | 202 = ANY\_CLOSED | |
| `ad_account_promotable_objects` | `AdAccountPromotableObjects` | Ad Account creation request purchase order fields associated with this Ad Account. |
| `age` | `float` | Amount of time the ad account has been open, in days. |
| `agency_client_declaration` | `AgencyClientDeclaration` | Details of the agency advertising on behalf of this client account, if applicable. Requires Business Manager Admin privileges. |
| `amount_spent` | `numeric string` | Current amount spent by the account with respect to `spend_cap`. Or total amount in the absence of `spend_cap`. See [why amount spent is different in ad account spending limit](https://www.facebook.com/business/help/323385731189912) for more info. |
| `attribution_spec` | `list<AttributionSpec>` | Deprecated due to iOS 14 changes. Please visit the [changelog](https://developers.facebook.com/docs/graph-api/changelog) for more information. |
| `balance` | `numeric string` | Bill amount due for this Ad Account. |
| `brand_safety_content_filter_levels` | `list<string>` | Brand safety content filter levels set for in-content ads (Facebook in-stream videos and Ads on Facebook Reels) and Audience Network along with feed ads (Facebook Feed, Instagram feed, Facebook Reels feed and Instagram Reels feed) if applicable. |
| | Refer to [Placement Targeting](https://developers.facebook.com/docs/marketing-api/guides/placement-targeting) for a list of supported values. | |
| `business` | `Business` | The Business Manager, if this ad account is owned by one |
| `business_city` | `string` | City for business address |
| `business_country_code` | `string` | Country code for the business address |
| `business_name` | `string` | The business name for the account |
| `business_state` | `string` | State abbreviation for business address |
| `business_street` | `string` | First line of the business street address for the account |
| `business_street2` | `string` | Second line of the business street address for the account |
| `business_zip` | `string` | Zip code for business address |
| `can_create_brand_lift_study` | `bool` | If we can create a new automated brand lift study under the Ad Account. |
| `capabilities` | `list<string>` | List of capabilities an Ad Account can have. See [capabilities](https://developers.facebook.com/docs/marketing-api/reference/ad-account-capability) |
| `created_time` | `datetime` | The time the account was created in ISO 8601 format. |
| `currency` | `string` | The currency used for the account, based on the corresponding value in the account settings. See [supported currencies](https://developers.facebook.com/docs/marketing-api/reference/ad-account/supported-currencies) |
| `default_dsa_beneficiary` | `string` | This is the default value for creating L2 object of dsa\_beneficiary |
| `default_dsa_payor` | `string` | This is the default value for creating L2 object of dsa\_payor |
| `direct_deals_tos_accepted` | `bool` | Whether DirectDeals ToS are accepted. |
| `disable_reason` | `unsigned int32` | The reason why the account was disabled. Possible reasons are: |
| | 0 = NONE | |
| | 1 = ADS\_INTEGRITY\_POLICY | |
| | 2 = ADS\_IP\_REVIEW | |
| | 3 = RISK\_PAYMENT | |
| | 4 = GRAY\_ACCOUNT\_SHUT\_DOWN | |
| | 5 = ADS\_AFC\_REVIEW | |
| | 6 = BUSINESS\_INTEGRITY\_RAR | |
| | 7 = PERMANENT\_CLOSE | |
| | 8 = UNUSED\_RESELLER\_ACCOUNT | |
| | 9 = UNUSED\_ACCOUNT | |
| | 10 = UMBRELLA\_AD\_ACCOUNT | |
| | 11 = BUSINESS\_MANAGER\_INTEGRITY\_POLICY | |
| | 12 = MISREPRESENTED\_AD\_ACCOUNT | |
| | 13 = AOAB\_DESHARE\_LEGAL\_ENTITY | |
| | 14 = CTX\_THREAD\_REVIEW | |
| | 15 = COMPROMISED\_AD\_ACCOUNT | |
| `end_advertiser` | `numeric string` | The entity the ads will target. Must be a Facebook Page Alias, Facebook Page ID or an Facebook App ID. |
| `end_advertiser_name` | `string` | The name of the entity the ads will target. |
| `existing_customers` | `list<string>` | The custom audience ids that are used by advertisers to define their existing customers. This definition is primarily used by Automated Shopping Ads. |
| `expired_funding_source_details` | `FundingSourceDetails` | ID = ID of the payment method |
| | COUPON = Details of the Facebook Ads Coupon from the payment method | |
| | COUPONS = List of active Facebook Ads Coupon from the ad account | |
| | COUPON\_ID = ID of the Facebook Ads Coupon | |
| | AMOUNT = Amount of Facebook Ads Coupon | |
| | CURRENCY = Currency of the Facebook Ads Coupon | |
| | DISPLAY\_AMOUNT = How the amount of Facebook Ads Coupon is displayed | |
| | EXPIRATION = When the coupon expired | |
| | START\_DATE = When the coupon started | |
| | DISPLAY\_STRING = How the payment method is shown | |
| | CAMPAIGN\_IDS = List of campaigns the coupon can be applied to, empty if the coupon is applied on the ad account level. | |
| | ORIGINAL\_AMOUNT = Amount of Facebook Ads Coupon When Issued | |
| | ORIGINAL\_DISPLAY\_AMOUNT = How the Facebook Ads Coupon displayed When Issued | |
| | TYPE = Type of the funding source | |
| | 0 = UNSET | |
| | 1 = CREDIT\_CARD | |
| | 2 = FACEBOOK\_WALLET | |
| | 3 = FACEBOOK\_PAID\_CREDIT | |
| | 4 = FACEBOOK\_EXTENDED\_CREDIT | |
| | 5 = ORDER | |
| | 6 = INVOICE | |
| | 7 = FACEBOOK\_TOKEN | |
| | 8 = EXTERNAL\_FUNDING | |
| | 9 = FEE | |
| | 10 = FX | |
| | 11 = DISCOUNT | |
| | 12 = PAYPAL\_TOKEN | |
| | 13 = PAYPAL\_BILLING\_AGREEMENT | |
| | 14 = FS\_NULL | |
| | 15 = EXTERNAL\_DEPOSIT | |
| | 16 = TAX | |
| | 17 = DIRECT\_DEBIT | |
| | 18 = DUMMY | |
| | 19 = ALTPAY | |
| | 20 = STORED\_BALANCE | |
| | To access this field, the user making the API call must have a `MANAGE` task permission for that specific ad account. See [Ad Account, Assigned Users](https://developers.facebook.com/docs/marketing-api/reference/ad-account/assigned-users) for more information. | |
| `extended_credit_invoice_group` | `ExtendedCreditInvoiceGroup` | The extended credit invoice group that the ad account belongs to |
| `failed_delivery_checks` | `list<DeliveryCheck>` | Failed delivery checks |
| `fb_entity` | `unsigned int32` | `fb_entity` |
| `funding_source` | `numeric string` | ID of the payment method. If the account does not have a payment method it will still be possible to create ads but these ads will get no delivery. Not available if the account is disabled |
| `funding_source_details` | `FundingSourceDetails` | ID = ID of the payment method |
| | COUPON = Details of the Facebook Ads Coupon from the payment method | |
| | COUPONS = List of active Facebook Ads Coupon from the ad account | |
| | COUPON\_ID = ID of the Facebook Ads Coupon | |
| | AMOUNT = Amount of Facebook Ads Coupon | |
| | CURRENCY = Currency of the Facebook Ads Coupon |
| | DISPLAY\_AMOUNT = How the amount of Facebook Ads Coupon is displayed | |
| | EXPIRATION = When the coupon will expire | |
| | START\_DATE = When the coupon starts | |
| | DISPLAY\_STRING = How the payment method is shown | |
| | CAMPAIGN\_IDS = List of campaigns the coupon can be applied to, empty if the coupon is applied on the ad account level. | |
| | ORIGINAL\_AMOUNT = Amount of Facebook Ads Coupon When Issued | |
| | ORIGINAL\_DISPLAY\_AMOUNT = How the Facebook Ads Coupon displayed When Issued | |
| | TYPE = Type of the funding source | |
| | 0 = UNSET | |
| | 1 = CREDIT\_CARD | |
| | 2 = FACEBOOK\_WALLET | |
| | 3 = FACEBOOK\_PAID\_CREDIT | |
| | 4 = FACEBOOK\_EXTENDED\_CREDIT | |
| | 5 = ORDER | |
| | 6 = INVOICE | |
| | 7 = FACEBOOK\_TOKEN | |
| | 8 = EXTERNAL\_FUNDING | |
| | 9 = FEE | |
| | 10 = FX | |
| | 11 = DISCOUNT | |
| | 12 = PAYPAL\_TOKEN | |
| | 13 = PAYPAL\_BILLING\_AGREEMENT | |
| | 14 = FS\_NULL | |
| | 15 = EXTERNAL\_DEPOSIT | |
| | 16 = TAX | |
| | 17 = DIRECT\_DEBIT | |
| | 18 = DUMMY | |
| | 19 = ALTPAY | |
| | 20 = STORED\_BALANCE | |
| | To access this field, the user making the API call must have a `MANAGE` task permission for that specific ad account. See [Ad Account, Assigned Users](https://developers.facebook.com/docs/marketing-api/reference/ad-account/assigned-users) for more information. | |
| `has_migrated_permissions` | `bool` | Whether this account has migrated permissions |
| `has_page_authorized_adaccount` | `bool` | Indicates whether a Facebook page has authorized this ad account to place ads with political content. If you try to place an ad with political content using this ad account for this page, and this page has not authorized this ad account for ads with political content, your ad will be disapproved. See [Breaking Changes, Marketing API, Ads with Political Content](https://developers.facebook.com/docs/marketing-api/changelog#v2_9_ads_political_content) and [Facebook Advertising Policies](https://www.facebook.com/policies/ads) |
| `io_number` | `numeric string` | The Insertion Order (IO) number. |
| `is_attribution_spec_system_default` | `bool` | If the attribution specification of ad account is generated from system default values |
| `is_direct_deals_enabled` | `bool` | Whether the account is enabled to run Direct Deals |
| `is_in_3ds_authorization_enabled_market` | `bool` | If the account is in a market requiring to go through payment process going through 3DS authorization |
| `is_notifications_enabled` | `bool` | Get the notifications status of the user for this ad account. This will return true or false depending if notifications are enabled or not |
| `is_personal` | `unsigned int32` | Indicates if this ad account is being used for private, non-business purposes. This affects how value-added tax (VAT) is assessed. Note: This is not related to whether an ad account is attached to a business. |
| `is_prepay_account` | `bool` | If this ad account is a prepay. Other option would be a postpay account. |
| | To access this field, the user making the API call must have a `ADVERTISE` or `MANAGE` task permission for that specific ad account. See [Ad Account, Assigned Users](https://developers.facebook.com/docs/marketing-api/reference/ad-account/assigned-users) for more information. | |
| `is_tax_id_required` | `bool` | If tax id for this ad account is required or not. |
| | To access this field, the user making the API call must have a `ADVERTISE` or `MANAGE` task permission for that specific ad account. See [Ad Account, Assigned Users](https://developers.facebook.com/docs/marketing-api/reference/ad-account/assigned-users) for more information. | |
| `line_numbers` | `list<integer>` | The line numbers |
| `media_agency` | `numeric string` | The agency, this could be your own business. Must be a Facebook Page Alias, Facebook Page ID or an Facebook App ID. In absence of one, you can use NONE or UNFOUND. |
| `min_campaign_group_spend_cap` | `numeric string` | The minimum required spend cap of Ad Campaign. |
| `min_daily_budget` | `unsigned int32` | The minimum daily budget for this Ad Account |
| `name` | `string` | Name of the account. If not set, the name of the first admin visible to the user will be returned. |
| `offsite_pixels_tos_accepted` | `bool` | Indicates whether the offsite pixel Terms Of Service contract was signed. This feature can be accessible before v2.9 |
| `opportunity_score` | `float` | On a 0-100 point scale, this score represents how optimized the ad account's campaigns, ad sets and ads are overall. |
| | See [Opportunity Score](#opportunity-score-and-recommendations) to learn more. | |
| `owner` | `numeric string` | The ID of the account owner |
| `partner` | `numeric string` | This could be Facebook Marketing Partner, if there is one. Must be a Facebook Page Alias, Facebook Page ID or an Facebook App ID. In absence of one, you can use NONE or UNFOUND. |
| `rf_spec` | `ReachFrequencySpec` | Reach and Frequency limits configuration. See [Reach and Frequency](https://developers.facebook.com/docs/marketing-api/guides/reach-and-frequency) |
| `show_checkout_experience` | `bool` | Whether or not to show the pre-paid checkout experience to an advertiser. If true, the advertiser is eligible for checkout, or they are already locked in to checkout and haven't graduated to postpay. |
| `spend_cap` | `numeric string` | The maximum amount that can be spent by this Ad Account. When the amount is reached, all delivery stops. A value of 0 means no spending-cap. Setting a new spend cap only applies to spend AFTER the time at which you set it. Value specified in basic unit of the currency, for example 'cents' for USD. |
| `tax_id` | `string` | Tax ID |
| `tax_id_status` | `unsigned int32` | VAT status code for the account. |
| | 0: Unknown | |
| | 1: VAT not required- US/CA | |
| | 2: VAT information required | |
| | 3: VAT information submitted | |
| | 4: Offline VAT validation failed | |
| | 5: Account is a personal account | |
| `tax_id_type` | `string` | Type of Tax ID |
| `timezone_id` | `unsigned int32` | The timezone ID of this ad account |
| `timezone_name` | `string` | Name for the time zone |
| `timezone_offset_hours_utc` | `float` | Time zone difference from UTC (Coordinated Universal Time). |
| `tos_accepted` | `map<string, int32>` | Checks if this specific ad account has signed the Terms of Service contracts. Returns 1, if terms were accepted. |
| `user_tasks` | `list<string>` | `user_tasks` |
| `user_tos_accepted` | `map<string, int32>` | Checks if a user has signed the Terms of Service contracts related to the Business that contains a specific ad account. Must include user's access token to get information. This verification is not valid for system users. |

| Edges | |
| :--- | :--- |
| **Edge** | **Description** |
| `account_controls` | `Edge<AdAccountBusinessConstraints>` | Account Controls is for Advantage+ shopping campaigns where advertisers can set audience controls for minimum age and excluded geo location. |
| `activities` | `Edge<AdActivity>` | The activities of this ad account |
| `adcreatives` | `Edge<AdCreative>` | The ad creatives of this ad account |
| `ads_reporting_mmm_reports` | `Edge<AdsReportBuilderMMMReport>` | Marketing mix modeling (MMM) reports generated for this ad account. |
| `ads_reporting_mmm_schedulers` | `Edge<AdsReportBuilderMMMReportScheduler>` | Get all MMM report schedulers by this ad account |
| `advertisable_applications` | `Edge<Application>` | All advertisable apps associated with this account |
| `advideos` | `Edge<Video>` | The videos associated with this account |
| `applications` | `Edge<Application>` | Applications connected to the ad accounts |
| `asyncadcreatives` | `Edge<AdAsyncRequestSet>` | The async ad creative creation requests associated with this ad account. |
| `broadtargetingcategories` | `Edge<BroadTargetingCategories>` | Broad targeting categories (BCTs) can be used for targeting |
| `customaudiencestos` | `Edge<CustomAudiencesTOS>` | The custom audiences term of services available to the ad account |
| `customconversions` | `Edge<CustomConversion>` | The custom conversions owned by/shared with this ad account |
| `delivery_estimate` | `Edge<AdAccountDeliveryEstimate>` | The delivery estimate for a given ad set configuration for this ad account |
| `deprecatedtargetingadsets` | `Edge<AdCampaign>` | Ad sets with deprecating targeting options for this ad account |
| `dsa_recommendations` | `Edge<AdAccountDsaRecommendations>` | `dsa_recommendations` |
| `generatepreviews` | `Edge<AdPreview>` | Generate previews for a creative specification |
| `impacting_ad_studies` | `Edge<AdStudy>` | The ad studies that contain this ad account or any of its descendant ad objects |
| `instagram_accounts` | `Edge<ShadowIGUser>` | Instagram accounts connected to the ad accounts |
| `mcmeconversions` | `Edge<AdsMcmeConversion>` | `mcmeconversions` |
| `minimum_budgets` | `Edge<MinimumBudget>` | Returns minimum daily budget values by currency |
| `promote_pages` | `Edge<Page>` | All pages that have been promoted under the ad account |
| `reachestimate` | `Edge<AdAccountReachEstimate>` | The reach estimate of a given targeting spec for this ad account |
| `saved_audiences` | `Edge<SavedAudience>` | Saved audiences in the account |
| `targetingbrowse` | `Edge<AdAccountTargetingUnified>` | Unified browse |
| `targetingsearch` | `Edge<AdAccountTargetingUnified>` | Unified search |
| `targetingsuggestions` | `Edge<AdAccountTargetingUnified>` | Unified suggestions |
| `targetingvalidation` | `Edge<AdAccountTargetingUnified>` | Unified validation |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 200 | Permissions error |
| 613 | Calls to this api have exceeded the rate limit. |
| 100 | Invalid parameter |
| 190 | Invalid OAuth 2.0 Access Token |
| 80004 | There have been too many calls to this ad-account. Wait a bit and try again. For more info, please refer to https://developers.facebook.com/docs/graph-api/overview/rate-limiting#ads-management. |
| 3018 | The start date of the time range cannot be beyond 37 months from the current date |
| 2500 | Error parsing graph query |
| 1150 | An unknown error occurred. |
| 2635 | You are calling a deprecated version of the Ads API. Please update to the latest version. |
| 368 | The action attempted has been deemed abusive or is otherwise disallowed |

**Creating**

To create a new ad account for your business you must specify `name`, `currency`, `timezone_id`, `end_advertiser`, `media_agency`, and `partner`. Provide `end_advertiser`, `media_agency`, and `partner`:
*   They must be Facebook Page Aliases, Facebook Page ID or an Facebook app ID. For example, to provide your company as an end advertiser you specify `my company` or `20531316728`.
*   The End Advertiser ID is the Facebook primary Page ID or Facebook app ID. Further reference to this field (for formatting and acceptable values) may be found [here](https://developers.facebook.com/docs/marketing-api/reference/ad-account#fields).
*   If your ad account has no End Advertiser, Media Agency, or Partner, specify `NONE`.
*   If your ad account has an End Advertiser, Media Agency, or Partner, that are not represented on Facebook by Page or app, specify `UNFOUND`.

Once you set `end_advertiser` to a value other than `NONE` or `UNFOUND` you cannot change it.

*   **Create an ad account:**

    ```curl
    curl \-F "name=MyAdAccount" \-F "currency=USD" \-F "timezone_id=1" \-F "end_advertiser=<END_ADVERTISER_ID>" \-F "media_agency=<MEDIA_AGENCY_ID>" \-F "partner=NONE" \-F "access_token=<ACCESS_TOKEN>" \"https://graph.facebook.com/<API_VERSION>/<BUSINESS_ID>/adaccount"
    ```

    If you have an extended credity line with Facebook, you can set `invoice` to `true` and we associate your new ad account to this credit line.

*   **The response:**

    ```json
    {
      "id": "act_<ADACCOUNT_ID>",
      "account_id": "<ADACCOUNT_ID>",
      "business_id": "<BUSINESS_ID>",
      "end_advertiser_id": "<END_ADVERTISER_ID>",
      "media_agency_id": "<MEDIA_AGENCY_ID>",
      "partner_id": "NONE"}
    ```

You can make a `POST` request to `product_audiences` edge from the following paths:
*   `/act_{ad_account_id}/product_audiences`

When posting to this edge, an AdAccount will be created.

| Example | |
| :--- | :--- |
| HTTP | `POST /v24.0/act_<AD_ACCOUNT_ID>/product_audiences HTTP/1.1
Host: graph.facebook.com

name=Test+Iphone+Product+Audience&product_set_id=%3CPRODUCT_SET_ID%3E&inclusions=%5B%7B%22retention_seconds%22%3A86400%2C%22rule%22%3A%7B%22and%22%3A%5B%7B%22event%22%3A%7B%22eq%22%3A%22AddToCart%22%7D%7D%2C%2B%7B%22userAgent%22%3A%7B%22i_contains%22%3A%22iPhone%22%7D%7D%5D%7D%7D%5D&exclusions=%5B%7B%22retention_seconds%22%3A172800%2C%22rule%22%3A%7B%22event%22%3A%7B%22eq%22%3A%22Purchase%22%7D%7D%7D%5D` |

If you want to learn how to use the Graph API, read our [Using Graph API](https://developers.facebook.com/docs/graph-api/overview) guide.

| Parameters | |
| :--- | :--- |
| `associated_audience_id` | `int64` | `SELF_EXPLANATORY` |
| `creation_params` | `dictionary { string : <string> }` | `SELF_EXPLANATORY` |
| `description` | `string` | `SELF_EXPLANATORY` |
| `enable_fetch_or_create` | `boolean` | `enable_fetch_or_create` |
| `event_sources` | `array<JSON object>` | `event_sources` |
| `exclusions` | `list<Object>` | `SELF_EXPLANATORY` |
| `inclusions` | `list<Object>` | `SELF_EXPLANATORY` |
| `name` | `string` | `SELF_EXPLANATORY` |
| | **Required** | |
| `opt_out_link` | `string` | `SELF_EXPLANATORY` |
| `parent_audience_id` | `int64` | `SELF_EXPLANATORY` |
| `product_set_id` | `numeric string` or `integer` | `SELF_EXPLANATORY` |
| | **Required** | |
| `subtype` | `enum {CUSTOM, PRIMARY, WEBSITE, APP, OFFLINE_CONVERSION, CLAIM, MANAGED, PARTNER, VIDEO, LOOKALIKE, ENGAGEMENT, BAG_OF_ACCOUNTS, STUDY_RULE_AUDIENCE, FOX, MEASUREMENT, REGULATED_CATEGORIES_AUDIENCE, BIDDING, EXCLUSION, MESSENGER_SUBSCRIBER_LIST}` | `SELF_EXPLANATORY` |

| Return Type | |
| :--- | :--- |
| This endpoint supports read-after-write and will read the node represented by `id` in the return type. | |
| `Struct {id: numeric string, message: string, }` | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 100 | Invalid parameter |
| 2654 | Failed to create custom audience |

You can make a `POST` request to `ad_accounts` edge from the following paths:
*   `/{custom_audience_id}/ad_accounts`

When posting to this edge, an AdAccount will be created.

| Parameters | |
| :--- | :--- |
| `adaccounts` | `list<numeric string>` | Array of new ad account IDs to receive access to the custom audience |
| `permissions` | `string` | `targeting` or `targeting_and_insights`. If `targeting` the recipient ad account can target the audience in ads. `targeting_and_insights` also allows recipient account to view the audience in Audience Insights tool |
| `relationship_type` | `array<string>` | `relationship_type` |
| `replace` | `boolean` | `true` or `false`. If `true` the list of adaccounts provided in the call will replace the existing set of ad accounts this audience is shared with. |

| Return Type | |
| :--- | :--- |
| This endpoint supports read-after-write and will read the node to which you POSTed. | |
| `Struct {success: bool, sharing_data: List [Struct {ad_acct_id: string, business_id: numeric string, audience_share_status: string, errors: List [string ], } ], }` | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 200 | Permissions error |

You can make a `POST` request to `owned_ad_accounts` edge from the following paths:
*   `/{business_id}/owned_ad_accounts`

When posting to this edge, an AdAccount will be created.

| Parameters | |
| :--- | :--- |
| `adaccount_id` | `string` | Ad account ID. |
| | **Required** | |

| Return Type | |
| :--- | :--- |
| This endpoint supports read-after-write and will read the node to which you POSTed. | |
| `Struct {access_status: string, }` | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 3979 | You have exceeded the number of allowed ad accounts for your Business Manager at this time. |
| 3994 | Personal accounts that do not have any history of activity are not eligible for migration to a business manager. Instead create an ad account inside your business manager. |
| 100 | Invalid parameter |
| 3980 | One or more of the ad accounts in your Business Manager are currently in bad standing or in review. All of your accounts must be in good standing in order to create new ad accounts. |
| 415 | Two factor authentication required. User have to enter a code from SMS or TOTP code generator to pass 2fac. This could happen when accessing a 2fac-protected asset like a page that is owned by a 2fac-protected business manager. |
| 3936 | You've already tried to claim this ad account. You'll see a notification if your request is accepted. |
| 368 | The action attempted has been deemed abusive or is otherwise disallowed |
| 3944 | Your Business Manager already has access to this object. |

You can make a `POST` request to `adaccount` edge from the following paths:
*   `/{business_id}/adaccount`

When posting to this edge, an AdAccount will be created.

| Parameters | |
| :--- | :--- |
| `ad_account_created_from_bm_flag` | `boolean` | `ad_account_created_from_bm_flag` |
| `currency` | `ISO 4217 Currency Code` | The currency used for the account |
| | **Required** | |
| `end_advertiser` | | The entity the ads will target. Must be a Facebook Page Alias, Facebook Page ID or an Facebook App ID. In absence of one, you can use NONE or UNFOUND. Note that once a value other than NONE or UNFOUND is set, it cannot be modified any more. |
| | **Required** | |
| `funding_id` | `numeric string` or `integer` | ID of the payment method. If the account does not have a payment method it will still be possible to create ads but these ads will get no delivery. |
| `invoice` | `boolean` | If business manager has Business Manager Owned Normal Credit Line on file on the FB CRM, it will attach the ad account to that credit line. |
| `invoice_group_id` | `numeric string` | The ID of the invoice group this adaccount should be enrolled in |
| `invoicing_emails` | `array<string>` | Emails addressed where invoices will be sent. |
| `io` | `boolean` | If corporate channel is direct sales. |
| `media_agency` | `string` | The agency, this could be your own business. Must be a Facebook Page Alias, Facebook Page ID or an Facebook App ID. In absence of one, you can use NONE or UNFOUND |
| | **Required** | |
| `name` | `string` | The name of the ad account |
| | **Required** | |
| `partner` | `string` | The advertising partner for this account, if there is one. Must be a Facebook Page Alias, Facebook Page ID or an Facebook App ID. In absence of one, you can use NONE or UNFOUND. |
| | **Required** | |
| `po_number` | `string` | Purchase order number |
| `timezone_id` | `unsigned int32` | ID for the timezone. See [here](https://developers.facebook.com/docs/marketing-api/reference/ad-account/supported-timezones). |
| | **Required** | |

| Return Type | |
| :--- | :--- |
| This endpoint supports read-after-write and will read the node represented by `id` in the return type. | |
| `Struct {id: token with structure: AdAccount ID, account_id: numeric string, business_id: numeric string, end_advertiser_id: string, media_agency_id: string, partner_id: string, seer_ad_account_restricted_by_soft_desc_challenge: bool, soft_desc_challenge_credential_id: string, soft_desc_challenge_localized_auth_amount: int32, }` | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 100 | Invalid parameter |
| 3979 | You have exceeded the number of allowed ad accounts for your Business Manager at this time. |
| 3980 | One or more of the ad accounts in your Business Manager are currently in bad standing or in review. All of your accounts must be in good standing in order to create new ad accounts. |
| 415 | Two factor authentication required. User have to enter a code from SMS or TOTP code generator to pass 2fac. This could happen when accessing a 2fac-protected asset like a page that is owned by a 2fac-protected business manager. |
| 3902 | There was a technical issue and your new ad account wasn't created. Please try again. |
| 457 | The session has an invalid origin |
| 190 | Invalid OAuth 2.0 Access Token |
| 23007 | This credit card can't be set as your account's primary payment method, because your account is set up to be billed after your ads have delivered. This setup can't be changed. Please try a different card or payment method. |

**Updating**

**Notice:**
*   The `default_dsa_payor` and `default_dsa_beneficiary` values can be set to both of them or none of them. The API does not allow only one of them to exist in the data storage.
*   To unset the values: pass two empty strings at the same time, the values will be unset in the data storage. It does not allow you to unset only one of them.

You can update an AdAccount by making a `POST` request to `/act_{ad_account_id}`.

| Parameters | |
| :--- | :--- |
| `agency_client_declaration` | `dictionary { string : <string> }` | Details of the agency advertising on behalf of this client account, if applicable. Requires Business Manager Admin privileges. |
| `attribution_spec` | `list<Object>` | Deprecated due to iOS 14 changes. Please visit the [changelog](https://developers.facebook.com/docs/graph-api/changelog) for more information. |
| `business_info` | `dictionary { string : <string> }` | Business Info |
| `custom_audience_info` | `JSON object` | Custom audience info for Automated Shopping Ads. |
| `default_dsa_beneficiary` | `string` | This is the default value for creating L2 targeting EU's beneficiary. |
| `default_dsa_payor` | `string` | This is the default value for creating L2 targeting EU's payor. |
| `end_advertiser` | `string` | The entity the ads will target. Must be a Facebook Page Alias, Facebook Page ID or an Facebook App ID. |
| `is_notifications_enabled` | `boolean` | If notifications are enabled or not for this account |
| `media_agency` | `string` | The ID of a Facebook Page or Facebook App. Once it is set to any values other than NONE or UNFOUND, it cannot be modified any more |
| `name` | `string` | The name of the ad account |
| `partner` | `string` | The ID of a Facebook Page or Facebook App. Once it is set to any values other than NONE or UNFOUND, it cannot be modified any more |
| `spend_cap` | `float` | The total amount that this account can spend, after which all campaigns will be paused, based on `amount_spent`. A value of 0 signifies no spending-cap and setting a new spend cap only applies to spend AFTER the time at which you set it. Value specified in standard denomination of the currency, e.g. 23.50 for USD $23.50. |
| `spend_cap_action` | `string` | Setting this parameter to `reset` sets the `amount_spent` back to 0. Setting it to `delete` removes the `spend_cap` from the account. |

| Return Type | |
| :--- | :--- |
| This endpoint supports read-after-write and will read the node to which you POSTed. | |
| `Struct {success: bool, }` | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 100 | Invalid parameter |
| 200 | Permissions error |
| 368 | The action attempted has been deemed abusive or is otherwise disallowed |
| 190 | Invalid OAuth 2.0 Access Token |
| 80004 | There have been too many calls to this ad-account. Wait a bit and try again. For more info, please refer to https://developers.facebook.com/docs/graph-api/overview/rate-limiting#ads-management. |

You can update an AdAccount by making a `POST` request to `/act_{ad_account_id}/assigned_users`.

| Parameters | |
| :--- | :--- |
| `tasks` | `array<enum {MANAGE, ADVERTISE, ANALYZE, DRAFT, AA_ANALYZE}>` | AdAccount permission tasks to assign this user |
| `user` | `UID` | Business user id or system user id |
| | **Required** | |

| Return Type | |
| :--- | :--- |
| This endpoint supports read-after-write and will read the node to which you POSTed. | |
| `Struct {success: bool, }` | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 100 | Invalid parameter |
| 200 | Permissions error |
| 2620 | Invalid call to update account permissions |

**Deleting**

You can dissociate an AdAccount from an AdsPixel by making a `DELETE` request to `/{ads_pixel_id}/shared_accounts`.

| Parameters | |
| :--- | :--- |
| `account_id` | `numeric string` | `SELF_EXPLANATORY` |
| | **Required** | |
| `business` | `numeric string` or `integer` | `SELF_EXPLANATORY` |
| | **Required** | |

| Return Type | |
| :--- | :--- |
| `Struct {success: bool, }` | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 100 | Invalid parameter |

You can dissociate an AdAccount from a CustomAudience by making a `DELETE` request to `/{custom_audience_id}/ad_accounts`.

| Parameters | |
| :--- | :--- |
| `adaccounts` | `list<numeric string>` | Array of ad account IDs to revoke access to the custom audience |

| Return Type | |
| :--- | :--- |
| `Struct {success: bool, }` | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 100 | Invalid parameter |

# Ad Account Account Controls

**Reading**

Get default fields on an `AdAccountBusinessConstraints` node associated with this AdAccount. Refer to the [AdAccountBusinessConstraints reference](https://developers.facebook.com/docs/marketing-api/reference/ad-account-business-constraints) for a list of these fields and their descriptions.

| Example | |
| :--- | :--- |
| HTTP | `GET /v24.0/{ad-account-id}/account_controls HTTP/1.1
Host: graph.facebook.com` |

If you want to learn how to use the Graph API, read our [Using Graph API](https://developers.facebook.com/docs/graph-api/overview) guide.

| Parameters | |
| :--- | :--- |
| This endpoint doesn't have any parameters. | |

| Fields | |
| :--- | :--- |
| Reading from this edge will return a JSON formatted result: | |
| ` {    "data": [],    "paging": {} }` | |
| `data` | A list of `AdAccountBusinessConstraints` nodes. |
| `paging` | For more details about pagination, see the [Graph API guide](#paginated-results). |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 200 | Permissions error |
| 100 | Invalid parameter |
| 190 | Invalid OAuth 2.0 Access Token |

**Creating**

You can make a `POST` request to `account_controls` edge from the following paths:
*   `/act_{ad_account_id}/account_controls`

When posting to this edge, an `AdAccountBusinessConstraints` will be created.

| Parameters | |
| :--- | :--- |
| `audience_controls` | `JSON` or `object-like arrays` | `audience_controls` |
| | **Required** | |
| `placement_controls` | `JSON` or `object-like arrays` | This field contains another field called `placement_exclusion` that provides information on which placements need to be excluded while targeting. All the other placements will be included. Each placement is denoted by a string that concatenates the publisher platform of the placement and a position inside the publisher platform, separated by an underscore. What is provided as parameter is a list of placements. For e.g. If we want to exclude the rewarded videos position from the audience network publisher platform, we provide the field as follows: `{ "placement_controls": { "placement_exclusions": ["audience_network_rewarded_video"] } }` Only a few placements are allowed to be excluded: `audience_network_classic` (native, banner & interstitial positions of audience network) `audience_network_rewarded_video` (rewarded videos of audience network) `audience_network_instream_video` (instream videos of audience network) `facebook_marketplace` (marketplace section inside facebook) `facebook_rhc` (right hand column inside facebook) |

| Return Type | |
| :--- | :--- |
| `Struct {id: string, success: bool, error_code: string, error_message: string, }` | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 100 | Invalid parameter |
| 2641 | Your ad includes or excludes locations that are currently restricted |
| 200 | Permissions error |

**Updating**

You can't perform this operation on this endpoint.

**Deleting**

You can't perform this operation on this endpoint.

# Ad Account Activities

**Reading**

Activities related to an Ad Account.

| Parameters | |
| :--- | :--- |
| This endpoint doesn't have any parameters. | |

| Fields | |
| :--- | :--- |
| Reading from this edge will return a JSON formatted result: | |
| ` {    "data": [],    "paging": {} }` | |
| `data` | A list of `AdActivity` nodes. |
| `paging` | For more details about pagination, see the [Graph API guide](#paginated-results). |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 200 | Permissions error |
| 613 | Calls to this api have exceeded the rate limit. |
| 80004 | There have been too many calls to this ad-account. Wait a bit and try again. For more info, please refer to https://developers.facebook.com/docs/graph-api/overview/rate-limiting#ads-management. |
| 190 | Invalid OAuth 2.0 Access Token |
| 100 | Invalid parameter |
| 368 | The action attempted has been deemed abusive or is otherwise disallowed |

**Creating**

You can't perform this operation on this endpoint.

**Updating**

You can't perform this operation on this endpoint.

**Deleting**

You can't perform this operation on this endpoint.

# Ad Account Ad Place Page Sets

This endpoint applies to published Pages.

**Reading**

You can't perform this operation on this endpoint.

**Creating**

You can make a `POST` request to `ad_place_page_sets` edge from the following paths:
*   `/act_{ad_account_id}/ad_place_page_sets`

When posting to this edge, an `AdPlacePageSet` will be created.

| Parameters | |
| :--- | :--- |
| `location_types` | `list<enum {recent, home}>` | Type of user location the page set targets (e.g., 'recent', 'home') |
| `name` | `string` | Name of The Place PageSet |
| | **Required** | |
| `parent_page` | `numeric string` or `integer` | The parent page ID for all the locations pages |
| | **Required** | |

| Return Type | |
| :--- | :--- |
| This endpoint supports read-after-write and will read the node represented by `id` in the return type. | |
| `Struct {id: numeric string, }` | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 200 | Permissions error |
| 100 | Invalid parameter |

**Updating**

You can't perform this operation on this endpoint.

**Deleting**

You can't perform this operation on this endpoint.

# Ad Account Ad Creatives

**Reading**

The Ad Creatives that belong to this Ad Account.

Contains creative content for an ad account that you can use in your ads. Includes images, videos and so on. Using an ad account creative for a particular ad is subject to validation rules based on the ad type and other rules. See [Facebook Ads Guide](https://www.facebook.com/business/ads-guide) and [Validation, Objectives and Creative](https://developers.facebook.com/docs/marketing-api/guides/ad-creatives).

| Example | |
| :--- | :--- |
| HTTP | `GET /v24.0/act_<AD_ACCOUNT_ID>/adcreatives?fields=name%2Cid%2Cstatus HTTP/1.1
Host: graph.facebook.com` |

If you want to learn how to use the Graph API, read our [Using Graph API](https://developers.facebook.com/docs/graph-api/overview) guide.

| Parameters | |
| :--- | :--- |
| This endpoint doesn't have any parameters. | |

| Fields | |
| :--- | :--- |
| Reading from this edge will return a JSON formatted result: | |
| ` {    "data": [],    "paging": {},    "summary": {} }` | |
| `data` | A list of `AdCreative` nodes. |
| `paging` | For more details about pagination, see the [Graph API guide](#paginated-results). |
| `summary` | Aggregated information about the edge, such as counts. Specify the fields to fetch in the `summary` param (like `summary=total_count`). |
| `total_count` | `unsigned int32` | Total number of creatives in the ad account. |
| | **Default** | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 200 | Permissions error |
| 100 | Invalid parameter |
| 80004 | There have been too many calls to this ad-account. Wait a bit and try again. For more info, please refer to https://developers.facebook.com/docs/graph-api/overview/rate-limiting#ads-management. |
| 190 | Invalid OAuth 2.0 Access Token |
| 2500 | Error parsing graph query |

**Creating**

You can make a `POST` request to `adcreatives` edge from the following paths:
*   `/act_{ad_account_id}/adcreatives`

When posting to this edge, no Graph object will be created.

**Limitations**

*   When creating ad creatives, if the `object_story_id` being used is already in use by an existing creative, then the API will return the value of the existing `creative_id` instead of creating a new one.
*   Using `radius` can cause an error, code: 100, subcode 1815946, when targeting multiple locations. We recommend creating an ad for each location or not using `radius` in your call.

| Example | |
| :--- | :--- |
| HTTP | `POST /v24.0/act_<AD_ACCOUNT_ID>/adcreatives HTTP/1.1
Host: graph.facebook.com

name=Sample+Promoted+Post&object_story_id=%3CPAGE_ID%3E_%3CPOST_ID%3E` |

If you want to learn how to use the Graph API, read our [Using Graph API](https://developers.facebook.com/docs/graph-api/overview) guide.

| Parameters | |
| :--- | :--- |
| `actor_id` | `int64` | The actor ID (Page ID) of this creative. |
| `ad_disclaimer_spec` | `JSON object` | Disclaimer information to attach to your creative. |
| `adlabels` | `list<Object>` | Ad Labels associated with this creative. Used to group it with related ad objects. |
| `applink_treatment` | `enum{automatic, deeplink_with_web_fallback, deeplink_with-appstore_fallback, web_only}` | Used for Dynamic Ads. Specify what action should occur if a person clicks a link in the ad, but the business' app is not installed on their device. For example, open a webpage displaying the product, or open the app in an app store on the person's mobile device. |
| `asset_feed_spec` | `Object` | Used for Dynamic Creative to automatically experiment and deliver different variations of an ad's creative. Specifies an asset feed with multiple images, text and other assets used to generate variations of an ad. Formatted as a JSON string. |
| | **Supports Emoji** | |
| `authorization_category` | `enum{NONE, POLITICAL, POLITICAL_WITH_DIGITALLY_CREATED_MEDIA}` | Specifies whether ad is political or not. If your ad has political content, set this to POLITICAL, otherwise it defaults to null. Your ad will be disapproved if it contains political content but not labeled POLITICAL. See [Facebook Advertising Policies](https://www.facebook.com/policies/ads). This field cannot be used for Dynamic Ads. |
| `body` | `string` | The body of the ad. |
| | **Supports Emoji** | |
| `branded_content` | `JSON object` | `branded_content` |
| `branded_content_sponsor_page_id` | `numeric string` or `integer` | ID for page representing business which runs Branded Content ads. See [Creating Branded Content Ads](#creating-branded-content). |
| `bundle_folder_id` | `numeric string` or `integer` | The Dynamic Ad's bundle folder ID |
| `call_to_action` | `Object` | This field promotes an onsite or offsite action. |
| | **Supports Emoji** | |
| `categorization_criteria` | `enum{brand, category, product_type}` | The Dynamic Category Ad's categorization criteria |
| `category_media_source` | `enum{CATEGORY, MIXED, PRODUCTS_COLLAGE, PRODUCTS_SLIDESHOW}` | The Dynamic Ad's rendering mode for category ads |
| `contextual_multi_ads` | `JSON object` | `contextual_multi_ads` |
| `degrees_of_freedom_spec` | `JSON object` | Specifies the type of transformation which is enabled for the given creative |
| `destination_set_id` | `numeric string` | The ID of the Product Set for a Destination Catalog that will be used to link with Travel Catalogs. |
| `dynamic_ad_voice` | `enum{DYNAMIC, STORY_OWNER}` | Determines the Page voice to be used in Dynamic Local Ads |
| `enable_direct_install` | `boolean` | Whether Direct Install should be enabled on supported devices. |
| `enable_launch_instant_app` | `boolean` | Whether Instant App should be enabled on supported devices. |
| `execution_options` | `list<enum{validate_only}>` | **Default value:** Set |
| | An execution setting | |
| | `validate_only`: when this option is specified, the API call will not perform the mutation but will run through the validation rules against values of each field. | |
| | If the call passes validation or review, response will be `{"success": true}`. If the call does not pass, an error will be returned with more details. These options can be used to improve any UI to display errors to the user much sooner, e.g. as soon as a new value is typed into any field corresponding to this ad object, rather than at the upload/save stage, or after review. | |
| `facebook_branded_content` | `JSON object` | Params required for facebook branded content. |
| `format_transformation_spec` | `array<JSON object>` | `format_transformation_spec` |
| `image_crops` | `dictionary { enum{191x100, 100x72, 400x150, 600x360, 100x100, 400x500, 90x160, 300x400} : <list<list<int64>>> }` | Crop dimensions for the image specified. See [image crop reference](https://developers.facebook.com/docs/marketing-api/guides/ad-creatives/image-crop) for more details. |
| `image_file` | `string` | Reference to a local image file to upload for use in a creative. Not to exceed 8MB in size. If `object_story_spec` or `object_story_id` is specified, this field will be ignored |
| `image_hash` | `string` | Image hash for an image you have uploaded and can be used in a creative. If `object_story_spec` or `object_story_id` is specified, this field will be ignored |
| `image_url` | `URL` | URL for the image in this ad creative. Do not use image URLs returned by Facebook. Instead you should host the image on your own servers. Facebook saves the image from your URL to your ad account's image library. Images cannot exceed 8 MB. You must also provide one of these three fields: `image_file`, `image_hash`, or `image_url`. |
| `instagram_branded_content` | `JSON object` | Params required for instagram branded content. |
| `instagram_permalink_url` | `URL` | URL for a post on Instagram you want to run as an ad. Also known as Instagram media. |
| `instagram_user_id` | `numeric string` or `integer` | Instagram user ID |
| `interactive_components_spec` | `JSON object` | The specification for interactive component overlay on the media. |
| | **Supports Emoji** | |
| `link_og_id` | `string` | The Open Graph (OG) ID for the link in this creative if the landing page has OG tags. |
| `link_url` | `URL` | Identify a specific landing tab on your Facebook page by the Page tab's URL. See [connection objects](https://developers.facebook.com/docs/graph-api/reference/v24.0/page/tabs) for retrieving Page tab URLs. You can add `app_data` parameters to the URL to pass data to a Page's tab. |
| `marketing_message_structured_spec` | `JSON object` | `marketing_message_structured_spec` |
| `media_sourcing_spec` | `JSON object` | media sourcing spec for advertiser to specify additional media from various sources |
| `name` | `string` | Name of this ad creative as seen in the ad account's library. |
| `object_id` | `int64` | The Facebook object ID that is relevant to the ad. See [connection objects](https://developers.facebook.com/docs/graph-api/reference/v24.0/object) |
| `object_story_id` | `post_id` | ID of a Facebook Page post to use in an ad. You can get this ID by querying the posts of the page. If this post includes an image, it should not exceed 8 MB. Facebook will upload the image from the post to your ad account's image library. |
| `object_story_spec` | `string (ObjectStorySpec)` | JSON string of `AdCreativeObjectStorySpec` type. Use if you want to create a new unpublished page post and turn the post into an ad. The Page ID and the content to create a new unpublished page post. Specify `link_data`, `photo_data`, `video_data`, `text_data` or `template_data` with the content. |
| | **Supports Emoji** | |
| `object_type` | `string` | The type of Facebook object you want to advertise. Allowed values are: |
| | `PAGE` | |
| | `DOMAIN` | |
| | `EVENT` | |
| | `STORE_ITEM`: refers to an iTunes or Google Play store destination | |
| | `OFFER` | |
| | `SHARE`: from a page | |
| | `PHOTO` | |
| | `STATUS`: of a page | |
| | `VIDEO` | |
| | `APPLICATION`: app on Facebook | |
| `object_url` | `URL` | URL that opens if someone clicks your link on a link ad. This URL is not connected to a Facebook page. |
| `page_welcome_message` | `string` | You can create more tailored user experiences for your ads that click to Messenger or to WhatsApp by customizing your ads' greeting message. For ads that clicks to Whatsapp, you can set the the `page_welcome_message` field under `object_story_spec`. |
| | **Note:** If you are using the message received in Whatsapp to trigger any bot flows, please make sure to work with your BSP and agencies to update it so as to ensure flows aren't disrupted. | |
| | **Supports Emoji** | |
| `place_page_set_id` | `numeric string` | The Place Page Set when objective is `LOCAL_AWARENESS`. Used with Dynamic Local Ads |
| `platform_customizations` | `JSON` or `object-like arrays` | Use this field to specify the exact media to use on different Facebook placements. You can currently use this setting for images and videos. Facebook replaces the media originally defined in ad creative with this media when the ad displays in a specific placements. For example, if you define a media here for instagram, Facebook uses that media instead of the media defined in the ad creative when the ad appears on Instagram. |
| `playable_asset_id` | `numeric string` | The ID of the playable asset in this creative. |
| `portrait_customizations` | `JSON object` | Use this field to customizations how ads look in portrait mode format example for IG Stories, Facebook Stories, IGTV, etc |
| `product_set_id` | `numeric string` or `integer` | Used for Dynamic Ad. An ID for a product set, which groups related products or other items being advertised. |
| `recommender_settings` | `JSON object` | The recommender settings that can be used to control recommendations for Dynamic Ads. |
| `referral_id` | `numeric string` or `integer` | The ID of Referral Ad Configuration in this creative. |
| `regional_regulation_disclaimer_spec` | `JSON object` | `regional_regulation_disclaimer_spec` |
| `template_url` | `URL` | The product link url, which overrides the one set in Dynamic Product Ad's product feeds. |
| `template_url_spec` | `string (TemplateURLSpec)` | An optional structured collection of templated web and app-link descriptors that override the fallbacks that would otherwise be pulled from a Dynamic Ad`s catalog |
| `threads_user_id` | `numeric string` or `integer` | `threads_user_id` |
| `thumbnail_url` | `URL` | URL for a thumbnail image for this ad creative. You can provide dimensions for this with `thumbnail_width` and `thumbnail_height`. See [example](https://developers.facebook.com/docs/marketing-api/guides/ad-creatives/ad-creative-thumbnail). |
| `title` | `string` | Title for a Page Likes ad, which appears in the right-hand column on Facebook. |
| `url_tags` | `string` | A set of query string parameters which will replace or be appended to urls clicked from page post ads, message of the post, and canvas app install creatives only. |
| `use_page_actor_override` | `boolean` | If true, we show the page actor for mobile app ads. |

| Return Type | |
| :--- | :--- |
| This endpoint supports read-after-write and will read the node represented by `id` in the return type. | |
| `Struct {id: numeric string, success: bool, }` | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 100 | Invalid parameter |
| 500 | Message contains banned content |
| 200 | Permissions error |
| 2635 | You are calling a deprecated version of the Ads API. Please update to the latest version. |
| 613 | Calls to this api have exceeded the rate limit. |
| 1500 | The url you supplied is invalid |
| 80004 | There have been too many calls to this ad-account. Wait a bit and try again. For more info, please refer to https://developers.facebook.com/docs/graph-api/overview/rate-limiting#ads-management. |
| 190 | Invalid OAuth 2.0 Access Token |
| 105 | The number of parameters exceeded the maximum for this operation |
| 368 | The action attempted has been deemed abusive or is otherwise disallowed |

**Updating**

You can't perform this operation on this endpoint.

**Deleting**

You can't perform this operation on this endpoint.

# Ad Account Ad Images

**Reading**

Ad Images that belong to this Ad Account.

| Example | |
| :--- | :--- |
| HTTP | `GET /v24.0/{ad-account-id}/adimages HTTP/1.1
Host: graph.facebook.com` |

If you want to learn how to use the Graph API, read our [Using Graph API](https://developers.facebook.com/docs/graph-api/overview) guide.

| Parameters | |
| :--- | :--- |
| `biz_tag_id` | `int64` | Business tag ID to filter images. |
| `business_id` | `numeric string` or `integer` | Optional. Assists with filters such as recently used. |
| `hashes` | `list<string>` | Hash of the image. |
| `minheight` | `int64` | Minimum height of the image. |
| `minwidth` | `int64` | Minimum width of the image. |
| `name` | `string` | Image name used in image names filter. |

| Fields | |
| :--- | :--- |
| Reading from this edge will return a JSON formatted result: | |
| ` {    "data": [],    "paging": {},    "summary": {} }` | |
| `data` | A list of `AdImage` nodes. |
| `paging` | For more details about pagination, see the [Graph API guide](#paginated-results). |
| `summary` | Aggregated information about the edge, such as counts. Specify the fields to fetch in the `summary` param (like `summary=total_count`). |
| `total_count` | `int32` | Total number of images in the Ad Account. |
| | **Default** | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 200 | Permissions error |
| 80004 | There have been too many calls to this ad-account. Wait a bit and try again. For more info, please refer to https://developers.facebook.com/docs/graph-api/overview/rate-limiting#ads-management. |
| 368 | The action attempted has been deemed abusive or is otherwise disallowed |
| 100 | Invalid parameter |
| 190 | Invalid OAuth 2.0 Access Token |

**Creating**

You can make a `POST` request to `adimages` edge from the following paths:
*   `/act_{ad_account_id}/adimages`

When posting to this edge, an `AdImage` will be created.

| Parameters | |
| :--- | :--- |
| `bytes` | `Base64 UTF-8 string` | Image file. Example: `bytes = <image content in bytes format>` |
| `copy_from` | `JSON` or `object-like arrays` | This copies the Ad Image from the source to the destination account. |
| | `{"source_account_id":"<SOURCE_ACCOUNT_ID>", "hash":"02bee5277ec507b6fd0f9b9ff2f22d9c"}` | |

| Return Type | |
| :--- | :--- |
| This endpoint supports read-after-write and will read the node represented by `images` in the return type. | |
| `Map {string: Map {string: Struct {hash: string, url: string, url_128: string, url_256: string, url_256_height: string, url_256_width: string, height: int32, width: int32, name: string, } } }` | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 100 | Invalid parameter |
| 200 | Permissions error |
| 80004 | There have been too many calls to this ad-account. Wait a bit and try again. For more info, please refer to https://developers.facebook.com/docs/graph-api/overview/rate-limiting#ads-management. |
| 190 | Invalid OAuth 2.0 Access Token |
| 368 | The action attempted has been deemed abusive or is otherwise disallowed |
| 613 | Calls to this api have exceeded the rate limit. |

**Updating**

You can't perform this operation on this endpoint.

**Deleting**

You can dissociate an AdImage from an AdAccount by making a `DELETE` request to `/act_{ad_account_id}/adimages`.

| Parameters | |
| :--- | :--- |
| `hash` | `string` | Hash of the image you wish to delete. |
| | **Required** | |

| Return Type | |
| :--- | :--- |
| `Struct {success: bool, }` | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 100 | Invalid parameter |
| 80004 | There have been too many calls to this ad-account. Wait a bit and try again. For more info, please refer to https://developers.facebook.com/docs/graph-api/overview/rate-limiting#ads-management. |

# Ad Account Ads

**Graph API Version**

v24.0

**Reading**

Ads belonging to this ad account.

| Example | |
| :--- | :--- |
| cURL | `curl -G \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/ads` |

| Parameters | |
| :--- | :--- |
| `date_preset` | `enum{today, yesterday, this_month, last_month, this_quarter, maximum, data_maximum, last_3d, last_7d, last_14d, last_28d, last_30d, last_90d, last_week_mon_sun, last_week_sun_sat, last_quarter, last_year, this_week_mon_today, this_week_sun_today, this_year}` | Predefine date range used to aggregate insights metrics |
| `effective_status` | `list<string>` | Filter ads by effective status |
| `time_range` | `{'since':YYYY-MM-DD,'until':YYYY-MM-DD}` | Date range used to aggregate insights metrics |
| `updated_since` | `integer` | Time since the Ad has been updated. |

| Fields | |
| :--- | :--- |
| Reading from this edge will return a JSON formatted result: | |
| ` {    "data": [],    "paging": {},    "summary": {} }` | |
| `data` | A list of `Ad` nodes. |
| `paging` | For more details about pagination, see the [Graph API guide](#paginated-results). |
| `summary` | Aggregated information about the edge, such as counts. Specify the fields to fetch in the `summary` param (like `summary=insights`). |
| `insights` | `Edge<AdsInsights>` | Analytics summary for all objects |
| `total_count` | `unsigned int32` | Total number of Ads returned by the query |
| | **Default** | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 200 | Permissions error |
| 613 | Calls to this api have exceeded the rate limit. |
| 100 | Invalid parameter |
| 80004 | There have been too many calls to this ad-account. Wait a bit and try again. For more info, please refer to https://developers.facebook.com/docs/graph-api/overview/rate-limiting#ads-management. |
| 190 | Invalid OAuth 2.0 Access Token |
| 2500 | Error parsing graph query |
| 3018 | The start date of the time range cannot be beyond 37 months from the current date |
| 2635 | You are calling a deprecated version of the Ads API. Please update to the latest version. |
| 368 | The action attempted has been deemed abusive or is otherwise disallowed |

**Creating**

You can make a `POST` request to `ads` edge from the following paths:
*   `/act_{ad_account_id}/ads`

When posting to this edge, an `Ad` will be created.

| Example | |
| :--- | :--- |
| HTTP | `POST /v24.0/act_<AD_ACCOUNT_ID>/ads HTTP/1.1
Host: graph.facebook.com

name=My+Ad&adset_id=%3CAD_SET_ID%3E&creative=%7B%22creative_id%22%3A%22%3CCREATIVE_ID%3E%22%7D&status=PAUSED` |

If you want to learn how to use the Graph API, read our [Using Graph API](https://developers.facebook.com/docs/graph-api/overview) guide.

| Parameters | |
| :--- | :--- |
| `ad_schedule_end_time` | `datetime` | An optional parameter that defines the end time of an individual ad. If no end time is defined, the ad will run on the campaign’s schedule. This parameter is only available for sales and app promotion campaigns. |
| `ad_schedule_start_time` | `datetime` | An optional parameter that defines the start time of an individual ad. If no start time is defined, the ad will run on the campaign’s schedule. This parameter is only available for sales and app promotion campaigns. |
| `adlabels` | `list<Object>` | Ad labels associated with this ad |
| `adset_id` | `int64` | The ID of the ad set, required on creation. |
| `adset_spec` | `Ad set spec` | The ad set spec for this ad. When the spec is provided, `adset_id` field is not required. |
| `audience_id` | `string` | The ID of the audience. |
| `bid_amount` | `integer` | Deprecated. We no longer allow setting the `bid_amount` value on an ad. Please set `bid_amount` for the ad set. |
| `conversion_domain` | `string` | The domain where conversions happen. Required to create or update an ad in a campaign that shares data with a pixel. This field will be auto-populated for existing ads by inferring from destination URLs . Note that this field should contain only the first and second level domains, and not the full URL. For example `facebook.com`. |
| `creative` | `AdCreative` | This field is required for create. The ID or creative spec of the ad creative to be used by this ad. You can read more about creatives [here](https://developers.facebook.com/docs/marketing-api/guides/ad-creatives). You may supply the ID within an object as follows: |
| | `{"creative_id": <CREATIVE_ID>}` | |
| | or creative spec as follow: | |
| | `{"creative": {\"name\": \"<NAME>\", \"object_story_spec\": <SPEC>}}` | |
| | **Required** | **Supports Emoji** |
| `creative_asset_groups_spec` | `string (CreativeAssetGroupsSpec)` | `creative_asset_groups_spec` |
| | **Supports Emoji** | |
| `date_format` | `string` | The format of the date. |
| `display_sequence` | `int64` | The sequence of the ad within the same campaign |
| `engagement_audience` | `boolean` | Flag to create a new audience based on users who engage with this ad |
| `execution_options` | `list<enum{validate_only, synchronous_ad_review, include_recommendations}>` | **Default value:** Set |
| | An execution setting | |
| | `validate_only`: when this option is specified, the API call will not perform the mutation but will run through the validation rules against values of each field. | |
| | `include_recommendations`: this option cannot be used by itself. When this option is used, recommendations for ad object's configuration will be included. A separate section recommendations will be included in the response, but only if recommendations for this specification exist. | |
| | `synchronous_ad_review`: this option should not be used by itself. It should always be specified with `validate_only`. When these options are specified, the API call will perform Ads Integrity validations, which include message language checking, image 20% text rule, and so on, as well as the validation logics. | |
| | If the call passes validation or review, response will be `{"success": true}`. If the call does not pass, an error will be returned with more details. These options can be used to improve any UI to display errors to the user much sooner, e.g. as soon as a new value is typed into any field corresponding to this ad object, rather than at the upload/save stage, or after review. | |
| `include_demolink_hashes` | `boolean` | Include the demolink hashes. |
| `name` | `string` | Name of the ad. |
| | **Required** | **Supports Emoji** |
| `priority` | `int64` | Priority |
| `source_ad_id` | `numeric string` or `integer` | ID of the source Ad, if applicable. |
| `status` | `enum{ACTIVE, PAUSED, DELETED, ARCHIVED}` | Only `ACTIVE` and `PAUSED` are valid during creation. Other statuses can be used for update. When an ad is created, it will first go through ad review, and will have the ad status `PENDING_REVIEW` before it finishes review and reverts back to your selected status of `ACTIVE` or `PAUSED`. During testing, it is recommended to set ads to a `PAUSED` status so as to not incur accidental spend. |
| `tracking_specs` | `Object` | With Tracking Specs, you log actions taken by people on your ad. See [Tracking and Conversion Specs](#tracking-and-conversion-specs). |

| Return Type | |
| :--- | :--- |
| This endpoint supports read-after-write and will read the node represented by `id` in the return type. | |
| `Struct {id: numeric string, success: bool, }` | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 100 | Invalid parameter |
| 200 | Permissions error |
| 613 | Calls to this api have exceeded the rate limit. |
| 368 | The action attempted has been deemed abusive or is otherwise disallowed |
| 80004 | There have been too many calls to this ad-account. Wait a bit and try again. For more info, please refer to https://developers.facebook.com/docs/graph-api/overview/rate-limiting#ads-management. |
| 194 | Missing at least one required parameter |
| 500 | Message contains banned content |
| 2635 | You are calling a deprecated version of the Ads API. Please update to the latest version. |
| 190 | Invalid OAuth 2.0 Access Token |
| 105 | The number of parameters exceeded the maximum for this operation |

**Updating**

You can't perform this operation on this endpoint.

**Deleting**

You can't perform this operation on this endpoint.

# Ad Account Adsets

**Graph API Version**

v24.0

**Reading**

The adsets of this ad account

| Example | |
| :--- | :--- |
| HTTP | `GET /v24.0/act_<AD_ACCOUNT_ID>/adsets?fields=name%2Cid%2Cstatus HTTP/1.1
Host: graph.facebook.com` |

If you want to learn how to use the Graph API, read our [Using Graph API](https://developers.facebook.com/docs/graph-api/overview) guide.

| Parameters | |
| :--- | :--- |
| `date_preset` | `enum {TODAY, YESTERDAY, THIS_MONTH, LAST_MONTH, THIS_QUARTER, MAXIMUM, DATA_MAXIMUM, LAST_3D, LAST_7D, LAST_14D, LAST_28D, LAST_30D, LAST_90D, LAST_WEEK_MON_SUN, LAST_WEEK_SUN_SAT, LAST_QUARTER, LAST_YEAR, THIS_WEEK_MON_TODAY, THIS_WEEK_SUN_TODAY, THIS_YEAR}` | Predefine date range used to aggregate insights metrics |
| `effective_status` | `list<enum{ACTIVE, PAUSED, DELETED, PENDING_REVIEW, DISAPPROVED, PREAPPROVED, PENDING_BILLING_INFO, CAMPAIGN_PAUSED, ARCHIVED, ADSET_PAUSED, IN_PROCESS, WITH_ISSUES}>` | Effective status of adset |
| `is_completed` | `boolean` | Filter adset by completed status |
| `time_range` | `{'since':YYYY-MM-DD,'until':YYYY-MM-DD}` | Date range used to aggregate insights metrics |
| `updated_since` | `integer` | Time since the Adset has been updated. |

| Fields | |
| :--- | :--- |
| Reading from this edge will return a JSON formatted result: | |
| ` {    "data": [],    "paging": {},    "summary": {} }` | |
| `data` | A list of `AdSet` nodes. |
| `paging` | For more details about pagination, see the [Graph API guide](#paginated-results). |
| `summary` | Aggregated information about the edge, such as counts. Specify the fields to fetch in the `summary` param (like `summary=insights`). |
| `insights` | `Edge<AdsInsights>` | Analytics summary for all objects. Use nested parameters with this field. `insights.time_range({'until':'2018-01-01', 'since':'2017-12-12'}).time_increment(1)` |
| `total_count` | `unsigned int32` | Total number of objects |
| | **Default** | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 200 | Permissions error |
| 613 | Calls to this api have exceeded the rate limit. |
| 100 | Invalid parameter |
| 190 | Invalid OAuth 2.0 Access Token |
| 80004 | There have been too many calls to this ad-account. Wait a bit and try again. For more info, please refer to https://developers.facebook.com/docs/graph-api/overview/rate-limiting#ads-management. |
| 368 | The action attempted has been deemed abusive or is otherwise disallowed |
| 3018 | The start date of the time range cannot be beyond 37 months from the current date |
| 2500 | Error parsing graph query |

**Creating**

Mobile App Install CPA Billing will no longer be supported. The billing event cannot be App Install if the Optimization goal is App Install.

You can make a `POST` request to `adsets` edge from the following paths:
*   `/act_{ad_account_id}/adsets`

When posting to this edge, an `AdSet` will be created.

| Example | |
| :--- | :--- |
| HTTP | `POST /v24.0/act_<AD_ACCOUNT_ID>/adsets HTTP/1.1
Host: graph.facebook.com

name=My+First+Adset&lifetime_budget=20000&start_time=2025-12-10T11%3A21%3A33-0800&end_time=2025-12-20T11%3A21%3A33-0800&campaign_id=%3CAD_CAMPAIGN_ID%3E&bid_amount=100&billing_event=LINK_CLICKS&optimization_goal=LINK_CLICKS&targeting=%7B%22facebook_positions%22%3A%5B%22feed%22%5D%2C%22geo_locations%22%3A%7B%22countries%22%3A%5B%22US%22%5D%7D%2C%22publisher_platforms%22%3A%5B%22facebook%22%2C%22audience_network%22%5D%7D&status=PAUSED` |

If you want to learn how to use the Graph API, read our [Using Graph API](https://developers.facebook.com/docs/graph-api/overview) guide.

| Parameters | |
| :--- | :--- |
| `adlabels` | `list<Object>` | Specifies list of labels to be associated with this object. This field is optional |
| `adset_schedule` | `list<Object>` | Ad set schedule, representing a delivery schedule for a single day |
| `anchor_event_attribution_window_days` | `int64` | `anchor_event_attribution_window_days` |
| `attribution_spec` | `list<JSON object>` | Conversion attribution spec used for attributing conversions for optimization. Supported window lengths differ by optimization goal and campaign objective. |
| `automatic_manual_state` | `enum{UNSET, AUTOMATIC, MANUAL}` | `automatic_manual_state` |
| `bid_amount` | `integer` | Bid cap or target cost for this ad set. The bid cap used in a lowest cost bid strategy is defined as the maximum bid you want to pay for a result based on your `optimization_goal`. The target cost used in a target cost bid strategy lets Facebook bid to meet your target on average and keep costs stable as you spend. If an ad level `bid_amount` is specified, updating this value will overwrite the previous ad level bid. Unless you are using Reach and Frequency, `bid_amount` is required if `bid_strategy` is set to `LOWEST_COST_WITH_BID_CAP` or `COST_CAP`. The bid amount's unit is cents for currencies like USD, EUR, and the basic unit for currencies like JPY, KRW. The bid amount for ads with `IMPRESSION` or `REACH` as `billing_event` is per 1,000 occurrences, and has to be at least 2 US cents or more. For ads with other `billing_events`, the bid amount is for each occurrence, and has a minimum value 1 US cents. The minimum bid amounts of other currencies are of similar value to the US Dollar values provided. |
| `bid_strategy` | `enum{LOWEST_COST_WITHOUT_CAP, LOWEST_COST_WITH_BID_CAP, COST_CAP, LOWEST_COST_WITH_MIN_ROAS}` | Choose bid strategy for this ad set to suit your specific business goals. Each strategy has tradeoffs and may be available for certain `optimization_goals`: |
| | `LOWEST_COST_WITHOUT_CAP`: Designed to get the most results for your budget based on your ad set `optimization_goal` without limiting your bid amount. This is the best strategy if you care most about cost efficiency. However with this strategy it may be harder to get stable average costs as you spend. This strategy is also known as automatic bidding. Learn more in [Ads Help Center, About bid strategies: Lowest cost](https://www.facebook.com/business/help/1288599478479574). | |
| | `LOWEST_COST_WITH_BID_CAP`: Designed to get the most results for your budget based on your ad set `optimization_goal` while limiting actual bid to your specified amount. With a bid cap you have more control over your cost per actual optimization event. However if you set a limit which is too low you may get less ads delivery. If you select this, you must provide a bid cap with the `bid_amount` field. Note: during creation this bid strategy is set if you provide `bid_amount` only. This strategy is also known as manual maximum-cost bidding. Learn more in [Ads Help Center, About bid strategies: Lowest cost](https://www.facebook.com/business/help/1288599478479574). | |
| | **Notes:** | |
| | If you enable [campaign budget optimization](https://developers.facebook.com/docs/marketing-api/guides/campaign-budget-optimization), you should set `bid_strategy` at the parent campaign level. | |
| | `TARGET_COST` bidding strategy has been deprecated with Marketing API v9. | |
| `billing_event` | `enum{APP_INSTALLS, CLICKS, IMPRESSIONS, LINK_CLICKS, NONE, OFFER_CLAIMS, PAGE_LIKES, POST_ENGAGEMENT, THRUPLAY, PURCHASE, LISTING_INTERACTION}` | The billing event that this ad set is using: |
| | `APP_INSTALLS`: Pay when people install your app. | |
| | `CLICKS`: Deprecated. | |
| | `IMPRESSIONS`: Pay when the ads are shown to people. | |
| | `LINK_CLICKS`: Pay when people click on the link of the ad. | |
| | `OFFER_CLAIMS`: Pay when people claim the offer. | |
| | `PAGE_LIKES`: Pay when people like your page. | |
| | `POST_ENGAGEMENT`: Pay when people engage with your post. | |
| | `VIDEO_VIEWS`: Pay when people watch your video ads for at least 10 seconds. | |
| | `THRUPLAY`: Pay for ads that are played to completion, or played for at least 15 seconds. | |
| `budget_schedule_specs` | `list<JSON or object-like arrays>` | Initial high demand periods to be created with the ad set. |
| | Provide list of `time_start`, `time_end`,`budget_value`, and `budget_value_type`. | |
| | For example, | |
| | `-F 'budget_schedule_specs=[{
"time_start":1699081200,
"time_end":1699167600,
"budget_value":100,
"budget_value_type":"ABSOLUTE"
}]'` | |
| | See [High Demand Period](https://developers.facebook.com/docs/marketing-api/reference/high-demand-period) for more details on each field. | |
| `budget_source` | `enum{NONE, RMN}` | `budget_source` |
| `budget_split_set_id` | `numeric string` or `integer` | `budget_split_set_id` |
| `campaign_attribution` | `enum{}` | `campaign_attribution` |
| `campaign_id` | `numeric string` or `integer` | The ad campaign you wish to add this ad set to. |
| `campaign_spec` | `Campaign spec` | Provide `name`, `objective` and `buying_type` for a campaign you want to create. Otherwise you need to provide `campaign_id` for an existing ad campaign. For example: |
| | `-F 'campaign_spec={
  "name": "Inline created campaign",
  "objective": "CONVERSIONS",
  "buying_type": "AUCTION"
}'` | |
| | Please refer to the [Outcome-Driven Ads Experiences mapping table](https://developers.facebook.com/docs/marketing-api/guides/odax) to find new objectives and their corresponding destination types, optimization goals and promoted objects. | |
| `contextual_bundling_spec` | `Object` | settings of Contextual Bundle to support ads serving in Facebook contextual surfaces |
| `creative_sequence` | `list<numeric string or integer>` | Order of the adgroup sequence to be shown to users |
| `daily_budget` | `int64` | The daily budget defined in your account currency, allowed only for ad sets with a duration (difference between `end_time` and `start_time`) longer than 24 hours. |
| | Either `daily_budget` or `lifetime_budget` must be greater than 0. | |
| `daily_imps` | `int64` | Daily impressions. Available only for campaigns with `buying_type=FIXED_CPM` |
| `daily_min_spend_target` | `int64` | Daily minimum spend target of the ad set defined in your account currency. To use this field, daily budget must be specified in the Campaign. This target is not a guarantee but our best effort. |
| `daily_spend_cap` | `int64` | Daily spend cap of the ad set defined in your account currency. To use this field, daily budget must be specified in the Campaign. Set the value to 922337203685478 to remove the spend cap. |
| `destination_type` | `enum{WEBSITE, APP, MESSENGER, APPLINKS_AUTOMATIC, WHATSAPP, INSTAGRAM_DIRECT, FACEBOOK, MESSAGING_MESSENGER_WHATSAPP, MESSAGING_INSTAGRAM_DIRECT_MESSENGER, MESSAGING_INSTAGRAM_DIRECT_MESSENGER_WHATSAPP, MESSAGING_INSTAGRAM_DIRECT_WHATSAPP, SHOP_AUTOMATIC, ON_AD, ON_POST, ON_EVENT, ON_VIDEO, ON_PAGE, INSTAGRAM_PROFILE, FACEBOOK_PAGE, INSTAGRAM_PROFILE_AND_FACEBOOK_PAGE, INSTAGRAM_LIVE, FACEBOOK_LIVE, IMAGINE}` | Destination of ads in this Ad Set. Options include: Website, App, Messenger, `INSTAGRAM_DIRECT`, `INSTAGRAM_PROFILE`. |
| `dsa_beneficiary` | `string` | `dsa_beneficiary` |
| `dsa_payor` | `string` | `dsa_payor` |
| `end_time` | `datetime` | End time, required when `lifetime_budget` is specified. e.g. `2015-03-12 23:59:59-07:00` or `2015-03-12 23:59:59 PDT`. When creating a set with a daily budget, specify `end_time=0` to set the set to be ongoing and have no end date. UTC UNIX timestamp |
| `execution_options` | `list<enum{validate_only, include_recommendations}>` | **Default value:** Set |
| | An execution setting | |
| | `validate_only`: when this option is specified, the API call will not perform the mutation but will run through the validation rules against values of each field. | |
| | `include_recommendations`: this option cannot be used by itself. When this option is used, recommendations for ad object's configuration will be included. A separate section recommendations will be included in the response, but only if recommendations for this specification exist. | |
| | If the call passes validation or review, response will be `{"success": true}`. If the call does not pass, an error will be returned with more details. These options can be used to improve any UI to display errors to the user much sooner, e.g. as soon as a new value is typed into any field corresponding to this ad object, rather than at the upload/save stage, or after review. | |
| `existing_customer_budget_percentage` | `int64` | `existing_customer_budget_percentage` |
| `frequency_control_specs` | `list<Object>` | An array of frequency control specs for this ad set. Writes to this field are only available in ad sets where `REACH` and `THRUPLAY` are the performance goal. |
| `is_dynamic_creative` | `boolean` | Indicates the ad set must only be used for dynamic creatives. Dynamic creative ads can be created in this ad set. Defaults to `false` |
| `is_sac_cfca_terms_certified` | `boolean` | `is_sac_cfca_terms_certified` |
| `lifetime_budget` | `int64` | Lifetime budget, defined in your account currency. If specified, you must also specify an `end_time`. |
| | Either `daily_budget` or `lifetime_budget` must be greater than 0. | |
| `lifetime_imps` | `int64` | Lifetime impressions. Available only for campaigns with `buying_type=FIXED_CPM` |
| `lifetime_min_spend_target` | `int64` | Lifetime minimum spend target of the ad set defined in your account currency. To use this field, lifetime budget must be specified in the Campaign. This target is not a guarantee but our best effort. |
| `lifetime_spend_cap` | `int64` | Lifetime spend cap of the ad set defined in your account currency. To use this field, lifetime budget must be specified in the Campaign. Set the value to 922337203685478 to remove the spend cap. |
| `max_budget_spend_percentage` | `int64` | `max_budget_spend_percentage` |
| `min_budget_spend_percentage` | `int64` | `min_budget_spend_percentage` |
| `multi_optimization_goal_weight` | `enum{UNDEFINED, BALANCED, PREFER_INSTALL, PREFER_EVENT}` | `multi_optimization_goal_weight` |
| `name` | `string` | Ad set name, max length of 400 characters. |
| | **Required** | **Supports Emoji** |
| `optimization_goal` | `enum{NONE, APP_INSTALLS, AD_RECALL_LIFT, ENGAGED_USERS, EVENT_RESPONSES, IMPRESSIONS, LEAD_GENERATION, QUALITY_LEAD, LINK_CLICKS, OFFSITE_CONVERSIONS, PAGE_LIKES, POST_ENGAGEMENT, QUALITY_CALL, REACH, LANDING_PAGE_VIEWS, VISIT_INSTAGRAM_PROFILE, VALUE, THRUPLAY, DERIVED_EVENTS, APP_INSTALLS_AND_OFFSITE_CONVERSIONS, CONVERSATIONS, IN_APP_VALUE, MESSAGING_PURCHASE_CONVERSION, SUBSCRIBERS, REMINDERS_SET, MEANINGFUL_CALL_ATTEMPT, PROFILE_VISIT, PROFILE_AND_PAGE_ENGAGEMENT, ADVERTISER_SILOED_VALUE, AUTOMATIC_OBJECTIVE, MESSAGING_APPOINTMENT_CONVERSION}` | What the ad set is optimizing for. |
| | `APP_INSTALLS`: Will optimize for people more likely to install your app. | |
| | `ENGAGED_USERS`: Will optimize for people more likely to take a particular action in your app. | |
| | `EVENT_RESPONSES`: Will optimize for people more likely to attend your event. | |
| | `IMPRESSIONS`: Will show the ads as many times as possible. | |
| | `LEAD_GENERATION`: Will optimize for people more likely to fill out a lead generation form. | |
| | `LINK_CLICKS`: Will optimize for people more likely to click in the link of the ad. | |
| | `OFFER_CLAIMS`: Will optimize for people more likely to claim the offer. | |
| | `OFFSITE_CONVERSIONS`: Will optimize for people more likely to make a conversion in the site | |
| | `PAGE_ENGAGEMENT`: Will optimize for people more likely to engage with your page. | |
| | `PAGE_LIKES`: Will optimize for people more likely to like your page. | |
| | `POST_ENGAGEMENT`: Will optimize for people more likely to engage with your post. | |
| | `REACH`: Optimize to reach the most unique users of each day or interval specified in `frequency_control_specs`. | |
| | `SOCIAL_IMPRESSIONS`: Increase the number of impressions with social context. For example, with the names of one or more of the user's friends attached to the ad who have already liked the page or installed the app. | |
| | `VALUE`: Will optimize for maximum total purchase value within the specified attribution window. | |
| | `THRUPLAY`: Will optimize delivery of your ads to people are more likely to play your ad to completion, or play it for at least 15 seconds. | |
| | `AD_RECALL_LIFT`: Optimize for people more likely to remember seeing your ads. | |
| | `VISIT_INSTAGRAM_PROFILE`: Optimize for visits to the advertiser's instagram profile. | |
| `optimization_sub_event` | `enum{NONE, VIDEO_SOUND_ON, TRIP_CONSIDERATION, TRAVEL_INTENT, TRAVEL_INTENT_NO_DESTINATION_INTENT, TRAVEL_INTENT_BUCKET_01, TRAVEL_INTENT_BUCKET_02, TRAVEL_INTENT_BUCKET_03, TRAVEL_INTENT_BUCKET_04, TRAVEL_INTENT_BUCKET_05, POST_INTERACTION}` | Optimization sub event for a specific optimization goal (ex: Sound-On event for Video-View-2s optimization goal) |
| `pacing_type` | `list<string>` | Defines the pacing type, standard by default or using ad scheduling |
| `promoted_object` | `Object` | The object this ad set is promoting across all its ads. Required with certain campaign objectives. |
| | **CONVERSIONS** | |
| | `pixel_id` (Conversion pixel ID) | |
| | `pixel_id` (Facebook pixel ID) and `custom_event_type` | |
| | `pixel_id` (Facebook pixel ID) and `pixel_rule` and `custom_event_type` | |
| | `event_id` (Facebook event ID) and `custom_event_type` | |
| | `application_id`, `object_store_url`, and `custom_event_type` for mobile app events | |
| | `offline_conversion_data_set_id` (Offline dataset ID) and `custom_event_type` for offline conversions | |
| | **PAGE\_LIKES** | |
| | `page_id` | |
| | **OFFER\_CLAIMS** | |
| | `page_id` | |
| | **LINK\_CLICKS** | |
| | `application_id` and `object_store_url` for mobile app or Canvas app engagement link clicks | |
| | **APP\_INSTALLS** | |
| | `application_id` and `object_store_url` | |
| | if the `optimization_goal` is `OFFSITE_CONVERSIONS` | |
| | `application_id`, `object_store_url`, and `custom_event_type` (Standard Events) | |
| | `application_id`, `object_store_url`, `custom_event_type = OTHER` and `custom_event_str` (Custom Events) | |
| | **PRODUCT\_CATALOG\_SALES** | |
| | `product_set_id` | |
| | `product_set_id` and `custom_event_type` | |
| | When `optimization_goal` is `LEAD_GENERATION`, `page_id` needs to be passed as `promoted_object`. | |
| | Please refer to the [Outcome-Driven Ads Experiences mapping table](https://developers.facebook.com/docs/marketing-api/guides/odax) to find new objectives and their corresponding destination types, optimization goals and promoted objects. | |
| `rf_prediction_id` | `numeric string` or `integer` | Reach and frequency prediction ID |
| `source_adset_id` | `numeric string` or `integer` | The source adset id that this ad is copied from (if applicable). |
| `start_time` | `datetime` | The start time of the set, e.g. `2015-03-12 23:59:59-07:00` or `2015-03-12 23:59:59 PDT`. UTC UNIX timestamp |
| `status` | `enum{ACTIVE, PAUSED, DELETED, ARCHIVED}` | Only `ACTIVE` and `PAUSED` are valid for creation. The other statuses can be used for update. If it is set to `PAUSED`, all its active ads will be paused and have an effective status `ADSET_PAUSED`. |
| `targeting` | `Targeting object` | An ad set's targeting structure. "countries" is required. See [targeting](https://developers.facebook.com/docs/marketing-api/targeting-specs). |
| `time_based_ad_rotation_id_blocks` | `list<list<int64>>` | Specify ad creative that displays at custom date ranges in a campaign as an array. A list of Adgroup IDs. The list of ads to display for each time range in a given schedule. For example display first ad in Adgroup for first date range, second ad for second date range, and so on. You can display more than one ad per date range by providing more than one ad ID per array. For example set `time_based_ad_rotation_id_blocks` to `[[1], [2, 3], [1, 4]]`. On the first date range show ad 1, on the second date range show ad 2 and ad 3 and on the last date range show ad 1 and ad 4. Use with `time_based_ad_rotation_intervals` to specify date ranges. |
| `time_based_ad_rotation_intervals` | `list<int64>` | Date range when specific ad creative displays during a campaign. Provide date ranges in an array of UNIX timestamps where each timestamp represents the start time for each date range. For example a 3-day campaign from May 9 12am to May 11 11:59PM PST can have three date ranges, the first date range starts from May 9 12:00AM to May 9 11:59PM, second date range starts from May 10 12:00AM to May 10 11:59PM and last starts from May 11 12:00AM to May 11 11:59PM. The first timestamp should match the campaign start time. The last timestamp should be at least 1 hour before the campaign end time. You must provide at least two date ranges. All date ranges must cover the whole campaign length, so any date range cannot exceed campaign length. Use with `time_based_ad_rotation_id_blocks` to specify ad creative for each date range. |
| `time_start` | `datetime` | Time start |
| `time_stop` | `datetime` | Time stop |
| `tune_for_category` | `enum{NONE, EMPLOYMENT, HOUSING, CREDIT, ISSUES_ELECTIONS_POLITICS, ONLINE_GAMBLING_AND_GAMING, FINANCIAL_PRODUCTS_SERVICES}` | `tune_for_category` |
| `value_rule_set_id` | `numeric string` or `integer` | Value Rule Set ID |
| `value_rules_applied` | `boolean` | `value_rules_applied` |

| Return Type | |
| :--- | :--- |
| This endpoint supports read-after-write and will read the node represented by `id` in the return type. | |
| `Struct {id: numeric string, success: bool, }` | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 100 | Invalid parameter |
| 200 | Permissions error |
| 2635 | You are calling a deprecated version of the Ads API. Please update to the latest version. |
| 368 | The action attempted has been deemed abusive or is otherwise disallowed |
| 2695 | The ad set creation reached its campaign group(ios14) limit. |
| 80004 | There have been too many calls to this ad-account. Wait a bit and try again. For more info, please refer to https://developers.facebook.com/docs/graph-api/overview/rate-limiting#ads-management. |
| 2641 | Your ad includes or excludes locations that are currently restricted |
| 190 | Invalid OAuth 2.0 Access Token |
| 900 | No such application exists. |

**Updating**

You can't perform this operation on this endpoint.

**Deleting**

This operation has been deprecated with Marketing API V8.

You can't perform this operation on this endpoint.

# Ad Account Adspixels

**Graph API Version**

v24.0

**Reading**

`ad account` to `ads pixels` edge

| Example | |
| :--- | :--- |
| HTTP | `GET /v24.0/<PIXEL_ID>/?fields=code HTTP/1.1
Host: graph.facebook.com` |

If you want to learn how to use the Graph API, read our [Using Graph API](https://developers.facebook.com/docs/graph-api/overview) guide.

| Parameters | |
| :--- | :--- |
| This endpoint doesn't have any parameters. | |

| Fields | |
| :--- | :--- |
| Reading from this edge will return a JSON formatted result: | |
| ` {    "data": [],    "paging": {},    "summary": {} }` | |
| `data` | A list of `AdsPixel` nodes. |
| `paging` | For more details about pagination, see the [Graph API guide](#paginated-results). |
| `summary` | Aggregated information about the edge, such as counts. Specify the fields to fetch in the `summary` param (like `summary=total_count`). |
| `total_count` | `int32` | Total number of objects on this edge |
| | **Default** | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 200 | Permissions error |
| 190 | Invalid OAuth 2.0 Access Token |
| 80004 | There have been too many calls to this ad-account. Wait a bit and try again. For more info, please refer to https://developers.facebook.com/docs/graph-api/overview/rate-limiting#ads-management. |
| 100 | Invalid parameter |

**Creating**

You can make a `POST` request to `adspixels` edge from the following paths:
*   `/act_{ad_account_id}/adspixels`

When posting to this edge, an `AdsPixel` will be created.

| Example | |
| :--- | :--- |
| HTTP | `POST /v24.0/act_<AD_ACCOUNT_ID>/adspixels HTTP/1.1
Host: graph.facebook.com

name=My+WCA+Pixel` |

If you want to learn how to use the Graph API, read our [Using Graph API](https://developers.facebook.com/docs/graph-api/overview) guide.

| Parameters | |
| :--- | :--- |
| `name` | `string` | Name of the pixel |

| Return Type | |
| :--- | :--- |
| This endpoint supports read-after-write and will read the node represented by `id` in the return type. | |
| `Struct {id: numeric string, }` | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 6202 | More than one pixel exist for this account |
| 6200 | A pixel already exists for this account |
| 100 | Invalid parameter |
| 200 | Permissions error |

**Updating**

You can't perform this operation on this endpoint.

**Deleting**

You can't perform this operation on this endpoint.

# Ad Videos

**Graph API Version**

v24.0

**Reading**

You can't perform this operation on this endpoint.

**Creating**

You can make a `POST` request to `advideos` edge from the following paths:
*   `/act_{ad_account_id}/advideos`

When posting to this edge, a `Video` will be created.

| Parameters | |
| :--- | :--- |
| `audio_story_wave_animation_handle` | `string` | Everstore handle of wave animation used to burn audio story video |
| `composer_session_id` | `string` | `SELF_EXPLANATORY` |
| `description` | `UTF-8 string` | `SELF_EXPLANATORY` |
| | **Supports Emoji** | |
| `edit_description_spec` | `JSON object` | This represents the schema that the client should send to WWW for the edit description spec during video upload. |
| `end_offset` | `int64` | `end_offset` |
| `file_size` | `int64` | The size of the video file in bytes. Using during chunked upload. |
| `file_url` | `string` | `SELF_EXPLANATORY` |
| `fisheye_video_cropped` | `boolean` | Whether the single fisheye video is cropped or not |
| `front_z_rotation` | `float` | The front z rotation in degrees on the single fisheye video |
| `name` | `string` | The name of the video in the library. |
| `og_action_type_id` | `numeric string` or `integer` | `SELF_EXPLANATORY` |
| `og_icon_id` | `numeric string` or `integer` | `SELF_EXPLANATORY` |
| `og_object_id` | `OG object ID` or `URL string` | `SELF_EXPLANATORY` |
| `og_phrase` | `string` | `SELF_EXPLANATORY` |
| `og_suggestion_mechanism` | `string` | `SELF_EXPLANATORY` |
| `original_fov` | `int64` | Original field of view of the source camera |
| `original_projection_type` | `enum {equirectangular, cubemap, half_equirectangular}` | Original Projection type of the video being uploaded |
| `prompt_id` | `string` | `SELF_EXPLANATORY` |
| `prompt_tracking_string` | `string` | `SELF_EXPLANATORY` |
| `referenced_sticker_id` | `numeric string` or `integer` | `SELF_EXPLANATORY` |
| `source` | `string` | The video, encoded as form data. See the [Video Format doc](https://developers.facebook.com/docs/marketing-api/guides/video-ads/ad-videos#video-format) for more details on video formats. |
| `start_offset` | `int64` | The start position in byte of the chunk that is being sent, inclusive. Used during chunked upload. |
| `time_since_original_post` | `int64` | `SELF_EXPLANATORY` |
| `title` | `UTF-8 string` | The name of the video being uploaded. Must be less than 255 characters. Special characters may count as more than 1 character. |
| | **Supports Emoji** | |
| `transcode_setting_properties` | `string` | Properties used in computing transcode settings for the video |
| `unpublished_content_type` | `enum {SCHEDULED, SCHEDULED_RECURRING, DRAFT, PUBLISH_PENDING, ADS_POST, INLINE_CREATED, PUBLISHED, REVIEWABLE_BRANDED_CONTENT}` | `SELF_EXPLANATORY` |
| `upload_phase` | `enum {start, transfer, finish, cancel}` | The phase during chunked upload. Using during chunked upload. |
| `upload_session_id` | `numeric string` or `integer` | The session ID of this chunked upload. Using during chunked upload. |
| `video_file_chunk` | `string` | The chunk of the video, between `start_offset` and `end_offset`. Using during chunked upload. |

| Return Type | |
| :--- | :--- |
| `Struct {id: numeric string, upload_session_id: numeric string, video_id: numeric string, start_offset: numeric string, end_offset: numeric string, success: bool, skip_upload: bool, upload_domain: string, region_hint: string, xpv_asset_id: numeric string, is_xpv_single_prod: bool, transcode_bit_rate_bps: numeric string, transcode_dimension: numeric string, should_expand_to_transcode_dimension: bool, action_id: string, gop_size_seconds: numeric string, target_video_codec: string, target_hdr: string, maximum_frame_rate: numeric string, }` | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 200 | Permissions error |
| 100 | Invalid parameter |
| 222 | Video not visible |
| 389 | Unable to fetch video file from URL. |
| 190 | Invalid OAuth 2.0 Access Token |
| 352 | The video file you selected is in a format that we don't support. |
| 6001 | There was a problem uploading your video. Please try again. |
| 382 | The video file you tried to upload is too small. Please try again with a larger file. |
| 351 | There was a problem with your video file. Please try again with another file, |
| 6000 | There was a problem uploading your video file. Please try again with another file. |

**Updating**

You can't perform this operation on this endpoint.

**Deleting**

You can dissociate a Video from an AdAccount by making a `DELETE` request to `/act_{ad_account_id}/advideos`.

| Parameters | |
| :--- | :--- |
| `video_id` | `video ID` | Ad account library video ID |
| | **Required** | |

| Return Type | |
| :--- | :--- |
| `Struct {success: bool, }` | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 613 | Calls to this api have exceeded the rate limit. |
| 100 | Invalid parameter |

# Ad Account Async Batch Requests

**Reading**

You can't perform this operation on this endpoint.

**Creating**

You can make a `POST` request to `async_batch_requests` edge from the following paths:
*   `/act_{ad_account_id}/async_batch_requests`

When posting to this edge, a `Campaign` will be created.

| Parameters | |
| :--- | :--- |
| `adbatch` | `list<Object>` | JSON encoded batch reqeust |
| | **Required** | |
| `name` | `UTF-8 encoded string` | Name of the batch request for tracking purposes. |
| | **Required** | |

| Return Type | |
| :--- | :--- |
| This endpoint supports read-after-write and will read the node represented by `id` in the return type. | |
| `Struct {id: numeric string, }` | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 194 | Missing at least one required parameter |
| 100 | Invalid parameter |
| 2500 | Error parsing graph query |

**Updating**

You can't perform this operation on this endpoint.

**Deleting**

You can't perform this operation on this endpoint.

# Ad Account Asyncadcreatives

**Reading**

You can't perform this operation on this endpoint.

**Creating**

You can make a `POST` request to `asyncadcreatives` edge from the following paths:
*   `/act_{ad_account_id}/asyncadcreatives`

When posting to this edge, no Graph object will be created.

| Parameters | |
| :--- | :--- |
| `creative_spec` | `AdCreative` | Specs for ad creative |
| | **Required** | **Supports Emoji** |
| `name` | `UTF-8 encoded string` | Name of async job |
| | **Required** | |
| `notification_mode` | `enum{OFF, ON_COMPLETE}` | Specify 0 for no notifications and 1 for notification on completion. |
| `notification_uri` | `URL` | If notifications are enabled, specify the URL to send them. |

| Return Type | |
| :--- | :--- |
| This endpoint supports read-after-write and will read the node represented by `id` in the return type. | |
| `Struct {id: numeric string, }` | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 100 | Invalid parameter |

**Updating**

You can't perform this operation on this endpoint.

**Deleting**

You can't perform this operation on this endpoint.

# Ad Account Asyncadrequestsets

**Reading**

You can't perform this operation on this endpoint.

**Creating**

You can make a `POST` request to `asyncadrequestsets` edge from the following paths:
*   `/act_{ad_account_id}/asyncadrequestsets`

When posting to this edge, no Graph object will be created.

| Parameters | |
| :--- | :--- |
| `ad_specs` | `list<dictionary { non-empty string : <string> }>` | Specs for ads in the request set |
| | **Required** | |
| `name` | `UTF-8 encoded string` | Name of the request set |
| | **Required** | |
| `notification_mode` | `enum{OFF, ON_COMPLETE}` | Specify 0 for no notifications and 1 for notification on completion. |
| `notification_uri` | `URL` | If notifications are enabled, specify the URL to send them. |

| Return Type | |
| :--- | :--- |
| This endpoint supports read-after-write and will read the node represented by `id` in the return type. | |
| `Struct {id: numeric string, }` | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 100 | Invalid parameter |

**Updating**

You can't perform this operation on this endpoint.

**Deleting**

You can't perform this operation on this endpoint.

# Ad Account, Ad Campaigns

The ad campaigns associated with a given ad account.
On May 1, 2018 with the release of Marketing API 3.0 we removed `kpi_custom_conversion_id`, `kpi_type`, and `kpi_results`.
Beginning September 15, 2022, with the release of Marketing API v15.0, advertisers will no longer be allowed to create incremental conversion optimization campaigns. Existing conversion optimization campaigns will behave normally.

**Ads About Social Issues, Elections, and Politics**

Beginning with the release of Marketing API v15.0, advertisers will no longer be able to create Special Ad Audiences. See [Special Ad Audiences details here](https://developers.facebook.com/docs/marketing-api/guides/special-ad-audiences) for more information.

**Reading**

Returns the campaigns under this ad account. A request with no filters returns only campaigns that were not archived or deleted.

| Example | |
| :--- | :--- |
| HTTP | `GET /v24.0/act_<AD_ACCOUNT_ID>/campaigns?effective_status=%5B%22ACTIVE%22%2C%22PAUSED%22%5D&fields=name%2Cobjective HTTP/1.1
Host: graph.facebook.com` |

If you want to learn how to use the Graph API, read our [Using Graph API](https://developers.facebook.com/docs/graph-api/overview) guide.

| Parameters | |
| :--- | :--- |
| `date_preset` | `enum{today, yesterday, this_month, last_month, this_quarter, maximum, data_maximum, last_3d, last_7d, last_14d, last_28d, last_30d, last_90d, last_week_mon_sun, last_week_sun_sat, last_quarter, last_year, this_week_mon_today, this_week_sun_today, this_year}` | Predefine date range used to aggregate insights metrics. |
| `effective_status` | `list<enum{ACTIVE, PAUSED, DELETED, PENDING_REVIEW, DISAPPROVED, PREAPPROVED, PENDING_BILLING_INFO, CAMPAIGN_PAUSED, ARCHIVED, ADSET_PAUSED, IN_PROCESS, WITH_ISSUES}>` | **Default value:** Vec | Effective status for the campaigns |
| `is_completed` | `boolean` | If true, we return completed campaigns. |
| `time_range` | `{'since':YYYY-MM-DD,'until':YYYY-MM-DD}` | Date range used to aggregate insights metrics |

| Fields | |
| :--- | :--- |
| Reading from this edge will return a JSON formatted result: | |
| ` {    "data": [],    "paging": {},    "summary": {} }` | |
| `data` | A list of `Campaign` nodes. |
| `paging` | For more details about pagination, see the [Graph API guide](#paginated-results). |
| `summary` | Aggregated information about the edge, such as counts. Specify the fields to fetch in the `summary` param (like `summary=insights`). |
| `insights` | `Edge<AdsInsights>` | Analytics summary for all objects |
| `total_count` | `unsigned int32` | Total number of objects |
| | **Default** | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 200 | Permissions error |
| 100 | Invalid parameter |
| 190 | Invalid OAuth 2.0 Access Token |
| 80004 | There have been too many calls to this ad-account. Wait a bit and try again. For more info, please refer to https://developers.facebook.com/docs/graph-api/overview/rate-limiting#ads-management. |
| 613 | Calls to this api have exceeded the rate limit. |
| 368 | The action attempted has been deemed abusive or is otherwise disallowed |
| 2635 | You are calling a deprecated version of the Ads API. Please update to the latest version. |
| 3018 | The start date of the time range cannot be beyond 37 months from the current date |
| 2500 | Error parsing graph query |

**Creating**

You can make a `POST` request to `campaigns` edge from the following paths:
*   `/act_{ad_account_id}/campaigns`

When posting to this edge, a `Campaign` will be created.

| Example | |
| :--- | :--- |
| HTTP | `POST /v24.0/act_<AD_ACCOUNT_ID>/campaigns HTTP/1.1
Host: graph.facebook.com

name=My+campaign&objective=OUTCOME_TRAFFIC&status=PAUSED&special_ad_categories=%5B%5D&is_adset_budget_sharing_enabled=0` |

If you want to learn how to use the Graph API, read our [Using Graph API](https://developers.facebook.com/docs/graph-api/overview) guide.

| Parameters | |
| :--- | :--- |
| `adlabels` | `list<Object>` | Ad Labels associated with this campaign |
| `bid_strategy` | `enum{LOWEST_COST_WITHOUT_CAP, LOWEST_COST_WITH_BID_CAP, COST_CAP, LOWEST_COST_WITH_MIN_ROAS}` | Choose bid strategy for this campaign to suit your specific business goals. Each strategy has tradeoffs and may be available for certain `optimization_goals`: |
| | `LOWEST_COST_WITHOUT_CAP`: Designed to get the most results for your budget based on your ad set `optimization_goal` without limiting your bid amount. This is the best strategy if you care most about cost efficiency. However with this strategy it may be harder to get stable average costs as you spend. This strategy is also known as automatic bidding. Learn more in [Ads Help Center, About bid strategies: Lowest cost](https://www.facebook.com/business/help/1288599478479574). | |
| | `LOWEST_COST_WITH_BID_CAP`: Designed to get the most results for your budget based on your ad set `optimization_goal` while limiting actual bid to your specified amount. With a bid cap you have more control over your cost per actual optimization event. However if you set a limit which is too low you may get less ads delivery. If you select this, you must provide a bid cap in the `bid_amount` field for each ad set in this ad campaign. Note: during creation this is the default bid strategy if you don't specify. This strategy is also known as manual maximum-cost bidding. Learn more in [Ads Help Center, About bid strategies: Lowest cost](https://www.facebook.com/business/help/1288599478479574). | |
| | **Notes:** | |
| | If you do not enable [campaign budget optimization](https://developers.facebook.com/docs/marketing-api/guides/campaign-budget-optimization), you should set `bid_strategy` at ad set level. | |
| | `TARGET_COST` bidding strategy has been deprecated with Marketing API v9. | |
| `budget_schedule_specs` | `list<JSON or object-like arrays>` | Initial high demand periods to be created with the campaign. |
| | Provide list of `time_start`, `time_end`,`budget_value`, and `budget_value_type`. | |
| | For example, | |
| | `-F 'budget_schedule_specs=[{
"time_start":1699081200,
"time_end":1699167600,
"budget_value":100,
"budget_value_type":"ABSOLUTE"
}]'` | |
| | See [High Demand Period](https://developers.facebook.com/docs/marketing-api/reference/high-demand-period) for more details on each field. | |
| `buying_type` | `string` | **Default value:** `AUCTION` | This field will help Facebook make optimizations to delivery, pricing, and limits. All ad sets in this campaign must match the buying type. Possible values are: |
| | `AUCTION` (default) | |
| | `RESERVED` (for reach and frequency ads). | |
| `campaign_optimization_type` | `enum{NONE, ICO_ONLY}` | `campaign_optimization_type` |
| `daily_budget` | `int64` | Daily budget of this campaign. All adsets under this campaign will share this budget. You can either set budget at the campaign level or at the adset level, not both. |
| `execution_options` | `list<enum{validate_only, include_recommendations}>` | **Default value:** Set |
| | An execution setting | |
| | `validate_only`: when this option is specified, the API call will not perform the mutation but will run through the validation rules against values of each field. | |
| | `include_recommendations`: this option cannot be used by itself. When this option is used, recommendations for ad object's configuration will be included. A separate section recommendations will be included in the response, but only if recommendations for this specification exist. | |
| | If the call passes validation or review, response will be `{"success": true}`. If the call does not pass, an error will be returned with more details. These options can be used to improve any UI to display errors to the user much sooner, e.g. as soon as a new value is typed into any field corresponding to this ad object, rather than at the upload/save stage, or after review. | |
| `is_skadnetwork_attribution` | `boolean` | To create an iOS 14 campaign, enable SKAdNetwork attribution for this campaign. |
| `is_using_l3_schedule` | `boolean` | `is_using_l3_schedule` |
| `iterative_split_test_configs` | `list<Object>` | Array of Iterative Split Test Configs created under this campaign . |
| `lifetime_budget` | `int64` | Lifetime budget of this campaign. All adsets under this campaign will share this budget. You can either set budget at the campaign level or at the adset level, not both. |
| `name` | `string` | Name for this campaign |
| | **Supports Emoji** | |
| `objective` | `enum{APP_INSTALLS, BRAND_AWARENESS, CONVERSIONS, EVENT_RESPONSES, LEAD_GENERATION, LINK_CLICKS, LOCAL_AWARENESS, MESSAGES, OFFER_CLAIMS, OUTCOME_APP_PROMOTION, OUTCOME_AWARENESS, OUTCOME_ENGAGEMENT, OUTCOME_LEADS, OUTCOME_SALES, OUTCOME_TRAFFIC, PAGE_LIKES, POST_ENGAGEMENT, PRODUCT_CATALOG_SALES, REACH, STORE_VISITS, VIDEO_VIEWS}` | Campaign's objective. If it is specified the API will validate that any ads created under the campaign match that objective. |
| | Currently, with `BRAND_AWARENESS` objective, all creatives should be either only images or only videos, not mixed. | |
| | See [Outcome Ad-Driven Experience Objective Validation](https://developers.facebook.com/docs/marketing-api/guides/odax) for more information. | |
| `promoted_object` | `Object` | The object this campaign is promoting across all its ads. It’s required for Meta iOS 14+ app promotion (SKAdNetwork or Aggregated Event Measurement) campaign creation. Only `product_catalog_id` is used at the ad set level. |
| `source_campaign_id` | `numeric string` or `integer` | Used if a campaign has been copied. The ID from the original campaign that was copied. |
| `special_ad_categories` | `array<enum {NONE, EMPLOYMENT, HOUSING, CREDIT, ISSUES_ELECTIONS_POLITICS, ONLINE_GAMBLING_AND_GAMING, FINANCIAL_PRODUCTS_SERVICES}>` | `special_ad_categories` |
| | **Required** | |
| `special_ad_category_country` | `array<enum {AC, AD, AE, AF, AG, AI, AL, AM, AN, AO, AQ, AR, AS, AT, AU, AW, AX, AZ, BA, BB, BD, BE, BF, BG, BH, BI, BJ, BL, BM, BN, BO, BQ, BR, BS, BT, BV, BW, BY, BZ, CA, CC, CD, CF, CG, CH, CI, CK, CL, CM, CN, CO, CR, CU, CV, CW, CX, CY, CZ, DE, DJ, DK, DM, DO, DZ, EC, EE, EG, EH, ER, ES, ET, FI, FJ, FK, FM, FO, FR, GA, GB, GD, GE, GF, GG, GH, GI, GL, GM, GN, GP, GQ, GR, GS, GT, GU, GW, GY, HK, HM, HN, HR, HT, HU, ID, IE, IL, IM, IN, IO, IQ, IR, IS, IT, JE, JM, JO, JP, KE, KG, KH, KI, KM, KN, KP, KR, KW, KY, KZ, LA, LB, LC, LI, LK, LR, LS, LT, LU, LV, LY, MA, MC, MD, ME, MF, MG, MH, MK, ML, MM, MN, MO, MP, MQ, MR, MS, MT, MU, MV, MW, MX, MY, MZ, NA, NC, NE, NF, NG, NI, NL, NO, NP, NR, NU, NZ, OM, PA, PE, PF, PG, PH, PK, PL, PM, PN, PR, PS, PT, PW, PY, QA, RE, RO, RS, RU, RW, SA, SB, SC, SD, SE, SG, SH, SI, SJ, SK, SL, SM, SN, SO, SR, SS, ST, SV, SX, SY, SZ, TC, TD, TF, TG, TH, TJ, TK, TL, TM, TN, TO, TR, TT, TV, TW, TZ, UA, UG, UM, US, UY, UZ, VA, VC, VE, VG, VI, VN, VU, WF, WS, XK, YE, YT, ZA, ZM, ZW}>` | `special_ad_category_country` |
| `spend_cap` | `int64` | A spend cap for the campaign, such that it will not spend more than this cap. Defined as integer value of subunit in your currency with a minimum value of $100 USD (or approximate local equivalent). Set the value to 922337203685478 to remove the spend cap. Not available for Reach and Frequency or Premium Self Serve campaigns |
| `start_time` | `datetime` | `start_time` |
| `status` | `enum{ACTIVE, PAUSED, DELETED, ARCHIVED}` | Only `ACTIVE` and `PAUSED` are valid during creation. Other statuses can be used for update. If it is set to `PAUSED`, its active child objects will be paused and have an effective status `CAMPAIGN_PAUSED`. |
| `stop_time` | `datetime` | `stop_time` |
| `topline_id` | `numeric string` or `integer` | Topline ID |

| Return Type | |
| :--- | :--- |
| This endpoint supports read-after-write and will read the node represented by `id` in the return type. | |
| `Struct {id: numeric string, success: bool, }` | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 100 | Invalid parameter |
| 613 | Calls to this api have exceeded the rate limit. |
| 200 | Permissions error |
| 2635 | You are calling a deprecated version of the Ads API. Please update to the latest version. |
| 190 | Invalid OAuth 2.0 Access Token |
| 80004 | There have been too many calls to this ad-account. Wait a bit and try again. For more info, please refer to https://developers.facebook.com/docs/graph-api/overview/rate-limiting#ads-management. |
| 300 | Edit failure |

**Updating**

You can't perform this operation on this endpoint.

**Deleting**

You can dissociate a Campaign from an AdAccount by making a `DELETE` request to `/act_{ad_account_id}/campaigns`.

| Parameters | |
| :--- | :--- |
| `before_date` | `datetime` | Set a before date to delete campaigns before this date |
| `delete_strategy` | `enum{DELETE_ANY, DELETE_OLDEST, DELETE_ARCHIVED_BEFORE}` | Delete strategy |
| | **Required** | |
| `object_count` | `integer` | Object count |

| Return Type | |
| :--- | :--- |
| `Struct {objects_left_to_delete_count: unsigned int32, deleted_object_ids: List [numeric string ], }` | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 100 | Invalid parameter |

# Ad Account Generatepreviews

When you use a Page Post which links to an app on the Google Play Store or an app on the Apple App Store Facebook overrides the following fields:
*   We overwrite the `name` parameter of the Page Post with the name of the app from the Play Store or App Store.
*   We import the thumbnail icon of the app associated with the Page Post from the Play Store or App Store.

We only support certain combinations of creatives and `ad_format`:
*   Link ad not connected to a page - `RIGHT_COLUMN_STANDARD`
*   Page like ad - `RIGHT_COLUMN_STANDARD`, `DESKTOP_FEED_STANDARD`, `MOBILE_FEED_STANDARD`
*   Event ad: `RIGHT_COLUMN_STANDARD`
*   Page like ad - `RIGHT_COLUMN_STANDARD`
*   Page post ad - `RIGHT_COLUMN_STANDARD`, `DESKTOP_FEED_STANDARD`, `MOBILE_FEED_STANDARD`, `INSTAGRAM_STANDARD`
*   Desktop app ad - `DESKTOP_FEED_STANDARD`
*   Mobile app install - `MOBILE_FEED_STANDARD`, `INSTAGRAM_STANDARD`, `MOBILE_BANNER`, `MOBILE_INTERSTITIAL"`,
*   Collection ads - Standard ads, no ads with product sets.

**Reading**

Generate previews for a creative specification

| Example | |
| :--- | :--- |
| HTTP | `GET /v24.0/act_<AD_ACCOUNT_ID>/generatepreviews?creative=%3CCREATIVE_SPEC%3E&ad_format=%3CAD_FORMAT%3E HTTP/1.1
Host: graph.facebook.com` |

If you want to learn how to use the Graph API, read our [Using Graph API](https://developers.facebook.com/docs/graph-api/overview) guide.

| Parameters | |
| :--- | :--- |
| `ad_format` | `enum{AUDIENCE_NETWORK_INSTREAM_VIDEO, AUDIENCE_NETWORK_INSTREAM_VIDEO_MOBILE, AUDIENCE_NETWORK_OUTSTREAM_VIDEO, AUDIENCE_NETWORK_REWARDED_VIDEO, BIZ_DISCO_FEED_MOBILE, DESKTOP_FEED_STANDARD, FACEBOOK_IFU_REELS_MOBILE, FACEBOOK_PROFILE_FEED_DESKTOP, FACEBOOK_PROFILE_FEED_MOBILE, FACEBOOK_PROFILE_REELS_MOBILE, FACEBOOK_REELS_BANNER, FACEBOOK_REELS_BANNER_DESKTOP, FACEBOOK_REELS_BANNER_FEED_ANDROID, FACEBOOK_REELS_BANNER_FEED_ANDROID_LARGE, FACEBOOK_REELS_BANNER_FULLSCREEN_IOS, FACEBOOK_REELS_BANNER_FULLSCREEN_MOBILE, FACEBOOK_REELS_MOBILE, FACEBOOK_REELS_POSTLOOP, FACEBOOK_REELS_POSTLOOP_FEED, FACEBOOK_REELS_STICKER, FACEBOOK_STORY_MOBILE, FACEBOOK_STORY_STICKER_MOBILE, INSTAGRAM_EXPLORE_CONTEXTUAL, INSTAGRAM_EXPLORE_GRID_HOME, INSTAGRAM_EXPLORE_IMMERSIVE, INSTAGRAM_FEED_WEB, INSTAGRAM_FEED_WEB_M_SITE, INSTAGRAM_LEAD_GEN_MULTI_SUBMIT_ADS, INSTAGRAM_PROFILE_FEED, INSTAGRAM_PROFILE_REELS, INSTAGRAM_REELS, INSTAGRAM_REELS_INSTREAM, INSTAGRAM_REELS_OVERLAY, INSTAGRAM_REELS_WEB, INSTAGRAM_REELS_WEB_M_SITE, INSTAGRAM_SEARCH_CHAIN, INSTAGRAM_SEARCH_GRID, INSTAGRAM_STANDARD, INSTAGRAM_STORY, INSTAGRAM_STORY_EFFECT_TRAY, INSTAGRAM_STORY_WEB, INSTAGRAM_STORY_WEB_M_SITE, INSTANT_ARTICLE_RECIRCULATION_AD, INSTANT_ARTICLE_STANDARD, INSTREAM_BANNER_DESKTOP, INSTREAM_BANNER_FEED_IOS, INSTREAM_BANNER_FULLSCREEN_IOS, INSTREAM_BANNER_FULLSCREEN_MOBILE, INSTREAM_BANNER_IMMERSIVE_MOBILE, INSTREAM_BANNER_MOBILE, INSTREAM_VIDEO_DESKTOP, INSTREAM_VIDEO_FULLSCREEN_IOS, INSTREAM_VIDEO_FULLSCREEN_MOBILE, INSTREAM_VIDEO_IMAGE, INSTREAM_VIDEO_IMMERSIVE_MOBILE, INSTREAM_VIDEO_MOBILE, JOB_BROWSER_DESKTOP, JOB_BROWSER_MOBILE, MARKETPLACE_MOBILE, MESSENGER_MOBILE_INBOX_MEDIA, MESSENGER_MOBILE_STORY_MEDIA, MOBILE_BANNER, MOBILE_FEED_BASIC, MOBILE_FEED_STANDARD, MOBILE_FULLWIDTH, MOBILE_INTERSTITIAL, MOBILE_MEDIUM_RECTANGLE, MOBILE_NATIVE, RIGHT_COLUMN_STANDARD, SUGGESTED_VIDEO_DESKTOP, SUGGESTED_VIDEO_FULLSCREEN_MOBILE, SUGGESTED_VIDEO_IMMERSIVE_MOBILE, SUGGESTED_VIDEO_MOBILE, WATCH_FEED_HOME, WATCH_FEED_MOBILE}` | Use this to select what placement on Facebook the ad preview should be for. The API returns an iframe, which is only valid for 24 hours. |
| | **Required** | |
| `creative` | `AdCreative` | Ad creative spec |
| | **Required** | **Supports Emoji** |
| `creative_feature` | `enum{product_metadata_automation, profile_card, standard_enhancements_catalog, text_overlay_translation}` | `creative_feature` |
| `dynamic_asset_label` | `string` | Provide a label for rendering specific variation of an asset customization ad |
| `dynamic_creative_spec` | `Object` | Dynamic creative spec for dynamic ads. |
| | **Supports Emoji** | |
| `dynamic_customization` | `Object` | For dynamic ads in multiple languages, specify the customization to be applied to the ad |
| `end_date` | `datetime` | Provide an end date for trip.\* parameters in the creative |
| `height` | `int64` | Custom height of the resulting iframe, recommended at least 280 x 280 for the large right hand size height. **Note:** the parameter affects only the size of the iframe containing the preview object. It has no affect on the actual size of the previewed ad. |
| `place_page_id` | `Page ID` | Place page ID to use when rendering a dynamic local ad preview |
| `post` | `Object` | Specs for a page post. This field is used when the `creative` field contains only a Page id as `object_id` in it. Not supported for `ad_format` = `RIGHT_COLUMN_STANDARD` |
| `product_item_ids` | `list<string>` | A list of Product Item IDs to use when rendering a dynamic ad preview. |
| `start_date` | `datetime` | Provide a start date for trip.\* parameters in the creative |
| `width` | `int64` | Custom width of the resulting iframe, recommended at least 280 x 280 for the large right hand size widths. **Note:** the parameter affects only the size of the iframe containing the preview object. It has no affect on the actual size of the previewed ad. |

| Fields | |
| :--- | :--- |
| Reading from this edge will return a JSON formatted result: | |
| ` {    "data": [],    "paging": {} }` | |
| `data` | A list of `AdPreview` nodes. |
| `paging` | For more details about pagination, see the [Graph API guide](#paginated-results). |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 100 | Invalid parameter |
| 200 | Permissions error |
| 194 | Missing at least one required parameter |
| 1500 | The url you supplied is invalid |
| 80004 | There have been too many calls to this ad-account. Wait a bit and try again. For more info, please refer to https://developers.facebook.com/docs/graph-api/overview/rate-limiting#ads-management. |
| 2635 | You are calling a deprecated version of the Ads API. Please update to the latest version. |

**Creating**

You can't perform this operation on this endpoint.

**Updating**

You can't perform this operation on this endpoint.

**Deleting**

You can't perform this operation on this endpoint.

# Ad Account, Insights

The Insights API can return several metrics which are estimated or in-development. In some cases a metric may be both estimated and in-development.
*   **Estimated** - Provide directional insights for outcomes that are hard to precisely quantify. They may evolve as we gather more data. See [Ads Help Center, Estimated metrics](https://www.facebook.com/business/help/1288599478479574).
*   **In Development** - Still being tested and may change as we improve our methodologies. We encourage you to use it for directional guidance, but please use caution when using it for historical comparisons or strategic planning. See [Ads Help Center, In development metrics](https://www.facebook.com/business/help/1288599478479574).

For more information, see [Insights API, Estimated and Deprecated Metrics](https://developers.facebook.com/docs/marketing-api/insights/metrics#estimated).

Facebook will no longer be able to aggregate non-inline conversion metric values across iOS 14.5 and non-iOS 14.5 campaigns due to differences in attribution logic. Querying across iOS 14.5 and non-iOS 14.5 campaigns will result in no data getting returned for non-inline conversion metrics such as app installs and purchases. Inline event metrics like impressions, link clicks, and video views, however, can still be aggregated. Please visit our [changelog](https://developers.facebook.com/docs/graph-api/changelog) for more information.

The `date_preset = lifetime` parameter is disabled in Graph API v10.0 and replaced with `date_preset = maximum`, which returns a maximum of 37 months of data. For v9.0 and below, `date_preset = maximum` will be enabled on May 25, 2021, and any `lifetime` calls will default to `maximum` and return only 37 months of data.

**Reading**

Provides insights on your advertising performance. Allows for deduped metrics across child objects, such as `unique_clicks`, sorting of metrics, and async reporting.

| Example | |
| :--- | :--- |
| HTTP | `GET /v24.0/<AD_SET_ID>/insights?fields=impressions&breakdown=publisher_platform HTTP/1.1
Host: graph.facebook.com` |

If you want to learn how to use the Graph API, read our [Using Graph API](https://developers.facebook.com/docs/graph-api/overview) guide.

| Parameters | |
| :--- | :--- |
| `action_attribution_windows` | `list<enum{1d_view, 7d_view, 28d_view, 1d_click, 7d_click, 28d_click, 1d_ev, dda, default, 7d_view_first_conversion, 28d_view_first_conversion, 7d_view_all_conversions, 28d_view_all_conversions, skan_view, skan_click, skan_click_second_postback, skan_view_second_postback, skan_click_third_postback, skan_view_third_postback}>` | **Default value:** `default` | The attribution window for the actions. For example, `28d_click` means the API returns all actions that happened 28 days after someone clicked on the ad. `1d_ev` refers to engaged-view conversions counted when a skippable video ad is played for at least 10 seconds, or for at least 97% of its total length if it’s shorter than 10 seconds, and a person takes an action within 1 day. The default option means `["7d_click","1d_view"]`. |
| `action_breakdowns` | `list<enum{action_device, conversion_destination, matched_persona_id, matched_persona_name, signal_source_bucket, standard_event_content_type, action_canvas_component_name, action_carousel_card_id, action_carousel_card_name, action_destination, action_reaction, action_target_id, action_type, action_video_sound, action_video_type, is_business_ai_assisted}>` | **Default value:** Vec | How to break down action results. Supports more than one breakdowns. Default value is `["action_type"]`. **Note:** you must also include `actions` field whenever `action_breakdowns` is specified. |
| `action_report_time` | `enum{impression, conversion, mixed, lifetime}` | Determines the report time of action stats. For example, if a person saw the ad on Jan 1st but converted on Jan 2nd, when you query the API with `action_report_time=impression`, you see a conversion on Jan 1st. When you query the API with `action_report_time=conversion`, you see a conversion on Jan 2nd. |
| `breakdowns` | `list<enum{ad_extension_domain, ad_extension_url, ad_format_asset, age, app_id, body_asset, breakdown_ad_objective, breakdown_reporting_ad_id, call_to_action_asset, coarse_conversion_value, comscore_market, country, creative_automation_asset_id, creative_relaxation_asset_type, crm_advertiser_l12_territory_ids, crm_advertiser_subvertical_id, crm_advertiser_vertical_id, crm_ult_advertiser_id, description_asset, fidelity_type, flexible_format_asset_type, gen_ai_asset_type, gender, hsid, image_asset, impression_device, is_auto_advance, is_conversion_id_modeled, is_rendered_as_delayed_skip_ad, landing_destination, link_url_asset, mdsa_landing_destination, media_asset_url, media_creator, media_destination_url, media_format, media_origin_url, media_text_content, media_type, postback_sequence_index, product_brand_breakdown, product_category_breakdown, product_custom_label_0_breakdown, product_custom_label_1_breakdown, product_custom_label_2_breakdown, product_custom_label_3_breakdown, product_custom_label_4_breakdown, product_group_content_id_breakdown, product_group_id, product_id, product_set_id_breakdown, product_vendor_id_breakdown, redownload, region, rta_ugc_topic, skan_campaign_id, skan_conversion_id, skan_version, sot_attribution_model_type, sot_attribution_window, sot_channel, sot_event_type, sot_source, title_asset, user_persona_id, user_persona_name, video_asset, rule_set_id, rule_set_name, dma, frequency_value, hourly_stats_aggregated_by_advertiser_time_zone, hourly_stats_aggregated_by_audience_time_zone, mmm, place_page_id, publisher_platform, platform_position, device_platform, standard_event_content_type, conversion_destination, signal_source_bucket, reels_trending_topic, marketing_messages_btn_name, impression_view_time_advertiser_hour_v2}>` | How to break down the result. For more than one breakdown, only certain combinations are available: See [Combining Breakdowns](#combining-breakdowns) and the [Breakdowns page](#insights-api-breakdowns). The option `impression_device` cannot be used by itself. |
| `date_preset` | `enum{today, yesterday, this_month, last_month, this_quarter, maximum, data_maximum, last_3d, last_7d, last_14d, last_28d, last_30d, last_90d, last_week_mon_sun, last_week_sun_sat, last_quarter, last_year, this_week_mon_today, this_week_sun_today, this_year}` | **Default value:** `last_30d` | Represents a relative time range. This field is ignored if `time_range` or `time_ranges` is specified. |
| `default_summary` | `boolean` | **Default value:** `false` | Determine whether to return a summary. If `summary` is set, this param is be ignored; otherwise, a summary section with the same fields as specified by `fields` will be included in the `summary` section. |
| `export_columns` | `list<string>` | Select fields on the exporting report file. It is an optional param. Exporting columns are equal to the param `fields`, if you leave this param blank |
| `export_format` | `string` | Set the format of exporting report file. If the `export_format` is set, Report file is asyncrhonizely generated. It expects `["xls", "csv"]`. |
| `export_name` | `string` | Set the file name of the exporting report. |
| `fields` | `list<string>` | Fields to be retrieved. Default behavior is to return `impressions` and `spend`. |
| `filtering` | `list<Filter Object>` | **Default value:** Vec | Filters on the report data. This parameter is an array of filter objects. |
| `graph_cache` | `boolean` | **Default value:** `true` | \[internal use only] This param controls whether the the Graph API level cache should be used for insights endpoint |
| `level` | `enum {ad, adset, campaign, account}` | Represents the level of result. |
| `limit` | `integer` | `limit` |
| `product_id_limit` | `integer` | Maximum number of product ids to be returned for each ad when breakdown by `product_id`. |
| `sort` | `list<string>` | **Default value:** Vec | Field to sort the result, and direction of sorting. You can specify sorting direction by appending "\_ascending" or "\_descending" to the sort field. For example, `"reach_descending"`. For actions, you can sort by action type in form of `"actions:<action_type>"`. For example, `["actions:link_click_ascending"]`. This array supports no more than one element. By default, the sorting direction is ascending. |
| `summary` | `list<string>` | If this param is used, a summary section will be included, with the fields listed in this param. |
| `summary_action_breakdowns` | `list<enum{action_device, conversion_destination, matched_persona_id, matched_persona_name, signal_source_bucket, standard_event_content_type, action_canvas_component_name, action_carousel_card_id, action_carousel_card_name, action_destination, action_reaction, action_target_id, action_type, action_video_sound, action_video_type, is_business_ai_assisted}>` | **Default value:** Vec | Similar to `action_breakdowns`, but applies to `summary`. Default value is `["action_type"]`. |
| `time_increment` | `enum{monthly, all_days}` or `integer` | **Default value:** `all_days` | If it is an integer, it is the number of days from 1 to 90. After you pick a reporting period by using `time_range` or `date_preset`, you may choose to have the results for the whole period, or have results for smaller time slices. If `"all_days"` is used, it means one result set for the whole period. If `"monthly"` is used, you will get one result set for each calendar month in the given period. Or you can have one result set for each N-day period specified by this param. This param is ignored if `time_ranges` is specified. |
| `time_range` | `{'since':YYYY-MM-DD,'until':YYYY-MM-DD}` | A single time range object. UNIX timestamp not supported. This param is ignored if `time_ranges` is provided. |
| `time_ranges` | `list<{'since':YYYY-MM-DD,'until':YYYY-MM-DD}>` | Array of time range objects. Time ranges can overlap, for example to return cumulative insights. Each time range will have one result set. You cannot have more granular results with `time_increment` setting in this case.If `time_ranges` is specified, `date_preset`, `time_range` and `time_increment` are ignored. |
| `use_account_attribution_setting` | `boolean` | **Default value:** `false` | When this parameter is set to `true`, your ads results will be shown using the attribution settings defined for the ad account. |
| `use_unified_attribution_setting` | `boolean` | When this parameter is set to `true`, your ads results will be shown using unified attribution settings defined at ad set level and parameter `use_account_attribution_setting` will be ignored. |

| Fields | |
| :--- | :--- |
| Reading from this edge will return a JSON formatted result: | |
| ` {    "data": [],    "paging": {},    "summary": {} }` | |
| `data` | A list of `AdsInsights` nodes. |
| `paging` | For more details about pagination, see the [Graph API guide](#paginated-results). |
| `summary` | Aggregated information about the edge, such as counts. Specify the fields to fetch in the `summary` param (like `summary=account_currency`). |
| `account_currency` | `string` | Currency that is used by your ad account. |
| `account_id` | `numeric string` | The ID number of your ad account, which groups your advertising activity. Your ad account includes your campaigns, ads and billing. |
| | **Default** | |
| `account_name` | `string` | The name of your ad account, which groups your advertising activity. Your ad account includes your campaigns, ads and billing. |
| `action_values` | `list<AdsActionStats>` | The total value of all conversions attributed to your ads. |
| `actions` | `list<AdsActionStats>` | The total number of actions people took that are attributed to your ads. Actions may include engagement, clicks or conversions. |
| `activity_recency` | `string` | `activity_recency` |
| `ad_click_actions` | `list<AdsActionStats>` | `ad_click_actions` |
| `ad_format_asset` | `string` | `ad_format_asset` |
| `ad_id` | `numeric string` | The unique ID of the ad you're viewing in reporting. |
| | **Default** | |
| `ad_impression_actions` | `list<AdsActionStats>` | `ad_impression_actions` |
| `ad_name` | `string` | The name of the ad you're viewing in reporting. |
| `adset_id` | `numeric string` | The unique ID of the ad set you're viewing in reporting. An ad set is a group of ads that share the same budget, schedule, delivery optimization and targeting. |
| | **Default** | |
| `adset_name` | `string` | The name of the ad set you're viewing in reporting. An ad set is a group of ads that share the same budget, schedule, delivery optimization and targeting. |
| `anchor_event_attribution_setting` | `string` | anchor event attribution setting |
| `anchor_events_performance_indicator` | `string` | `anchor_events_performance_indicator` |
| `attribution_setting` | `string` | The default attribution window to be used when attribution result is calculated. Each ad set has its own attribution setting value. The attribution setting for campaign or account is calculated based on existing ad sets. |
| `auction_bid` | `numeric string` | `auction_bid` |
| `auction_competitiveness` | `numeric string` | `auction_competitiveness` |
| `auction_max_competitor_bid` | `numeric string` | `auction_max_competitor_bid` |
| `body_asset` | `AdAssetBody` | `body_asset` |
| `buying_type` | `string` | The method by which you pay for and target ads in your campaigns: through dynamic auction bidding, fixed-price bidding, or reach and frequency buying. This field is currently only visible at the campaign level. |
| `campaign_id` | `numeric string` | The unique ID number of the ad campaign you're viewing in reporting. Your campaign contains ad sets and ads. |
| | **Default** | |
| `campaign_name` | `string` | The name of the ad campaign you're viewing in reporting. Your campaign contains ad sets and ads. |
| `canvas_avg_view_percent` | `numeric string` | The average percentage of the Instant Experience that people saw. An Instant Experience is a screen that opens after someone interacts with your ad on a mobile device. It may include a series of interactive or multimedia components, including video, images product catalog and more. |
| `canvas_avg_view_time` | `numeric string` | The average total time, in seconds, that people spent viewing an Instant Experience. An Instant Experience is a screen that opens after someone interacts with your ad on a mobile device. It may include a series of interactive or multimedia components, including video, images product catalog and more. |
| `catalog_segment_actions` | `list<AdsActionStats>` | The number of actions performed attributed to your ads promoting your catalog segment, broken down by action type. |
| `catalog_segment_value` | `list<AdsActionStats>` | The total value of all conversions from your catalog segment attributed to your ads. |
| `catalog_segment_value_mobile_purchase_roas` | `list<AdsActionStats>` | The total return on ad spend (ROAS) from mobile app purchases for your catalog segment. |
| `catalog_segment_value_omni_purchase_roas` | `list<AdsActionStats>` | The total return on ad spend (ROAS) from all purchases for your catalog segment. |
| `catalog_segment_value_website_purchase_roas` | `list<AdsActionStats>` | The total return on ad spend (ROAS) from website purchases for your catalog segment. |
| `clicks` | `numeric string` | The number of clicks on your ads. |
| `coarse_conversion_value` | `string` | Allows advertisers and ad networks to receive directional post-install quality insights when the volume of campaign conversions isn't high enough to meet the privacy threshold needed to unlock the standard conversion value. Possible values of this breakdown are low, medium and high. **Note:** This breakdown is only supported by the `total_postbacks_detailed_v4` field. |
| `comparison_node` | `AdsInsightsComparison` | Parent node that encapsulates fields to be compared (current time range Vs comparison time range) |
| `comscore_market` | `string` | `comscore_market` |
| `conversion_values` | `list<AdsActionStats>` | `conversion_values` |
| `conversions` | `list<AdsActionStats>` | `conversions` |
| `converted_product_app_custom_event_fb_mobile_purchase` | `list<AdsActionStats>` | `converted_product_app_custom_event_fb_mobile_purchase` |
| `converted_product_app_custom_event_fb_mobile_purchase_value` | `list<AdsActionStats>` | `converted_product_app_custom_event_fb_mobile_purchase_value` |
| `converted_product_offline_purchase` | `list<AdsActionStats>` | `converted_product_offline_purchase` |
| `converted_product_offline_purchase_value` | `list<AdsActionStats>` | `converted_product_offline_purchase_value` |
| `converted_product_omni_purchase` | `list<AdsActionStats>` | `converted_product_omni_purchase` |
| `converted_product_omni_purchase_values` | `list<AdsActionStats>` | `converted_product_omni_purchase_values` |
| `converted_product_quantity` | `list<AdsActionStats>` | The number of products purchased which are recorded by your merchant partner's pixel or app SDK for a given product ID and driven by your ads. Has to be used together with converted product ID breakdown. |
| `converted_product_value` | `list<AdsActionStats>` | The value of purchases recorded by your merchant partner's pixel or app SDK for a given product ID and driven by your ads. Has to be used together with converted product ID breakdown. |
| `converted_product_website_pixel_purchase` | `list<AdsActionStats>` | `converted_product_website_pixel_purchase` |
| `converted_product_website_pixel_purchase_value` | `list<AdsActionStats>` | `converted_product_website_pixel_purchase_value` |
| `converted_promoted_product_app_custom_event_fb_mobile_purchase` | `list<AdsActionStats>` | `converted_promoted_product_app_custom_event_fb_mobile_purchase` |
| `converted_promoted_product_app_custom_event_fb_mobile_purchase_value` | `list<AdsActionStats>` | `converted_promoted_product_app_custom_event_fb_mobile_purchase_value` |
| `converted_promoted_product_offline_purchase` | `list<AdsActionStats>` | `converted_promoted_product_offline_purchase` |
| `converted_promoted_product_offline_purchase_value` | `list<AdsActionStats>` | `converted_promoted_product_offline_purchase_value` |
| `converted_promoted_product_omni_purchase` | `list<AdsActionStats>` | `converted_promoted_product_omni_purchase` |
| `converted_promoted_product_omni_purchase_values` | `list<AdsActionStats>` | `converted_promoted_product_omni_purchase_values` |
| `converted_promoted_product_quantity` | `list<AdsActionStats>` | `converted_promoted_product_quantity` |
| `converted_promoted_product_value` | `list<AdsActionStats>` | `converted_promoted_product_value` |
| `converted_promoted_product_website_pixel_purchase` | `list<AdsActionStats>` | `converted_promoted_product_website_pixel_purchase` |
| `converted_promoted_product_website_pixel_purchase_value` | `list<AdsActionStats>` | `converted_promoted_product_website_pixel_purchase_value` |
| `cost_per_15_sec_video_view` | `list<AdsActionStats>` | `cost_per_15_sec_video_view` |
| `cost_per_2_sec_continuous_video_view` | `list<AdsActionStats>` | `cost_per_2_sec_continuous_video_view` |
| `cost_per_action_type` | `list<AdsActionStats>` | The average cost of a relevant action. |
| `cost_per_ad_click` | `list<AdsActionStats>` | `cost_per_ad_click` |
| `cost_per_conversion` | `list<AdsActionStats>` | `cost_per_conversion` |
| `cost_per_dda_countby_convs` | `numeric string` | `cost_per_dda_countby_convs` |
| `cost_per_inline_link_click` | `numeric string` | The average cost of each inline link click. |
| `cost_per_inline_post_engagement` | `numeric string` | The average cost of each inline post engagement. |
| `cost_per_objective_result` | `list<AdsInsightsResult>` | The average cost per objective result from your ads. Objective results are what you're trying to get the most of in your ad campaign, based on the objective you selected. |
| `cost_per_one_thousand_ad_impression` | `list<AdsActionStats>` | `cost_per_one_thousand_ad_impression` |
| `cost_per_outbound_click` | `list<AdsActionStats>` | The average cost for each outbound click. |
| `cost_per_result` | `list<AdsInsightsResult>` | The average cost per result from your ads. |
| `cost_per_thruplay` | `list<AdsActionStats>` | The average cost for each ThruPlay. This metric is in development. |
| `cost_per_unique_action_type` | `list<AdsActionStats>` | The average cost of each unique action. This metric is estimated. |
| `cost_per_unique_click` | `numeric string` | The average cost for each unique click (all). This metric is estimated. |
| `cost_per_unique_conversion` | `list<AdsActionStats>` | `cost_per_unique_conversion` |
| `cost_per_unique_inline_link_click` | `numeric string` | The average cost of each unique inline link click. This metric is estimated. |
| `cost_per_unique_outbound_click` | `list<AdsActionStats>` | The average cost for each unique outbound click. This metric is estimated. |
| `country` | `string` | `country` |
| `cpc` | `numeric string` | The average cost for each click (all). |
| `cpm` | `numeric string` | The average cost for 1,000 impressions. |
| `cpp` | `numeric string` | The average cost to reach 1,000 people. This metric is estimated. |
| `created_time` | `string` | `created_time` |
| `creative_automation_asset_id` | `AdAssetMedia` | `creative_automation_asset_id` |
| `creative_relaxation_asset_type` | `string` | `creative_relaxation_asset_type` |
| `ctr` | `numeric string` | The percentage of times people saw your ad and performed a click (all). |
| `date_start` | `string` | The start date for your data. This is controlled by the date range you've selected for your reporting view. |
| | **Default** | |
| `date_stop` | `string` | The end date for your data. This is controlled by the date range you've selected for your reporting view. |
| | **Default** | |
| `dda_countby_convs` | `numeric string` | `dda_countby_convs` |
| `dda_results` | `list<AdsInsightsDdaResult>` | `dda_results` |
| `description_asset` | `AdAssetDescription` | `description_asset` |
| `device_platform` | `string` | `device_platform` |
| `dma` | `string` | `dma` |
| `fidelity_type` | `string` | To differentiate StoreKit-rendered ads from view-through ads, SKAdNetwork defines a fidelity-type parameter, which you include in the ad signature and receive in the install-validation postback. Use a fidelity-type value of 1 for StoreKit-rendered ads and attributable web ads, and 0 for view-through ads. **Note:** This breakdown is only supported by the `total_postbacks_detailed_v4` field. |
| `flexible_format_asset_type` | `string` | `flexible_format_asset_type` |
| `frequency` | `numeric string` | The average number of times each person saw your ad. This metric is estimated. |
| `frequency_value` | `string` | `frequency_value` |
| `full_view_impressions` | `numeric string` | The number of Full Views on your Page's posts as a result of your ad. |
| `full_view_reach` | `numeric string` | The number of people who performed a Full View on your Page's post as a result of your ad. |
| `gen_ai_asset_type` | `string` | `gen_ai_asset_type` |
| `hourly_stats_aggregated_by_advertiser_time_zone` | `string` | `hourly_stats_aggregated_by_advertiser_time_zone` |
| `hourly_stats_aggregated_by_audience_time_zone` | `string` | `hourly_stats_aggregated_by_audience_time_zone` |
| `hsid` | `string` | The `hsid` key is available for ad impressions that use SKAdNetwork 4 and later. This integer can have up to four digits. You can encode information about your advertisement in each set of digits; you may receive two, three, or all four digits of the `sourceIdentifier` in the first winning postback, depending on the ad impression's postback data tier. **Note:** This breakdown is only supported by the `total_postbacks_detailed_v4` field. |
| `image_asset` | `AdAssetImage` | `image_asset` |
| `impression_device` | `string` | `impression_device` |
| `impressions` | `numeric string` | The number of times your ads were on screen. |
| | **Default** | |
| `inline_link_click_ctr` | `numeric string` | The percentage of time people saw your ads and performed an inline link click. |
| `inline_link_clicks` | `numeric string` | The number of clicks on links to select destinations or experiences, on or off Facebook-owned properties. Inline link clicks use a fixed 1-day-click attribution window. |
| `inline_post_engagement` | `numeric string` | The total number of actions that people take involving your ads. Inline post engagements use a fixed 1-day-click attribution window. |
| `instagram_upcoming_event_reminders_set` | `numeric string` | `instagram_upcoming_event_reminders_set` |
| `instant_experience_clicks_to_open` | `numeric string` | `instant_experience_clicks_to_open` |
| `instant_experience_clicks_to_start` | `numeric string` | `instant_experience_clicks_to_start` |
| `instant_experience_outbound_clicks` | `list<AdsActionStats>` | `instant_experience_outbound_clicks` |
| `interactive_component_tap` | `list<AdsActionStats>` | `interactive_component_tap` |
| `is_auto_advance` | `string` | `is_auto_advance` |
| `landing_page_view_per_link_click` | `numeric string` | `landing_page_view_per_link_click` |
| `marketing_messages_delivered` | `numeric string` | The number of messages your business sent to customers that were delivered. Some messages may not be delivered, such as when a customer's device is out of service. This metric doesn’t include messages delivered to Europe and Japan. In some cases, this metric may be estimated and may differ from what’s shown on your invoice due to small variations in data processing. |
| `marketing_messages_delivery_rate` | `numeric string` | The number of messages delivered divided by the number of messages sent. Some messages may not be delivered, such as when a customer's device is out of service. This metric doesn't include messages sent to Europe and Japan. |
| `marketing_messages_read_rate_benchmark` | `string` | We calculate this metric as the 75th percentile of read rates across similar businesses, representing the percentage of messages read out of total messages delivered. |
| `media_asset` | `AdAssetMedia` | `media_asset` |
| `mobile_app_purchase_roas` | `list<AdsActionStats>` | The total return on ad spend (ROAS) from mobile app purchases. This is based on the value that you assigned when you set up the app event. |
| `multi_event_conversion_attribution_setting` | `string` | multi event conversion attribution setting |
| `objective` | `string` | The objective reflecting the goal you want to achieve with your advertising. It may be different from the selected objective of the campaign in some cases. |
| `objective_result_rate` | `list<AdsInsightsResult>` | The number of objective results you received divided by the number of impressions. |
| `objective_results` | `list<AdsInsightsResult>` | The number of responses you wanted to achieve from your ad campaign, based on the objective you selected. For example, if you selected promote your Page as your campaign objective, this metric shows the number of Page likes that happened as a result of your ads. |
| `optimization_goal` | `string` | The optimization goal you selected for your ad or ad set. Your optimization goal reflects what you want to optimize for the ads. |
| `outbound_clicks` | `list<AdsActionStats>` | The number of clicks on links that take people off Facebook-owned properties. |
| `outbound_clicks_ctr` | `list<AdsActionStats>` | The percentage of times people saw your ad and performed an outbound click. |
| `platform_position` | `string` | `platform_position` |
| `postback_sequence_index` | `string` | Sequence of postbacks received from SkAdNetwork API version 4.0. Possible values of this breakdown are 0 (first postback), 1 (second postback) and 2 (third postback). **Note:** This breakdown is only supported by the `total_postbacks_detailed_v4` field. |
| `product_brand_breakdown` | `string` | `product_brand_breakdown` |
| `product_category_breakdown` | `string` | `product_category_breakdown` |
| `product_custom_label_0_breakdown` | `string` | `product_custom_label_0_breakdown` |
| `product_custom_label_1_breakdown` | `string` | `product_custom_label_1_breakdown` |
| `product_custom_label_2_breakdown` | `string` | `product_custom_label_2_breakdown` |
| `product_custom_label_3_breakdown` | `string` | `product_custom_label_3_breakdown` |
| `product_custom_label_4_breakdown` | `string` | `product_custom_label_4_breakdown` |
| `product_group_content_id_breakdown` | `string` | `product_group_content_id_breakdown` |
| `product_group_retailer_id` | `string` | `product_group_retailer_id` |
| `product_id` | `string` | `product_id` |
| `product_retailer_id` | `string` | `product_retailer_id` |
| `product_set_id_breakdown` | `string` | `product_set_id_breakdown` |
| `product_vendor_id_breakdown` | `string` | product vendor id breakdown |
| `product_views` | `string` | `product_views` |
| `publisher_platform` | `string` | `publisher_platform` |
| `purchase_per_landing_page_view` | `numeric string` | `purchase_per_landing_page_view` |
| `purchase_roas` | `list<AdsActionStats>` | The total return on ad spend (ROAS) from purchases. This is based on information received from one or more of your connected Facebook Business Tools and attributed to your ads. |
| `qualifying_question_qualify_answer_rate` | `numeric string` | `qualifying_question_qualify_answer_rate` |
| `reach` | `numeric string` | The number of people who saw your ads at least once. Reach is different from impressions, which may include multiple views of your ads by the same people. This metric is estimated. |
| `redownload` | `string` | Boolean flag that indicates the customer redownloaded and reinstalled the app when the value is true. A 1 indicates customer has reinstalled the app and 0 indicates that customer hasn’t reinstalled the app **Note:** This breakdown is only supported by the `total_postbacks_detailed_v4` field. |
| `reels_trending_topic` | `string` | `reels_trending_topic` |
| `result_rate` | `list<AdsInsightsResult>` | The percentage of results you received out of all the views of your ads. |
| `result_values_performance_indicator` | `string` | `result_values_performance_indicator` |
| `results` | `list<AdsInsightsResult>` | The number of times your ad achieved an outcome, based
| :--- | :--- | :--- |
| | on the objective and settings you selected. | |
| `rta_ugc_topic` | `string` | `rta_ugc_topic` |
| `rule_asset` | `AdAssetRule` | `rule_asset` |
| `rule_set_id` | `string` | `rule_set_id` |
| `rule_set_name` | `string` | `rule_set_name` |
| `shops_assisted_purchases` | `string` | `shops_assisted_purchases` |
| `skan_version` | `string` | `skan_version` |
| `social_spend` | `numeric string` | The total amount you've spent so far for your ads showed with social information. (ex: Jane Doe likes this). |
| `spend` | `numeric string` | The estimated total amount of money you've spent on your campaign, ad set or ad during its schedule. This metric is estimated. |
| | **Default** | |
| `title_asset` | `AdAssetTitle` | `title_asset` |
| `total_card_view` | `string` | `total_card_view` |
| `updated_time` | `string` | `updated_time` |
| `user_segment_key` | `string` | `user_segment_key` |
| `video_30_sec_watched_actions` | `list<AdsActionStats>` | The number of times your video played for at least 30 seconds, or for nearly its total length if it's shorter than 30 seconds. For each impression of a video, we'll count video views separately and exclude any time spent replaying the video. |
| `video_asset` | `AdAssetVideo` | `video_asset` |
| `video_avg_time_watched_actions` | `list<AdsActionStats>` | The average time a video was played, including any time spent replaying the video for a single impression. |
| `video_continuous_2_sec_watched_actions` | `list<AdsActionStats>` | `video_continuous_2_sec_watched_actions` |
| `video_p100_watched_actions` | `list<AdsActionStats>` | The number of times your video was played at 100% of its length, including plays that skipped to this point. |
| `video_p25_watched_actions` | `list<AdsActionStats>` | The number of times your video was played at 25% of its length, including plays that skipped to this point. |
| `video_p50_watched_actions` | `list<AdsActionStats>` | The number of times your video was played at 50% of its length, including plays that skipped to this point. |
| `video_p75_watched_actions` | `list<AdsActionStats>` | The number of times your video was played at 75% of its length, including plays that skipped to this point. |
| `video_p95_watched_actions` | `list<AdsActionStats>` | The number of times your video was played at 95% of its length, including plays that skipped to this point. |
| `video_play_actions` | `list<AdsActionStats>` | The number of times your video starts to play. This is counted for each impression of a video, and excludes replays. This metric is in development. |
| `video_play_curve_actions` | `list<AdsHistogramStats>` | A video-play based curve graph that illustrates the percentage of video plays that reached a given second. Entries 0 to 14 represent seconds 0 thru 14. Entries 15 to 17 represent second ranges [15 to 20), [20 to 25), and [25 to 30). Entries 18 to 20 represent second ranges [30 to 40), [40 to 50), and [50 to 60). Entry 21 represents plays over 60 seconds. |
| `video_play_retention_0_to_15s_actions` | `list<AdsHistogramStats>` | `video_play_retention_0_to_15s_actions` |
| `video_play_retention_20_to_60s_actions` | `list<AdsHistogramStats>` | `video_play_retention_20_to_60s_actions` |
| `video_play_retention_graph_actions` | `list<AdsHistogramStats>` | `video_play_retention_graph_actions` |
| `video_time_watched_actions` | `list<AdsActionStats>` | `video_time_watched_actions` |
| `website_ctr` | `list<AdsActionStats>` | The percentage of times people saw your ad and performed a link click. |
| `website_purchase_roas` | `list<AdsActionStats>` | The total return on ad spend (ROAS) from website purchases. This is based on the value of all conversions recorded by the Facebook pixel on your website and attributed to your ads. |
| `wish_bid` | `numeric string` | `wish_bid` |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 200 | Permissions error |
| 100 | Invalid parameter |
| 3018 | The start date of the time range cannot be beyond 37 months from the current date |
| 613 | Calls to this api have exceeded the rate limit. |
| 2642 | Invalid cursors values |
| 2635 | You are calling a deprecated version of the Ads API. Please update to the latest version. |
| 190 | Invalid OAuth 2.0 Access Token |
| 2500 | Error parsing graph query |
| 105 | The number of parameters exceeded the maximum for this operation |
| 3001 | Invalid query |

**Creating**

You can make a `POST` request to `insights` edge from the following paths:
*   `/act_{ad_account_id}/insights`

When posting to this edge, an `AdReportRun` will be created.

| Parameters | |
| :--- | :--- |
| `action_attribution_windows` | `list<enum{1d_view, 7d_view, 28d_view, 1d_click, 7d_click, 28d_click, 1d_ev, dda, default, 7d_view_first_conversion, 28d_view_first_conversion, 7d_view_all_conversions, 28d_view_all_conversions, skan_view, skan_click, skan_click_second_postback, skan_view_second_postback, skan_click_third_postback, skan_view_third_postback}>` | **Default value:** `default` | The attribution window for the actions. For example, `28d_click` means the API returns all actions that happened 28 days after someone clicked on the ad. `1d_ev` refers to engaged-view conversions counted when a skippable video ad is played for at least 10 seconds, or for at least 97% of its total length if it’s shorter than 10 seconds, and a person takes an action within 1 day. The default option means `["7d_click","1d_view"]`. |
| `action_breakdowns` | `list<enum{action_device, conversion_destination, matched_persona_id, matched_persona_name, signal_source_bucket, standard_event_content_type, action_canvas_component_name, action_carousel_card_id, action_carousel_card_name, action_destination, action_reaction, action_target_id, action_type, action_video_sound, action_video_type, is_business_ai_assisted}>` | **Default value:** Vec | How to break down action results. Supports more than one breakdowns. Default value is `["action_type"]` **Note:** you must also include `actions` field whenever `action_breakdowns` is specified. |
| `action_report_time` | `enum{impression, conversion, mixed, lifetime}` | Determines the report time of action stats. For example, if a person saw the ad on Jan 1st but converted on Jan 2nd, when you query the API with `action_report_time=impression`, you see a conversion on Jan 1st. When you query the API with `action_report_time=conversion`, you see a conversion on Jan 2nd |
| `breakdowns` | `list<enum{ad_extension_domain, ad_extension_url, ad_format_asset, age, app_id, body_asset, breakdown_ad_objective, breakdown_reporting_ad_id, call_to_action_asset, coarse_conversion_value, comscore_market, country, creative_automation_asset_id, creative_relaxation_asset_type, crm_advertiser_l12_territory_ids, crm_advertiser_subvertical_id, crm_advertiser_vertical_id, crm_ult_advertiser_id, description_asset, fidelity_type, flexible_format_asset_type, gen_ai_asset_type, gender, hsid, image_asset, impression_device, is_auto_advance, is_conversion_id_modeled, is_rendered_as_delayed_skip_ad, landing_destination, link_url_asset, mdsa_landing_destination, media_asset_url, media_creator, media_destination_url, media_format, media_origin_url, media_text_content, media_type, postback_sequence_index, product_brand_breakdown, product_category_breakdown, product_custom_label_0_breakdown, product_custom_label_1_breakdown, product_custom_label_2_breakdown, product_custom_label_3_breakdown, product_custom_label_4_breakdown, product_group_content_id_breakdown, product_group_id, product_id, product_set_id_breakdown, product_vendor_id_breakdown, redownload, region, rta_ugc_topic, skan_campaign_id, skan_conversion_id, skan_version, sot_attribution_model_type, sot_attribution_window, sot_channel, sot_event_type, sot_source, title_asset, user_persona_id, user_persona_name, video_asset, rule_set_id, rule_set_name, dma, frequency_value, hourly_stats_aggregated_by_advertiser_time_zone, hourly_stats_aggregated_by_audience_time_zone, mmm, place_page_id, publisher_platform, platform_position, device_platform, standard_event_content_type, conversion_destination, signal_source_bucket, reels_trending_topic, marketing_messages_btn_name, impression_view_time_advertiser_hour_v2}>` | How to break down the result. For more than one breakdown, only certain combinations are available: See "Combining Breakdowns" in the [Breakdowns page](#insights-api-breakdowns). The option `impression_device` cannot be used by itself |
| `date_preset` | `enum{today, yesterday, this_month, last_month, this_quarter, maximum, data_maximum, last_3d, last_7d, last_14d, last_28d, last_30d, last_90d, last_week_mon_sun, last_week_sun_sat, last_quarter, last_year, this_week_mon_today, this_week_sun_today, this_year}` | **Default value:** `last_30d` | Represents a relative time range. This field is ignored if `time_range` or `time_ranges` is specified |
| `default_summary` | `boolean` | **Default value:** `false` | Determine whether to return a summary. If `summary` is set, this param is ignored; otherwise, a summary section with the same fields as specified by `fields` is included in the `summary` section |
| `export_columns` | `list<string>` | Select fields on the exporting report file. It is an optional param. Exporting columns are equal to the param `fields` if you leave this param blank |
| `export_format` | `string` | Set the format of exporting report file. If the `export_format` is set, Report file is asyncrhonizely generated. It expects `["xls", "csv"]`. |
| `export_name` | `string` | Set the file name of the exporting report. |
| `fields` | `list<string>` | Fields to be retrieved. Default behavior is to return a list of most used fields |
| `filtering` | `list<Filter Object>` | **Default value:** Vec | Filters on the report data. This parameter is an array of filter objects |
| `graph_cache` | `boolean` | **Default value:** `true` | \[internal use only] This param controls whether the the Graph API level cache should be used for insights endpoint |
| `level` | `enum {ad, adset, campaign, account}` | Represents the level of result |
| `limit` | `integer` | `limit` |
| `product_id_limit` | `integer` | Maximum number of product ids to be returned for each ad when breakdown by `product_id`. |
| `sort` | `list<string>` | **Default value:** Vec | Field to sort the result, and direction of sorting. You can specify sorting direction by appending "\_ascending" or "\_descending" to the sort field. For example, `"reach_descending"`. For actions, you can sort by action type in form of `"actions:<action_type>"`. For example, `["actions:link_click_ascending"]`. This array supports no more than one element. By default, the sorting direction is ascending |
| `summary` | `list<string>` | If this param is used, a summary section is included, with the fields listed in this param |
| `summary_action_breakdowns` | `list<enum{action_device, conversion_destination, matched_persona_id, matched_persona_name, signal_source_bucket, standard_event_content_type, action_canvas_component_name, action_carousel_card_id, action_carousel_card_name, action_destination, action_reaction, action_target_id, action_type, action_video_sound, action_video_type, is_business_ai_assisted}>` | **Default value:** Vec | Similar to `action_breakdowns`, but applies to `summary`. Default value is `["action_type"]` |
| `time_increment` | `enum{monthly, all_days}` or `integer` | **Default value:** `all_days` | If it is an integer, it is the number of days from 1 to 90. After you pick a reporting period by using `time_range` or `date_preset`, you may choose to have the results for the whole period, or have results for smaller time slices. If `"all_days"` is used, it means one result set for the whole period. If `"monthly"` is used, you get one result set for each calendar month in the given period. Or you can have one result set for each N-day period specified by this param. This param is ignored if `time_ranges` is specified |
| `time_range` | `{'since':YYYY-MM-DD,'until':YYYY-MM-DD}` | A single time range object. UNIX timestamp not supported. This param is ignored if `time_ranges` is provided |
| `time_ranges` | `list<{'since':YYYY-MM-DD,'until':YYYY-MM-DD}>` | Array of time range objects. Time ranges can overlap, for example to return cumulative insights. Each time range has one result set. You cannot have more granular results with `time_increment` setting in this case.If `time_ranges` is specified, `date_preset`, `time_range` and `time_increment` are ignored |
| `use_account_attribution_setting` | `boolean` | **Default value:** `false` | When this parameter is set to `true`, your ads results are shown using the attribution settings defined for the ad account |
| `use_unified_attribution_setting` | `boolean` | When this parameter is set to `true`, your ads results will be shown using unified attribution settings defined at ad set level and parameter `use_account_attribution_setting` will be ignored. **Note:** Please set this to `true` to get the same behavior as in the Ads Manager. |

| Return Type | |
| :--- | :--- |
| `Struct {report_run_id: numeric string, }` | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 100 | Invalid parameter |
| 2635 | You are calling a deprecated version of the Ads API. Please update to the latest version. |
| 190 | Invalid OAuth 2.0 Access Token |
| 3018 | The start date of the time range cannot be beyond 37 months from the current date |
| 200 | Permissions error |
| 2500 | Error parsing graph query |

**Updating**

You can't perform this operation on this endpoint.

**Deleting**

You can't perform this operation on this endpoint.

# Ad Account Instagram Accounts

**Reading**

Retrieve instagram accounts associated with this Ad Account

| Example | |
| :--- | :--- |
| HTTP | `GET /v24.0/{ad-account-id}/instagram_accounts HTTP/1.1
Host: graph.facebook.com` |

If you want to learn how to use the Graph API, read our [Using Graph API](https://developers.facebook.com/docs/graph-api/overview) guide.

| Parameters | |
| :--- | :--- |
| This endpoint doesn't have any parameters. | |

| Fields | |
| :--- | :--- |
| Reading from this edge will return a JSON formatted result: | |
| ` {    "data": [],    "paging": {},    "summary": {} }` | |
| `data` | A list of `IGUser` nodes. |
| `paging` | For more details about pagination, see the [Graph API guide](#paginated-results). |
| `summary` | Aggregated information about the edge, such as counts. Specify the fields to fetch in the `summary` param (like `summary=total_count`). |
| `total_count` | `int32` | Total number of objects on this edge |
| | **Default** | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 200 | Permissions error |
| 190 | Invalid OAuth 2.0 Access Token |
| 80002 | There have been too many calls to this Instagram account. Wait a bit and try again. For more info, please refer to https://developers.facebook.com/docs/graph-api/overview/rate-limiting. |
| 2635 | You are calling a deprecated version of the Ads API. Please update to the latest version. |
| 100 | Invalid parameter |
| 80004 | There have been too many calls to this ad-account. Wait a bit and try again. For more info, please refer to https://developers.facebook.com/docs/graph-api/overview/rate-limiting#ads-management. |

**Creating**

You can't perform this operation on this endpoint.

**Updating**

You can't perform this operation on this endpoint.

**Deleting**

You can't perform this operation on this endpoint.

# Ad Account Tracking

**Reading**

`AdAccountTracking`

| Example | |
| :--- | :--- |
| HTTP | `GET /v24.0/{ad-account-id}/tracking HTTP/1.1
Host: graph.facebook.com` |

If you want to learn how to use the Graph API, read our [Using Graph API](https://developers.facebook.com/docs/graph-api/overview) guide.

| Parameters | |
| :--- | :--- |
| This endpoint doesn't have any parameters. | |

| Fields | |
| :--- | :--- |
| Reading from this edge will return a JSON formatted result: | |
| ` {    "data": [],    "paging": {} }` | |
| `data` | A list of `AdAccountTrackingData` nodes. |
| `paging` | For more details about pagination, see the [Graph API guide](#paginated-results). |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 100 | Invalid parameter |
| 190 | Invalid OAuth 2.0 Access Token |
| 200 | Permissions error |

**Creating**

You can make a `POST` request to `tracking` edge from the following paths:
*   `/act_{ad_account_id}/tracking`

When posting to this edge, no Graph object will be created.

| Parameters | |
| :--- | :--- |
| `tracking_specs` | `Object` | Tracking specs to add to the account level |
| | **Required** | |

| Return Type | |
| :--- | :--- |
| This endpoint supports read-after-write and will read the node to which you POSTed. | |
| `Struct {success: bool, }` | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 100 | Invalid parameter |

**Updating**

You can't perform this operation on this endpoint.

**Deleting**

You can't perform this operation on this endpoint.

# Secure Graph API Calls

Almost every Graph API call requires an [access token](#get-an-access-token-for-ad-accounts-you-manage). Malicious developers can steal access tokens and use them to send spam from your app. Meta has automated systems to detect this, but you can help us secure your app. This document covers some of the ways you can improve security in your app.

## Meta Crawler

A number of platform services such as Social Plugins and Open Graph require our systems to be able to reach your web pages. We recognize that there are situations where you might not want these pages on the public web, during testing or for other security reasons.

We've provided information on [IP allow lists and User Agent strings for Meta's crawlers](https://developers.facebook.com/docs/sharing/webmasters/crawler) in our [Meta Crawler guide](https://developers.facebook.com/docs/sharing/webmasters/crawler).

## Login Security

There are a large number of settings you can change to improve the security of your app. Please see our [Login Security documentation](https://developers.facebook.com/docs/facebook-login/security) for a checklist of things you can do.

It's also worth looking at our [access token documentation](https://developers.facebook.com/docs/facebook-login/access-tokens) which covers various architectures and the security trade-offs that you should consider.

## Server Allow List

We also enable you to restrict some of your API calls to come from a list of servers that you have allowed to make calls. Learn more in our [login security documentation](https://developers.facebook.com/docs/facebook-login/security/#server-allow-list).

## Social Plugin Confirmation Steps

In order to protect users from unintentionally liking content around the web, our systems will occasionally require them to confirm that they intended to interact with one of our Social Plugins via a "confirm" dialog. This is expected behavior and once the system has verified your site as a good actor, the step will be removed automatically.

## Encryption

When connecting to our servers your client must use TLS and be able to verify a certificate signed using `sha256WithRSAEncryption`.

Graph API supports TLS 1.2 and 1.3 and non-static RSA cipher suites. We are currently deprecating support for older TLS versions and static RSA cipher suites. Version 16.0 no longer supports TLS versions older than 1.1 or static RSA cipher suites. This change will apply to all API versions on May 3, 2023.

## Verify Graph API Calls with appsecret\_proof

[Access tokens](#get-an-access-token-for-ad-accounts-you-manage) are portable. It's possible to take an access token generated on a client by Meta's SDK, send it to a server and then make calls from that server on behalf of the client. An access token can also be stolen by malicious software on a person's computer or a man in the middle attack. Then that access token can be used from an entirely different system that's not the client and not your server, generating spam or stealing data.

Calls from a server can be better secured by adding a parameter called `appsecret_proof`. The app secret proof is a `sha256` hash of your access token, using your app secret as the key. The app secret can be found in your app dashboard in **Settings > Basic**.

If you're using the official PHP SDK, the `appsecret_proof` parameter is automatically added.

**Generate the Proof**

The following code example is what the call looks like in PHP:

`$appsecret_proof= hash_hmac('sha256', $access_token, $app_secret); `

**Add the Proof**

You add the result as an `appsecret_proof` parameter to each call you make:

```curl
curl \
  -F 'access_token=<access_token>' \
  -F 'appsecret_proof=<app secret proof>' \
  -F 'batch=[{"method":"GET", "relative_url":"me"},{"method":"GET", "relative_url":"me/friends?limit=50"}]' \
  https://graph.facebook.com
```

**Require the Proof**

To enable **Require App Secret** for all your API calls, go to the Meta App Dashboard and click **App Settings > Advanced** in the left side menu. Scroll to the **Security** section, and click the **Require App Secret** toggle.

If this setting is enabled, all client-initiated calls must be proxied through your backend where the `appsecret_proof` parameter can be added to the request before sending it to the Graph API, or the call will fail.

## Upload a file

The Resumable Upload API allows you to upload large files to Meta's social graph and resume interrupted upload sessions without having to start over. Once you have uploaded your file, you can publish it.

References for endpoints that support uploaded file handles will indicate if the endpoints support handles returned by the Resumable Upload API.

**Before you start**

This guide assumes you have read the [Graph API Overview](https://developers.facebook.com/docs/graph-api/overview/) and the [Meta Development guides](https://developers.facebook.com/docs/development/) and performed the necessary actions needed to develop with Meta.

You will need:
*   A Meta app ID
*   A file in one of the following formats:
    *   `pdf`
    *   `jpeg`
    *   `jpg`
    *   `png`
    *   `mp4`
*   A User access token

**Step 1: Start an upload session**

To start an upload session send a `POST` request to the `/<APP_ID>/uploads` endpoint, where `<APP_ID>` is your app's Meta ID, with the following required parameters:
*   `file_name` - the name of your file
*   `file_length` - file size in bytes
*   `file_type` - The file's MIME type. Valid values are: `application/pdf`, `image/jpeg`, `image/jpg`, `image/png`, and `video/mp4`

**Request Syntax**

Formatted for readability.

```curl
curl -i -X POST "https://graph.facebook.com/v24.0/<APP_ID>/uploads
  ?file_name=<FILE_NAME>
  &file_length=<FILE_LENGTH>
  &file_type=<FILE_TYPE>
  &access_token=<USER_ACCESS_TOKEN>"
```

Upon success, your app will receive a JSON response with the upload session ID.

`{ "id": "upload:<UPLOAD_SESSION_ID>"}`

**Step 2: Start the upload**

Start uploading the file by sending a `POST` request to the `/upload:<UPLOAD_SESSION_ID>` endpoint with the following `file_offset` set to `0`.

**Request Syntax**

```curl
curl -i -X POST "https://graph.facebook.com/v24.0/upload:<UPLOAD_SESSION_ID>"
  --header "Authorization: OAuth <USER_ACCESS_TOKEN>"
  --header "file_offset: 0"
  --data-binary @<FILE_NAME>
```

You must include the access token in the header or the call will fail.

On success, your app receives the file handle which you will use in your API calls to publish the file to your endpoint.

`{ "h": "<UPLOADED_FILE_HANDLE>"}`

**Sample Response**

`{     "h": "2:c2FtcGxl..."}`

**Resume an interrupted upload**

If you have initiated an upload session but it is taking longer than expected or has been interrupted, send a `GET` request to the `/upload:<UPLOAD_SESSION_ID>` endpoint from Step 1.

```curl
curl -i -X GET "https://graph.facebook.com/v24.0/upload:<UPLOAD_SESSION_ID>"
  --header "Authorization: OAuth <USER_ACCESS_TOKEN>"
```

Upon success, your app will receive a JSON response with the `file_offset` value that you can use to resume the upload process from the point of interruption.

`{ "id": "upload:<UPLOAD_SESSION_ID>"   "file_offset": "<FILE_OFFSET>"}`

Send another `POST` request, like the you sent in Step 2, with `file_offset` set to this `file_offset` value you just received. This will resume the upload process from the point of interruption.

```curl
curl -i -X POST "https://graph.facebook.com/v24.0/upload:<UPLOAD_SESSION_ID>"
  --header "Authorization: OAuth <USER_ACCESS_TOKEN>"
  --header "file_offset: <FILE_OFFSET>"
  --data-binary @<FILE_NAME>
```

**Next Steps**

Visit the [Video API documentation](#publishing-2) to publish a video to a Facebook Page.

## Publishing

The Video API allows you to publish Videos and Reels on Facebook Pages.

**Requirements**

To publish a video on a Page you will need:
*   A Page access token requested by a person who can perform the `CREATE_CONTENT` task on the Page
*   The person requesting the token must grant your app access to the following permissions via Facebook Login:
    *   `pages_show_list`
    *   `pages_read_engagement`
    *   `pages_manage_posts`
*   A video handle
    *   This handle is received when you upload your video file to Meta servers using the [Resumable Upload API](#upload-a-file)

**Publish a video**

To publish a video send a `POST` request to the `/<PAGE_ID>/videos` endpoint with

```curl
curl -X POST \
  "https://graph-video.facebook.com/v24.0/<PAGE_ID>/videos" \
  -F "access_token=<PAGE_ACCESS_TOKEN>" \
  -F "title=<VIDEO_TITLE>" \
  -F "description=<VIDEO_DESCRIPTION>" \ 
  -F "fbuploader_video_file_chunk=<UPLOADED_FILE_HANDLE>"
```

On success, your app receives a JSON response with the Video ID.

`{ "id":"<VIDEO_ID>"}`

## Opportunity score and Recommendations

Opportunity score and recommendations enable advertisers to discover and implement best practices that can optimize their ad campaigns with Meta. This guide will help you understand the components of opportunity score and how to integrate them with your application.

Opportunity score is a tool for understanding how well optimized an ad account is for achieving optimal performance, and generates recommendations that could improve performance. It consists of two parts:
*   **Your opportunity score (range: 0–100)** — Reflects how optimized your ad account is. A higher score indicates better optimality and a greater likelihood of improved performance over time.
    *   Opportunity score is provided as a field of an ad account.
    *   Opportunity score is updated in near real-time in response to campaign changes and the application of available recommendations.
*   **Recommendations** – Experimentally-proven best practices that are personalized to each ad account. They may relate to your campaigns, ad sets, or ads, and have been rigorously tested to show they can deliver statistically significant performance improvements.\*
    *   Implementing recommendations will improve setup and increase opportunity score
    *   Recommendations have assigned point values based on how much each is expected to improve your campaign performance.\*
    *   You may see recommendations related to a variety of categories including campaign objectives and goals, audience, automation, creative and placements, budget and bidding, or signals.

\*Note: Meta is frequently testing new types of recommendations on the Ads Manager Web UI. Under certain circumstances, there could be fewer recommendations returned by the API versus what is shown in Ads Manager.

By applying performance recommendations from Meta, you agree to the [Facebook Terms of Service](https://www.facebook.com/policies/terms) including your obligation to comply with the [Self-serve ad terms](https://www.facebook.com/legal/self_service_ads_terms), the [Commercial terms](https://www.facebook.com/legal/commercial_terms), and the [Facebook Advertising Policies](https://www.facebook.com/policies/ads).

## Supported Inventory and APIs

**Fetching recommendations**

To fetch all the recommendations available for your ad account, make a `GET` request to the `/act_<AD_ACCOUNT_ID>/recommendations` endpoint where `<AD_ACCOUNT_ID>` is the ID for your Meta ad account.

*   **Example request**

    ```curl
    curl -G \
      -d 'access_token=<ACCESS_TOKEN>' \
    https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/recommendations   
    ```

*   **Example response**

    On success, your app receives a list of recommendations that Meta has generated. If this list is empty, Meta has not identified any changes that can be made to increase the ads performance in your ad account.

    ```json
    {
  "data": [
    {
      "recommendations": [
       {
         "recommendation_signature": "1234567",
         "type": "AUTOFLOW_OPT_IN",
         "object_ids": ["7656787679008", "2345678765423", ...],
         "recommendation_content": {
        	"lift_estimate": "Up to 3% more Traffic",
        	"body": "2 of your ad sets have similar objectives and creatives..",
        	"opportunity_score_lift": "14"
        },
         "url": "https://adsmanager.facebook.com/adsmanager/...."
      }
    ],
   }
  ]...
    ```

| Parameters | |
| :--- | :--- |
| `recommendation_signature` | Unique identifier for this recommendation. Required to refer to this recommendation in the recommendation application API. For recommendations that cannot be resolved in API, this value will not be returned. |
| `type` | Enum value denoting what type of recommendation this is. Description of what each possible value means and what applying them entails is provided below in this documentation. |
| `object_ids` | List of ads objects that pertain to this recommendation. May be a campaign, ad set, or ad. |
| `lift_estimate` | Describes the improvement an advertiser could see in accepting a given recommendation. |
| `body` | This is a description of the recommendation similar to the description that you would see in the "performance recommendation type" table of this document. |
| `opportunity_score_lift` | This is the lift in opportunity score that would be expected from applying this recommendation. |
| `url` | This is the URL that links directly to the user flow in Ads Manager to apply the recommendation. |

**Applying recommendations**

To apply a recommendation for your ad account, make a `POST` request to the `/act_<AD_ACCOUNT_ID>/recommendations` endpoint where `<AD_ACCOUNT_ID>` is the ID for your Meta ad account.

| Parameters | |
| :--- | :--- |
| `recommendation_signature` | `string` | Required. | Signature provided in the recommendation fetching API, which corresponds to a unique recommendation. |
| `music_parameters` | `object` | Optional. | Music recommendation parameters. Specific parameters are listed below. |
| `autoflow_parameters` | `object` | Optional. | Autoflow opt-in recommendation parameters. Specific parameters are listed below. |
| `fragmentation_parameters` | `object` | Optional. | Fragmentation recommendation parameters. Specific parameters are listed below. |

| music\_parameters | |
| :--- | :--- |
| `object_selection` | `array of numeric strings` | Optional. | A list of ad IDs to apply the music recommendation to. List must be a subset of provided IDs in `object_ids`. |

| autoflow\_parameters | |
| :--- | :--- |
| `object_selection` | `array of numeric strings` | Optional. | A list of ad IDs to apply the autoflow opt-in recommendation to. List must be a subset of provided IDs in `object_ids`. |

| fragmentation\_parameters | |
| :--- | :--- |
| `object_selection` | `array of numeric strings` | Optional. | A list of ad set IDs to apply the fragmentation recommendation to. List must be a subset of provided IDs in `object_ids`. |

*   **Example request**

    ```curl
    curl -X POST \
      -d 'access_token=<ACCESS_TOKEN>' \
      -d 'recommendation_signature="1234567"' \
      -d 'music_parameters={"object_selection": ["7656787679008"]}' \
    https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/recommendations   
    ```

*   **Example response**

    On success, your app receives a Boolean value denoting whether the recommendation was successfully applied. If it was not successfully applied, your ad objects will remain unchanged.

    `{ "success": true}`

## Performance recommendation types

Here are the currently supported performance recommendation types and what will happen when the recommendation is applied.

| Name | Description |
| :--- | :--- |
| `MUSIC` | Allow Meta to automatically select and add music to your ads, at no cost to you, based on their content. |
| | Applying this recommendation will enable this functionality for the selected ads objects. If no selection is provided, it will be enabled for all listed ads objects. |
| | Use of music in your ads is subject to the [Sound Collection Terms](https://www.facebook.com/legal/sound_collection_terms). |
| `AUTOFLOW_OPT_IN` | Enable standard enhancements, which leverages Meta's data to deliver different variations of your ad when likely to improve performance. |
| | Applying this recommendation will enable this functionality for the selected ads objects. If no selection is provided, it will be enabled for all listed ads objects. |
| `AUTOMATIC_PLACEMENTS` | Allow Meta to automatically select additional placements for your ad sets while making the most of your budget. Learn more about [Advantage+ Placements](https://www.facebook.com/business/help/1288599478479574). |
| `UNCROP_IMAGE` | Expand your images to fit more placements. You can use generated images that expand the aspect ratios of your media, which can fit your ad into new placements and show them to more people. |
| | Applying this recommendation will enable this functionality for the selected ads objects. If no selection is provided, it will be enabled for all listed ads objects. |
| `FRAGMENTATION` | Some of your ad sets have similar setups and creatives, but different audiences. As a result, they may take longer to exit the learning phase and spend more budget before performance has optimized. To optimize your ads spending, combine your similar ad sets into one ad set. |
| | Applying this recommendation will perform the following changes: |
| | * The top performing ad set will remain on, while the rest are turned off. The top performing ad set will be the one listed in `object_ids`. |
| | * Targeting selections from the ad sets which are turned off will be merged into top performing ad set. For example, if Ad Set 1 targeted 18-25 year olds and Ad Set 2 targeted 35-40 year olds, your combined ad set would target 18-40 year olds. Your audience changes will include: Locations included. |
| | * Ads from the ad sets which are turned off will be included in the top performing ad set. |
| | * Budgets from the ad sets which are turned off will be added to the budget of the top performing ad set. |
| `CREATIVE_FATIGUE` | Cost per result for this ad set may be higher than ads you ran in the past because its image or ide has been show to parts of your audience too many times. |
| | Applying this recommendation requires an ad ID and creative ID, and will create a copy of the provided ad, except with the provided new creative. |
| `CREATIVE_LIMITED` | Cost per result for this ad set may be higher than ads you ran in the past because its image or ide has been show to parts of your audience too many times. |
| | Applying this recommendation requires an ad ID and creative ID, and will create a copy of the provided ad, except with the provided new creative. |
| `SIGNALS_GROWTH_CAPI` | By integrating the Conversions API, you can get more accurate data about the conversions from your Meta ads, which will improve audience targeting and help lower your cost per result. |
| | [Get started with the Conversions API](https://developers.facebook.com/docs/marketing-api/conversions-api). |
| | **Note:** This recommendation currently cannot be applied through Marketing API. |
| `CAPI_PERFORMANCE_MATCH_KEY` | Your ads performance can benefit from sending additional fields within your existing conversions reporting. |
| | Please review your Meta Pixel integration in [Events Manager](https://www.facebook.com/events_manager). |
| | **Note:** This recommendation currently cannot be applied through Marketing API. |
| `SCALE_GOOD_CAMPAIGN` | Some ad sets or campaigns have had stable delivery and a lower cost per result compared to ad sets and campaigns with the same optimization goal that you or your peers have run. Increase their budgets to further scale your results. |
| `SHOPS_ADS` | Multiple ad sets in your account use the website conversion location. Help improve your ad performance by selecting website and shop for their conversion location. This lets you automatically send traffic either to your website or shop on Facebook or Instagram. |
| `ADVANTAGE_PLUS_AUDIENCE` | Leverage Advantage+ audiences to let Meta automatically identify and target the most relevant audience segments for your ad sets, optimizing your budget for maximum impact. Learn more about [Advantage+ Audiences](https://www.facebook.com/business/help/1288599478479574). |
| `AD_LIFT_RECALL_OPTIMIZATION_GOAL` | Create a new awareness campaign with the performance goal **Maximize ad recall lift** to help more people remember your brand. |
| `ADVANTAGE_PLUS_CATALOG_ADS` | Create a campaign using [Advantage+ catalog](https://www.facebook.com/business/help/1288599478479574) to deliver personalized ads to new and existing interested shoppers based on their behaviors, interests, and intent. |
| `BACKGROUND_GENERATION` | Help your products stand out by using AI-generated backgrounds with eligible product images to show the version thats likely to perform best. |
| `BUDGET_LIMITED` | Your current budget may be limiting the performance of your campaigns. You could get more results by increasing the budget. |
| `CAPI_CRM_GUIDANCE` | Connect your CRM with the Conversions API to help optimize the quality of your leads, which can lead to more conversions. |
| `CONVERSION_LEADS_OPTIMIZATION` | Choose **Maximize number of conversion leads** as your performance goal to help lower the cost of reaching people most likely to convert. |
| `CTX_CREATION_PACKAGE` | Use a **Tailored messages** campaign to simplify campaign creation and help get more messages at the best value. |
| `CTX_HVS` | Duplicate your campaign as an **Engagement** campaign with **Maximize number of conversations** as the performance goal to help drive more conversations at a lower cost. |
| `DELIVERY_ERROR` | None of the ad sets within this campaign are running. Each ad set has at least one error that needs to be resolved. |
| `DYNAMIC_ADVANTAGE_CAMPAIGN_BUDGET` | Spend less of your budget on underperforming ad sets and more on ad sets with the best opportunities. You can set limits or scheduling for each ad set. |
| `LANDING_PAGE_VIEW_OPTIMIZATION_GOAL` | Create a campaign with the performance goal of **Maximize landing page views** to deliver ads to audiences who are most likely to visit your website. |
| `LEAD_ADS_GUIDANCE` | Lower your cost per lead and create your campaign in fewer steps using a **tailored leads** campaign, a preset with built-in best practices to help you get more leads at the best value. |
| `MESSAGING_EVENTS` | Set up your purchase events through WhatsApp or a messaging partner, and then select the **Maximize purchases** optimization through the **Messaging** performance goal to help lower costs. |
| `MESSAGING_PARTNERS` | Work with a messaging partner to help manage incoming messages, generate leads, and provide extensive analytics to optimize your conversations and conversions. |
| `MIXED_FORMATS` | Use a mix of videos and images in your campaign to reach users in different ways. |
| `MULTI_TEXT` | Select more text options so they can be mixed and matched to create different versions of your ad. The version that may perform best will be shown for each placement. |
| `OFFSITE_CONVERSION` | Select the **Maximize number of conversions** performance goal to help drive new customers to your website and lower your cost per result. |
| `PERFORMANT_CREATIVE_REELS_OPT_IN` | Select **Reels** placements for ads already using media that works well in Reels placements, so people are more likely to interact with them. |
| `PIXEL_OPTIMIZATION_HIE` | Set up **Purchase** events with pixel, which helps deliver ads to the people most likely to convert and can lower your cost per purchase. |
| `PIXEL_UPSELL` | Connect your website using the Meta Pixel to help improve audience targeting, better understand your conversions, and help reduce your cost per result over time. |
| `PIXELLESS_LPV_OPTIMIZATION_GOAL` | Update your performance goal to **Maximize number of landing page views**, which no longer requires a Meta Pixel integration, to deliver your ads to audiences who are most likely to visit your website. |
| `SCALE_GOOD_CTX_CAMPAIGN` | These messaging ad sets and campaigns have had stable delivery and better performance compared to your ad sets and campaigns with the same goals. Consider increasing their budgets to scale the results further. |
| `REELS_PC_RECOMMENDATION` | Include a fullscreen vertical video (9:16) with audio in your Reels ads to improve performance. |
| `SHOPS_ADS_SAOFF` | Improve your ad performance by selecting **Website and Shop** conversion location for ad sets currently using the **Website** conversion location. This lets you automatically send traffic either to your website or shop on Facebook or Instagram. |
| `UNIFIED_INBOX` | Answer unread customer messages within 5 hours of receipt to help increase their value. |
| `VALUE_OPTIMIZATION_GOAL` | Reach people more likely to generate higher value for your business by focusing on key events across the customer journey, like **Add to cart**. Use the **Maximize value of conversions** performance goal to get started. |
| `WA_MESSAGING_PARTNERS` | Work with a messaging partner to help manage incoming messages, generate leads, and provide extensive analytics to optimize your conversations and conversions. |

# Omni Optimal Technical Setup Guide: Best Practices and Requirements

## Event Setup

An optimal event setup allows for the collection of high-quality data, which is essential for the ad system's performance. This high-quality data helps in accurately targeting and delivering ads, which can lead to better engagement, higher conversion rates, and ultimately, a better return on investment.

**Mandatory/Recommended Parameters**

This list consists of all the required/recommended event data parameters and additional data parameters advertisers need to pass back to Meta via the Meta Pixel/Conversions API to use for ads attribution and delivery optimization.

| Event Parameters | |
| :--- | :--- |
| Event Name | |
| Event Time | |
| Client\_user\_agent (web only) | |
| Action\_source | |
| Event\_source\_url (web only) | |
| Custom Data (Highly Recommended for Dynamic Ads) | |
| Content IDs | |
| Content Type | |
| Contents | |
| Quantity | |
| Currency (mandatory for purchase events) | |
| Value (mandatory for purchase events) | |
| Customer Information Parameters | |
| Email | |
| Phone Number | |
| First Name | |
| Last Name | |
| IP Address (web only) | |
| User Agent (web only) | |
| Fbc (web only) | |
| Fbp (web only) | |

**Note:** A full list of customer information parameters and hashing requirements can be found [here](https://developers.facebook.com/docs/marketing-api/conversions-api/parameters/customer-information-parameters).

## Event Match Quality (EMQ) and Match Rates

**EMQ Scores (Web Events Only)**

Event Match Quality (EMQ) scores are a metric used to assess the effectiveness of an advertiser's Conversions API integration in matching events to Meta users. The scores range from 1 to 10, with higher scores indicating a more effective match. Some of the highest weighted PII information parameters are:
*   Email
*   Phone Number
*   IP Address
*   User Agent
*   FBP
*   FBC
*   First Name
*   Last Name

**Offline Data Quality (ODQ) Score**

The offline data quality score evaluates how well your offline events align with Meta's advertising requirements, focusing on event coverage to enhance performance and measurement accuracy.

**How Offline Data Quality Is Calculated**

To calculate the offline data quality score, we consider factors such as data freshness, frequency and attribution:
*   **Frequency:** The number of days the event is in the partitions (that is, offline events are passed to Meta) over the last 14 days.
*   **Freshness:** The average time between an event occurring and an event being sent over the last 28 days.
*   **Match Key Coverage:** The number of events that have certain amounts of strong match keys of email, phone, mobiles ads device ID divided by the total number of events over the last 28 days.
*   **Offline Event Volume:** The number of product purchases over the last 28 days and having at least one ad connected to the data source ID in the last 28 days.
*   **Offline Like:** The proportion of in-store purchases that are sent back within minutes after the impression, depicting online transaction behavior.
*   **Valid Purchase Values:** Valid purchase values (purchases that have a price > 0) out of total events over the last 28 days
*   **Basket Splitting:** Purchase events should not be split into multiple events (multiple items in a single purchase event are preferred). To be measured by items to purchase ratio over the last 2 days.
*   **Attribution:** Whether or not your ads **Automatically Track Offline Events** for reporting.
*   **Accuracy:** Whether or not you pass offline data with no errors/inconsistencies (Note: you should not pass website data as an offline event).

These factors, each weighted differently, combine to give a score out of 10.

**What the Score Means**
*   **High Scores (8-10):** Indicate strong matching, effective user identification, and improved ad attribution.
*   **Medium Scores (4-7):** Suggest partial matches, indicating room for improvement.
*   **Low Scores (0-3):** Indicate poor matching, with most offline events not sent to Meta, reducing data quality and ad attribution.

**Checking EMQ and ODQ Scores:**

Go to **Events Manager > Select Pixel ID > Select Event Name > View Details > Event Quality**

As an alternative to Events Manager, you can use the [Integration Quality API](https://developers.facebook.com/docs/marketing-api/conversions-api/guides/integration-quality-api) to check EMQ scores. For more about this API and how to maximize EMQ, see the documentation [here](https://developers.facebook.com/docs/marketing-api/conversions-api/guides/integration-quality-api).

**Benefits of Offline Data Quality**

Improving offline data quality is crucial for enhancing your omnichannel ads, optimized for both online and in-store sales.

The value of offline data quality in enabling omnichannel ads.
Focusing on offline data quality is valuable for your omnichannel advertising strategy:
*   **Enhanced ad performance:** High scores ensure accurate, up-to-date data for precise targeting across channels.
*   **Accurate measurement:** Robust scores enable precise attribution of offline conversions, crucial for understanding ad impact and refining strategies.
*   **Optimized campaigns:** Scores of 8.5 or higher allow confident use of omnichannel ads, ensuring ads reach the right audience at the right time.

**Example: Improving offline data quality in retail**

A retailer with a score of 6 out of 10 can improve by:
*   **Increasing data upload frequency:** Upload data more regularly.
*   **Improving data accuracy:** Reduce errors and inconsistencies
*   **Enhancing attribution:** Provide all recommended match keys to maximize offline conversion measurement accuracy

Addressing these areas can boost the score, leading to better advertising results, such as increased purchases and improved targeting.

Meta provides personalized recommendations in Events Manager to improve your offline data quality score.

**Improve Offline Data Quality**

To improve your offline data quality metric:
*   Upload fresh data regularly for accurate targeting and measurement.
    *   Upload data daily
    *   Ensure offline transaction data is not stale (older than 3 days)
*   Implement robust data validation processes to minimize errors and inconsistencies.
    *   Pass correct purchase prices (for example, no zero or negative values).
    *   Avoid linking incorrect dataset IDs to omni campaigns. Note: Use only one offline signal source for omni campaign optimization. For measurement (ad tracking level), an advertiser can attach multiple offline signal sources, but not for ad set level optimization.
*   Enable automatic tracking for offline events to accurately attribute offline conversions loads
*   Monitor your data collection and processing procedures to maintain high-quality data.
*   Regularly review your offline data quality scores in Events Manager and follow your personalized recommendations to improve your offline data quality score.

## Data Freshness

Prioritize sharing events in real time for better campaign optimization. Ensure there is little to no delay from when your events occur to when you share them with Meta. This will help to:
*   Run ads that are better optimized by having real-time data to update your. audiences
*   See the results of an ad campaign closer to real time in Meta Ads Manager.

**Website Events**

For web events, it is essential to transmit data in real-time for optimal performance. The Meta Pixel and the Conversions API are the most effective methods for sending event data in real-time.

To assess your current status, navigate to **Events Manager > Pixel ID > Event Name > View Details > Data Freshness > Website**

**Offline Events**

For offline events, it is recommended to send data as frequently as possible as it would help our algorithms to drive performance real/near realtimes. Recommendation is to pass back offline data at least daily and preferably on an hourly basis. To assess your current status, navigate to **Events Manager > Pixel ID > Event Name > View Details > Data Freshness > Offline Activity**.

## Deduplication

The Meta Pixel and the Conversions API let you share standard and custom events with us so that you can measure and optimize ad performance. The pixel lets you share web events from a web browser, while the Conversions API lets you share web events directly from your server.

If you connect website activity using both the pixel and the Conversions API, we may receive the same events from the browser and the server. If we know that the events are the same and therefore redundant, we can keep one and discard the rest. This is called deduplication.

It is highly recommended to include deduplication parameters with your events to ensure that our systems can accurately identify and process events only once. This is crucial for accurate attribution and measurement purposes.

**Web Events**

When sending redundant events using the Meta Pixel and Conversions API, ensure that both events use the identical `event_name` and that either `event_id` or a combination of `external_id` and `fbp` are included. We recommend including all of these parameters to help Meta properly deduplicate events and reduce double reporting of identical events. Maximum deduplication window is 48 hours.

**Offline Events**

Unlike deduplication set up across the Conversions API and Meta Pixel events, offline events can only be deduplicated against other offline events. We support two methods of deduplication:
*   `order_id` based
*   `user` based

The deduplication uses the combination of fields: `dataset_id`, `event_time`, `event_name`, `item_number`, and either `order_id` or user information as the “key field” based on method in the given event’s payload.

The default deduplication uses `order_id` with a combination of the fields above. If `order_id` is not present in the payload, the user based deduplication logic will be used. The maximum deduplication window is 7 days. You can learn more about offline event deduplication on our [developer documentation site](https://developers.facebook.com/docs/marketing-api/conversions-api/guides/offline-events-deduplication).

It's recommended not to split your order into multiple events instead of sending one event to represent the whole order.

For example, where there are two orders with identical `event_time`, `event_name` having the same `order_id` or same set of Customer Information Parameters without `order_id`, we will consider them duplicate events and take the first event. The user-based deduplication method only works with the same Customer Information Parameters fields in the two payloads.

Another way to to maximize PII capture rate is in your store. By sending email transactions that capture PII (including receipts), you can increase the event volume to power performant optimization on Meta’s platforms.

## Event Quality

Event quality measures the correctness of the parameters in events received from event sources connected to a catalog. Low Event Quality impacts match rate, availability, and can result in longer learning phases and suboptimal campaign optimisation. Please note that these parameters are highly recommended to be passed back via Web and Offline events.

Some of the important parameters that need to be passed are:
1.  **Content IDs**

    Tell Meta the specific content ID for a product or product group. The content ID must exactly match either the product ID or the product group ID for that item in your catalog, depending which `content_type` you entered. The match indicates it's the same product or group as the one in your catalog. Example: `['123','456']`
2.  **Contents (recommended way of sending content details)**

    Tell Meta the specific content ID, which must match the product ID for that item in your catalog. If you use `contents` in your parameter, you must also include the following in a sub-object: the product id or ids, and the quantity (number of items added to cart or purchased).

    Example: `[{id: '123', quantity: 2}, {id: '456', quantity: 1}]`. This is our recommended way of passing this information back.
3.  **Content Type**

    Should be set to `product` or `product_group`:
    *   Use `product` if the keys you send represent products. Sent keys could be `content_ids` or `contents`.
    *   Use `product_group` if the keys you send in `content_ids` represent product groups. Product groups are used to distinguish products that are identical but have variations such as color, material, size or pattern.
4.  **Currency**

    Required for purchase events. The currency for the value specified, if applicable. Currency must be a valid ISO 4217 three-digit currency code.
5.  **Value**

    Required for purchase events. A numeric value associated with this event. Please make sure that value >= 0.

## Catalog Setup

A catalog is a container that holds information about all the items advertisers want to advertise or sell on Facebook and Instagram. Catalogs are a fundamental building block of several of our available products, including (but not limited to):
*   Advantage+ Shopping Campaigns
*   Collaborative ads
*   Collection ads
*   Carousel ads
*   Shops

To ensure a quality setup for your catalog for omnichannel ads, please ensure the following areas are covered and optimal:

**Catalog Match Rates**

A catalog match occurs when an event has been matched with a product. The success rate of this is known as the catalog match rate. Optimal catalog match rates are > 90%

**Website Events**

To check catalog match rates for web events go to **Commerce Manager > Select Catalog > Events > Select datasource (dataset or app)**.

**Offline Events**

Offline events should be integrated through the API (manual uploading is available but in order to use Omnichannel Ads Beta, CAPI or OCAPI integration is required).
*   **Frequency of upload:**
    *   Upload data daily, at least 12 times in the previous 14 days.
    *   Ensure offline transaction data is not stale (older than 3 days).
*   Offline events data must be passed for the past 14 days to be eligible for Omnichannel Ads.
*   Avoid basket splitting your offline events integration by ensuring you pass all items from the same transaction as the same row / basket. This ensures measurement accuracy of Average Order Value and Cost Per Purchase.

**Connecting Catalog with Dataset**

Please verify that the data source (dataset/app) is properly linked to the catalog. If not, please follow the steps below to establish a connection between the dataset/app and the catalog.
*   Go to **Commerce Manager**
*   Select **events**
*   Click on **Manage Connections**
*   Select the dataset ID/app
*   Click **Save**

**Enabling Auto-Tracking for Dataset**

Auto tracking for dataset allows any future campaigns in that ad account to be automatically tracked via dataset. This is important for campaign attribution. To enable auto tracking please follow these steps.

To add dataset tracking to existing campaigns, go to ad setup and enable tracking inside tracking specs.

## Omni Audience

Omni Audience is a special targeting solution that allows advertisers to create audiences based on user activity across multiple channels.

For example, if an advertiser wants to create an audience of people who viewed a product on their website and then went to the store to purchase, it's possible using this type of audience.

**Best Practices and Requirements**

*   **Match Rates:** Event match rates are crucial in determining the audience size. It is essential to have high match rates for offline events and optimal EMQ scores for web events to ensure decent audience size.
*   **Data Freshness:** As Omni Audiences are created based on user actions happening across channels, getting data with less delay would make the audience more recent and accurate.

# Manage Your Ad Object's Status

Ad Campaign, Ad Set and Ads have one of following status types:
*   Live
*   Archived
*   Deleted

For background see [Ads Developer Blog, Deleted versus Archived](https://developers.facebook.com/blog/post/2012/06/18/deleted-versus-archived-ads/).

## Live

Live ad objects can have the following status:
*   `ACTIVE`
*   `PAUSED`
*   `PENDING_REVIEW`
*   `CREDIT_CARD_NEEDED`
*   `PREAPPROVED`
*   `DISABLED`
*   `PENDING_PROCESS`
*   `WITH_ISSUES`

## Archived

Set the ad object to `ARCHIVED` by setting `status` field to `ARCHIVED`. When an object status is set to `ARCHIVED`, you can continue to query the details and stats based on the object id. However there is a maximum limit on the number of objects you can archive. So you should respect this limit and change status to `DELETED` when you no longer need an object.

An `ARCHIVED` object has only 2 fields you can change: `name` and `status`. You can also only change status to `DELETED`.

## Deleted

Set the ad object to `DELETED` by either setting `status` field to `DELETED` or sending an `HTTP DELETE` to that object. Once an object status is set to `DELETED`, you cannot set it back to `ARCHIVED`.

If you keep the deleted object ID, you can continue to retrieve stats or object details by querying the object ID. However you cannot retrieve the deleted objects as a connection object from a non deleted node or object. For example, `API_VERSION/<AD_ID>/insights` works for a deleted object but `API_VERSION/act_<AD_ACCOUNT_ID>/insights?level=ad` does not return stats for the deleted object.

After you delete an ad, it may still track impressions, clicks, and actions for 28 days after the date of last delivery. You can query insights for `DELETED` objects using the `ad.effective_status` filter.

If you have an ad set with 2 ads in it, and you delete one ad, the following 2 queries do not return the same results:
*   `https://graph.facebook.com/v24.0/<AD_SET_ID>/insights`
*   `https://graph.facebook.com/v24.0/<AD_ID>/insights`

The ad set returns stats for both the deleted and the non-deleted ads in it. However when you query for ads in the ad set, you only see one ad:
*   `https://graph.facebook.com/v24.0/<AD_SET_ID>/ads`

To avoid this scenario, you should delete ads 28 days after their last date of delivery to ensure stats no longer change. Also you should store the stats or ids of those objects in your own system before you delete them. This recommendation is optional:
*   If your application does not show the breakdown of stats, or
*   You do not care if the sum of breakdowns of stats do not match that of the parent object, due to some deleted child objects.

You cannot change any field, except `name`, for a `DELETED` object.

## Manage Status

This is how you typically manage object status:
*   You create ad objects, they run and start delivering
*   When you delete an object, we automatically delete it
*   When you reach the limit for achieved objects, you can no longer archive more objects.
*   You should move archived deleted objects to the deleted state to reduce the limit.

The status on ad objects works this way for the hierarchy of ad objects:
*   If the status of a campaign is set to `with_issues`, `paused`, `archived`, or `deleted` for a campaign, all the objects below it automatically inherit that status.
*   If you set an ad campaign to `deleted`, you cannot retrieve the ad sets or ads below that campaign without explicitly specifying the IDs.
*   If the status of an ad is set to `with_issues`, `paused`, `archived`, or `deleted`, the ad set or ad campaign containing that ad keep its original status and is available for retrieval.

The following limits apply to `ARCHIVED` objects for given ad account:
*   100,000 for Ad Campaigns
*   100,000 for Ad Sets
*   100,000 for Ads

If you read archived edges, you must specifically filter for the archived objects since we do not return them by default. If you read stats for an ad object, we include the stats of all children objects, no matter if the child is active, archived, or deleted. Therefore you need no filter for insights on child objects.

## Comparisons of Different Statuses

Objects with statuses such as `ACTIVE`, `PAUSED` differ from those with `ARCHIVED` status, and `DELETED`. Here are the major differences.

| Query | Live | ARCHIVED | DELETED |
| :--- | :--- | :--- | :--- |
| Exists in database | Yes | Yes | Yes |
| Maximum number per ad account | With limits | 100,000 | No limit |
| Query as edges without filter | Yes | No | No |
| Query as edges with status filter | Yes for objects of status contained in the filter | Yes if status filter contains `ARCHIVED`. | No if status filter does not contain `DELETED`, and error if it does. |
| Query by its own ID | Yes | Yes | Yes |
| Stats aggregated in `/<PARENT_OBJECT_ID>/insights` | Yes | Yes | Yes |
| Stats included in the result list of `/<PARENT_OBJECT_ID>/insights?level=<OBJECT_LEVEL>` | Yes | No | No |
| Stats included in the result list of `/<PARENT_OBJECT_ID>/insights` with `delivery_info` filtering | Yes for objects of status contained in the filter | Yes for objects of status contained in the filter | No |
| Insights shown with `/<OBJECT_ID>/insights` | Yes | Yes | Yes |
| Status can be changed to | Any valid status | `DELETED` | Cannot change |

To set an ad to be archived:

```curl
curl -X POST \
  -d "status=ARCHIVED" \
  -d "access_token=<ACCESS_TOKEN>" \
https://graph.facebook.com/v24.0/<AD_ID>
```

To delete an ad:

```curl
curl -X POST \
  -d "status=DELETED" \
  -d "access_token=<ACCESS_TOKEN>" \
https://graph.facebook.com/v24.0/<AD_ID>
```

To retrieve live subobjects of a live object, for example, all live ads of an ad campaign, not including `ARCHIVED` or `DELETED` ads:

```curl
curl -X GET \
  -d 'fields="name"' \
  -d 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/<AD_CAMPAIGN_ID>/ads
```

To retrieve `ARCHIVED` subobjects of a live object, for example, all `ARCHIVED` ads of an ad set, requires the status filter:

```curl
curl -X GET \
  -d 'effective_status=[
       "ARCHIVED"
     ]' \
  -d 'fields="name"' \
  -d 'access_token=<ACCESS_TOKEN>' \
https://graph.facebook.com/v24.0/<AD_CAMPAIGN_ID>/ads
```

## Asynchronous and Batch Requests

Use asynchronous requests to create ads and send numerous ads requests without having to block. Either specify a URL to call after requests complete or check the status of the request. See [Ad, Reference](https://developers.facebook.com/docs/marketing-api/reference/ad).

The most efficient way to manage ads is via batched requests. Use it to perform some of the more common requests.

**Asynchronous Requests**

For example, get the status of the asynchronous request set:

```curl
curl -G \
  -d 'fields=name,success_count,error_count,is_completed' \
  -d 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/<REQUEST_SET_ID>    
```

This returns the overall status for the async request set as a JSON object. Not all fields appear by default. If you want your query to include non-default fields, specify them in `fields`, such as `fields=id,owner_id,name,total_count,success_count,error_count,is_completed`.

| Name | Description |
| :--- | :--- |
| `id` | **type: int** | Shown by default. | The id of current async request set. |
| `owner_id` | **type: int** | Shown by default. | Which object owns this async request set. For async requests on ads, `owner_id` is the account id. |
| `name` | **type: string** | Shown by default. | Name of this async request set. |
| `is_completed` | **type: boolean** | Shown by default. | Async requests in this set complete |
| `total_count` | **type: int** | Not shown by default. | Total requests count of this request set |
| `initial_count` | **type: int** | Not shown by default. | Number of requests not yet served. |
| `in_progress_count` | **type: int** | Not shown by default. | Number of requests in progress. |
| `success_count` | **type: int** | Not shown by default. | Number of requests finished and successful. |
| `error_count` | **type: int** | Not shown by default. | Number of requests finished and failed. |
| `canceled_count` | **type: int** | Not shown by default. | Number of requests canceled by user |
| `notification_uri` | **type: string** | Not shown by default. | Notification URI for this async request set. |
| `notification_mode` | **type: string** | Not shown by default. | Way to receive notification. Valid values include: `OFF` – No notifications, `ON_COMPLETE` – Send notification when whole set finished. |

After you get the overall status of the async request set, get details of each request:

```curl
curl -G \
  -d 'fields=id,status' \
  -d 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/<REQUEST_SET_ID>/requests   
```

This returns status and details of each request inside the async request set. For async ad creation, make one request to create one ad. The `status` param is used to filter requests by its own status and can be any combination of following values: `initial` – Not processed yet, `in_progress` – Request is processing, `success` – Request finished and succeeds, `error` – Request finished and failed, `canceled` – Request canceled by user.

The response is a JSON array with default fields. To include any non-default field, specify it in `fields`, such as `fields=id,scope_object_id,status,result,input,async_request_set`.

| Name | Description |
| :--- | :--- |
| `id` | **type: int** | Shown by default. | Individual async request ID |
| `scope_object_id` | **type: int** | Shown by default. | Parent id of object this request creates. If you create an ad, this is ad set ID for the new ad. |
| `status` | **type: string** | Shown by default. | Status of this async request. Options: `Initial` – Not processed yet, `In_progress` – Request is processing, `Success` – Request finished and succeeds, `Error` – Request finished and failed, `Canceled` – Request is canceled by user |
| `result` | **type: array** | Not shown by default. | If request is finished, shows result of the request. On success, the result is the same as a non-async request. For example, if you create an ad, the result for each request is the ID of the new ad. For errors, it will be array of: `error_code` – Error code returned, `error_message` – Error message |
| `input` | **type: object** | Not shown by default. | Original input for this async request. If you create an ad, the input is `adgroup_spec`. |
| `async_request_set` | **type: object** | Not shown by default. | Async request set that contains this individual request |

**Get Request Details**

To get details of a specific async request, make this call:

```curl
curl -G \
  -d 'fields=id,status' \
  -d 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/<REQUEST_SET_ID>/requests   
```

This returns a JSON object with fields listed above.

**List Request Sets for an Account**

You can create multiple async ad request sets. To query all async ad request sets for an ad account:

```curl
curl -G \
  -d 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/asyncadrequestsets  
```

This returns a JSON array of async request set objects. Each object is the same as specified in async request set section. You can filter results with `is_completed`. If `is_completed=true`, you see only completed async request set.

**List Requests for an Ad Set**

You can make an async call to create ads in different ad sets. To get the status for each ad set, get all ad creation requests for one ad set:

```curl
curl -G \
  -d 'fields=id,status' \
  -d 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/<AD_SET_ID>/asyncadrequests
```

This returns a JSON array of async request objects. The status, fields filter and async request fields are the same as `https://graph.facebook.com/&lt;API_VERSION>/&lt;REQUEST_SET_ID>/requests` API.

**Update Request Sets**

You can change `name`, `notification_uri` and `notification_mode`for an async request set.

```curl
curl \
  -F 'name=New Name' \
  -F 'notification_mode=OFF' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/<REQUEST_SET_ID>
```

This return true on successful update. You can only change `notification_uri` and `notification_mode` before the notification is sent.

**Cancel Request**

You can cancel an async request, but the request can only be cancelled if it is not processed yet.

```curl
curl -X DELETE \
  -d 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/<REQUEST_ID>
```

Returns true on successful cancellation. You can also cancel unprocessed requests in the async request set:

```curl
curl -X DELETE \
  -d 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/<REQUEST_SET_ID>
```

Returns true on successful cancellation.

**Async Examples**

**Getting status of a specific async request:**

```curl
//pretty=true for command line readable output
curl -G \-d "id=6012384857989" \-d "pretty=true" \-d "access_token=_____" \"https://graph.facebook.com/v24.0/"
```

Return values:

```json
{
   "id": "6012384857989",
   "owner_id": 12345,
   "name": "testasyncset",
   "is_completed": true}
```

**Get results of requests:**

```curl
curl -G \-d "id=6012384857989" \-d "pretty=true" \-d "fields=result" \-d "access_token=_____" \"https://graph.facebook.com/v24.0/requests"
```

Returns:

```json
{
   "data": [
      {
         "result": {
            "id": "6012384860989"
         },
         "id": "6012384858389"
      },
      {
         "result": {
            "id": "6012384858789"
         },
         "id": "6012384858189"
      }
   ],
   "paging": {
      "cursors": {
         "after": "___",
         "before": "___"
      }
   }}
```

**Get list of request sets for an ad account:**

```curl
curl -G \-d "is_completed=1" \-d "pretty=true" \-d "access_token=___" \"https://graph.facebook.com/v24.0/act_71597454/asyncadrequestsets"
```

Returns:

```json
{
   "data": [
      {
         "id": "6012384253789",
         "owner_id": 71597454,
         "name": "testasyncset",
         "is_completed": true
      },
   ],
   "paging": {
      "cursors": {
         "after": "___",
         "before": "___"
      }
   }}
```

**Getting a list of requests for a campaign:**

```curl
curl -G \-d "status=SUCCESS,ERROR" \-d "pretty=true" \-d "access_token=___" \"https://graph.facebook.com/v24.0/6008248529789/asyncadrequests"
```

Returns:

```json
{
   "data": [
      {
         "id": "6012384951789",
         "scope_object_id": 6008248529789,
         "status": "SUCCESS"
      },
   ],
   "paging": {
      "cursors": {
         "after": "___",
         "before": "___"
      }
   }}
```

**Batch Requests**

With batched requests, combine a number of Graph API calls into the one HTTP request. Marketing API split this request into its constituent requests. This makes batched requests the most efficient way of interacting with the Marketing API. For even greater efficiency you can make parallel batch requests using separate processing threads.

Each batched request can contain a maximum of 50 requests. For ad creation you should only have 10 or less ads per batch.

Batch requests for ads, adcreatives and ad sets are very similar so we don't discuss them separately here. For more information, see [Graph API batch requests](https://developers.facebook.com/docs/graph-api/making-multiple-requests) and [ETags](#etags).

**Create Ads**

You can provide adcreative and other ad objects in a batched request. For example, you can create three ads using one adcreative and three different targeting specs. Define your Ad Creative first then reference it when you create each ad:

```curl
curl -F 'access_token=______' 
  -F 'test1=@./test1.jpg'  
  -F 'batch=[
             {
              "method": "POST",
              "name": "create_adimage",
              "relative_url": "<API_VERSION>/act_187687683/adimages",
              "attached_files": "test1"
             },
             {
              "method": "POST",
              "name": "create_creative",
              "relative_url": "<API_VERSION>/act_187687683/adcreatives",
              "attached_files": "test1",
              "body": "name=sample creative&object_story_spec={\"link_data\": {\"image_hash\": \"{result=create_adimage:$.images.*.hash}\", \"link\": \"https://www.test12345.com\", \"message\": \"this is a sample message\"}, \"page_id\":\"12345678\"}&degrees_of_freedom_spec={\"creative_features_spec\": {\"standard_enhancements\": {\"enroll_status\": \"OPT_OUT\"}}}"
             },
             {
              "method": "POST",
              "relative_url": "<API_VERSION>/act_187687683/ads",
              "body": "adset_id=6004163746239&redownload=1&status=PAUSED&optimization_goal=REACH&billing_event=IMPRESSIONS&&creative={\"creative_id\":\"{result=create_creative:$.id}\"}&targeting={\"countries\":[\"US\"]}&name=test1"
             },
             {
              "method": "POST",
              "relative_url": "<API_VERSION>/act_187687683/ads",
              "body": "adset_id=6004163746239&redownload=1&status=PAUSED&optimization_goal=REACH&billing_event=IMPRESSIONS&&creative={\"creative_id\":\"{result=create_creative:$.id}\"}&targeting={\"countries\":[\"US\"]}&name=test2"
             },
             {
              "method": "POST",
              "relative_url": "<API_VERSION>/act_187687683/ads",
              "body": "adset_id=6004163746239&redownload=1&status=PAUSED&optimization_goal=REACH&billing_event=IMPRESSIONS&&creative={\"creative_id\":\"{result=create_creative:$.id}\"}&targeting={\"countries\":[\"US\"]}&name=test3"
             }
            ]' https://graph.facebook.com/
```

The response includes individual response codes for each request and the standard Graph API response. For details, see [Making Multiple API Requests](#batch-requests).

The batched request process uses the [JSONPath expression](https://developers.facebook.com/docs/graph-api/making-multiple-requests#operations) format to reference the previous requests.

**Update Ads**

You can update ads with batch requests. To updates bids for three ads:

```curl
curl -F 'access_token=____' 
  -F 'batch=[
             {
              "method": "POST",
              "relative_url": "<API_VERSION>/6004251715639",
              "body": "redownload=1&name=new name"
             },
             {
              "method": "POST",
              "relative_url": <API_VERSION>/v6004251716039",
              "body": "redownload=1&name=new name"
             },
             {
              "method": "POST",
              "relative_url": "<API_VERSION>/6004251715839",
              "body": "redownload=1&name=new name"
             }
            ]' https://graph.facebook.com
```

If you include `redownload=1` in the relative URL, you get full ad details including the ad ID. This help identify which ads you updated.

To update ad creative, specify the entire creative, or provide a new creative ID. This is because Ad Creatives cannot be edited after they have been created except for `name` and run status.

**Read Ads**

If you have a large number of ads, split the request over multiple requests within a batched request:

```curl
curl -F 'access_token=____' 
  -F 'batch=[
             {
              "method": "GET",
              "relative_url": "<API_VERSION>/?ids=6003356308839,6004164369439&fields=<comma separated list of fields>"
             },
             {
              "method": "GET",
              "relative_url": "<API_VERSION>/6003356307839/ads&fields=<comma separated list of fields>"
             },
             {
              "method": "GET",
              "relative_url": "<API_VERSION>/act_187687683/ads?adset_ids=[6003356307839, 6004164259439]&fields=<comma separated list of fields>"
             }
            ]' https://graph.facebook.com
```

`6003356308839` and `6004164369439` are ad ids and `6003356307839` and `6004164259439` are ad set ids.

**Ad Insights**

If you have a large number of Ad Insights split the request over multiple requests within a batched request:

```curl
curl -F 'access_token=____' 
  -F 'batch=[
             {
              "method": "GET",
              "relative_url": "<API_VERSION>/act_19643108/insights?filtering=[{field:'ad.id',operator:'IN',value:[6003356308839,6004164369439]}]"
             },
             {
              "method": "GET",
              "relative_url": "<API_VERSION>/6003356308839/insights"
             },
             {
              "method": "GET",
              "relative_url": "<API_VERSION>/act_187687683/insights?filtering=[{field:'adset.id',operator:'IN',value:[6003356307839, 6004164259439]}]"
             }
            ]' https://graph.facebook.com
```

In this example `6003356308839` and `6004164369439` are ad ids and `6003356307839` and `6004164259439` are ad set ids.

For Ad accounts with a large number of ads using `act_<account_ID>/adgroupstats` is not recommended as it may cause the request to timeout.

**Batch requests for Reach Estimate**

You can request up to 50 reach estimates in a single batched request. The following example shows the reach estimate being requested for 2 different targeting specs:

```curl
curl -F 'access_token=____' 
  -F 'batch=[
             {
              "method": "GET",
              "relative_url": "<API_VERSION>/act_600335/reachestimate?targeting_spec={'geo_locations': {'countries':['US']}}"
             },
             {
              "method": "GET",
              "relative_url": "<API_VERSION>/act_600335/reachestimate?targeting_spec={'geo_locations': {'countries':['FR']}}"
             }
            ]' https://graph.facebook.com
```

**Batch API**

Batch API enables you batch requests and send them asynchronously. Group several Graph API calls into one HTTP request, and execute them asynchronously without having to block. You can also specify dependencies between related operations.

Facebook processes each independent operation in parallel processes and your dependent operations sequentially. Each API call can have a maximum of 1000 requests.

**Make a Batch API call**

To make a Batch API call:

`curl \-F "access_token=___" \-F "name=asyncbatchreqs" \-F "adbatch=<an array of requests>"\"https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/async_batch_requests"`

Provide an array of HTTP POST requests as JSON arrays. Each request has:
*   `name`
*   `relative_url` - portion of URL after `graph.facebook.com`
*   `body`

The API returns an `id` you use to query the progress of requests.

For example, create a campaign with an ad set with [JSONPath Format](https://developers.facebook.com/docs/graph-api/making-multiple-requests#operations) to reference the previous requests:

```curl
curl \-F "access_token=___" \-F "name=batchapiexample" \-F "adbatch=[
  {
    'name': 'create-campaign',
    'relative_url': 'act_123456/campaigns',
    'body': 'name%3DTest+Campaign%26objective%3DLINK_CLICKS%26status%3DPAUSED%26buying_type%3DAUCTION',
  },
  {
    'name': 'create-adset',
    'relative_url': 'act_123456/adsets',
    'body': 'targeting%3D%7B%22geo_locations%22%3A%7B%22countries%22%3A%5B%22US%22%5D%7D%7D%26daily_budget%3D5000%26campaign_id%3D%7Bresult%3Dcreate-campaign%3A%24.id%7D%26bid_amount%3D2%26name%3DFirst%2BAd%2BSet%20Test%26billing_event%3DLINK_CLICKS',
  },
]" \
https://graph.facebook.com/<API_VERSION>/act_123456/async_batch_requests
```

To get a request set status:

`curl –G \-d "access_token=___" \-d "fields=<comma separated list of fields>" \"https://graph.facebook.com/v24.0/<REQUEST_SET_ID>"`

This returns overall status for async request sets as JSON objects. Not all fields are returned by default. To include them, specify the `fields`, such as `fields=id,owner_id,name,total_count,success_count,error_count,is_completed`.

| Name | Description |
| :--- | :--- |
| `id` | **type: int** | Shown by default. | id of current async request set. |
| `owner_id` | **type: int** | Shown by default. | Object that owns this async request set. If you create ads, `owner_id` is the ad account id. |
| `name` | **type: string** | Shown by default. | Name of this async request set |
| `is_completed` | **type: boolean** | Shown by default. | All async requests in set complete |
| `total_count` | **type: int** | Not shown by default. | Total requests count for this request set |
| `initial_count` | **type: int** | Not shown by default. | Number of requests not served yet |
| `in_progress_count` | **type: int** | Not shown by default. | Number of requests in progress |
| `success_count` | **type: int** | Not shown by default. | Number of requests finished and successful |
| `error_count` | **type: int** | Not shown by default. | Number of requests finished and failed |
| `canceled_count` | **type: int** | Not shown by default. | Number of requests canceled by user |
| `notification_uri` | **type: string** | Not shown by default. | Notification URI for this async request set. |
| `notification_mode` | **type: string** | Not shown by default. | Ways to receive notification. Valid values: `OFF` – No notifications, `ON_COMPLETE` – Send notification when the whole set done. |
| `notification_result` | **type: string** | Not shown by default. | Result of sending notification. |
| `notification_status` | **type: string** | Not shown by default. | Notification status: `not_sent`, `sending`, or `sent` |

After you get overall status, you can get details for each request:

`curl –G \   -d "access_token=___" \-d "fields=<comma separated list of fields>" \"https://graph.facebook.com/v24.0/<REQUEST_SET_ID>/requests"`

This returns details as a JSON array. To include non-default fields, specify it in `fields`, such as `fields=id,scope_object_id,status,result,input,async_request_set`.

| Name | Description |
| :--- | :--- |
| `id` | **type: int** | Shown by default. | ID of individual async request |
| `scope_object_id` | **type: int** | Shown by default. | Parent ID of the object this request creates. If you create ads, this is ad set ID for the new ad. |
| `status` | **type: string** | Shown by default. | Status of this async request: `Initial` – Not processed yet, `In_progress` – Request is processing, `Success` – Request finished and successful, `Error` – Request finished and failed, `Canceled` – Request canceled by user |
| `result` | **type: array** | Not shown by default. | If request finishes, show result. For success, the result is same as non-async API. For example, if you create an ad creation, result is new ad ID. For errors: `error_code` – Error code returned, `error_message` – Error message |
| `input` | **type: object** | Not shown by default. | Original input for this request. If you create an ad, the input is `adgroup_spec`. |
| `async_request_set` | **type: object** | Not shown by default. | Async request set containing this request. |

**List Batch API Requests for Ad Account**

You can create multiple Batch API request sets. To query all request sets under an ad account:

`curl –G \ -d "access_token=___" \"https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/async_requests"`

This returns a JSON array of async request set objects. Each object is the same as specified in async request set section. You can filter results with `is_completed`. If `is_completed=true`, you see only completed async request set.

**Update Request Sets**

You can change `name`, `notification_uri` and `notification_mode`for an async request set.

```curl
curl \
  -F 'name=New Name' \
  -F 'notification_mode=OFF' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/<REQUEST_SET_ID>
```

This return true on successful update. You can only change `notification_uri` and `notification_mode` before the notification is sent.

**Cancel Request**

You can cancel an async request, but the request can only be cancelled if it is not processed yet.

```curl
curl -X DELETE \
  -d 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/<REQUEST_ID>
```

Returns true on successful cancellation. You can also cancel unprocessed requests in the async request set:

```curl
curl -X DELETE \
  -d 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/<REQUEST_SET_ID>
```

Returns true on successful cancellation.

**Async Examples**

**Getting status of a specific async request:**

```curl
//pretty=true for command line readable output
curl -G \-d "id=6012384857989" \-d "pretty=true" \-d "access_token=_____" \"https://graph.facebook.com/v24.0/"
```

Return values:

```json
{
   "id": "6012384857989",
   "owner_id": 12345,
   "name": "testasyncset",
   "is_completed": true}
```

**Get results of requests:**

```curl
curl -G \-d "id=6012384857989" \-d "pretty=true" \-d "fields=result" \-d "access_token=_____" \"https://graph.facebook.com/v24.0/requests"
```

Returns:

```json
{
   "data": [
      {
         "result": {
            "id": "6012384860989"
         },
         "id": "6012384858389"
      },
      {
         "result": {
            "id": "6012384858789"
         },
         "id": "6012384858189"
      }
   ],
   "paging": {
      "cursors": {
         "after": "___",
         "before": "___"
      }
   }}
```

**Get list of request sets for an ad account:**

```curl
curl -G \-d "is_completed=1" \-d "pretty=true" \-d "access_token=___" \"https://graph.facebook.com/v24.0/act_71597454/asyncadrequestsets"
```

Returns:

```json
{
   "data": [
      {
         "id": "6012384253789",
         "owner_id": 71597454,
         "name": "testasyncset",
         "is_completed": true
      },
   ],
   "paging": {
      "cursors": {
         "after": "___",
         "before": "___"
      }
   }}
```

**Getting a list of requests for a campaign:**

```curl
curl -G \-d "status=SUCCESS,ERROR" \-d "pretty=true" \-d "access_token=___" \"https://graph.facebook.com/v24.0/6008248529789/asyncadrequests"
```

Return values:

```json
{
   "data": [
      {
         "id": "6012384951789",
         "scope_object_id": 6008248529789,
         "status": "SUCCESS"
      },
   ],
   "paging": {
      "cursors": {
         "after": "___",
         "before": "___"
      }
   }}
```

**Batch Requests**

With batched requests, combine a number of Graph API calls into the one HTTP request. Marketing API split this request into its constituent requests. This makes batched requests the most efficient way of interacting with the Marketing API. For even greater efficiency you can make parallel batch requests using separate processing threads.

Each batched request can contain a maximum of 50 requests. For ad creation you should only have 10 or less ads per batch.

Batch requests for ads, adcreatives and ad sets are very similar so we don't discuss them separately here. For more information, see [Graph API batch requests](https://developers.facebook.com/docs/graph-api/making-multiple-requests) and [ETags](#etags).

**Create Ads**

You can provide adcreative and other ad objects in a batched request. For example, you can create three ads using one adcreative and three different targeting specs. Define your Ad Creative first then reference it when you create each ad:

```curl
curl -F 'access_token=______' 
  -F 'test1=@./test1.jpg'  
  -F 'batch=[
             {
              "method": "POST",
              "name": "create_adimage",
              "relative_url": "<API_VERSION>/act_187687683/adimages",
              "attached_files": "test1"
             },
             {
              "method": "POST",
              "name": "create_creative",
              "relative_url": "<API_VERSION>/act_187687683/adcreatives",
              "attached_files": "test1",
              "body": "name=sample creative&object_story_spec={\"link_data\": {\"image_hash\": \"{result=create_adimage:$.images.*.hash}\", \"link\": \"https://www.test12345.com\", \"message\": \"this is a sample message\"}, \"page_id\":\"12345678\"}&degrees_of_freedom_spec={\"creative_features_spec\": {\"standard_enhancements\": {\"enroll_status\": \"OPT_OUT\"}}}"
             },
             {
              "method": "POST",
              "relative_url": "<API_VERSION>/act_187687683/ads",
              "body": "adset_id=6004163746239&redownload=1&status=PAUSED&optimization_goal=REACH&billing_event=IMPRESSIONS&&creative={\"creative_id\":\"{result=create_creative:$.id}\"}&targeting={\"countries\":[\"US\"]}&name=test1"
             },
             {
              "method": "POST",
              "relative_url": "<API_VERSION>/act_187687683/ads",
              "body": "adset_id=6004163746239&redownload=1&status=PAUSED&optimization_goal=REACH&billing_event=IMPRESSIONS&&creative={\"creative_id\":\"{result=create_creative:$.id}\"}&targeting={\"countries\":[\"US\"]}&name=test2"
             },
             {
              "method": "POST",
              "relative_url": "<API_VERSION>/act_187687683/ads",
              "body": "adset_id=6004163746239&redownload=1&status=PAUSED&optimization_goal=REACH&billing_event=IMPRESSIONS&&creative={\"creative_id\":\"{result=create_creative:$.id}\"}&targeting={\"countries\":[\"US\"]}&name=test3"
             }
            ]' https://graph.facebook.com/
```

The response includes individual response codes for each request and the standard Graph API response. For details, see [Making Multiple API Requests](#batch-requests).

The batched request process uses the [JSONPath expression](https://developers.facebook.com/docs/graph-api/making-multiple-requests#operations) format to reference the previous requests.

**Update Ads**

You can update ads with batch requests. To updates bids for three ads:

```curl
curl -F 'access_token=____' 
  -F 'batch=[
             {
              "method": "POST",
              "relative_url": "<API_VERSION>/6004251715639",
              "body": "redownload=1&name=new name"
             },
             {
              "method": "POST",
              "relative_url": <API_VERSION>/v6004251716039",
              "body": "redownload=1&name=new name"
             },
             {
              "method": "POST",
              "relative_url": "<API_VERSION>/6004251715839",
              "body": "redownload=1&name=new name"
             }
            ]' https://graph.facebook.com
```

If you include `redownload=1` in the relative URL, you get full ad details including the ad ID. This help identify which ads you updated.

To update ad creative, specify the entire creative, or provide a new creative ID. This is because Ad Creatives cannot be edited after they have been created except for `name` and run status.

**Read Ads**

If you have a large number of ads, split the request over multiple requests within a batched request:

```curl
curl -F 'access_token=____' 
  -F 'batch=[
             {
              "method": "GET",
              "relative_url": "<API_VERSION>/?ids=6003356308839,6004164369439&fields=<comma separated list of fields>"
             },
             {
              "method": "GET",
              "relative_url": "<API_VERSION>/6003356307839/ads&fields=<comma separated list of fields>"
             },
             {
              "method": "GET",
              "relative_url": "<API_VERSION>/act_187687683/ads?adset_ids=[6003356307839, 6004164259439]&fields=<comma separated list of fields>"
             }
            ]' https://graph.facebook.com
```

`6003356308839` and `6004164369439` are ad ids and `6003356307839` and `6004164259439` are ad set ids.

**Ad Insights**

If you have a large number of Ad Insights split the request over multiple requests within a batched request:

```curl
curl -F 'access_token=____' 
  -F 'batch=[
             {
              "method": "GET",
              "relative_url": "<API_VERSION>/act_19643108/insights?filtering=[{field:'ad.id',operator:'IN',value:[6003356308839,6004164369439]}]"
             },
             {
              "method": "GET",
              "relative_url": "<API_VERSION>/6003356308839/insights"
             },
             {
              "method": "GET",
              "relative_url": "<API_VERSION>/act_187687683/insights?filtering=[{field:'adset.id',operator:'IN',value:[6003356307839, 6004164259439]}]"
             }
            ]' https://graph.facebook.com
```

In this example `6003356308839` and `6004164369439` are ad ids and `6003356307839` and `6004164259439` are ad set ids.

For Ad accounts with a large number of ads using `act_<account_ID>/adgroupstats` is not recommended as it may cause the request to timeout.

**Batch requests for Reach Estimate**

You can request up to 50 reach estimates in a single batched request. The following example shows the reach estimate being requested for 2 different targeting specs:

```curl
curl -F 'access_token=____' 
  -F 'batch=[
             {
              "method": "GET",
              "relative_url": "<API_VERSION>/act_600335/reachestimate?targeting_spec={'geo_locations': {'countries':['US']}}"
             },
             {
              "method": "GET",
              "relative_url": "<API_VERSION>/act_600335/reachestimate?targeting_spec={'geo_locations': {'countries':['FR']}}"
             }
            ]' https://graph.facebook.com
```

**Batch API**

Batch API enables you batch requests and send them asynchronously. Group several Graph API calls into one HTTP request, and execute them asynchronously without having to block. You can also specify dependencies between related operations.

Facebook processes each independent operation in parallel processes and your dependent operations sequentially. Each API call can have a maximum of 1000 requests.

**Make a Batch API call**

To make a Batch API call:

`curl \-F "access_token=___" \-F "name=asyncbatchreqs" \-F "adbatch=<an array of requests>"\"https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/async_batch_requests"`

Provide an array of HTTP POST requests as JSON arrays. Each request has:
*   `name`
*   `relative_url` - portion of URL after `graph.facebook.com`
*   `body`

The API returns an `id` you use to query the progress of requests.

For example, create a campaign with an ad set with [JSONPath Format](https://developers.facebook.com/docs/graph-api/making-multiple-requests#operations) to reference the previous requests:

```curl
curl \-F "access_token=___" \-F "name=batchapiexample" \-F "adbatch=[
  {
    'name': 'create-campaign',
    'relative_url': 'act_123456/campaigns',
    'body': 'name%3DTest+Campaign%26objective%3DLINK_CLICKS%26status%3DPAUSED%26buying_type%3DAUCTION',
  },
  {
    'name': 'create-adset',
    'relative_url': 'act_123456/adsets',
    'body': 'targeting%3D%7B%22geo_locations%22%3A%7B%22countries%22%3A%5B%22US%22%5D%7D%7D%26daily_budget%3D5000%26campaign_id%3D%7Bresult%3Dcreate-campaign%3A%24.id%7D%26bid_amount%3D2%26name%3DFirst%2BAd%2BSet%20Test%26billing_event%3DLINK_CLICKS',
  },
]" \
https://graph.facebook.com/<API_VERSION>/act_123456/async_batch_requests
```

To get a request set status:

`curl –G \-d "access_token=___" \-d "fields=<comma separated list of fields>" \"https://graph.facebook.com/v24.0/<REQUEST_SET_ID>"`

This returns overall status for async request sets as JSON objects. Not all fields are returned by default. To include them, specify the `fields`, such as `fields=id,owner_id,name,total_count,success_count,error_count,is_completed`.

| Name | Description |
| :--- | :--- |
| `id` | **type: int** | Shown by default. | id of current async request set. |
| `owner_id` | **type: int** | Shown by default. | Object that owns this async request set. If you create ads, `owner_id` is the ad account id. |
| `name` | **type: string** | Shown by default. | Name of this async request set |
| `is_completed` | **type: boolean** | Shown by default. | All async requests in set complete |
| `total_count` | **type: int** | Not shown by default. | Total requests count for this request set |
| `initial_count` | **type: int** | Not shown by default. | Number of requests not served yet |
| `in_progress_count` | **type: int** | Not shown by default. | Number of requests in progress |
| `success_count` | **type: int** | Not shown by default. | Number of requests finished and successful |
| `error_count` | **type: int** | Not shown by default. | Number of requests finished and failed |
| `canceled_count` | **type: int** | Not shown by default. | Number of requests canceled by user |
| `notification_uri` | **type: string** | Not shown by default. | Notification URI for this async request set. |
| `notification_mode` | **type: string** | Not shown by default. | Ways to receive notification. Valid values: `OFF` – No notifications, `ON_COMPLETE` – Send notification when the whole set done. |
| `notification_result` | **type: string** | Not shown by default. | Result of sending notification. |
| `notification_status` | **type: string** | Not shown by default. | Notification status: `not_sent`, `sending`, or `sent` |

After you get overall status, you can get details for each request:

`curl –G \   -d "access_token=___" \-d "fields=<comma separated list of fields>" \"https://graph.facebook.com/v24.0/<REQUEST_SET_ID>/requests"`

This returns details as a JSON array. To include non-default fields, specify it in `fields`, such as `fields=id,scope_object_id,status,result,input,async_request_set`.

| Name | Description |
| :--- | :--- |
| `id` | **type: int** | Shown by default. | ID of individual async request |
| `scope_object_id` | **type: int** | Shown by default. | Parent ID of the object this request creates. If you create ads, this is ad set ID for the new ad. |
| `status` | **type: string** | Shown by default. | Status of this async request: `Initial` – Not processed yet, `In_progress` – Request is processing, `Success` – Request finished and successful, `Error` – Request finished and failed, `Canceled` – Request canceled by user |
| `result` | **type: array** | Not shown by default. | If request finishes, show result. For success, the result is same as non-async API. For example, if you create an ad creation, result is new ad ID. For errors: `error_code` – Error code returned, `error_message` – Error message |
| `input` | **type: object** | Not shown by default. | Original input for this request. If you create an ad, the input is `adgroup_spec`. |
| `async_request_set` | **type: object** | Not shown by default. | Async request set containing this request. |

**List Batch API Requests for Ad Account**

You can create multiple Batch API request sets. To query all request sets under an ad account:

`curl –G \ -d "access_token=___" \"https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/async_requests"`

This returns a JSON array of async request set objects. Each object is the same as specified in async request set section. You can filter results with `is_completed`. If `is_completed=true`, you see only completed async request set.

**Update Request Sets**

You can change `name`, `notification_uri` and `notification_mode`for an async request set.

```curl
curl \
  -F 'name=New Name' \
  -F 'notification_mode=OFF' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/<REQUEST_SET_ID>
```

This return true on successful update. You can only change `notification_uri` and `notification_mode` before the notification is sent.

**Cancel Request**

You can cancel an async request, but the request can only be cancelled if it is not processed yet.

```curl
curl -X DELETE \
  -d 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/<REQUEST_ID>
```

Returns true on successful cancellation. You can also cancel unprocessed requests in the async request set:

```curl
curl -X DELETE \
  -d 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/<REQUEST_SET_ID>
```

Returns true on successful cancellation.

**Async Examples**

**Getting status of a specific async request:**

```curl
//pretty=true for command line readable output
curl -G \-d "id=6012384857989" \-d "pretty=true" \-d "access_token=_____" \"https://graph.facebook.com/v24.0/"
```

Return values:

```json
{
   "id": "6012384857989",
   "owner_id": 12345,
   "name": "testasyncset",
   "is_completed": true}
```

**Get results of requests:**

```curl
curl -G \-d "id=6012384857989" \-d "pretty=true" \-d "fields=result" \-d "access_token=_____" \"https://graph.facebook.com/v24.0/requests"
```

Returns:

```json
{
   "data": [
      {
         "result": {
            "id": "6012384860989"
         },
         "id": "6012384858389"
      },
      {
         "result": {
            "id": "6012384858789"
         },
         "id": "6012384858189"
      }
   ],
   "paging": {
      "cursors": {
         "after": "___",
         "before": "___"
      }
   }}
```

**Get list of request sets for an ad account:**

```curl
curl -G \-d "is_completed=1" \-d "pretty=true" \-d "access_token=___" \"https://graph.facebook.com/v24.0/act_71597454/asyncadrequestsets"
```

Returns:

```json
{
   "data": [
      {
         "id": "6012384253789",
         "owner_id": 71597454,
         "name": "testasyncset",
         "is_completed": true
      },
   ],
   "paging": {
      "cursors": {
         "after": "___",
         "before": "___"
      }
   }}
```

**Getting a list of requests for a campaign:**

```curl
curl -G \-d "status=SUCCESS,ERROR" \-d "pretty=true" \-d "access_token=___" \"https://graph.facebook.com/v24.0/6008248529789/asyncadrequests"
```

Return values:

```json
{
   "data": [
      {
         "id": "6012384951789",
         "scope_object_id": 6008248529789,
         "status": "SUCCESS"
      },
   ],
   "paging": {
      "cursors": {
         "after": "___",
         "before": "___"
      }
   }}
```

**Batch Requests**

With batched requests, combine a number of Graph API calls into the one HTTP request. Marketing API split this request into its constituent requests. This makes batched requests the most efficient way of interacting with the Marketing API. For even greater efficiency you can make parallel batch requests using separate processing threads.

Each batched request can contain a maximum of 50 requests. For ad creation you should only have 10 or less ads per batch.

Batch requests for ads, adcreatives and ad sets are very similar so we don't discuss them separately here. For more information, see [Graph API batch requests](https://developers.facebook.com/docs/graph-api/making-multiple-requests) and [ETags](#etags).

**Create Ads**

You can provide adcreative and other ad objects in a batched request. For example, you can create three ads using one adcreative and three different targeting specs. Define your Ad Creative first then reference it when you create each ad:

```curl
curl -F 'access_token=______' 
  -F 'test1=@./test1.jpg'  
  -F 'batch=[
             {
              "method": "POST",
              "name": "create_adimage",
              "relative_url": "<API_VERSION>/act_187687683/adimages",
              "attached_files": "test1"
             },
             {
              "method": "POST",
              "name": "create_creative",
              "relative_url": "<API_VERSION>/act_187687683/adcreatives",
              "attached_files": "test1",
              "body": "name=sample creative&object_story_spec={\"link_data\": {\"image_hash\": \"{result=create_adimage:$.images.*.hash}\", \"link\": \"https://www.test12345.com\", \"message\": \"this is a sample message\"}, \"page_id\":\"12345678\"}&degrees_of_freedom_spec={\"creative_features_spec\": {\"standard_enhancements\": {\"enroll_status\": \"OPT_OUT\"}}}"
             },
             {
              "method": "POST",
              "relative_url": "<API_VERSION>/act_187687683/ads",
              "body": "adset_id=6004163746239&redownload=1&status=PAUSED&optimization_goal=REACH&billing_event=IMPRESSIONS&&creative={\"creative_id\":\"{result=create_creative:$.id}\"}&targeting={\"countries\":[\"US\"]}&name=test1"
             },
             {
              "method": "POST",
              "relative_url": "<API_VERSION>/act_187687683/ads",
              "body": "adset_id=6004163746239&redownload=1&status=PAUSED&optimization_goal=REACH&billing_event=IMPRESSIONS&&creative={\"creative_id\":\"{result=create_creative:$.id}\"}&targeting={\"countries\":[\"US\"]}&name=test2"
             },
             {
              "method": "POST",
              "relative_url": "<API_VERSION>/act_187687683/ads",
              "body": "adset_id=6004163746239&redownload=1&status=PAUSED&optimization_goal=REACH&billing_event=IMPRESSIONS&&creative={\"creative_id\":\"{result=create_creative:$.id}\"}&targeting={\"countries\":[\"US\"]}&name=test3"
             }
            ]' https://graph.facebook.com/
```

The response includes individual response codes for each request and the standard Graph API response. For details, see [Making Multiple API Requests](#batch-requests).

The batched request process uses the [JSONPath expression](https://developers.facebook.com/docs/graph-api/making-multiple-requests#operations) format to reference the previous requests.

**Update Ads**

You can update ads with batch requests. To updates bids for three ads:

```curl
curl -F 'access_token=____' 
  -F 'batch=[
             {
              "method": "POST",
              "relative_url": "<API_VERSION>/6004251715639",
              "body": "redownload=1&name=new name"
             },
             {
              "method": "POST",
              "relative_url": <API_VERSION>/v6004251716039",
              "body": "redownload=1&name=new name"
             },
             {
              "method": "POST",
              "relative_url": "<API_VERSION>/6004251715839",
              "body": "redownload=1&name=new name"
             }
            ]' https://graph.facebook.com
```

If you include `redownload=1` in the relative URL, you get full ad details including the ad ID. This help identify which ads you updated.

To update ad creative, specify the entire creative, or provide a new creative ID. This is because Ad Creatives cannot be edited after they have been created except for `name` and run status.

**Read Ads**

If you have a large number of ads, split the request over multiple requests within a batched request:

```curl
curl -F 'access_token=____' 
  -F 'batch=[
             {
              "method": "GET",
              "relative_url": "<API_VERSION>/?ids=6003356308839,6004164369439&fields=<comma separated list of fields>"
             },
             {
              "method": "GET",
              "relative_url": "<API_VERSION>/6003356307839/ads&fields=<comma separated list of fields>"
             },
             {
              "method": "GET",
              "relative_url": "<API_VERSION>/act_187687683/ads?adset_ids=[6003356307839, 6004164259439]&fields=<comma separated list of fields>"
             }
            ]' https://graph.facebook.com
```

`6003356308839` and `6004164369439` are ad ids and `6003356307839` and `6004164259439` are ad set ids.

**Ad Insights**

If you have a large number of Ad Insights split the request over multiple requests within a batched request:

```curl
curl -F 'access_token=____' 
  -F 'batch=[
             {
              "method": "GET",
              "relative_url": "<API_VERSION>/act_19643108/insights?filtering=[{field:'ad.id',operator:'IN',value:[6003356308839,6004164369439]}]"
             },
             {
              "method": "GET",
              "relative_url": "<API_VERSION>/6003356308839/insights"
             },
             {
              "method": "GET",
              "relative_url": "<API_VERSION>/act_187687683/insights?filtering=[{field:'adset.id',operator:'IN',value:[6003356307839, 6004164259439]}]"
             }
            ]' https://graph.facebook.com
```

In this example `6003356308839` and `6004164369439` are ad ids and `6003356307839` and `6004164259439` are ad set ids.

For Ad accounts with a large number of ads using `act_<account_ID>/adgroupstats` is not recommended as it may cause the request to timeout.

**Batch requests for Reach Estimate**

You can request up to 50 reach estimates in a single batched request. The following example shows the reach estimate being requested for 2 different targeting specs:

```curl
curl -F 'access_token=____' 
  -F 'batch=[
             {
              "method": "GET",
              "relative_url": "<API_VERSION>/act_600335/reachestimate?targeting_spec={'geo_locations': {'countries':['US']}}"
             },
             {
              "method": "GET",
              "relative_url": "<API_VERSION>/act_600335/reachestimate?targeting_spec={'geo_locations': {'countries':['FR']}}"
             }
            ]' https://graph.facebook.com
```

**Batch API**

Batch API enables you batch requests and send them asynchronously. Group several Graph API calls into one HTTP request, and execute them asynchronously without having to block. You can also specify dependencies between related operations.

Facebook processes each independent operation in parallel processes and your dependent operations sequentially. Each API call can have a maximum of 1000 requests.

**Make a Batch API call**

To make a Batch API call:

`curl \-F "access_token=___" \-F "name=asyncbatchreqs" \-F "adbatch=<an array of requests>"\"https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/async_batch_requests"`

Provide an array of HTTP POST requests as JSON arrays. Each request has:
*   `name`
*   `relative_url` - portion of URL after `graph.facebook.com`
*   `body`

The API returns an `id` you use to query the progress of requests.

For example, create a campaign with an ad set with [JSONPath Format](https://developers.facebook.com/docs/graph-api/making-multiple-requests#operations) to reference the previous requests:

```curl
curl \-F "access_token=___" \-F "name=batchapiexample" \-F "adbatch=[
  {
    'name': 'create-campaign',
    'relative_url': 'act_123456/campaigns',
    'body': 'name%3DTest+Campaign%26objective%3DLINK_CLICKS%26status%3DPAUSED%26buying_type%3DAUCTION',
  },
  {
    'name': 'create-adset',
    'relative_url': 'act_123456/adsets',
    'body': 'targeting%3D%7B%22geo_locations%22%3A%7B%22countries%22%3A%5B%22US%22%5D%7D%7D%26daily_budget%3D5000%26campaign_id%3D%7Bresult%3Dcreate-campaign%3A%24.id%7D%26bid_amount%3D2%26name%3DFirst%2BAd%2BSet%20Test%26billing_event%3DLINK_CLICKS',
  },
]" \
https://graph.facebook.com/<API_VERSION>/act_123456/async_batch_requests
```

To get a request set status:

`curl –G \-d "access_token=___" \-d "fields=<comma separated list of fields>" \"https://graph.facebook.com/v24.0/<REQUEST_SET_ID>"`

This returns overall status for async request sets as JSON objects. Not all fields are returned by default. To include them, specify the `fields`, such as `fields=id,owner_id,name,total_count,success_count,error_count,is_completed`.

| Name | Description |
| :--- | :--- |
| `id` | **type: int** | Shown by default. | id of current async request set. |
| `owner_id` | **type: int** | Shown by default. | Object that owns this async request set. If you create ads, `owner_id` is the ad account id. |
| `name` | **type: string** | Shown by default. | Name of this async request set |
| `is_completed` | **type: boolean** | Shown by default. | All async requests in set complete |
| `total_count` | **type: int** | Not shown by default. | Total requests count for this request set |
| `initial_count` | **type: int** | Not shown by default. | Number of requests not served yet |
| `in_progress_count` | **type: int** | Not shown by default. | Number of requests in progress |
| `success_count` | **type: int** | Not shown by default. | Number of requests finished and successful |
| `error_count` | **type: int** | Not shown by default. | Number of requests finished and failed |
| `canceled_count` | **type: int** | Not shown by default. | Number of requests canceled by user |
| `notification_uri` | **type: string** | Not shown by default. | Notification URI for this async request set. |
| `notification_mode` | **type: string** | Not shown by default. | Ways to receive notification. Valid values: `OFF` – No notifications, `ON_COMPLETE` – Send notification when the whole set done. |
| `notification_result` | **type: string** | Not shown by default. | Result of sending notification. |
| `notification_status` | **type: string** | Not shown by default. | Notification status: `not_sent`, `sending`, or `sent` |

After you get overall status, you can get details for each request:

`curl –G \   -d "access_token=___" \-d "fields=<comma separated list of fields>" \"https://graph.facebook.com/v24.0/<REQUEST_SET_ID>/requests"`

This returns details as a JSON array. To include non-default fields, specify it in `fields`, such as `fields=id,scope_object_id,status,result,input,async_request_set`.

| Name | Description |
| :--- | :--- |
| `id` | **type: int** | Shown by default. | ID of individual async request |
| `scope_object_id` | **type: int** | Shown by default. | Parent ID of the object this request creates. If you create ads, this is ad set ID for the new ad. |
| `status` | **type: string** | Shown by default. | Status of this async request: `Initial` – Not processed yet, `In_progress` – Request is processing, `Success` – Request finished and successful, `Error` – Request finished and failed, `Canceled` – Request canceled by user |
| `result` | **type: array** | Not shown by default. | If request finishes, show result. For success, the result is same as non-async API. For example, if you create an ad creation, result is new ad ID. For errors: `error_code` – Error code returned, `error_message` – Error message |
| `input` | **type: object** | Not shown by default. | Original input for this request. If you create an ad, the input is `adgroup_spec`. |
| `async_request_set` | **type: object** | Not shown by default. | Async request set containing this request. |

**List Batch API Requests for Ad Account**

You can create multiple Batch API request sets. To query all request sets under an ad account:

`curl –G \ -d "access_token=___" \"https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/async_requests"`

This returns a JSON array of async request set objects. Each object is the same as specified in async request set section. You can filter results with `is_completed`. If `is_completed=true`, you see only completed async request set.

**Update Request Sets**

You can change `name`, `notification_uri` and `notification_mode`for an async request set.

```curl
curl \
  -F 'name=New Name' \
  -F 'notification_mode=OFF' \
  -F 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/<REQUEST_SET_ID>
```

This return true on successful update. You can only change `notification_uri` and `notification_mode` before the notification is sent.

**Cancel Request**

You can cancel an async request, but the request can only be cancelled if it is not processed yet.

```curl
curl -X DELETE \
  -d 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/<REQUEST_ID>
```

Returns true on successful cancellation. You can also cancel unprocessed requests in the async request set:

```curl
curl -X DELETE \
  -d 'access_token=<ACCESS_TOKEN>' \
  https://graph.facebook.com/v24.0/<REQUEST_SET_ID>
```

Returns true on successful cancellation.

**Async Examples**

**Getting status of a specific async request:**

```curl
//pretty=true for command line readable output
curl -G \-d "id=6012384857989" \-d "pretty=true" \-d "access_token=_____" \"https://graph.facebook.com/v24.0/"
```

Return values:

```json
{
   "id": "6012384857989",
   "owner_id": 12345,
   "name": "testasyncset",
   "is_completed": true}
```

**Get results of requests:**

```curl
curl -G \-d "id=6012384857989" \-d "pretty=true" \-d "fields=result" \-d "access_token=_____" \"https://graph.facebook.com/v24.0/requests"
```

Returns:

```json
{
   "data": [
      {
         "result": {
            "id": "6012384860989"
         },
         "id": "6012384858389"
      },
      {
         "result": {
            "id": "6012384858789"
         },
         "id": "6012384858189"
      }
   ],
   "paging": {
      "cursors": {
         "after": "___",
         "before": "___"
      }
   }}
```

**Get list of request sets for an ad account:**

```curl
curl -G \-d "is_completed=1" \-d "pretty=true" \-d "access_token=___" \"https://graph.facebook.com/v24.0/act_71597454/asyncadrequestsets"
```

Returns:

```json
{
   "data": [
      {
         "id": "6012384253789",
         "owner_id": 71597454,
         "name": "testasyncset",
         "is_completed": true
      },
   ],
   "paging": {
      "cursors": {
         "after": "___",
         "before": "___"
      }
   }}
```

**Getting a list of requests for a campaign:**

```curl
curl -G \-d "status=SUCCESS,ERROR" \-d "pretty=true" \-d "access_token=___" \"https://graph.facebook.com/v24.0/6008248529789/asyncadrequests"
```

Return values:

```json
{
   "data": [
      {
         "id": "6012384951789",
         "scope_object_id": 6008248529789,
         "status": "SUCCESS"
      },
   ],
   "paging": {
      "cursors": {
         "after": "___",
         "before": "___"
      }
   }}
```

# Troubleshooting

Working with the Marketing API can occasionally present challenges. Below are issues users may encounter, along with practical solutions to help streamline your experience.

## Error Handling

Use the error handling techniques and best practices below to enhance the reliability and efficiency of your applications.

**Authorization Errors**

These errors often occur due to access tokens that are expired, invalid, or lacking the necessary permissions. To mitigate these issues, ensure that tokens are refreshed regularly and that the correct scopes are requested during authorization.

**Invalid Parameters**

Sending requests with incorrect or missing parameters can lead to errors. Always validate the input data before making API calls. Utilizing validation tools can significantly reduce such errors.

**Resource Not Found**

This error occurs when attempting to access a resource that does not exist or has been deleted. To resolve this, check that resources (like campaigns or ad sets) exist before performing operations on them.

**Rate Limiting**

The Marketing API enforces rate limits to prevent abuse. Exceeding these limits results in error messages indicating that too many requests have been made in a short time. Employing [exponential backoff strategies](https://developers.facebook.com/docs/graph-api/overview/rate-limiting/#exponential-backoff) can help slow down request rates after hitting the limit.

To optimize performance and avoid hitting rate limits, create a queue system for API requests. This allows for controlled pacing of requests, ensuring compliance with the API's limits without sacrificing performance.

**Caching Strategies**

Implement caching for frequently accessed data, such as audience insights or ad performance metrics. This reduces the number of API calls and speeds up data retrieval, leading to a more efficient application.

**Managing API Versioning**

Stay informed about updates and changes in the Marketing API by regularly checking the documentation. Placing API calls within version-specific functions can prepare your application for version changes, allowing for independent updates.

**Error Logging and Monitoring**

Implement robust error logging to track API interactions. This will help identify patterns in errors and facilitate quicker resolutions. Utilizing monitoring tools can alert developers to critical failures or unusual patterns in API usage.

## Error Codes

The following are error codes returned by the API:

| Error Code | Description |
| :--- | :--- |
| - | Negative-value error codes are internal Facebook errors. Check `error_subcode` for the actual failure code. |
| 1 | An unknown error occurred |
| 1, subcode 99 | An unknown error occurred. This error may occur if you set `level` to `adset` but the correct value should be `campaign`. |
| 4 | Application request limit reached |
| 10 | Application does not have permission for this action |
| 17 | User request limit reached |
| 100 | Invalid parameter |
| 100, subcode 33 | Unsupported post request. |
| 100, subcode 1487694 | Invalid parameter. | The category you selected is no longer available. Several behavior-based targeting categories are deprecated. If you try to use them to create ads, your requests fails and returns this error. Use [Targeting Search](https://developers.facebook.com/docs/marketing-api/targeting-search) to see categories available for targeting. |
| 100, subcode 1752129 | Invalid parameter. | This Task Combination Is Not Supported. To assign a user for this ad account valid capabilities, you should pass in a combination of tasks defined in the [mapping](https://developers.facebook.com/docs/marketing-api/business-management/business-assets#tasks-mapping). See [Business Manager API, Permitted Roles](https://developers.facebook.com/docs/marketing-api/business-management/business-assets#tasks-mapping). |
| 100, subcode 1487694 | Invalid parameter. | The category you selected is no longer available. Several behavior-based targeting categories are deprecated. If you try to use them to create ads, your requests fails and returns this error. Use [Targeting Search](https://developers.facebook.com/docs/marketing-api/targeting-search) to see categories available for targeting. |
| 102 | Session key invalid or no longer valid |
| 104 | Incorrect signature |
| 190 | Invalid OAuth 2.0 Access Token |
| 200 | Permission error |
| 200, subcode 1870034 | Custom Audience Terms Not Accepted: You'll need to agree to the Custom Audience terms before you can create or edit an audience or an ad set. See [Facebook, Custom Audience Terms](https://www.facebook.com/business/help/985551378129759) |
| 200, subcode 1870047 | Audience Size too Low: You cannot remove users from this audience because it will result in a low audience size and may result in under-delivery or non-delivery of your ads. |
| 294 | Managing advertisements requires the extended permission `ads_management` and an application that is in our allow list to access the Marketing API |
| 2606 | Unable to display a preview of this ad |
| 2607 | The given currency is invalid for usage with ads. |
| 2615 | Invalid call to update this adaccount |
| 2654 | Failed to create custom audience. |
| 2654 subcode 1713092 | No write permission for this ad account. Developer making this call must have permissions for the ad account to create an audience for it. |
| 5000 | Unknown Error Code |
| 1340029 | Currently deletion of Dynamic Creative Ad is not allowed. Please proceed by deleting parent Ad Set |
| 1373054 | No Call To Action Type was parseable. Please refer to the [call to action api documentation](https://developers.facebook.com/docs/marketing-api/guides/ad-creatives/call-to-action) |
| 1404078 | You have been temporarily blocked from performing this action. |
| 1404163 | You're no longer allowed to use Facebook Products to advertise. You can't run ads, manage advertising assets or create new ad or business accounts. [Learn More](https://www.facebook.com/business/help/2361664177309971) |
| 1487007 | You can't edit this ad because it's part of a scheduled ad set that has reached its end date. Please go to the Budget and Schedule section of the ad set and change the end date to a date in the future and then try your edits again. |
| 1487033 | Your campaign's end date must be in the future. Please choose a different end date and try again. |
| 1487056 | This ad set has been deleted, so you can only edit the name. If you want to edit other fields, you can duplicate this ad set, which will create a new ad set with the same settings that you can then edit. |
| 1487472 | You are using {msg}, which can't be promoted in an ad. Please choose a different Page post to continue. |
| 1487566 | This campaign has been deleted, so you can only edit the name. If you want to edit other fields, you can duplicate this campaign, which will create a new campaign with the same settings that you can then edit. |
| 1487678 | The app you're trying to create an ad for is on a different operating system than targeting settings for this ad set. |
| 1487831 | Your product set cannot be loaded. It may be non-existent or inaccessible due to privacy reasons. |
| 1487929 | The object you are trying to promote is ambiguous. You must specify only one promoted object. |
| 1487990 | This Ad Account has already too many archived adgroups. You need to delete some of them before being able to archive any more. |
| 1815199 | Ad account has no access to this Instagram account. Please use authorized Instagram account or assign ad account to this Instagram account first. |
| 1815629 | All ad asset values should be unique. Please check your values. |
| 1815694 | The user does not have the permission for this action. |
| 1870065 | This can't be used because it contains at least one audience that was disabled. Disabled audiences were shared by accounts that are no longer active. To fix this issue, remove the affected audiences |
| 1870088 | Connection targeting is being deprecated. Please remove connections from your campaign to publish your campaign. |
| 1870090 | To create or edit audience or ad set, please agree to the Custom Audience terms. |
| 1870092 | To create or edit audience or ad set, please agree to the Meta Business Tools terms |
| 1870165 | Your audience contains targeting options that can no longer be used to target ads to people under 18 globally, 20 in Thailand or 21 in Indonesia. Increase the minimum age of your audience or remove all targeting options apart from location, age and gender. |
| 1870199 | All location targeting will now reach people living in or recently in the locations you selected. Please remove all values from the location\_types field. |
| 1870219 | Only employer exclusions are allowed to be saved in account control. If you are trying to save anything other than employer exclusions then this error will be thrown. |
| 1870220 | If you are trying to save more than the allowed number of employer exclusions then this error will be thrown. |
| 1885029 | The Page selected for your ad doesn't match the Page associated with the object you're promoting, like a Page post or app. Please make sure the Pages are the same. |
| 1885088 | This ad has been archived and can not be edited. Only name is allowed to be edited for this ad. If you want to edit other fields, you can duplicate this ad, which will create a new ad with the same settings that you can then edit. |
| 1885183 | Ads creative post was created by an app that is in development mode. It must be in public to create this ad.ate this ad, which will create a new ad with the same settings that you can then edit. |
| 1885204 | You need to set your bid to automatic for the chosen optimization. Remove any billing or bid info or change your optimization. |
| 1885272 | Budget is too low. |
| 1885557 | Your ad is promoting an unavilable post. It is either deleted, unpublished, not owned by the ad's page or you do not have permissions to see or promote it. |
| 1885621 | You can only set an ad set budget or a campaign budget. |
| 1885557 | Your ad is promoting an unavilable post. It is either deleted, unpublished, not owned by the ad's page or you do not have permissions to see or promote it. |
| 1885650 | Your budget is too low. This minimum amount is required to account for any spending that occurs while your budget is updated, which may take up to 15 minutes. |
| 2238055 | Your campaign budget must be at least {minimum\_budget} to account for all ad sets in this campaign. |
| 2446173 | Target rule label with name {label} doesn't refer to any of the asset labels. Please fix it by removing all ad creatives. |
| 2446289 | The {post\_type} you selected for your ad is not available. It could be deleted or you might not have permissions to see it. Please check your ad creative and try again. |
| 2446347 | The ad of an existing post should have the flag `use_existing_post` (default rule in "asset\_feed\_spec:target\_rules") set to true. This is part of the POST request to the server, not something that can be done through the UI. |
| 2446383 | Your campaign objective requires an external website URL. Select a call to action and enter a website URL in the ad creative section. |
| 2446394 | This ad set includes detailed targeting options that are either no longer available or aren't available when excluding people from an audience. You may need to remove items from your detailed targeting or confirm the changes to turn it back on. |
| 2446509 | The ad campaign destination type is not valid |
| 2446580 | Cannot specify both `components` and `child_attachments` field when providing `interactive_components_spec` params |
| 2446712 | The ability to create or run an ad set with store visits optimization is no longer available. Choose the reach or store sales optimization instead. |
| 2446867 | You've already reached the limit of {campaigns\_per\_country\_cap} Advantage+ Shopping Campaigns for the following countries: {country\_names}. If you'd like to create additional campaigns for these countries, use a standard conversions campaign. |
| 2446880 | The WhatsApp number connected to your Facebook page or Instagram profile was disconnected. You can run this ad again when you reconnect your WhatsApp account. |
| 2490085 | The 191x100 crop key will no longer be available in the newest Ads API version. The recommended crop key will be 100x100. |
| 2490155 | The post associated with your ad is not available. It may have been removed, or you might not have permission to view it. |
| 2490372 | You need to choose a shop destination in order to continue. |
| 2490427 | Your ad has been rejected in its latest review and is currently disabled. In order to enable the ad, you will need to make updates to it and create a new ad. |
| 2490468 | Your ad has been rejected in its latest review and is currently disabled. In order to enable the ad, you will need to make updates to it and create a new ad. |
| 2708008 | You haven't been authorized to run ads about social issues, elections or politics. Please have an authorized ad account user place this ad, or complete the ID confirmation process yourself at `https://www.facebook.com/id` |
| 2859015 | You have been temporarily blocked from performing this action. |
| 3858064 | This campaign contains options that can no longer be used in campaigns with audiences under age 18 globally, 20 in Thailand or 21 in Indonesia. Increase the minimum age of your audience or remove all targeting options except for age and locations that are cities or larger (excluding postal codes). |
| 3858082 | This creative is eligible for Standard Enhancements, but `enroll_status` was not provided. Please choose whether you want to turn on standard enhancements or not. [Learn more here](https://developers.facebook.com/docs/marketing-api/guides/advantage-creative) |
| 3858152 | This ad belongs to an ad set that must be published with beneficiary and payer information. Go to the ad set to add or review this information, and then click "Publish". |
| 3867105 | This content can’t be used for your partnership ad. Select different content. |
| 3910001 | We're facing some trouble with your account. Please try again later. |

## Frequently Asked Questions

| General | |
| :--- | :--- |
| Can I use the API in a production environment without app review? | **Answer:** No, all apps that access live data must complete [App Review](https://developers.facebook.com/docs/apps/review). |
| Authorization and Authentication | |
| How do I create an access token for the Marketing API? | **Answer:** You can use the [Graph API Explorer](#graph-api-explorer) to generate an access token with the necessary permissions. |
| Ad Campaigns | |
| How do I create a new campaign? | **Answer:** Send a `POST` request to the `/act_<AD_ACCOUNT_ID>/campaigns` endpoint. |
| Ad Sets | |
| Can I change my ad set's budget after it's created? | **Answer:** Yes, you can modify the budget using a `POST` request to the `/<AD_SET_ID>` endpoint. |
| Insights | |
| What is the best way to analyze my campaign performance? | **Answer:** Use the [Insights API](#insights-api) to retrieve detailed metrics, applying breakdowns as needed. |
| Troubleshooting | |
| What should I do if my ads are not being approved? | **Answer:** Check the [Advertising Policies](https://www.facebook.com/policies/ads) and revise your ad creative or targeting. |
| How can I help improve the performance of my ads? | **Answer:** Implement [Optimization Tips](#optimization-tips) like refining audience targeting or testing creatives. |
| What should I do if my API call returns an error code? | **Answer:** Refer to the [Error Codes](#error-codes) section for troubleshooting and recovery tactics. |
| How can I get developer support? | **Answer:** Join the [Facebook Marketing Developer Community Group](#facebook-marketing-developer-community-group) for assistance. |

# Marketing API Reference

## Marketing API Root Nodes

This is a full list of root nodes for the Facebook Marketing API with links to reference docs for each. For background on the API's architecture how to call root nodes and their edges, see [Using the Graph API](https://developers.facebook.com/docs/graph-api/overview).

To access all reference information you will need to be logged in to Facebook.

| Node | Description |
| :--- | :--- |
| `/{AD_ACCOUNT_USER_ID}` | Someone on Facebook who creates ads. Each ad user can have a role on several ad accounts. |
| `/act_{AD_ACCOUNT_ID}` | Represents the business entity managing ads. |
| `/{AD_ID}` | Contains information for an ad, such as creative elements and measurement information. |
| `/{AD_CREATIVE_ID}` | Format for your image, carousel, collection, or video ad. |
| `/{AD_SET_ID}` | Contains all ads that share the same budget, schedule, bid, and targeting. |
| `/{AD_CAMPAIGN_ID}` | Defines your ad campaigns' objective. Contains one or more ad set. |

## User

| Edges | |
| :--- | :--- |
| **Edge** | **Description** |
| `/adaccounts` | All ad accounts associated with this person |
| `/accounts` | All pages and places that someone is an admin of |
| `/promotable_events` | All promotable events you created or promotable page events that belong to pages you are an admin for |

## Ad Account

Represents a business, person or other entity who creates and manages ads on Facebook.

In response to Apple’s new policy, we are announcing breaking changes that will affect `SDKAdNetwork`, Marketing API and Ads Insights API endpoints.
To learn more about how Apple’s iOS 14.5 requirements will impact Facebook advertising, visit our [Business Help Center aricles](https://www.facebook.com/business/help/316380618483864) and [changelog](https://developers.facebook.com/docs/graph-api/changelog):
*   [Facebook SDK for iOS, App Events API and Mobile Measurement Partners Updates for Apple's iOS 14 Requirements](https://developers.facebook.com/docs/app-events/ios14-updates)
*   [Facebook Pixel Updates for Apple's iOS 14 Requirements](https://developers.facebook.com/docs/facebook-pixel/pixel-updates-for-ios14)
*   **January 19, 2021** - Breaking Changes
    *   The `agency_client_declaration` field requires Admin privileges for all operations starting with v10.0 and will be required for all versions on May 25, 2021.

**Ad Volume**

You can view the volume of ads running or in review for your ad accounts. These ads will count against the ads limit per page that we will enact in early 2021. Query the number of ads running or in review for a given ad account.

*   Ad Limit Per Page enforcement begins for when a Page reaches its ad limit enforcement date. Enforcement date can be queried [here](https://developers.facebook.com/docs/marketing-api/reference/page/ad_limit_page_setting).
*   When a Page is at its ad limit:
    *   New ads (or ads scheduled to begin at that time) do not publish successfully.
    *   Actions on existing ads are limited to pausing and archiving until the number of ads running or in review is below the ad limit.

To see the ads volume for your ad account:

```curl
curl -G 
  -d "access_token=<access_token>" 
  "https://graph.facebook.com/<API_VERSION>/act_<ad_account_ID>/ads_volume"
```

The response looks like this:

`{"data":[{"ads_running_or_in_review_count":2}]}`

For information on managing ads volume, see [About Managing Ad Volume](https://www.facebook.com/business/help/113164948792015).

**Running Or In Review**

To see if an ad is running or in review, we check `effective_status`, `configured_status`, and the ad account's status:
*   If an ad has `effective_status` of 1 - `active`, we consider it a running or in review.
*   If an ad has `configured_status` of `active` and `effective_status` of 9 - `pending review`, or 17 - `pending processing` we consider it a running or in review.
*   The ad can be running or in review only if the ad account status is in 1 - `active`, 8 - `pending settlement`, 9 - `in grace period`.

We also determine if an ad is running or in review based on the ad set's schedule.
*   If start time is before current time, and current time is before end time, then we consider the ad running or in review.
*   If start time is before current time and the ad set has no end time, we also consider it running or in review.

For example, if the ad set is scheduled to run in the future, the ads are not running or in review. However if the ad set is scheduled to run from now until three months from now, we consider the ads running or in review.

If you are using special ads scheduling features, such as day-parting, we consider the ad running or in review the whole day, not just for the part of the day when the ad starts running.

**Breakdown By Actors**

We’ve added the `show_breakdown_by_actor` parameter to the `act_123/ads_volume` endpoint so you can query ad volume and ad limits-related information for each page. For more details, see [Breakdown by Actors](#breakdown-by-actors).

**Limits**

| Limit | Value |
| :--- | :--- |
| **Maximum number of ad accounts per person** | 25 |
| **Maximum number of people with access, per ad account** | 25 |
| **Maximum number of ads per regular ad account** | 6,000 non-archived non-deleted ads |
| **Maximum number of ads per bulk ad account** | 50,000 non-archived non-deleted ads |
| **Maximum number of archived ads per ad account** | 100,000 archived ads |
| **Maximum number of ad sets per regular ad account** | 6,000 non-archived non-deleted ad sets |
| **Maximum number of ad sets per bulk ad account** | 10,000 non-archived non-deleted ad sets |
| **Maximum number of archived ad sets per ad account** | 100,000 archived ad sets |
| **Maximum number of ad campaigns per regular ad account** | 6,000 non-archived non-deleted ad campaigns |
| **Maximum number of ad campaigns per bulk ad account** | 10,000 non-archived non-deleted ad campaigns |
| **Maximum number of archived ad campaigns per ad account** | 100,000 archived ad campaigns |
| **Maximum number of images per ad account** | Unlimited |

**Reading**

An ad account is an account used for managing ads on Facebook

**Digital Services Act Saved Beneficiary/Payor Information**

Use the following code examples to download the beneficiary and payor information.

| Android SDK |
| :--- |
| ```java
      GraphRequest request = GraphRequest.newGraphPathRequest(
 accessToken,
 "/act_<AD_ACCOUNT_ID>",
 new GraphRequest.Callback() {
   @Override
   public void onCompleted(GraphResponse response) {
     // Insert your code here
   }});Bundle parameters = new Bundle();
parameters.putString("fields", "default_dsa_payor,default_dsa_beneficiary");
request.setParameters(parameters);
request.executeAsync();
``` |

| iOS SDK |
| :--- |
| ```objective-c
FBSDKGraphRequest *request = [[FBSDKGraphRequest alloc]
    initWithGraphPath:@"/act_<AD_ACCOUNT_ID>"
           parameters:@{ @"fields": @"default_dsa_payor,default_dsa_beneficiary",}
           HTTPMethod:@"GET"];[request startWithCompletionHandler:^(FBSDKGraphRequestConnection *connection, id result, NSError *error) {
    // Insert your code here}];
``` |

| Javascript SDK: |
| :--- |
| ```javascript
FB.api(
  '/act_<AD_ACCOUNT_ID>',
  'GET',
  {"fields":"default_dsa_payor,default_dsa_beneficiary"},
  function(response) {
      // Insert your code here
  });
``` |

| cURL |
| :--- |
| ```curl -X GET \"https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>?fields=default_dsa_payor%2Cdefault_dsa_beneficiary&access_token=<ACCESS_TOKEN>"
      
``` |

The return value is in JSON format. For example:

`{"default_dsa_payor":"payor2","default_dsa_beneficiary":"bene2","id":"act_426197654150180"}`

| Parameters | |
| :--- | :--- |
| This endpoint doesn't have any parameters. | |

| Fields | |
| :--- | :--- |
| **Field** | **Description** |
| `id` | `string` | The string `act_{ad_account_id}`. |
| | **Default** | |
| `account_id` | `numeric string` | The ID of the Ad Account. |
| | **Default** | |
| `account_status` | `unsigned int32` | Status of the account: |
| | 1 = ACTIVE | |
| | 2 = DISABLED | |
| | 3 = UNSETTLED | |
| | 7 = PENDING\_RISK\_REVIEW | |
| | 8 = PENDING\_SETTLEMENT | |
| | 9 = IN\_GRACE\_PERIOD | |
| | 100 = PENDING\_CLOSURE | |
| | 101 = CLOSED | |
| | 201 = ANY\_ACTIVE | |
| | 202 = ANY\_CLOSED | |
| `ad_account_promotable_objects` | `AdAccountPromotableObjects` | Ad Account creation request purchase order fields associated with this Ad Account. |
| `age` | `float` | Amount of time the ad account has been open, in days. |
| `agency_client_declaration` | `AgencyClientDeclaration` | Details of the agency advertising on behalf of this client account, if applicable. Requires Business Manager Admin privileges. |
| `amount_spent` | `numeric string` | Current amount spent by the account with respect to `spend_cap`. Or total amount in the absence of `spend_cap`. See [why amount spent is different in ad account spending limit](https://www.facebook.com/business/help/323385731189912) for more info. |
| `attribution_spec` | `list<AttributionSpec>` | Deprecated due to iOS 14 changes. Please visit the [changelog](https://developers.facebook.com/docs/graph-api/changelog) for more information. |
| `balance` | `numeric string` | Bill amount due for this Ad Account. |
| `brand_safety_content_filter_levels` | `list<string>` | Brand safety content filter levels set for in-content ads (Facebook in-stream videos and Ads on Facebook Reels) and Audience Network along with feed ads (Facebook Feed, Instagram feed, Facebook Reels feed and Instagram Reels feed) if applicable. |
| | Refer to [Placement Targeting](https://developers.facebook.com/docs/marketing-api/guides/placement-targeting) for a list of supported values. | |
| `business` | `Business` | The Business Manager, if this ad account is owned by one |
| `business_city` | `string` | City for business address |
| `business_country_code` | `string` | Country code for the business address |
| `business_name` | `string` | The business name for the account |
| `business_state` | `string` | State abbreviation for business address |
| `business_street` | `string` | First line of the business street address for the account |
| `business_street2` | `string` | Second line of the business street address for the account |
| `business_zip` | `string` | Zip code for business address |
| `can_create_brand_lift_study` | `bool` | If we can create a new automated brand lift study under the Ad Account. |
| `capabilities` | `list<string>` | List of capabilities an Ad Account can have. See [capabilities](https://developers.facebook.com/docs/marketing-api/reference/ad-account-capability) |
| `created_time` | `datetime` | The time the account was created in ISO 8601 format. |
| `currency` | `string` | The currency used for the account, based on the corresponding value in the account settings. See [supported currencies](https://developers.facebook.com/docs/marketing-api/reference/ad-account/supported-currencies) |
| `default_dsa_beneficiary` | `string` | This is the default value for creating L2 object of dsa\_beneficiary |
| `default_dsa_payor` | `string` | This is the default value for creating L2 object of dsa\_payor |
| `direct_deals_tos_accepted` | `bool` | Whether DirectDeals ToS are accepted. |
| `disable_reason` | `unsigned int32` | The reason why the account was disabled. Possible reasons are: |
| | 0 = NONE | |
| | 1 = ADS\_INTEGRITY\_POLICY | |
| | 2 = ADS\_IP\_REVIEW | |
| | 3 = RISK\_PAYMENT | |
| | 4 = GRAY\_ACCOUNT\_SHUT\_DOWN | |
| | 5 = ADS\_AFC\_REVIEW | |
| | 6 = BUSINESS\_INTEGRITY\_RAR | |
| | 7 = PERMANENT\_CLOSE | |
| | 8 = UNUSED\_RESELLER\_ACCOUNT | |
| | 9 = UNUSED\_ACCOUNT | |
| | 10 = UMBRELLA\_AD\_ACCOUNT | |
| | 11 = BUSINESS\_MANAGER\_INTEGRITY\_POLICY | |
| | 12 = MISREPRESENTED\_AD\_ACCOUNT | |
| | 13 = AOAB\_DESHARE\_LEGAL\_ENTITY | |
| | 14 = CTX\_THREAD\_REVIEW | |
| | 15 = COMPROMISED\_AD\_ACCOUNT | |
| `end_advertiser` | `numeric string` | The entity the ads will target. Must be a Facebook Page Alias, Facebook Page ID or an Facebook App ID. |
| `end_advertiser_name` | `string` | The name of the entity the ads will target. |
| `existing_customers` | `list<string>` | The custom audience ids that are used by advertisers to define their existing customers. This definition is primarily used by Automated Shopping Ads. |
| `expired_funding_source_details` | `FundingSourceDetails` | ID = ID of the payment method |
| | COUPON = Details of the Facebook Ads Coupon from the payment method | |
| | COUPONS = List of active Facebook Ads Coupon from the ad account | |
| | COUPON\_ID = ID of the Facebook Ads Coupon | |
| | AMOUNT = Amount of Facebook Ads Coupon | |
| | CURRENCY = Currency of the Facebook Ads Coupon | |
| | DISPLAY\_AMOUNT = How the amount of Facebook Ads Coupon is displayed | |
| | EXPIRATION = When the coupon expired | |
| | START\_DATE = When the coupon started | |
| | DISPLAY\_STRING = How the payment method is shown | |
| | CAMPAIGN\_IDS = List of campaigns the coupon can be applied to, empty if the coupon is applied on the ad account level. | |
| | ORIGINAL\_AMOUNT = Amount of Facebook Ads Coupon When Issued | |
| | ORIGINAL\_DISPLAY\_AMOUNT = How the Facebook Ads Coupon displayed When Issued | |
| | TYPE = Type of the funding source | |
| | 0 = UNSET | |
| | 1 = CREDIT\_CARD | |
| | 2 = FACEBOOK\_WALLET | |
| | 3 = FACEBOOK\_PAID\_CREDIT | |
| | 4 = FACEBOOK\_EXTENDED\_CREDIT | |
| | 5 = ORDER | |
| | 6 = INVOICE | |
| | 7 = FACEBOOK\_TOKEN | |
| | 8 = EXTERNAL\_FUNDING | |
| | 9 = FEE | |
| | 10 = FX | |
| | 11 = DISCOUNT | |
| | 12 = PAYPAL\_TOKEN | |
| | 13 = PAYPAL\_BILLING\_AGREEMENT | |
| | 14 = FS\_NULL | |
| | 15 = EXTERNAL\_DEPOSIT | |
| | 16 = TAX | |
| | 17 = DIRECT\_DEBIT | |
| | 18 = DUMMY | |
| | 19 = ALTPAY | |
| | 20 = STORED\_BALANCE | |
| | To access this field, the user making the API call must have a `MANAGE` task permission for that specific ad account. See [Ad Account, Assigned Users](https://developers.facebook.com/docs/marketing-api/reference/ad-account/assigned-users) for more information. | |
| `extended_credit_invoice_group` | `ExtendedCreditInvoiceGroup` | The extended credit invoice group that the ad account belongs to |
| `failed_delivery_checks` | `list<DeliveryCheck>` | Failed delivery checks |
| `fb_entity` | `unsigned int32` | `fb_entity` |
| `funding_source` | `numeric string` | ID of the payment method. If the account does not have a payment method it will still be possible to create ads but these ads will get no delivery. Not available if the account is disabled |
| `funding_source_details` | `FundingSourceDetails` | ID = ID of the payment method |
| | COUPON = Details of the Facebook Ads Coupon from the payment method | |
| | COUPONS = List of active Facebook Ads Coupon from the ad account | |
| | COUPON\_ID = ID of the Facebook Ads Coupon | |
| | AMOUNT = Amount of Facebook Ads Coupon | |
| | CURRENCY = Currency of the Facebook Ads Coupon |
| | DISPLAY\_AMOUNT = How the amount of Facebook Ads Coupon is displayed | |
| | EXPIRATION = When the coupon will expire | |
| | START\_DATE = When the coupon starts | |
| | DISPLAY\_STRING = How the payment method is shown | |
| | CAMPAIGN\_IDS = List of campaigns the coupon can be applied to, empty if the coupon is applied on the ad account level. | |
| | ORIGINAL\_AMOUNT = Amount of Facebook Ads Coupon When Issued | |
| | ORIGINAL\_DISPLAY\_AMOUNT = How the Facebook Ads Coupon displayed When Issued | |
| | TYPE = Type of the funding source | |
| | 0 = UNSET | |
| | 1 = CREDIT\_CARD | |
| | 2 = FACEBOOK\_WALLET | |
| | 3 = FACEBOOK\_PAID\_CREDIT | |
| | 4 = FACEBOOK\_EXTENDED\_CREDIT | |
| | 5 = ORDER | |
| | 6 = INVOICE | |
| | 7 = FACEBOOK\_TOKEN | |
| | 8 = EXTERNAL\_FUNDING | |
| | 9 = FEE | |
| | 10 = FX | |
| | 11 = DISCOUNT | |
| | 12 = PAYPAL\_TOKEN | |
| | 13 = PAYPAL\_BILLING\_AGREEMENT | |
| | 14 = FS\_NULL | |
| | 15 = EXTERNAL\_DEPOSIT | |
| | 16 = TAX | |
| | 17 = DIRECT\_DEBIT | |
| | 18 = DUMMY | |
| | 19 = ALTPAY | |
| | 20 = STORED\_BALANCE | |
| | To access this field, the user making the API call must have a `MANAGE` task permission for that specific ad account. See [Ad Account, Assigned Users](https://developers.facebook.com/docs/marketing-api/reference/ad-account/assigned-users) for more information. | |
| `has_migrated_permissions` | `bool` | Whether this account has migrated permissions |
| `has_page_authorized_adaccount` | `bool` | Indicates whether a Facebook page has authorized this ad account to place ads with political content. If you try to place an ad with political content using this ad account for this page, and this page has not authorized this ad account for ads with political content, your ad will be disapproved. See [Breaking Changes, Marketing API, Ads with Political Content](https://developers.facebook.com/docs/marketing-api/changelog#v2_9_ads_political_content) and [Facebook Advertising Policies](https://www.facebook.com/policies/ads) |
| `io_number` | `numeric string` | The Insertion Order (IO) number. |
| `is_attribution_spec_system_default` | `bool` | If the attribution specification of ad account is generated from system default values |
| `is_direct_deals_enabled` | `bool` | Whether the account is enabled to run Direct Deals |
| `is_in_3ds_authorization_enabled_market` | `bool` | If the account is in a market requiring to go through payment process going through 3DS authorization |
| `is_notifications_enabled` | `bool` | Get the notifications status of the user for this ad account. This will return true or false depending if notifications are enabled or not |
| `is_personal` | `unsigned int32` | Indicates if this ad account is being used for private, non-business purposes. This affects how value-added tax (VAT) is assessed. Note: This is not related to whether an ad account is attached to a business. |
| `is_prepay_account` | `bool` | If this ad account is a prepay. Other option would be a postpay account. |
| | To access this field, the user making the API call must have a `ADVERTISE` or `MANAGE` task permission for that specific ad account. See [Ad Account, Assigned Users](https://developers.facebook.com/docs/marketing-api/reference/ad-account/assigned-users) for more information. | |
| `is_tax_id_required` | `bool` | If tax id for this ad account is required or not. |
| | To access this field, the user making the API call must have a `ADVERTISE` or `MANAGE` task permission for that specific ad account. See [Ad Account, Assigned Users](https://developers.facebook.com/docs/marketing-api/reference/ad-account/assigned-users) for more information. | |
| `line_numbers` | `list<integer>` | The line numbers |
| `media_agency` | `numeric string` | The agency, this could be your own business. Must be a Facebook Page Alias, Facebook Page ID or an Facebook App ID. In absence of one, you can use NONE or UNFOUND. |
| `min_campaign_group_spend_cap` | `numeric string` | The minimum required spend cap of Ad Campaign. |
| `min_daily_budget` | `unsigned int32` | The minimum daily budget for this Ad Account |
| `name` | `string` | Name of the account. If not set, the name of the first admin visible to the user will be returned. |
| `offsite_pixels_tos_accepted` | `bool` | Indicates whether the offsite pixel Terms Of Service contract was signed. This feature can be accessible before v2.9 |
| `opportunity_score` | `float` | On a 0-100 point scale, this score represents how optimized the ad account's campaigns, ad sets and ads are overall. |
| | See [Opportunity Score](#opportunity-score-and-recommendations) to learn more. | |
| `owner` | `numeric string` | The ID of the account owner |
| `partner` | `numeric string` | This could be Facebook Marketing Partner, if there is one. Must be a Facebook Page Alias, Facebook Page ID or an Facebook App ID. In absence of one, you can use NONE or UNFOUND. |
| `rf_spec` | `ReachFrequencySpec` | Reach and Frequency limits configuration. See [Reach and Frequency](https://developers.facebook.com/docs/marketing-api/guides/reach-and-frequency) |
| `show_checkout_experience` | `bool` | Whether or not to show the pre-paid checkout experience to an advertiser. If true, the advertiser is eligible for checkout, or they are already locked in to checkout and haven't graduated to postpay. |
| `spend_cap` | `numeric string` | The maximum amount that can be spent by this Ad Account. When the amount is reached, all delivery stops. A value of 0 means no spending-cap. Setting a new spend cap only applies to spend AFTER the time at which you set it. Value specified in basic unit of the currency, for example 'cents' for USD. |
| `tax_id` | `string` | Tax ID |
| `tax_id_status` | `unsigned int32` | VAT status code for the account. |
| | 0: Unknown | |
| | 1: VAT not required- US/CA | |
| | 2: VAT information required | |
| | 3: VAT information submitted | |
| | 4: Offline VAT validation failed | |
| | 5: Account is a personal account | |
| `tax_id_type` | `string` | Type of Tax ID |
| `timezone_id` | `unsigned int32` | The timezone ID of this ad account |
| `timezone_name` | `string` | Name for the time zone |
| `timezone_offset_hours_utc` | `float` | Time zone difference from UTC (Coordinated Universal Time). |
| `tos_accepted` | `map<string, int32>` | Checks if this specific ad account has signed the Terms of Service contracts. Returns 1, if terms were accepted. |
| `user_tasks` | `list<string>` | `user_tasks` |
| `user_tos_accepted` | `map<string, int32>` | Checks if a user has signed the Terms of Service contracts related to the Business that contains a specific ad account. Must include user's access token to get information. This verification is not valid for system users. |

| Edges | |
| :--- | :--- |
| **Edge** | **Description** |
| `account_controls` | `Edge<AdAccountBusinessConstraints>` | Account Controls is for Advantage+ shopping campaigns where advertisers can set audience controls for minimum age and excluded geo location. |
| `activities` | `Edge<AdActivity>` | The activities of this ad account |
| `adcreatives` | `Edge<AdCreative>` | The ad creatives of this ad account |
| `ads_reporting_mmm_reports` | `Edge<AdsReportBuilderMMMReport>` | Marketing mix modeling (MMM) reports generated for this ad account. |
| `ads_reporting_mmm_schedulers` | `Edge<AdsReportBuilderMMMReportScheduler>` | Get all MMM report schedulers by this ad account |
| `advertisable_applications` | `Edge<Application>` | All advertisable apps associated with this account |
| `advideos` | `Edge<Video>` | The videos associated with this account |
| `applications` | `Edge<Application>` | Applications connected to the ad accounts |
| `asyncadcreatives` | `Edge<AdAsyncRequestSet>` | The async ad creative creation requests associated with this ad account. |
| `broadtargetingcategories` | `Edge<BroadTargetingCategories>` | Broad targeting categories (BCTs) can be used for targeting |
| `customaudiencestos` | `Edge<CustomAudiencesTOS>` | The custom audiences term of services available to the ad account |
| `customconversions` | `Edge<CustomConversion>` | The custom conversions owned by/shared with this ad account |
| `delivery_estimate` | `Edge<AdAccountDeliveryEstimate>` | The delivery estimate for a given ad set configuration for this ad account |
| `deprecatedtargetingadsets` | `Edge<AdCampaign>` | Ad sets with deprecating targeting options for this ad account |
| `dsa_recommendations` | `Edge<AdAccountDsaRecommendations>` | `dsa_recommendations` |
| `generatepreviews` | `Edge<AdPreview>` | Generate previews for a creative specification |
| `impacting_ad_studies` | `Edge<AdStudy>` | The ad studies that contain this ad account or any of its descendant ad objects |
| `instagram_accounts` | `Edge<ShadowIGUser>` | Instagram accounts connected to the ad accounts |
| `mcmeconversions` | `Edge<AdsMcmeConversion>` | `mcmeconversions` |
| `minimum_budgets` | `Edge<MinimumBudget>` | Returns minimum daily budget values by currency |
| `promote_pages` | `Edge<Page>` | All pages that have been promoted under the ad account |
| `reachestimate` | `Edge<AdAccountReachEstimate>` | The reach estimate of a given targeting spec for this ad account |
| `saved_audiences` | `Edge<SavedAudience>` | Saved audiences in the account |
| `targetingbrowse` | `Edge<AdAccountTargetingUnified>` | Unified browse |
| `targetingsearch` | `Edge<AdAccountTargetingUnified>` | Unified search |
| `targetingsuggestions` | `Edge<AdAccountTargetingUnified>` | Unified suggestions |
| `targetingvalidation` | `Edge<AdAccountTargetingUnified>` | Unified validation |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 200 | Permissions error |
| 613 | Calls to this api have exceeded the rate limit. |
| 100 | Invalid parameter |
| 190 | Invalid OAuth 2.0 Access Token |
| 80004 | There have been too many calls to this ad-account. Wait a bit and try again. For more info, please refer to https://developers.facebook.com/docs/graph-api/overview/rate-limiting#ads-management. |
| 3018 | The start date of the time range cannot be beyond 37 months from the current date |
| 2500 | Error parsing graph query |
| 1150 | An unknown error occurred. |
| 2635 | You are calling a deprecated version of the Ads API. Please update to the latest version. |
| 368 | The action attempted has been deemed abusive or is otherwise disallowed |

**Creating**

To create a new ad account for your business you must specify `name`, `currency`, `timezone_id`, `end_advertiser`, `media_agency`, and `partner`. Provide `end_advertiser`, `media_agency`, and `partner`:
*   They must be Facebook Page Aliases, Facebook Page ID or an Facebook app ID. For example, to provide your company as an end advertiser you specify `my company` or `20531316728`.
*   The End Advertiser ID is the Facebook primary Page ID or Facebook app ID. Further reference to this field (for formatting and acceptable values) may be found [here](https://developers.facebook.com/docs/marketing-api/reference/ad-account#fields).
*   If your ad account has no End Advertiser, Media Agency, or Partner, specify `NONE`.
*   If your ad account has an End Advertiser, Media Agency, or Partner, that are not represented on Facebook by Page or app, specify `UNFOUND`.

Once you set `end_advertiser` to a value other than `NONE` or `UNFOUND` you cannot change it.

*   **Create an ad account:**

    ```curl
    curl \-F "name=MyAdAccount" \-F "currency=USD" \-F "timezone_id=1" \-F "end_advertiser=<END_ADVERTISER_ID>" \-F "media_agency=<MEDIA_AGENCY_ID>" \-F "partner=NONE" \-F "access_token=<ACCESS_TOKEN>" \"https://graph.facebook.com/<API_VERSION>/<BUSINESS_ID>/adaccount"
    ```

    If you have an extended credity line with Facebook, you can set `invoice` to `true` and we associate your new ad account to this credit line.

*   **The response:**

    ```json
    {
      "id": "act_<ADACCOUNT_ID>",
      "account_id": "<ADACCOUNT_ID>",
      "business_id": "<BUSINESS_ID>",
      "end_advertiser_id": "<END_ADVERTISER_ID>",
      "media_agency_id": "<MEDIA_AGENCY_ID>",
      "partner_id": "NONE"}
    ```

You can make a `POST` request to `product_audiences` edge from the following paths:
*   `/act_{ad_account_id}/product_audiences`

When posting to this edge, an AdAccount will be created.

| Example | |
| :--- | :--- |
| HTTP | `POST /v24.0/act_<AD_ACCOUNT_ID>/product_audiences HTTP/1.1
Host: graph.facebook.com

name=Test+Iphone+Product+Audience&product_set_id=%3CPRODUCT_SET_ID%3E&inclusions=%5B%7B%22retention_seconds%22%3A86400%2C%22rule%22%3A%7B%22and%22%3A%5B%7B%22event%22%3A%7B%22eq%22%3A%22AddToCart%22%7D%7D%2C%2B%7B%22userAgent%22%3A%7B%22i_contains%22%3A%22iPhone%22%7D%7D%5D%7D%7D%5D&exclusions=%5B%7B%22retention_seconds%22%3A172800%2C%22rule%22%3A%7B%22event%22%3A%7B%22eq%22%3A%22Purchase%22%7D%7D%7D%5D` |

If you want to learn how to use the Graph API, read our [Using Graph API](https://developers.facebook.com/docs/graph-api/overview) guide.

| Parameters | |
| :--- | :--- |
| `associated_audience_id` | `int64` | `SELF_EXPLANATORY` |
| `creation_params` | `dictionary { string : <string> }` | `SELF_EXPLANATORY` |
| `description` | `string` | `SELF_EXPLANATORY` |
| `enable_fetch_or_create` | `boolean` | `enable_fetch_or_create` |
| `event_sources` | `array<JSON object>` | `event_sources` |
| `exclusions` | `list<Object>` | `SELF_EXPLANATORY` |
| `inclusions` | `list<Object>` | `SELF_EXPLANATORY` |
| `name` | `string` | `SELF_EXPLANATORY` |
| | **Required** | |
| `opt_out_link` | `string` | `SELF_EXPLANATORY` |
| `parent_audience_id` | `int64` | `SELF_EXPLANATORY` |
| `product_set_id` | `numeric string` or `integer` | `SELF_EXPLANATORY` |
| | **Required** | |
| `subtype` | `enum {CUSTOM, PRIMARY, WEBSITE, APP, OFFLINE_CONVERSION, CLAIM, MANAGED, PARTNER, VIDEO, LOOKALIKE, ENGAGEMENT, BAG_OF_ACCOUNTS, STUDY_RULE_AUDIENCE, FOX, MEASUREMENT, REGULATED_CATEGORIES_AUDIENCE, BIDDING, EXCLUSION, MESSENGER_SUBSCRIBER_LIST}` | `SELF_EXPLANATORY` |

| Return Type | |
| :--- | :--- |
| This endpoint supports read-after-write and will read the node represented by `id` in the return type. | |
| `Struct {id: numeric string, message: string, }` | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 100 | Invalid parameter |
| 2654 | Failed to create custom audience |

You can make a `POST` request to `ad_accounts` edge from the following paths:
*   `/{custom_audience_id}/ad_accounts`

When posting to this edge, an AdAccount will be created.

| Parameters | |
| :--- | :--- |
| `adaccounts` | `list<numeric string>` | Array of new ad account IDs to receive access to the custom audience |
| `permissions` | `string` | `targeting` or `targeting_and_insights`. If `targeting` the recipient ad account can target the audience in ads. `targeting_and_insights` also allows recipient account to view the audience in Audience Insights tool |
| `relationship_type` | `array<string>` | `relationship_type` |
| `replace` | `boolean` | `true` or `false`. If `true` the list of adaccounts provided in the call will replace the existing set of ad accounts this audience is shared with. |

| Return Type | |
| :--- | :--- |
| This endpoint supports read-after-write and will read the node to which you POSTed. | |
| `Struct {success: bool, sharing_data: List [Struct {ad_acct_id: string, business_id: numeric string, audience_share_status: string, errors: List [string ], } ], }` | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 200 | Permissions error |

You can make a `POST` request to `owned_ad_accounts` edge from the following paths:
*   `/{business_id}/owned_ad_accounts`

When posting to this edge, an AdAccount will be created.

| Parameters | |
| :--- | :--- |
| `adaccount_id` | `string` | Ad account ID. |
| | **Required** | |

| Return Type | |
| :--- | :--- |
| This endpoint supports read-after-write and will read the node to which you POSTed. | |
| `Struct {access_status: string, }` | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 3979 | You have exceeded the number of allowed ad accounts for your Business Manager at this time. |
| 3994 | Personal accounts that do not have any history of activity are not eligible for migration to a business manager. Instead create an ad account inside your business manager. |
| 100 | Invalid parameter |
| 3980 | One or more of the ad accounts in your Business Manager are currently in bad standing or in review. All of your accounts must be in good standing in order to create new ad accounts. |
| 415 | Two factor authentication required. User have to enter a code from SMS or TOTP code generator to pass 2fac. This could happen when accessing a 2fac-protected asset like a page that is owned by a 2fac-protected business manager. |
| 3936 | You've already tried to claim this ad account. You'll see a notification if your request is accepted. |
| 368 | The action attempted has been deemed abusive or is otherwise disallowed |
| 3944 | Your Business Manager already has access to this object. |

You can make a `POST` request to `adaccount` edge from the following paths:
*   `/{business_id}/adaccount`

When posting to this edge, an AdAccount will be created.

| Parameters | |
| :--- | :--- |
| `ad_account_created_from_bm_flag` | `boolean` | `ad_account_created_from_bm_flag` |
| `currency` | `ISO 4217 Currency Code` | The currency used for the account |
| | **Required** | |
| `end_advertiser` | | The entity the ads will target. Must be a Facebook Page Alias, Facebook Page ID or an Facebook App ID. In absence of one, you can use NONE or UNFOUND. Note that once a value other than NONE or UNFOUND is set, it cannot be modified any more. |
| | **Required** | |
| `funding_id` | `numeric string` or `integer` | ID of the payment method. If the account does not have a payment method it will still be possible to create ads but these ads will get no delivery. |
| `invoice` | `boolean` | If business manager has Business Manager Owned Normal Credit Line on file on the FB CRM, it will attach the ad account to that credit line. |
| `invoice_group_id` | `numeric string` | The ID of the invoice group this adaccount should be enrolled in |
| `invoicing_emails` | `array<string>` | Emails addressed where invoices will be sent. |
| `io` | `boolean` | If corporate channel is direct sales. |
| `media_agency` | `string` | The agency, this could be your own business. Must be a Facebook Page Alias, Facebook Page ID or an Facebook App ID. In absence of one, you can use NONE or UNFOUND |
| | **Required** | |
| `name` | `string` | The name of the ad account |
| | **Required** | |
| `partner` | `string` | The advertising partner for this account, if there is one. Must be a Facebook Page Alias, Facebook Page ID or an Facebook App ID. In absence of one, you can use NONE or UNFOUND. |
| | **Required** | |
| `po_number` | `string` | Purchase order number |
| `timezone_id` | `unsigned int32` | ID for the timezone. See [here](https://developers.facebook.com/docs/marketing-api/reference/ad-account/supported-timezones). |
| | **Required** | |

| Return Type | |
| :--- | :--- |
| This endpoint supports read-after-write and will read the node represented by `id` in the return type. | |
| `Struct {id: token with structure: AdAccount ID, account_id: numeric string, business_id: numeric string, end_advertiser_id: string, media_agency_id: string, partner_id: string, seer_ad_account_restricted_by_soft_desc_challenge: bool, soft_desc_challenge_credential_id: string, soft_desc_challenge_localized_auth_amount: int32, }` | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 100 | Invalid parameter |
| 3979 | You have exceeded the number of allowed ad accounts for your Business Manager at this time. |
| 3980 | One or more of the ad accounts in your Business Manager are currently in bad standing or in review. All of your accounts must be in good standing in order to create new ad accounts. |
| 415 | Two factor authentication required. User have to enter a code from SMS or TOTP code generator to pass 2fac. This could happen when accessing a 2fac-protected asset like a page that is owned by a 2fac-protected business manager. |
| 3902 | There was a technical issue and your new ad account wasn't created. Please try again. |
| 457 | The session has an invalid origin |
| 190 | Invalid OAuth 2.0 Access Token |
| 23007 | This credit card can't be set as your account's primary payment method, because your account is set up to be billed after your ads have delivered. This setup can't be changed. Please try a different card or payment method. |

**Updating**

**Notice:**
*   The `default_dsa_payor` and `default_dsa_beneficiary` values can be set to both of them or none of them. The API does not allow only one of them to exist in the data storage.
*   To unset the values: pass two empty strings at the same time, the values will be unset in the data storage. It does not allow you to unset only one of them.

You can update an AdAccount by making a `POST` request to `/act_{ad_account_id}`.

| Parameters | |
| :--- | :--- |
| `agency_client_declaration` | `dictionary { string : <string> }` | Details of the agency advertising on behalf of this client account, if applicable. Requires Business Manager Admin privileges. |
| `attribution_spec` | `list<Object>` | Deprecated due to iOS 14 changes. Please visit the [changelog](https://developers.facebook.com/docs/graph-api/changelog) for more information. |
| `business_info` | `dictionary { string : <string> }` | Business Info |
| `custom_audience_info` | `JSON object` | Custom audience info for Automated Shopping Ads. |
| `default_dsa_beneficiary` | `string` | This is the default value for creating L2 targeting EU's beneficiary. |
| `default_dsa_payor` | `string` | This is the default value for creating L2 targeting EU's payor. |
| `end_advertiser` | `string` | The entity the ads will target. Must be a Facebook Page Alias, Facebook Page ID or an Facebook App ID. |
| `is_notifications_enabled` | `boolean` | If notifications are enabled or not for this account |
| `media_agency` | `string` | The ID of a Facebook Page or Facebook App. Once it is set to any values other than NONE or UNFOUND, it cannot be modified any more |
| `name` | `string` | The name of the ad account |
| `partner` | `string` | The ID of a Facebook Page or Facebook App. Once it is set to any values other than NONE or UNFOUND, it cannot be modified any more |
| `spend_cap` | `float` | The total amount that this account can spend, after which all campaigns will be paused, based on `amount_spent`. A value of 0 signifies no spending-cap and setting a new spend cap only applies to spend AFTER the time at which you set it. Value specified in standard denomination of the currency, e.g. 23.50 for USD $23.50. |
| `spend_cap_action` | `string` | Setting this parameter to `reset` sets the `amount_spent` back to 0. Setting it to `delete` removes the `spend_cap` from the account. |

| Return Type | |
| :--- | :--- |
| This endpoint supports read-after-write and will read the node to which you POSTed. | |
| `Struct {success: bool, }` | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 100 | Invalid parameter |
| 200 | Permissions error |
| 368 | The action attempted has been deemed abusive or is otherwise disallowed |
| 190 | Invalid OAuth 2.0 Access Token |
| 80004 | There have been too many calls to this ad-account. Wait a bit and try again. For more info, please refer to https://developers.facebook.com/docs/graph-api/overview/rate-limiting#ads-management. |

You can update an AdAccount by making a `POST` request to `/act_{ad_account_id}/assigned_users`.

| Parameters | |
| :--- | :--- |
| `tasks` | `array<enum {MANAGE, ADVERTISE, ANALYZE, DRAFT, AA_ANALYZE}>` | AdAccount permission tasks to assign this user |
| `user` | `UID` | Business user id or system user id |
| | **Required** | |

| Return Type | |
| :--- | :--- |
| This endpoint supports read-after-write and will read the node to which you POSTed. | |
| `Struct {success: bool, }` | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 100 | Invalid parameter |
| 200 | Permissions error |
| 2620 | Invalid call to update account permissions |

**Deleting**

You can dissociate an AdAccount from an AdsPixel by making a `DELETE` request to `/{ads_pixel_id}/shared_accounts`.

| Parameters | |
| :--- | :--- |
| `account_id` | `numeric string` | `SELF_EXPLANATORY` |
| | **Required** | |
| `business` | `numeric string` or `integer` | `SELF_EXPLANATORY` |
| | **Required** | |

| Return Type | |
| :--- | :--- |
| `Struct {success: bool, }` | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 100 | Invalid parameter |

You can dissociate an AdAccount from a CustomAudience by making a `DELETE` request to `/{custom_audience_id}/ad_accounts`.

| Parameters | |
| :--- | :--- |
| `adaccounts` | `list<numeric string>` | Array of ad account IDs to revoke access to the custom audience |

| Return Type | |
| :--- | :--- |
| `Struct {success: bool, }` | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 100 | Invalid parameter |
# Ad Account Ad Creatives

**Reading**

The Ad Creatives that belong to this Ad Account.

Contains creative content for an ad account that you can use in your ads. Includes images, videos and so on. Using an ad account creative for a particular ad is subject to validation rules based on the ad type and other rules. See [Facebook Ads Guide](https://www.facebook.com/business/ads-guide) and [Validation, Objectives and Creative](https://developers.facebook.com/docs/marketing-api/guides/ad-creatives).

| Example | |
| :--- | :--- |
| HTTP | `GET /v24.0/act_<AD_ACCOUNT_ID>/adcreatives?fields=name%2Cid%2Cstatus HTTP/1.1
Host: graph.facebook.com` |

If you want to learn how to use the Graph API, read our [Using Graph API](https://developers.facebook.com/docs/graph-api/overview) guide.

| Parameters | |
| :--- | :--- |
| This endpoint doesn't have any parameters. | |

| Fields | |
| :--- | :--- |
| Reading from this edge will return a JSON formatted result: | |
| ` {    "data": [],    "paging": {},    "summary": {} }` | |
| `data` | A list of `AdCreative` nodes. |
| `paging` | For more details about pagination, see the [Graph API guide](#paginated-results). |
| `summary` | Aggregated information about the edge, such as counts. Specify the fields to fetch in the `summary` param (like `summary=total_count`). |
| `total_count` | `unsigned int32` | Total number of creatives in the ad account. |
| | **Default** | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 200 | Permissions error |
| 100 | Invalid parameter |
| 80004 | There have been too many calls to this ad-account. Wait a bit and try again. For more info, please refer to https://developers.facebook.com/docs/graph-api/overview/rate-limiting#ads-management. |
| 190 | Invalid OAuth 2.0 Access Token |
| 2500 | Error parsing graph query |

**Creating**

You can make a `POST` request to `adcreatives` edge from the following paths:
*   `/act_{ad_account_id}/adcreatives`

When posting to this edge, no Graph object will be created.

**Limitations**

*   When creating ad creatives, if the `object_story_id` being used is already in use by an existing creative, then the API will return the value of the existing `creative_id` instead of creating a new one.
*   Using `radius` can cause an error, code: 100, subcode 1815946, when targeting multiple locations. We recommend creating an ad for each location or not using `radius` in your call.

| Example | |
| :--- | :--- |
| HTTP | `POST /v24.0/act_<AD_ACCOUNT_ID>/adcreatives HTTP/1.1
Host: graph.facebook.com

name=Sample+Promoted+Post&object_story_id=%3CPAGE_ID%3E_%3CPOST_ID%3E` |

If you want to learn how to use the Graph API, read our [Using Graph API](https://developers.facebook.com/docs/graph-api/overview) guide.

| Parameters | |
| :--- | :--- |
| `actor_id` | `int64` | The actor ID (Page ID) of this creative. |
| `ad_disclaimer_spec` | `JSON object` | Disclaimer information to attach to your creative. |
| `adlabels` | `list<Object>` | Ad Labels associated with this creative. Used to group it with related ad objects. |
| `applink_treatment` | `enum{automatic, deeplink_with_web_fallback, deeplink_with-appstore_fallback, web_only}` | Used for Dynamic Ads. Specify what action should occur if a person clicks a link in the ad, but the business' app is not installed on their device. For example, open a webpage displaying the product, or open the app in an app store on the person's mobile device. |
| `asset_feed_spec` | `Object` | Used for Dynamic Creative to automatically experiment and deliver different variations of an ad's creative. Specifies an asset feed with multiple images, text and other assets used to generate variations of an ad. Formatted as a JSON string. |
| | **Supports Emoji** | |
| `authorization_category` | `enum{NONE, POLITICAL, POLITICAL_WITH_DIGITALLY_CREATED_MEDIA}` | Specifies whether ad is political or not. If your ad has political content, set this to POLITICAL, otherwise it defaults to null. Your ad will be disapproved if it contains political content but not labeled POLITICAL. See [Facebook Advertising Policies](https://www.facebook.com/policies/ads). This field cannot be used for Dynamic Ads. |
| `body` | `string` | The body of the ad. |
| | **Supports Emoji** | |
| `branded_content` | `JSON object` | `branded_content` |
| `branded_content_sponsor_page_id` | `numeric string` or `integer` | ID for page representing business which runs Branded Content ads. See [Creating Branded Content Ads](#creating-branded-content). |
| `bundle_folder_id` | `numeric string` or `integer` | The Dynamic Ad's bundle folder ID |
| `call_to_action` | `Object` | This field promotes an onsite or offsite action. |
| | **Supports Emoji** | |
| `categorization_criteria` | `enum{brand, category, product_type}` | The Dynamic Category Ad's categorization criteria |
| `category_media_source` | `enum{CATEGORY, MIXED, PRODUCTS_COLLAGE, PRODUCTS_SLIDESHOW}` | The Dynamic Ad's rendering mode for category ads |
| `contextual_multi_ads` | `JSON object` | `contextual_multi_ads` |
| `degrees_of_freedom_spec` | `JSON object` | Specifies the type of transformation which is enabled for the given creative |
| `destination_set_id` | `numeric string` | The ID of the Product Set for a Destination Catalog that will be used to link with Travel Catalogs. |
| `dynamic_ad_voice` | `enum{DYNAMIC, STORY_OWNER}` | Determines the Page voice to be used in Dynamic Local Ads |
| `enable_direct_install` | `boolean` | Whether Direct Install should be enabled on supported devices. |
| `enable_launch_instant_app` | `boolean` | Whether Instant App should be enabled on supported devices. |
| `execution_options` | `list<enum{validate_only}>` | **Default value:** Set |
| | An execution setting | |
| | `validate_only`: when this option is specified, the API call will not perform the mutation but will run through the validation rules against values of each field. | |
| | If the call passes validation or review, response will be `{"success": true}`. If the call does not pass, an error will be returned with more details. These options can be used to improve any UI to display errors to the user much sooner, e.g. as soon as a new value is typed into any field corresponding to this ad object, rather than at the upload/save stage, or after review. | |
| `facebook_branded_content` | `JSON object` | Params required for facebook branded content. |
| `format_transformation_spec` | `array<JSON object>` | `format_transformation_spec` |
| `image_crops` | `dictionary { enum{191x100, 100x72, 400x150, 600x360, 100x100, 400x500, 90x160, 300x400} : <list<list<int64>>> }` | Crop dimensions for the image specified. See [image crop reference](https://developers.facebook.com/docs/marketing-api/guides/ad-creatives/image-crop) for more details. |
| `image_file` | `string` | Reference to a local image file to upload for use in a creative. Not to exceed 8MB in size. If `object_story_spec` or `object_story_id` is specified, this field will be ignored |
| `image_hash` | `string` | Image hash for an image you have uploaded and can be used in a creative. If `object_story_spec` or `object_story_id` is specified, this field will be ignored |
| `image_url` | `URL` | URL for the image in this ad creative. Do not use image URLs returned by Facebook. Instead you should host the image on your own servers. Facebook saves the image from your URL to your ad account's image library. Images cannot exceed 8 MB. You must also provide one of these three fields: `image_file`, `image_hash`, or `image_url`. |
| `instagram_branded_content` | `JSON object` | Params required for instagram branded content. |
| `instagram_permalink_url` | `URL` | URL for a post on Instagram you want to run as an ad. Also known as Instagram media. |
| `instagram_user_id` | `numeric string` or `integer` | Instagram user ID |
| `interactive_components_spec` | `JSON object` | The specification for interactive component overlay on the media. |
| | **Supports Emoji** | |
| `link_og_id` | `string` | The Open Graph (OG) ID for the link in this creative if the landing page has OG tags. |
| `link_url` | `URL` | Identify a specific landing tab on your Facebook page by the Page tab's URL. See [connection objects](https://developers.facebook.com/docs/graph-api/reference/v24.0/page/tabs) for retrieving Page tab URLs. You can add `app_data` parameters to the URL to pass data to a Page's tab. |
| `marketing_message_structured_spec` | `JSON object` | `marketing_message_structured_spec` |
| `media_sourcing_spec` | `JSON object` | media sourcing spec for advertiser to specify additional media from various sources |
| `name` | `string` | Name of this ad creative as seen in the ad account's library. |
| `object_id` | `int64` | The Facebook object ID that is relevant to the ad. See [connection objects](https://developers.facebook.com/docs/graph-api/reference/v24.0/object) |
| `object_story_id` | `post_id` | ID of a Facebook Page post to use in an ad. You can get this ID by querying the posts of the page. If this post includes an image, it should not exceed 8 MB. Facebook will upload the image from the post to your ad account's image library. |
| `object_story_spec` | `string (AdCreativeObjectStorySpec)` | JSON string of `AdCreativeObjectStorySpec` type. Use if you want to create a new unpublished page post and turn the post into an ad. The Page ID and the content to create a new unpublished page post. Specify `link_data`, `photo_data`, `video_data`, `text_data` or `template_data` with the content. |
| | **Supports Emoji** | |
| `object_type` | `string` | The type of Facebook object you want to advertise. Allowed values are: |
| | `PAGE` | |
| | `DOMAIN` | |
| | `EVENT` | |
| | `STORE_ITEM`: refers to an iTunes or Google Play store destination | |
| | `OFFER` | |
| | `SHARE`: from a page | |
| | `PHOTO` | |
| | `STATUS`: of a page | |
| | `VIDEO` | |
| | `APPLICATION`: app on Facebook | |
| `object_url` | `URL` | URL that opens if someone clicks your link on a link ad. This URL is not connected to a Facebook page. |
| `page_welcome_message` | `string` | You can create more tailored user experiences for your ads that click to Messenger or to WhatsApp by customizing your ads' greeting message. For ads that clicks to Whatsapp, you can set the the `page_welcome_message` field under `object_story_spec`. |
| | **Note:** If you are using the message received in Whatsapp to trigger any bot flows, please make sure to work with your BSP and agencies to update it so as to ensure flows aren't disrupted. | |
| | **Supports Emoji** | |
| `place_page_set_id` | `numeric string` | The Place Page Set when objective is `LOCAL_AWARENESS`. Used with Dynamic Local Ads |
| `platform_customizations` | `JSON` or `object-like arrays` | Use this field to specify the exact media to use on different Facebook placements. You can currently use this setting for images and videos. Facebook replaces the media originally defined in ad creative with this media when the ad displays in a specific placements. For example, if you define a media here for instagram, Facebook uses that media instead of the media defined in the ad creative when the ad appears on Instagram. |
| `playable_asset_id` | `numeric string` | The ID of the playable asset in this creative. |
| `portrait_customizations` | `JSON object` | Use this field to customizations how ads look in portrait mode format example for IG Stories, Facebook Stories, IGTV, etc |
| `product_set_id` | `numeric string` or `integer` | Used for Dynamic Ad. An ID for a product set, which groups related products or other items being advertised. |
| `recommender_settings` | `JSON object` | The recommender settings that can be used to control recommendations for Dynamic Ads. |
| `referral_id` | `numeric string` or `integer` | The ID of Referral Ad Configuration in this creative. |
| `regional_regulation_disclaimer_spec` | `JSON object` | `regional_regulation_disclaimer_spec` |
| `template_url` | `URL` | The product link url, which overrides the one set in Dynamic Product Ad's product feeds. |
| `template_url_spec` | `string (TemplateURLSpec)` | An optional structured collection of templated web and app-link descriptors that override the fallbacks that would otherwise be pulled from a Dynamic Ad`s catalog |
| `threads_user_id` | `numeric string` or `integer` | `threads_user_id` |
| `thumbnail_url` | `URL` | URL for a thumbnail image for this ad creative. You can provide dimensions for this with `thumbnail_width` and `thumbnail_height`. See [example](https://developers.facebook.com/docs/marketing-api/guides/ad-creatives/ad-creative-thumbnail). |
| `title` | `string` | Title for a Page Likes ad, which appears in the right-hand column on Facebook. |
| `url_tags` | `string` | A set of query string parameters which will replace or be appended to urls clicked from page post ads, message of the post, and canvas app install creatives only. |
| `use_page_actor_override` | `boolean` | If true, we show the page actor for mobile app ads. |

| Return Type | |
| :--- | :--- |
| This endpoint supports read-after-write and will read the node represented by `id` in the return type. | |
| `Struct {id: numeric string, success: bool, }` | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 100 | Invalid parameter |
| 500 | Message contains banned content |
| 200 | Permissions error |
| 2635 | You are calling a deprecated version of the Ads API. Please update to the latest version. |
| 613 | Calls to this api have exceeded the rate limit. |
| 1500 | The url you supplied is invalid |
| 80004 | There have been too many calls to this ad-account. Wait a bit and try again. For more info, please refer to https://developers.facebook.com/docs/graph-api/overview/rate-limiting#ads-management. |
| 190 | Invalid OAuth 2.0 Access Token |
| 105 | The number of parameters exceeded the maximum for this operation |
| 368 | The action attempted has been deemed abusive or is otherwise disallowed |

**Updating**

You can't perform this operation on this endpoint.

**Deleting**

You can't perform this operation on this endpoint.

# Ad Account Ad Images

**Reading**

Ad Images that belong to this Ad Account.

| Example | |
| :--- | :--- |
| HTTP | `GET /v24.0/{ad-account-id}/adimages HTTP/1.1
Host: graph.facebook.com` |

If you want to learn how to use the Graph API, read our [Using Graph API](https://developers.facebook.com/docs/graph-api/overview) guide.

| Parameters | |
| :--- | :--- |
| `biz_tag_id` | `int64` | Business tag ID to filter images. |
| `business_id` | `numeric string` or `integer` | Optional. Assists with filters such as recently used. |
| `hashes` | `list<string>` | Hash of the image. |
| `minheight` | `int64` | Minimum height of the image. |
| `minwidth` | `int64` | Minimum width of the image. |
| `name` | `string` | Image name used in image names filter. |

| Fields | |
| :--- | :--- |
| Reading from this edge will return a JSON formatted result: | |
| ` {    "data": [],    "paging": {},    "summary": {} }` | |
| `data` | A list of `AdImage` nodes. |
| `paging` | For more details about pagination, see the [Graph API guide](#paginated-results). |
| `summary` | Aggregated information about the edge, such as counts. Specify the fields to fetch in the `summary` param (like `summary=total_count`). |
| `total_count` | `int32` | Total number of images in the Ad Account. |
| | **Default** | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 200 | Permissions error |
| 80004 | There have been too many calls to this ad-account. Wait a bit and try again. For more info, please refer to https://developers.facebook.com/docs/graph-api/overview/rate-limiting#ads-management. |
| 368 | The action attempted has been deemed abusive or is otherwise disallowed |
| 100 | Invalid parameter |
| 190 | Invalid OAuth 2.0 Access Token |

**Creating**

You can make a `POST` request to `adimages` edge from the following paths:
*   `/act_{ad_account_id}/adimages`

When posting to this edge, an `AdImage` will be created.

| Parameters | |
| :--- | :--- |
| `bytes` | `Base64 UTF-8 string` | Image file. Example: `bytes = <image content in bytes format>` |
| `copy_from` | `JSON` or `object-like arrays` | This copies the Ad Image from the source to the destination account. |
| | `{"source_account_id":"<SOURCE_ACCOUNT_ID>", "hash":"02bee5277ec507b6fd0f9b9ff2f22d9c"}` | |

| Return Type | |
| :--- | :--- |
| This endpoint supports read-after-write and will read the node represented by `images` in the return type. | |
| `Map {string: Map {string: Struct {hash: string, url: string, url_128: string, url_256: string, url_256_height: string, url_256_width: string, height: int32, width: int32, name: string, } } }` | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 100 | Invalid parameter |
| 200 | Permissions error |
| 80004 | There have been too many calls to this ad-account. Wait a bit and try again. For more info, please refer to https://developers.facebook.com/docs/graph-api/overview/rate-limiting#ads-management. |
| 190 | Invalid OAuth 2.0 Access Token |
| 368 | The action attempted has been deemed abusive or is otherwise disallowed |
| 613 | Calls to this api have exceeded the rate limit. |

**Updating**

You can't perform this operation on this endpoint.

**Deleting**

You can dissociate an AdImage from an AdAccount by making a `DELETE` request to `/act_{ad_account_id}/adimages`.

| Parameters | |
| :--- | :--- |
| `hash` | `string` | Hash of the image you wish to delete. |
| | **Required** | |

| Return Type | |
| :--- | :--- |
| `Struct {success: bool, }` | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 100 | Invalid parameter |
| 80004 | There have been too many calls to this ad-account. Wait a bit and try again. For more info, please refer to https://developers.facebook.com/docs/graph-api/overview/rate-limiting#ads-management. |


# Ad Account Ads

**Graph API Version**

v24.0

**Reading**

Ads belonging to this ad account.

| Example | |
| :--- | :--- |
| cURL | `curl -G \
https://graph.facebook.com/v24.0/act_<AD_ACCOUNT_ID>/ads` |

| Parameters | |
| :--- | :--- |
| `date_preset` | `enum{today, yesterday, this_month, last_month, this_quarter, maximum, data_maximum, last_3d, last_7d, last_14d, last_28d, last_30d, last_90d, last_week_mon_sun, last_week_sun_sat, last_quarter, last_year, this_week_mon_today, this_week_sun_today, this_year}` | Predefine date range used to aggregate insights metrics |
| `effective_status` | `list<string>` | Filter ads by effective status |
| `time_range` | `{'since':YYYY-MM-DD,'until':YYYY-MM-DD}` | Date range used to aggregate insights metrics |
| `updated_since` | `integer` | Time since the Ad has been updated. |

| Fields | |
| :--- | :--- |
| Reading from this edge will return a JSON formatted result: | |
| ` {    "data": [],    "paging": {},    "summary": {} }` | |
| `data` | A list of `Ad` nodes. |
| `paging` | For more details about pagination, see the [Graph API guide](#paginated-results). |
| `summary` | Aggregated information about the edge, such as counts. Specify the fields to fetch in the `summary` param (like `summary=insights`). |
| `insights` | `Edge<AdsInsights>` | Analytics summary for all objects |
| `total_count` | `unsigned int32` | Total number of Ads returned by the query |
| | **Default** | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 200 | Permissions error |
| 613 | Calls to this api have exceeded the rate limit. |
| 100 | Invalid parameter |
| 80004 | There have been too many calls to this ad-account. Wait a bit and try again. For more info, please refer to https://developers.facebook.com/docs/graph-api/overview/rate-limiting#ads-management. |
| 190 | Invalid OAuth 2.0 Access Token |
| 2500 | Error parsing graph query |
| 3018 | The start date of the time range cannot be beyond 37 months from the current date |
| 2635 | You are calling a deprecated version of the Ads API. Please update to the latest version. |
| 368 | The action attempted has been deemed abusive or is otherwise disallowed |

**Creating**

You can make a `POST` request to `ads` edge from the following paths:
*   `/act_{ad_account_id}/ads`

When posting to this edge, an `Ad` will be created.

| Example | |
| :--- | :--- |
| HTTP | `POST /v24.0/act_<AD_ACCOUNT_ID>/ads HTTP/1.1
Host: graph.facebook.com

name=My+Ad&adset_id=%3CAD_SET_ID%3E&creative=%7B%22creative_id%22%3A%22%3CCREATIVE_ID%3E%22%7D&status=PAUSED` |

If you want to learn how to use the Graph API, read our [Using Graph API](https://developers.facebook.com/docs/graph-api/overview) guide.

| Parameters | |
| :--- | :--- |
| `ad_schedule_end_time` | `datetime` | An optional parameter that defines the end time of an individual ad. If no end time is defined, the ad will run on the campaign’s schedule. This parameter is only available for sales and app promotion campaigns. |
| `ad_schedule_start_time` | `datetime` | An optional parameter that defines the start time of an individual ad. If no start time is defined, the ad will run on the campaign’s schedule. This parameter is only available for sales and app promotion campaigns. |
| `adlabels` | `list<Object>` | Ad labels associated with this ad |
| `adset_id` | `int64` | The ID of the ad set, required on creation. |
| `adset_spec` | `Ad set spec` | The ad set spec for this ad. When the spec is provided, `adset_id` field is not required. |
| `audience_id` | `string` | The ID of the audience. |
| `bid_amount` | `integer` | Deprecated. We no longer allow setting the `bid_amount` value on an ad. Please set `bid_amount` for the ad set. |
| `conversion_domain` | `string` | The domain where conversions happen. Required to create or update an ad in a campaign that shares data with a pixel. This field will be auto-populated for existing ads by inferring from destination URLs . Note that this field should contain only the first and second level domains, and not the full URL. For example `facebook.com`. |
| `creative` | `AdCreative` | This field is required for create. The ID or creative spec of the ad creative to be used by this ad. You can read more about creatives [here](https://developers.facebook.com/docs/marketing-api/guides/ad-creatives). You may supply the ID within an object as follows: |
| | `{"creative_id": <CREATIVE_ID>}` | |
| | or creative spec as follow: | |
| | `{"creative": {\"name\": \"<NAME>\", \"object_story_spec\": <SPEC>}}` | |
| | **Required** | **Supports Emoji** |
| `creative_asset_groups_spec` | `string (CreativeAssetGroupsSpec)` | `creative_asset_groups_spec` |
| | **Supports Emoji** | |
| `date_format` | `string` | The format of the date. |
| `display_sequence` | `int64` | The sequence of the ad within the same campaign |
| `engagement_audience` | `boolean` | Flag to create a new audience based on users who engage with this ad |
| `execution_options` | `list<enum{validate_only, synchronous_ad_review, include_recommendations}>` | **Default value:** Set |
| | An execution setting | |
| | `validate_only`: when this option is specified, the API call will not perform the mutation but will run through the validation rules against values of each field. | |
| | `include_recommendations`: this option cannot be used by itself. When this option is used, recommendations for ad object's configuration will be included. A separate section recommendations will be included in the response, but only if recommendations for this specification exist. | |
| | `synchronous_ad_review`: this option should not be used by itself. It should always be specified with `validate_only`. When these options are specified, the API call will perform Ads Integrity validations, which include message language checking, image 20% text rule, and so on, as well as the validation logics. | |
| | If the call passes validation or review, response will be `{"success": true}`. If the call does not pass, an error will be returned with more details. These options can be used to improve any UI to display errors to the user much sooner, e.g. as soon as a new value is typed into any field corresponding to this ad object, rather than at the upload/save stage, or after review. | |
| `include_demolink_hashes` | `boolean` | Include the demolink hashes. |
| `name` | `string` | Name of the ad. |
| | **Required** | **Supports Emoji** |
| `priority` | `int64` | Priority |
| `source_ad_id` | `numeric string` or `integer` | ID of the source Ad, if applicable. |
| `status` | `enum{ACTIVE, PAUSED, DELETED, ARCHIVED}` | Only `ACTIVE` and `PAUSED` are valid during creation. Other statuses can be used for update. When an ad is created, it will first go through ad review, and will have the ad status `PENDING_REVIEW` before it finishes review and reverts back to your selected status of `ACTIVE` or `PAUSED`. During testing, it is recommended to set ads to a `PAUSED` status so as to not incur accidental spend. |
| `tracking_specs` | `Object` | With Tracking Specs, you log actions taken by people on your ad. See [Tracking and Conversion Specs](#tracking-and-conversion-specs). |

| Return Type | |
| :--- | :--- |
| This endpoint supports read-after-write and will read the node represented by `id` in the return type. | |
| `Struct {id: numeric string, success: bool, }` | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 100 | Invalid parameter |
| 200 | Permissions error |
| 613 | Calls to this api have exceeded the rate limit. |
| 368 | The action attempted has been deemed abusive or is otherwise disallowed |
| 80004 | There have been too many calls to this ad-account. Wait a bit and try again. For more info, please refer to https://developers.facebook.com/docs/graph-api/overview/rate-limiting#ads-management. |
| 194 | Missing at least one required parameter |
| 500 | Message contains banned content |
| 2635 | You are calling a deprecated version of the Ads API. Please update to the latest version. |
| 190 | Invalid OAuth 2.0 Access Token |
| 105 | The number of parameters exceeded the maximum for this operation |

**Updating**

You can't perform this operation on this endpoint.

**Deleting**

You can't perform this operation on this endpoint.

Yes, there are several more sections in the document after the **Ad Account Ads** section (which you provided in the previous turn).

Here is the continuation of the document, starting with the next entry in the Marketing API Reference: **Ad Account Adsets**.

# Ad Account Adsets

**Graph API Version**

v24.0

**Reading**

The adsets of this ad account

| Example | |
| :--- | :--- |
| HTTP | `GET /v24.0/act_<AD_ACCOUNT_ID>/adsets?fields=name%2Cid%2Cstatus HTTP/1.1
Host: graph.facebook.com` |

If you want to learn how to use the Graph API, read our [Using Graph API](https://developers.facebook.com/docs/graph-api/overview) guide.

| Parameters | |
| :--- | :--- |
| `date_preset` | `enum {TODAY, YESTERDAY, THIS_MONTH, LAST_MONTH, THIS_QUARTER, MAXIMUM, DATA_MAXIMUM, LAST_3D, LAST_7D, LAST_14D, LAST_28D, LAST_30D, LAST_90D, LAST_WEEK_MON_SUN, LAST_WEEK_SUN_SAT, LAST_QUARTER, LAST_YEAR, THIS_WEEK_MON_TODAY, THIS_WEEK_SUN_TODAY, THIS_YEAR}` | Predefine date range used to aggregate insights metrics |
| `effective_status` | `list<enum{ACTIVE, PAUSED, DELETED, PENDING_REVIEW, DISAPPROVED, PREAPPROVED, PENDING_BILLING_INFO, CAMPAIGN_PAUSED, ARCHIVED, ADSET_PAUSED, IN_PROCESS, WITH_ISSUES}>` | Effective status of adset |
| `is_completed` | `boolean` | Filter adset by completed status |
| `time_range` | `{'since':YYYY-MM-DD,'until':YYYY-MM-DD}` | Date range used to aggregate insights metrics |
| `updated_since` | `integer` | Time since the Adset has been updated. |

| Fields | |
| :--- | :--- |
| Reading from this edge will return a JSON formatted result: | |
| ` {    "data": [],    "paging": {},    "summary": {} }` | |
| `data` | A list of `AdSet` nodes. |
| `paging` | For more details about pagination, see the [Graph API guide](#paginated-results). |
| `summary` | Aggregated information about the edge, such as counts. Specify the fields to fetch in the `summary` param (like `summary=insights`). |
| `insights` | `Edge<AdsInsights>` | Analytics summary for all objects. Use nested parameters with this field. `insights.time_range({'until':'2018-01-01', 'since':'2017-12-12'}).time_increment(1)` |
| `total_count` | `unsigned int32` | Total number of objects |
| | **Default** | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 200 | Permissions error |
| 613 | Calls to this api have exceeded the rate limit. |
| 100 | Invalid parameter |
| 190 | Invalid OAuth 2.0 Access Token |
| 80004 | There have been too many calls to this ad-account. Wait a bit and try again. For more info, please refer to https://developers.facebook.com/docs/graph-api/overview/rate-limiting#ads-management. |
| 368 | The action attempted has been deemed abusive or is otherwise disallowed |
| 3018 | The start date of the time range cannot be beyond 37 months from the current date |
| 2500 | Error parsing graph query |

**Creating**

Mobile App Install CPA Billing will no longer be supported. The billing event cannot be App Install if the Optimization goal is App Install.

You can make a `POST` request to `adsets` edge from the following paths:
*   `/act_{ad_account_id}/adsets`

When posting to this edge, an `AdSet` will be created.

| Example | |
| :--- | :--- |
| HTTP | `POST /v24.0/act_<AD_ACCOUNT_ID>/adsets HTTP/1.1
Host: graph.facebook.com

name=My+First+Adset&lifetime_budget=20000&start_time=2025-12-10T11%3A21%3A33-0800&end_time=2025-12-20T11%3A21%3A33-0800&campaign_id=%3CAD_CAMPAIGN_ID%3E&bid_amount=100&billing_event=LINK_CLICKS&optimization_goal=LINK_CLICKS&targeting=%7B%22facebook_positions%22%3A%5B%22feed%22%5D%2C%22geo_locations%22%3A%7B%22countries%22%3A%5B%22US%22%5D%7D%2C%22publisher_platforms%22%3A%5B%22facebook%22%2C%22audience_network%22%5D%7D&status=PAUSED` |

If you want to learn how to use the Graph API, read our [Using Graph API](https://developers.facebook.com/docs/graph-api/overview) guide.

| Parameters | |
| :--- | :--- |
| `adlabels` | `list<Object>` | Specifies list of labels to be associated with this object. This field is optional |
| `adset_schedule` | `list<Object>` | Ad set schedule, representing a delivery schedule for a single day |
| `anchor_event_attribution_window_days` | `int64` | `anchor_event_attribution_window_days` |
| `attribution_spec` | `list<JSON object>` | Conversion attribution spec used for attributing conversions for optimization. Supported window lengths differ by optimization goal and campaign objective. |
| `automatic_manual_state` | `enum{UNSET, AUTOMATIC, MANUAL}` | `automatic_manual_state` |
| `bid_amount` | `integer` | Bid cap or target cost for this ad set. The bid cap used in a lowest cost bid strategy is defined as the maximum bid you want to pay for a result based on your `optimization_goal`. The target cost used in a target cost bid strategy lets Facebook bid to meet your target on average and keep costs stable as you spend. If an ad level `bid_amount` is specified, updating this value will overwrite the previous ad level bid. Unless you are using Reach and Frequency, `bid_amount` is required if `bid_strategy` is set to `LOWEST_COST_WITH_BID_CAP` or `COST_CAP`. The bid amount's unit is cents for currencies like USD, EUR, and the basic unit for currencies like JPY, KRW. The bid amount for ads with `IMPRESSION` or `REACH` as `billing_event` is per 1,000 occurrences, and has to be at least 2 US cents or more. For ads with other `billing_events`, the bid amount is for each occurrence, and has a minimum value 1 US cents. The minimum bid amounts of other currencies are of similar value to the US Dollar values provided. |
| `bid_strategy` | `enum{LOWEST_COST_WITHOUT_CAP, LOWEST_COST_WITH_BID_CAP, COST_CAP, LOWEST_COST_WITH_MIN_ROAS}` | Choose bid strategy for this ad set to suit your specific business goals. Each strategy has tradeoffs and may be available for certain `optimization_goals`: |
| | `LOWEST_COST_WITHOUT_CAP`: Designed to get the most results for your budget based on your ad set `optimization_goal` without limiting your bid amount. This is the best strategy if you care most about cost efficiency. However with this strategy it may be harder to get stable average costs as you spend. This strategy is also known as automatic bidding. Learn more in [Ads Help Center, About bid strategies: Lowest cost](https://www.facebook.com/business/help/1288599478479574). | |
| | `LOWEST_COST_WITH_BID_CAP`: Designed to get the most results for your budget based on your ad set `optimization_goal` while limiting actual bid to your specified amount. With a bid cap you have more control over your cost per actual optimization event. However if you set a limit which is too low you may get less ads delivery. If you select this, you must provide a bid cap with the `bid_amount` field. Note: during creation this bid strategy is set if you provide `bid_amount` only. This strategy is also known as manual maximum-cost bidding. Learn more in [Ads Help Center, About bid strategies: Lowest cost](https://www.facebook.com/business/help/1288599478479574). | |
| | **Notes:** | |
| | If you enable [campaign budget optimization](https://developers.facebook.com/docs/marketing-api/guides/campaign-budget-optimization), you should set `bid_strategy` at the parent campaign level. | |
| | `TARGET_COST` bidding strategy has been deprecated with Marketing API v9. | |
| `billing_event` | `enum{APP_INSTALLS, CLICKS, IMPRESSIONS, LINK_CLICKS, NONE, OFFER_CLAIMS, PAGE_LIKES, POST_ENGAGEMENT, THRUPLAY, PURCHASE, LISTING_INTERACTION}` | The billing event that this ad set is using: |
| | `APP_INSTALLS`: Pay when people install your app. | |
| | `CLICKS`: Deprecated. | |
| | `IMPRESSIONS`: Pay when the ads are shown to people. | |
| | `LINK_CLICKS`: Pay when people click on the link of the ad. | |
| | `OFFER_CLAIMS`: Pay when people claim the offer. | |
| | `PAGE_LIKES`: Pay when people like your page. | |
| | `POST_ENGAGEMENT`: Pay when people engage with your post. | |
| | `VIDEO_VIEWS`: Pay when people watch your video ads for at least 10 seconds. | |
| | `THRUPLAY`: Pay for ads that are played to completion, or played for at least 15 seconds. | |
| `budget_schedule_specs` | `list<JSON or object-like arrays>` | Initial high demand periods to be created with the ad set. |
| | Provide list of `time_start`, `time_end`,`budget_value`, and `budget_value_type`. | |
| | For example, | |
| | `-F 'budget_schedule_specs=[{
"time_start":1699081200,
"time_end":1699167600,
"budget_value":100,
"budget_value_type":"ABSOLUTE"
}]'` | |
| | See [High Demand Period](https://developers.facebook.com/docs/marketing-api/reference/high-demand-period) for more details on each field. | |
| `budget_source` | `enum{NONE, RMN}` | `budget_source` |
| `budget_split_set_id` | `numeric string` or `integer` | `budget_split_set_id` |
| `campaign_attribution` | `enum{}` | `campaign_attribution` |
| `campaign_id` | `numeric string` or `integer` | The ad campaign you wish to add this ad set to. |
| `campaign_spec` | `Campaign spec` | Provide `name`, `objective` and `buying_type` for a campaign you want to create. Otherwise you need to provide `campaign_id` for an existing ad campaign. For example: |
| | `-F 'campaign_spec={
  "name": "Inline created campaign",
  "objective": "CONVERSIONS",
  "buying_type": "AUCTION"
}'` | |
| | Please refer to the [Outcome-Driven Ads Experiences mapping table](https://developers.facebook.com/docs/marketing-api/guides/odax) to find new objectives and their corresponding destination types, optimization goals and promoted objects. | |
| `contextual_bundling_spec` | `Object` | settings of Contextual Bundle to support ads serving in Facebook contextual surfaces |
| `creative_sequence` | `list<numeric string or integer>` | Order of the adgroup sequence to be shown to users |
| `daily_budget` | `int64` | The daily budget defined in your account currency, allowed only for ad sets with a duration (difference between `end_time` and `start_time`) longer than 24 hours. |
| | Either `daily_budget` or `lifetime_budget` must be greater than 0. | |
| `daily_imps` | `int64` | Daily impressions. Available only for campaigns with `buying_type=FIXED_CPM` |
| `daily_min_spend_target` | `int64` | Daily minimum spend target of the ad set defined in your account currency. To use this field, daily budget must be specified in the Campaign. This target is not a guarantee but our best effort. |
| `daily_spend_cap` | `int64` | Daily spend cap of the ad set defined in your account currency. To use this field, daily budget must be specified in the Campaign. Set the value to 922337203685478 to remove the spend cap. |
| `destination_type` | `enum{WEBSITE, APP, MESSENGER, APPLINKS_AUTOMATIC, WHATSAPP, INSTAGRAM_DIRECT, FACEBOOK, MESSAGING_MESSENGER_WHATSAPP, MESSAGING_INSTAGRAM_DIRECT_MESSENGER, MESSAGING_INSTAGRAM_DIRECT_MESSENGER_WHATSAPP, MESSAGING_INSTAGRAM_DIRECT_WHATSAPP, SHOP_AUTOMATIC, ON_AD, ON_POST, ON_EVENT, ON_VIDEO, ON_PAGE, INSTAGRAM_PROFILE, FACEBOOK_PAGE, INSTAGRAM_PROFILE_AND_FACEBOOK_PAGE, INSTAGRAM_LIVE, FACEBOOK_LIVE, IMAGINE}` | Destination of ads in this Ad Set. Options include: Website, App, Messenger, `INSTAGRAM_DIRECT`, `INSTAGRAM_PROFILE`. |
| `dsa_beneficiary` | `string` | `dsa_beneficiary` |
| `dsa_payor` | `string` | `dsa_payor` |
| `end_time` | `datetime` | End time, required when `lifetime_budget` is specified. e.g. `2015-03-12 23:59:59-07:00` or `2015-03-12 23:59:59 PDT`. When creating a set with a daily budget, specify `end_time=0` to set the set to be ongoing and have no end date. UTC UNIX timestamp |
| `execution_options` | `list<enum{validate_only, include_recommendations}>` | **Default value:** Set |
| | An execution setting | |
| | `validate_only`: when this option is specified, the API call will not perform the mutation but will run through the validation rules against values of each field. | |
| | `include_recommendations`: this option cannot be used by itself. When this option is used, recommendations for ad object's configuration will be included. A separate section recommendations will be included in the response, but only if recommendations for this specification exist. | |
| | If the call passes validation or review, response will be `{"success": true}`. If the call does not pass, an error will be returned with more details. These options can be used to improve any UI to display errors to the user much sooner, e.g. as soon as a new value is typed into any field corresponding to this ad object, rather than at the upload/save stage, or after review. | |
| `existing_customer_budget_percentage` | `int64` | `existing_customer_budget_percentage` |
| `frequency_control_specs` | `list<Object>` | An array of frequency control specs for this ad set. Writes to this field are only available in ad sets where `REACH` and `THRUPLAY` are the performance goal. |
| `is_dynamic_creative` | `boolean` | Indicates the ad set must only be used for dynamic creatives. Dynamic creative ads can be created in this ad set. Defaults to `false` |
| `is_sac_cfca_terms_certified` | `boolean` | `is_sac_cfca_terms_certified` |
| `lifetime_budget` | `int64` | Lifetime budget, defined in your account currency. If specified, you must also specify an `end_time`. |
| | Either `daily_budget` or `lifetime_budget` must be greater than 0. | |
| `lifetime_imps` | `int64` | Lifetime impressions. Available only for campaigns with `buying_type=FIXED_CPM` |
| `lifetime_min_spend_target` | `int64` | Lifetime minimum spend target of the ad set defined in your account currency. To use this field, lifetime budget must be specified in the Campaign. This target is not a guarantee but our best effort. |
| `lifetime_spend_cap` | `int64` | Lifetime spend cap of the ad set defined in your account currency. To use this field, lifetime budget must be specified in the Campaign. Set the value to 922337203685478 to remove the spend cap. |
| `max_budget_spend_percentage` | `int64` | `max_budget_spend_percentage` |
| `min_budget_spend_percentage` | `int64` | `min_budget_spend_percentage` |
| `multi_optimization_goal_weight` | `enum{UNDEFINED, BALANCED, PREFER_INSTALL, PREFER_EVENT}` | `multi_optimization_goal_weight` |
| `name` | `string` | Ad set name, max length of 400 characters. |
| | **Required** | **Supports Emoji** |
| `optimization_goal` | `enum{NONE, APP_INSTALLS, AD_RECALL_LIFT, ENGAGED_USERS, EVENT_RESPONSES, IMPRESSIONS, LEAD_GENERATION, QUALITY_LEAD, LINK_CLICKS, OFFSITE_CONVERSIONS, PAGE_LIKES, POST_ENGAGEMENT, QUALITY_CALL, REACH, LANDING_PAGE_VIEWS, VISIT_INSTAGRAM_PROFILE, VALUE, THRUPLAY, DERIVED_EVENTS, APP_INSTALLS_AND_OFFSITE_CONVERSIONS, CONVERSATIONS, IN_APP_VALUE, MESSAGING_PURCHASE_CONVERSION, SUBSCRIBERS, REMINDERS_SET, MEANINGFUL_CALL_ATTEMPT, PROFILE_VISIT, PROFILE_AND_PAGE_ENGAGEMENT, ADVERTISER_SILOED_VALUE, AUTOMATIC_OBJECTIVE, MESSAGING_APPOINTMENT_CONVERSION}` | What the ad set is optimizing for. |
| | `APP_INSTALLS`: Will optimize for people more likely to install your app. | |
| | `ENGAGED_USERS`: Will optimize for people more likely to take a particular action in your app. | |
| | `EVENT_RESPONSES`: Will optimize for people more likely to attend your event. | |
| | `IMPRESSIONS`: Will show the ads as many times as possible. | |
| | `LEAD_GENERATION`: Will optimize for people more likely to fill out a lead generation form. | |
| | `LINK_CLICKS`: Will optimize for people more likely to click in the link of the ad. | |
| | `OFFER_CLAIMS`: Will optimize for people more likely to claim the offer. | |
| | `OFFSITE_CONVERSIONS`: Will optimize for people more likely to make a conversion in the site | |
| | `PAGE_ENGAGEMENT`: Will optimize for people more likely to engage with your page. | |
| | `PAGE_LIKES`: Will optimize for people more likely to like your page. | |
| | `POST_ENGAGEMENT`: Will optimize for people more likely to engage with your post. | |
| | `REACH`: Optimize to reach the most unique users of each day or interval specified in `frequency_control_specs`. | |
| | `SOCIAL_IMPRESSIONS`: Increase the number of impressions with social context. For example, with the names of one or more of the user's friends attached to the ad who have already liked the page or installed the app. | |
| | `VALUE`: Will optimize for maximum total purchase value within the specified attribution window. | |
| | `THRUPLAY`: Will optimize delivery of your ads to people are more likely to play your ad to completion, or play it for at least 15 seconds. | |
| | `AD_RECALL_LIFT`: Optimize for people more likely to remember seeing your ads. | |
| | `VISIT_INSTAGRAM_PROFILE`: Optimize for visits to the advertiser's instagram profile. | |
| `optimization_sub_event` | `enum{NONE, VIDEO_SOUND_ON, TRIP_CONSIDERATION, TRAVEL_INTENT, TRAVEL_INTENT_NO_DESTINATION_INTENT, TRAVEL_INTENT_BUCKET_01, TRAVEL_INTENT_BUCKET_02, TRAVEL_INTENT_BUCKET_03, TRAVEL_INTENT_BUCKET_04, TRAVEL_INTENT_BUCKET_05, POST_INTERACTION}` | Optimization sub event for a specific optimization goal (ex: Sound-On event for Video-View-2s optimization goal) |
| `pacing_type` | `list<string>` | Defines the pacing type, standard by default or using ad scheduling |
| `promoted_object` | `Object` | The object this ad set is promoting across all its ads. Required with certain campaign objectives. |
| | **CONVERSIONS** | |
| | `pixel_id` (Conversion pixel ID) | |
| | `pixel_id` (Facebook pixel ID) and `custom_event_type` | |
| | `pixel_id` (Facebook pixel ID) and `pixel_rule` and `custom_event_type` | |
| | `event_id` (Facebook event ID) and `custom_event_type` | |
| | `application_id`, `object_store_url`, and `custom_event_type` for mobile app events | |
| | `offline_conversion_data_set_id` (Offline dataset ID) and `custom_event_type` for offline conversions | |
| | **PAGE\_LIKES** | |
| | `page_id` | |
| | **OFFER\_CLAIMS** | |
| | `page_id` | |
| | **LINK\_CLICKS** | |
| | `application_id` and `object_store_url` for mobile app or Canvas app engagement link clicks | |
| | **APP\_INSTALLS** | |
| | `application_id` and `object_store_url` | |
| | if the `optimization_goal` is `OFFSITE_CONVERSIONS` | |
| | `application_id`, `object_store_url`, and `custom_event_type` (Standard Events) | |
| | `application_id`, `object_store_url`, `custom_event_type = OTHER` and `custom_event_str` (Custom Events) | |
| | **PRODUCT\_CATALOG\_SALES** | |
| | `product_set_id` | |
| | `product_set_id` and `custom_event_type` | |
| | When `optimization_goal` is `LEAD_GENERATION`, `page_id` needs to be passed as `promoted_object`. | |
| | Please refer to the [Outcome-Driven Ads Experiences mapping table](https://developers.facebook.com/docs/marketing-api/guides/odax) to find new objectives and their corresponding destination types, optimization goals and promoted objects. | |
| `rf_prediction_id` | `numeric string` or `integer` | Reach and frequency prediction ID |
| `source_adset_id` | `numeric string` or `integer` | The source adset id that this ad is copied from (if applicable). |
| `start_time` | `datetime` | The start time of the set, e.g. `2015-03-12 23:59:59-07:00` or `2015-03-12 23:59:59 PDT`. UTC UNIX timestamp |
| `status` | `enum{ACTIVE, PAUSED, DELETED, ARCHIVED}` | Only `ACTIVE` and `PAUSED` are valid for creation. The other statuses can be used for update. If it is set to `PAUSED`, all its active ads will be paused and have an effective status `ADSET_PAUSED`. |
| `targeting` | `Targeting object` | An ad set's targeting structure. "countries" is required. See [targeting](https://developers.facebook.com/docs/marketing-api/targeting-specs). |
| `time_based_ad_rotation_id_blocks` | `list<list<int64>>` | Specify ad creative that displays at custom date ranges in a campaign as an array. A list of Adgroup IDs. The list of ads to display for each time range in a given schedule. For example display first ad in Adgroup for first date range, second ad for second date range, and so on. You can display more than one ad per date range by providing more than one ad ID per array. For example set `time_based_ad_rotation_id_blocks` to `[[1], [2, 3], [1, 4]]`. On the first date range show ad 1, on the second date range show ad 2 and ad 3 and on the last date range show ad 1 and ad 4. Use with `time_based_ad_rotation_intervals` to specify date ranges. |
| `time_based_ad_rotation_intervals` | `list<int64>` | Date range when specific ad creative displays during a campaign. Provide date ranges in an array of UNIX timestamps where each timestamp represents the start time for each date range. For example a 3-day campaign from May 9 12am to May 11 11:59PM PST can have three date ranges, the first date range starts from May 9 12:00AM to May 9 11:59PM, second date range starts from May 10 12:00AM to May 10 11:59PM and last starts from May 11 12:00AM to May 11 11:59PM. The first timestamp should match the campaign start time. The last timestamp should be at least 1 hour before the campaign end time. You must provide at least two date ranges. All date ranges must cover the whole campaign length, so any date range cannot exceed campaign length. Use with `time_based_ad_rotation_id_blocks` to specify ad creative for each date range. |
| `time_start` | `datetime` | Time start |
| `time_stop` | `datetime` | Time stop |
| `tune_for_category` | `enum{NONE, EMPLOYMENT, HOUSING, CREDIT, ISSUES_ELECTIONS_POLITICS, ONLINE_GAMBLING_AND_GAMING, FINANCIAL_PRODUCTS_SERVICES}` | `tune_for_category` |
| `value_rule_set_id` | `numeric string` or `integer` | Value Rule Set ID |
| `value_rules_applied` | `boolean` | `value_rules_applied` |

| Return Type | |
| :--- | :--- |
| This endpoint supports read-after-write and will read the node represented by `id` in the return type. | |
| `Struct {id: numeric string, success: bool, }` | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 100 | Invalid parameter |
| 200 | Permissions error |
| 2635 | You are calling a deprecated version of the Ads API. Please update to the latest version. |
| 368 | The action attempted has been deemed abusive or is otherwise disallowed |
| 2695 | The ad set creation reached its campaign group(ios14) limit. |
| 80004 | There have been too many calls to this ad-account. Wait a bit and try again. For more info, please refer to https://developers.facebook.com/docs/graph-api/overview/rate-limiting#ads-management. |
| 2641 | Your ad includes or excludes locations that are currently restricted |
| 190 | Invalid OAuth 2.0 Access Token |
| 900 | No such application exists. |

**Updating**

You can't perform this operation on this endpoint.

**Deleting**

This operation has been deprecated with Marketing API V8.

You can't perform this operation on this endpoint.

After the **Ad Account Adsets** section, there are **four** more complete sections in the Marketing API Reference:

1.  **Ad Account Adspixels**
2.  **Ad Videos**
3.  **Ad Account Async Batch Requests**
4.  **Ad Account Asyncadcreatives**
5.  **Ad Account Asyncadrequestsets**


# Ad Account Adspixels

**Graph API Version**

v24.0

**Reading**

`ad account` to `ads pixels` edge

| Example | |
| :--- | :--- |
| HTTP | `GET /v24.0/<PIXEL_ID>/?fields=code HTTP/1.1
Host: graph.facebook.com` |

If you want to learn how to use the Graph API, read our [Using Graph API](https://developers.facebook.com/docs/graph-api/overview) guide.

| Parameters | |
| :--- | :--- |
| This endpoint doesn't have any parameters. | |

| Fields | |
| :--- | :--- |
| Reading from this edge will return a JSON formatted result: | |
| ` {    "data": [],    "paging": {},    "summary": {} }` | |
| `data` | A list of `AdsPixel` nodes. |
| `paging` | For more details about pagination, see the [Graph API guide](#paginated-results). |
| `summary` | Aggregated information about the edge, such as counts. Specify the fields to fetch in the `summary` param (like `summary=total_count`). |
| `total_count` | `int32` | Total number of objects on this edge |
| | **Default** | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 200 | Permissions error |
| 190 | Invalid OAuth 2.0 Access Token |
| 80004 | There have been too many calls to this ad-account. Wait a bit and try again. For more info, please refer to https://developers.facebook.com/docs/graph-api/overview/rate-limiting#ads-management. |
| 100 | Invalid parameter |

**Creating**

You can make a `POST` request to `adspixels` edge from the following paths:
*   `/act_{ad_account_id}/adspixels`

When posting to this edge, an `AdsPixel` will be created.

| Example | |
| :--- | :--- |
| HTTP | `POST /v24.0/act_<AD_ACCOUNT_ID>/adspixels HTTP/1.1
Host: graph.facebook.com

name=My+WCA+Pixel` |

If you want to learn how to use the Graph API, read our [Using Graph API](https://developers.facebook.com/docs/graph-api/overview) guide.

| Parameters | |
| :--- | :--- |
| `name` | `string` | Name of the pixel |

| Return Type | |
| :--- | :--- |
| This endpoint supports read-after-write and will read the node represented by `id` in the return type. | |
| `Struct {id: numeric string, }` | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 6202 | More than one pixel exist for this account |
| 6200 | A pixel already exists for this account |
| 100 | Invalid parameter |
| 200 | Permissions error |

**Updating**

You can't perform this operation on this endpoint.

**Deleting**

You can't perform this operation on this endpoint.

# Ad Videos

**Graph API Version**

v24.0

**Reading**

You can't perform this operation on this endpoint.

**Creating**

You can make a `POST` request to `advideos` edge from the following paths:
*   `/act_{ad_account_id}/advideos`

When posting to this edge, a `Video` will be created.

| Parameters | |
| :--- | :--- |
| `audio_story_wave_animation_handle` | `string` | Everstore handle of wave animation used to burn audio story video |
| `composer_session_id` | `string` | `SELF_EXPLANATORY` |
| `description` | `UTF-8 string` | `SELF_EXPLANATORY` |
| | **Supports Emoji** | |
| `edit_description_spec` | `JSON object` | This represents the schema that the client should send to WWW for the edit description spec during video upload. |
| `end_offset` | `int64` | `end_offset` |
| `file_size` | `int64` | The size of the video file in bytes. Using during chunked upload. |
| `file_url` | `string` | `SELF_EXPLANATORY` |
| `fisheye_video_cropped` | `boolean` | Whether the single fisheye video is cropped or not |
| `front_z_rotation` | `float` | The front z rotation in degrees on the single fisheye video |
| `name` | `string` | The name of the video in the library. |
| `og_action_type_id` | `numeric string` or `integer` | `SELF_EXPLANATORY` |
| `og_icon_id` | `numeric string` or `integer` | `SELF_EXPLANATORY` |
| `og_object_id` | `OG object ID` or `URL string` | `SELF_EXPLANATORY` |
| `og_phrase` | `string` | `SELF_EXPLANATORY` |
| `og_suggestion_mechanism` | `string` | `SELF_EXPLANATORY` |
| `original_fov` | `int64` | Original field of view of the source camera |
| `original_projection_type` | `enum {equirectangular, cubemap, half_equirectangular}` | Original Projection type of the video being uploaded |
| `prompt_id` | `string` | `SELF_EXPLANATORY` |
| `prompt_tracking_string` | `string` | `SELF_EXPLANATORY` |
| `referenced_sticker_id` | `numeric string` or `integer` | `SELF_EXPLANATORY` |
| `source` | `string` | The video, encoded as form data. See the [Video Format doc](https://developers.facebook.com/docs/marketing-api/guides/video-ads/ad-videos#video-format) for more details on video formats. |
| `start_offset` | `int64` | The start position in byte of the chunk that is being sent, inclusive. Used during chunked upload. |
| `time_since_original_post` | `int64` | `SELF_EXPLANATORY` |
| `title` | `UTF-8 string` | The name of the video being uploaded. Must be less than 255 characters. Special characters may count as more than 1 character. |
| | **Supports Emoji** | |
| `transcode_setting_properties` | `string` | Properties used in computing transcode settings for the video |
| `unpublished_content_type` | `enum {SCHEDULED, SCHEDULED_RECURRING, DRAFT, PUBLISH_PENDING, ADS_POST, INLINE_CREATED, PUBLISHED, REVIEWABLE_BRANDED_CONTENT}` | `SELF_EXPLANATORY` |
| `upload_phase` | `enum {start, transfer, finish, cancel}` | The phase during chunked upload. Using during chunked upload. |
| `upload_session_id` | `numeric string` or `integer` | The session ID of this chunked upload. Using during chunked upload. |
| `video_file_chunk` | `string` | The chunk of the video, between `start_offset` and `end_offset`. Using during chunked upload. |

| Return Type | |
| :--- | :--- |
| `Struct {id: numeric string, upload_session_id: numeric string, video_id: numeric string, start_offset: numeric string, end_offset: numeric string, success: bool, skip_upload: bool, upload_domain: string, region_hint: string, xpv_asset_id: numeric string, is_xpv_single_prod: bool, transcode_bit_rate_bps: numeric string, transcode_dimension: numeric string, should_expand_to_transcode_dimension: bool, action_id: string, gop_size_seconds: numeric string, target_video_codec: string, target_hdr: string, maximum_frame_rate: numeric string, }` | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 200 | Permissions error |
| 100 | Invalid parameter |
| 222 | Video not visible |
| 389 | Unable to fetch video file from URL. |
| 190 | Invalid OAuth 2.0 Access Token |
| 352 | The video file you selected is in a format that we don't support. |
| 6001 | There was a problem uploading your video. Please try again. |
| 382 | The video file you tried to upload is too small. Please try again with a larger file. |
| 351 | There was a problem with your video file. Please try again with another file, |
| 6000 | There was a problem uploading your video file. Please try again with another file. |

**Updating**

You can't perform this operation on this endpoint.

**Deleting**

You can dissociate a Video from an AdAccount by making a `DELETE` request to `/act_{ad_account_id}/advideos`.

| Parameters | |
| :--- | :--- |
| `video_id` | `video ID` | Ad account library video ID |
| | **Required** | |

| Return Type | |
| :--- | :--- |
| `Struct {success: bool, }` | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 613 | Calls to this api have exceeded the rate limit. |
| 100 | Invalid parameter |

# Ad Account Async Batch Requests

**Reading**

You can't perform this operation on this endpoint.

**Creating**

You can make a `POST` request to `async_batch_requests` edge from the following paths:
*   `/act_{ad_account_id}/async_batch_requests`

When posting to this edge, a `Campaign` will be created.

| Parameters | |
| :--- | :--- |
| `adbatch` | `list<Object>` | JSON encoded batch reqeust |
| | **Required** | |
| `name` | `UTF-8 encoded string` | Name of the batch request for tracking purposes. |
| | **Required** | |

| Return Type | |
| :--- | :--- |
| This endpoint supports read-after-write and will read the node represented by `id` in the return type. | |
| `Struct {id: numeric string, }` | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 194 | Missing at least one required parameter |
| 100 | Invalid parameter |
| 2500 | Error parsing graph query |

**Updating**

You can't perform this operation on this endpoint.

**Deleting**

You can't perform this operation on this endpoint.

# Ad Account Asyncadcreatives

**Reading**

You can't perform this operation on this endpoint.

**Creating**

You can make a `POST` request to `asyncadcreatives` edge from the following paths:
*   `/act_{ad_account_id}/asyncadcreatives`

When posting to this edge, no Graph object will be created.

| Parameters | |
| :--- | :--- |
| `creative_spec` | `AdCreative` | Specs for ad creative |
| | **Required** | **Supports Emoji** |
| `name` | `UTF-8 encoded string` | Name of async job |
| | **Required** | |
| `notification_mode` | `enum{OFF, ON_COMPLETE}` | Specify 0 for no notifications and 1 for notification on completion. |
| `notification_uri` | `URL` | If notifications are enabled, specify the URL to send them. |

| Return Type | |
| :--- | :--- |
| This endpoint supports read-after-write and will read the node represented by `id` in the return type. | |
| `Struct {id: numeric string, }` | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 100 | Invalid parameter |

**Updating**

You can't perform this operation on this endpoint.

**Deleting**

You can't perform this operation on this endpoint.

# Ad Account Asyncadrequestsets

**Reading**

You can't perform this operation on this endpoint.

**Creating**

You can make a `POST` request to `asyncadrequestsets` edge from the following paths:
*   `/act_{ad_account_id}/asyncadrequestsets`

When posting to this edge, no Graph object will be created.

| Parameters | |
| :--- | :--- |
| `ad_specs` | `list<dictionary { non-empty string : <string> }>` | Specs for ads in the request set |
| | **Required** | |
| `name` | `UTF-8 encoded string` | Name of the request set |
| | **Required** | |
| `notification_mode` | `enum{OFF, ON_COMPLETE}` | Specify 0 for no notifications and 1 for notification on completion. |
| `notification_uri` | `URL` | If notifications are enabled, specify the URL to send them. |

| Return Type | |
| :--- | :--- |
| This endpoint supports read-after-write and will read the node represented by `id` in the return type. | |
| `Struct {id: numeric string, }` | |

| Error Codes | |
| :--- | :--- |
| **Error** | **Description** |
| 100 | Invalid parameter |

**Updating**

You can't perform this operation on this endpoint.

**Deleting**

You can't perform this operation on this endpoint.
